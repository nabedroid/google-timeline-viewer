var b4=Object.defineProperty;var v4=(t,e,n)=>e in t?b4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var x=(t,e,n)=>v4(t,typeof e!="symbol"?e+"":e,n);function T4(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var ml=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function x4(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var r=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return t[i]}})}),n}var jx={exports:{}},Wh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S4=Symbol.for("react.transitional.element"),w4=Symbol.for("react.fragment");function Hx(t,e,n){var i=null;if(n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),"key"in e){n={};for(var r in e)r!=="key"&&(n[r]=e[r])}else n=e;return e=n.ref,{$$typeof:S4,type:t,key:i,ref:e!==void 0?e:null,props:n}}Wh.Fragment=w4;Wh.jsx=Hx;Wh.jsxs=Hx;jx.exports=Wh;var $=jx.exports,Wx={exports:{}},Re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sb=Symbol.for("react.transitional.element"),A4=Symbol.for("react.portal"),E4=Symbol.for("react.fragment"),C4=Symbol.for("react.strict_mode"),R4=Symbol.for("react.profiler"),M4=Symbol.for("react.consumer"),O4=Symbol.for("react.context"),I4=Symbol.for("react.forward_ref"),P4=Symbol.for("react.suspense"),D4=Symbol.for("react.memo"),Yx=Symbol.for("react.lazy"),k4=Symbol.for("react.activity"),r1=Symbol.iterator;function N4(t){return t===null||typeof t!="object"?null:(t=r1&&t[r1]||t["@@iterator"],typeof t=="function"?t:null)}var Xx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qx=Object.assign,Kx={};function yl(t,e,n){this.props=t,this.context=e,this.refs=Kx,this.updater=n||Xx}yl.prototype.isReactComponent={};yl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};yl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Zx(){}Zx.prototype=yl.prototype;function ab(t,e,n){this.props=t,this.context=e,this.refs=Kx,this.updater=n||Xx}var ob=ab.prototype=new Zx;ob.constructor=ab;qx(ob,yl.prototype);ob.isPureReactComponent=!0;var s1=Array.isArray;function Jm(){}var Tt={H:null,A:null,T:null,S:null},Gx=Object.prototype.hasOwnProperty;function lb(t,e,n){var i=n.ref;return{$$typeof:sb,type:t,key:e,ref:i!==void 0?i:null,props:n}}function B4(t,e){return lb(t.type,e,t.props)}function cb(t){return typeof t=="object"&&t!==null&&t.$$typeof===sb}function L4(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var a1=/\/+/g;function Ag(t,e){return typeof t=="object"&&t!==null&&t.key!=null?L4(""+t.key):e.toString(36)}function U4(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(Jm,Jm):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function co(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"bigint":case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case sb:case A4:a=!0;break;case Yx:return a=t._init,co(a(t._payload),e,n,i,r)}}if(a)return r=r(t),a=i===""?"."+Ag(t,0):i,s1(r)?(n="",a!=null&&(n=a.replace(a1,"$&/")+"/"),co(r,e,n,"",function(c){return c})):r!=null&&(cb(r)&&(r=B4(r,n+(r.key==null||t&&t.key===r.key?"":(""+r.key).replace(a1,"$&/")+"/")+a)),e.push(r)),1;a=0;var o=i===""?".":i+":";if(s1(t))for(var l=0;l<t.length;l++)i=t[l],s=o+Ag(i,l),a+=co(i,e,n,s,r);else if(l=N4(t),typeof l=="function")for(t=l.call(t),l=0;!(i=t.next()).done;)i=i.value,s=o+Ag(i,l++),a+=co(i,e,n,s,r);else if(s==="object"){if(typeof t.then=="function")return co(U4(t),e,n,i,r);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return a}function tf(t,e,n){if(t==null)return t;var i=[],r=0;return co(t,i,"","",function(s){return e.call(n,s,r++)}),i}function F4(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var o1=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},z4={map:tf,forEach:function(t,e,n){tf(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return tf(t,function(){e++}),e},toArray:function(t){return tf(t,function(e){return e})||[]},only:function(t){if(!cb(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Re.Activity=k4;Re.Children=z4;Re.Component=yl;Re.Fragment=E4;Re.Profiler=R4;Re.PureComponent=ab;Re.StrictMode=C4;Re.Suspense=P4;Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Tt;Re.__COMPILER_RUNTIME={__proto__:null,c:function(t){return Tt.H.useMemoCache(t)}};Re.cache=function(t){return function(){return t.apply(null,arguments)}};Re.cacheSignal=function(){return null};Re.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var i=qx({},t.props),r=t.key;if(e!=null)for(s in e.key!==void 0&&(r=""+e.key),e)!Gx.call(e,s)||s==="key"||s==="__self"||s==="__source"||s==="ref"&&e.ref===void 0||(i[s]=e[s]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var a=Array(s),o=0;o<s;o++)a[o]=arguments[o+2];i.children=a}return lb(t.type,r,i)};Re.createContext=function(t){return t={$$typeof:O4,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:M4,_context:t},t};Re.createElement=function(t,e,n){var i,r={},s=null;if(e!=null)for(i in e.key!==void 0&&(s=""+e.key),e)Gx.call(e,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];r.children=o}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return lb(t,s,r)};Re.createRef=function(){return{current:null}};Re.forwardRef=function(t){return{$$typeof:I4,render:t}};Re.isValidElement=cb;Re.lazy=function(t){return{$$typeof:Yx,_payload:{_status:-1,_result:t},_init:F4}};Re.memo=function(t,e){return{$$typeof:D4,type:t,compare:e===void 0?null:e}};Re.startTransition=function(t){var e=Tt.T,n={};Tt.T=n;try{var i=t(),r=Tt.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(Jm,o1)}catch(s){o1(s)}finally{e!==null&&n.types!==null&&(e.types=n.types),Tt.T=e}};Re.unstable_useCacheRefresh=function(){return Tt.H.useCacheRefresh()};Re.use=function(t){return Tt.H.use(t)};Re.useActionState=function(t,e,n){return Tt.H.useActionState(t,e,n)};Re.useCallback=function(t,e){return Tt.H.useCallback(t,e)};Re.useContext=function(t){return Tt.H.useContext(t)};Re.useDebugValue=function(){};Re.useDeferredValue=function(t,e){return Tt.H.useDeferredValue(t,e)};Re.useEffect=function(t,e){return Tt.H.useEffect(t,e)};Re.useEffectEvent=function(t){return Tt.H.useEffectEvent(t)};Re.useId=function(){return Tt.H.useId()};Re.useImperativeHandle=function(t,e,n){return Tt.H.useImperativeHandle(t,e,n)};Re.useInsertionEffect=function(t,e){return Tt.H.useInsertionEffect(t,e)};Re.useLayoutEffect=function(t,e){return Tt.H.useLayoutEffect(t,e)};Re.useMemo=function(t,e){return Tt.H.useMemo(t,e)};Re.useOptimistic=function(t,e){return Tt.H.useOptimistic(t,e)};Re.useReducer=function(t,e,n){return Tt.H.useReducer(t,e,n)};Re.useRef=function(t){return Tt.H.useRef(t)};Re.useState=function(t){return Tt.H.useState(t)};Re.useSyncExternalStore=function(t,e,n){return Tt.H.useSyncExternalStore(t,e,n)};Re.useTransition=function(){return Tt.H.useTransition()};Re.version="19.2.3";Wx.exports=Re;var I=Wx.exports;const Ne=Wi(I),md=T4({__proto__:null,default:Ne},[I]);var Qx={exports:{}},Yh={},Jx={exports:{}},eS={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,z){var G=P.length;P.push(z);e:for(;0<G;){var Q=G-1>>>1,se=P[Q];if(0<r(se,z))P[Q]=z,P[G]=se,G=Q;else break e}}function n(P){return P.length===0?null:P[0]}function i(P){if(P.length===0)return null;var z=P[0],G=P.pop();if(G!==z){P[0]=G;e:for(var Q=0,se=P.length,ae=se>>>1;Q<ae;){var ce=2*(Q+1)-1,we=P[ce],Pe=ce+1,He=P[Pe];if(0>r(we,G))Pe<se&&0>r(He,we)?(P[Q]=He,P[Pe]=G,Q=Pe):(P[Q]=we,P[ce]=G,Q=ce);else if(Pe<se&&0>r(He,G))P[Q]=He,P[Pe]=G,Q=Pe;else break e}}return z}function r(P,z){var G=P.sortIndex-z.sortIndex;return G!==0?G:P.id-z.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,f=null,d=3,p=!1,m=!1,S=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function b(P){for(var z=n(c);z!==null;){if(z.callback===null)i(c);else if(z.startTime<=P)i(c),z.sortIndex=z.expirationTime,e(l,z);else break;z=n(c)}}function M(P){if(S=!1,b(P),!m)if(n(l)!==null)m=!0,C||(C=!0,A());else{var z=n(c);z!==null&&j(M,z.startTime-P)}}var C=!1,D=-1,F=5,L=-1;function U(){return v?!0:!(t.unstable_now()-L<F)}function N(){if(v=!1,C){var P=t.unstable_now();L=P;var z=!0;try{e:{m=!1,S&&(S=!1,_(D),D=-1),p=!0;var G=d;try{t:{for(b(P),f=n(l);f!==null&&!(f.expirationTime>P&&U());){var Q=f.callback;if(typeof Q=="function"){f.callback=null,d=f.priorityLevel;var se=Q(f.expirationTime<=P);if(P=t.unstable_now(),typeof se=="function"){f.callback=se,b(P),z=!0;break t}f===n(l)&&i(l),b(P)}else i(l);f=n(l)}if(f!==null)z=!0;else{var ae=n(c);ae!==null&&j(M,ae.startTime-P),z=!1}}break e}finally{f=null,d=G,p=!1}z=void 0}}finally{z?A():C=!1}}}var A;if(typeof T=="function")A=function(){T(N)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,k=Y.port2;Y.port1.onmessage=N,A=function(){k.postMessage(null)}}else A=function(){y(N,0)};function j(P,z){D=y(function(){P(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_next=function(P){switch(d){case 1:case 2:case 3:var z=3;break;default:z=d}var G=d;d=z;try{return P()}finally{d=G}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(P,z){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var G=d;d=P;try{return z()}finally{d=G}},t.unstable_scheduleCallback=function(P,z,G){var Q=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?Q+G:Q):G=Q,P){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=G+se,P={id:u++,callback:z,priorityLevel:P,startTime:G,expirationTime:se,sortIndex:-1},G>Q?(P.sortIndex=G,e(c,P),n(l)===null&&P===n(c)&&(S?(_(D),D=-1):S=!0,j(M,G-Q))):(P.sortIndex=se,e(l,P),m||p||(m=!0,C||(C=!0,A()))),P},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(P){var z=d;return function(){var G=d;d=z;try{return P.apply(this,arguments)}finally{d=G}}}})(eS);Jx.exports=eS;var V4=Jx.exports,tS={exports:{}},In={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $4=I;function nS(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Jr(){}var On={d:{f:Jr,r:function(){throw Error(nS(522))},D:Jr,C:Jr,L:Jr,m:Jr,X:Jr,S:Jr,M:Jr},p:0,findDOMNode:null},j4=Symbol.for("react.portal");function H4(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:j4,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}var uc=$4.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Xh(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}In.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=On;In.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(nS(299));return H4(t,e,null,n)};In.flushSync=function(t){var e=uc.T,n=On.p;try{if(uc.T=null,On.p=2,t)return t()}finally{uc.T=e,On.p=n,On.d.f()}};In.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,On.d.C(t,e))};In.prefetchDNS=function(t){typeof t=="string"&&On.d.D(t)};In.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,i=Xh(n,e.crossOrigin),r=typeof e.integrity=="string"?e.integrity:void 0,s=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?On.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):n==="script"&&On.d.X(t,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};In.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=Xh(e.as,e.crossOrigin);On.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&On.d.M(t)};In.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,i=Xh(n,e.crossOrigin);On.d.L(t,n,{crossOrigin:i,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};In.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=Xh(e.as,e.crossOrigin);On.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else On.d.m(t)};In.requestFormReset=function(t){On.d.r(t)};In.unstable_batchedUpdates=function(t,e){return t(e)};In.useFormState=function(t,e,n){return uc.H.useFormState(t,e,n)};In.useFormStatus=function(){return uc.H.useHostTransitionStatus()};In.version="19.2.3";function iS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(iS)}catch(t){console.error(t)}}iS(),tS.exports=In;var ub=tS.exports;const nf=Wi(ub);/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var on=V4,rS=I,W4=ub;function ne(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function sS(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function fu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function aS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function oS(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function l1(t){if(fu(t)!==t)throw Error(ne(188))}function Y4(t){var e=t.alternate;if(!e){if(e=fu(t),e===null)throw Error(ne(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return l1(r),t;if(s===i)return l1(r),e;s=s.sibling}throw Error(ne(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,o=r.child;o;){if(o===n){a=!0,n=r,i=s;break}if(o===i){a=!0,i=r,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,i=r;break}if(o===i){a=!0,i=s,n=r;break}o=o.sibling}if(!a)throw Error(ne(189))}}if(n.alternate!==i)throw Error(ne(190))}if(n.tag!==3)throw Error(ne(188));return n.stateNode.current===n?t:e}function lS(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=lS(t),e!==null)return e;t=t.sibling}return null}var xt=Object.assign,X4=Symbol.for("react.element"),rf=Symbol.for("react.transitional.element"),Gl=Symbol.for("react.portal"),go=Symbol.for("react.fragment"),cS=Symbol.for("react.strict_mode"),ey=Symbol.for("react.profiler"),uS=Symbol.for("react.consumer"),kr=Symbol.for("react.context"),fb=Symbol.for("react.forward_ref"),ty=Symbol.for("react.suspense"),ny=Symbol.for("react.suspense_list"),db=Symbol.for("react.memo"),is=Symbol.for("react.lazy"),iy=Symbol.for("react.activity"),q4=Symbol.for("react.memo_cache_sentinel"),c1=Symbol.iterator;function Bl(t){return t===null||typeof t!="object"?null:(t=c1&&t[c1]||t["@@iterator"],typeof t=="function"?t:null)}var K4=Symbol.for("react.client.reference");function ry(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===K4?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case go:return"Fragment";case ey:return"Profiler";case cS:return"StrictMode";case ty:return"Suspense";case ny:return"SuspenseList";case iy:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Gl:return"Portal";case kr:return t.displayName||"Context";case uS:return(t._context.displayName||"Context")+".Consumer";case fb:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case db:return e=t.displayName||null,e!==null?e:ry(t.type)||"Memo";case is:e=t._payload,t=t._init;try{return ry(t(e))}catch{}}return null}var Ql=Array.isArray,xe=rS.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Qe=W4.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fa={pending:!1,data:null,method:null,action:null},sy=[],mo=-1;function hr(t){return{current:t}}function fn(t){0>mo||(t.current=sy[mo],sy[mo]=null,mo--)}function mt(t,e){mo++,sy[mo]=t.current,t.current=e}var cr=hr(null),Lc=hr(null),vs=hr(null),yd=hr(null);function _d(t,e){switch(mt(vs,e),mt(Lc,t),mt(cr,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?g2(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=g2(e),t=OA(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}fn(cr),mt(cr,t)}function Xo(){fn(cr),fn(Lc),fn(vs)}function ay(t){t.memoizedState!==null&&mt(yd,t);var e=cr.current,n=OA(e,t.type);e!==n&&(mt(Lc,t),mt(cr,n))}function bd(t){Lc.current===t&&(fn(cr),fn(Lc)),yd.current===t&&(fn(yd),qc._currentValue=fa)}var Eg,u1;function ea(t){if(Eg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Eg=e&&e[1]||"",u1=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Eg+t+u1}var Cg=!1;function Rg(t,e){if(!t||Cg)return"";Cg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var f=function(){throw Error()};if(Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(p){var d=p}Reflect.construct(t,[],f)}else{try{f.call()}catch(p){d=p}t.call(f.prototype)}}else{try{throw Error()}catch(p){d=p}(f=t())&&typeof f.catch=="function"&&f.catch(function(){})}}catch(p){if(p&&d&&typeof p.stack=="string")return[p.stack,d.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),a=s[0],o=s[1];if(a&&o){var l=a.split(`
`),c=o.split(`
`);for(r=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;if(i===l.length||r===c.length)for(i=l.length-1,r=c.length-1;1<=i&&0<=r&&l[i]!==c[r];)r--;for(;1<=i&&0<=r;i--,r--)if(l[i]!==c[r]){if(i!==1||r!==1)do if(i--,r--,0>r||l[i]!==c[r]){var u=`
`+l[i].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=i&&0<=r);break}}}finally{Cg=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?ea(n):""}function Z4(t,e){switch(t.tag){case 26:case 27:case 5:return ea(t.type);case 16:return ea("Lazy");case 13:return t.child!==e&&e!==null?ea("Suspense Fallback"):ea("Suspense");case 19:return ea("SuspenseList");case 0:case 15:return Rg(t.type,!1);case 11:return Rg(t.type.render,!1);case 1:return Rg(t.type,!0);case 31:return ea("Activity");default:return""}}function f1(t){try{var e="",n=null;do e+=Z4(t,n),n=t,t=t.return;while(t);return e}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var oy=Object.prototype.hasOwnProperty,hb=on.unstable_scheduleCallback,Mg=on.unstable_cancelCallback,G4=on.unstable_shouldYield,Q4=on.unstable_requestPaint,ei=on.unstable_now,J4=on.unstable_getCurrentPriorityLevel,fS=on.unstable_ImmediatePriority,dS=on.unstable_UserBlockingPriority,vd=on.unstable_NormalPriority,eO=on.unstable_LowPriority,hS=on.unstable_IdlePriority,tO=on.log,nO=on.unstable_setDisableYieldValue,du=null,ti=null;function fs(t){if(typeof tO=="function"&&nO(t),ti&&typeof ti.setStrictMode=="function")try{ti.setStrictMode(du,t)}catch{}}var ni=Math.clz32?Math.clz32:sO,iO=Math.log,rO=Math.LN2;function sO(t){return t>>>=0,t===0?32:31-(iO(t)/rO|0)|0}var sf=256,af=262144,of=4194304;function ta(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function qh(t,e,n){var i=t.pendingLanes;if(i===0)return 0;var r=0,s=t.suspendedLanes,a=t.pingedLanes;t=t.warmLanes;var o=i&134217727;return o!==0?(i=o&~s,i!==0?r=ta(i):(a&=o,a!==0?r=ta(a):n||(n=o&~t,n!==0&&(r=ta(n))))):(o=i&~s,o!==0?r=ta(o):a!==0?r=ta(a):n||(n=i&~t,n!==0&&(r=ta(n)))),r===0?0:e!==0&&e!==r&&!(e&s)&&(s=r&-r,n=e&-e,s>=n||s===32&&(n&4194048)!==0)?e:r}function hu(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function aO(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pS(){var t=of;return of<<=1,!(of&62914560)&&(of=4194304),t}function Og(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function pu(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function oO(t,e,n,i,r,s){var a=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var o=t.entanglements,l=t.expirationTimes,c=t.hiddenUpdates;for(n=a&~n;0<n;){var u=31-ni(n),f=1<<u;o[u]=0,l[u]=-1;var d=c[u];if(d!==null)for(c[u]=null,u=0;u<d.length;u++){var p=d[u];p!==null&&(p.lane&=-536870913)}n&=~f}i!==0&&gS(t,i,0),s!==0&&r===0&&t.tag!==0&&(t.suspendedLanes|=s&~(a&~e))}function gS(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var i=31-ni(e);t.entangledLanes|=e,t.entanglements[i]=t.entanglements[i]|1073741824|n&261930}function mS(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-ni(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}function yS(t,e){var n=e&-e;return n=n&42?1:pb(n),n&(t.suspendedLanes|e)?0:n}function pb(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function gb(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function _S(){var t=Qe.p;return t!==0?t:(t=window.event,t===void 0?32:VA(t.type))}function d1(t,e){var n=Qe.p;try{return Qe.p=t,e()}finally{Qe.p=n}}var zs=Math.random().toString(36).slice(2),yn="__reactFiber$"+zs,Vn="__reactProps$"+zs,_l="__reactContainer$"+zs,ly="__reactEvents$"+zs,lO="__reactListeners$"+zs,cO="__reactHandles$"+zs,h1="__reactResources$"+zs,gu="__reactMarker$"+zs;function mb(t){delete t[yn],delete t[Vn],delete t[ly],delete t[lO],delete t[cO]}function yo(t){var e=t[yn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[_l]||n[yn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=v2(t);t!==null;){if(n=t[yn])return n;t=v2(t)}return e}t=n,n=t.parentNode}return null}function bl(t){if(t=t[yn]||t[_l]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function Jl(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(ne(33))}function Po(t){var e=t[h1];return e||(e=t[h1]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function un(t){t[gu]=!0}var bS=new Set,vS={};function Ba(t,e){qo(t,e),qo(t+"Capture",e)}function qo(t,e){for(vS[t]=e,t=0;t<e.length;t++)bS.add(e[t])}var uO=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),p1={},g1={};function fO(t){return oy.call(g1,t)?!0:oy.call(p1,t)?!1:uO.test(t)?g1[t]=!0:(p1[t]=!0,!1)}function jf(t,e,n){if(fO(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var i=e.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function lf(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function br(t,e,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+i)}}function gi(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function TS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function dO(t,e,n){var i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var r=i.get,s=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function cy(t){if(!t._valueTracker){var e=TS(t)?"checked":"value";t._valueTracker=dO(t,e,""+t[e])}}function xS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=TS(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Td(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var hO=/[\n"\\]/g;function bi(t){return t.replace(hO,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function uy(t,e,n,i,r,s,a,o){t.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.type=a:t.removeAttribute("type"),e!=null?a==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+gi(e)):t.value!==""+gi(e)&&(t.value=""+gi(e)):a!=="submit"&&a!=="reset"||t.removeAttribute("value"),e!=null?fy(t,a,gi(e)):n!=null?fy(t,a,gi(n)):i!=null&&t.removeAttribute("value"),r==null&&s!=null&&(t.defaultChecked=!!s),r!=null&&(t.checked=r&&typeof r!="function"&&typeof r!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.name=""+gi(o):t.removeAttribute("name")}function SS(t,e,n,i,r,s,a,o){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(t.type=s),e!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||e!=null)){cy(t);return}n=n!=null?""+gi(n):"",e=e!=null?""+gi(e):n,o||e===t.value||(t.value=e),t.defaultValue=e}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,t.checked=o?t.checked:!!i,t.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.name=a),cy(t)}function fy(t,e,n){e==="number"&&Td(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function Do(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+gi(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function wS(t,e,n){if(e!=null&&(e=""+gi(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+gi(n):""}function AS(t,e,n,i){if(e==null){if(i!=null){if(n!=null)throw Error(ne(92));if(Ql(i)){if(1<i.length)throw Error(ne(93));i=i[0]}n=i}n==null&&(n=""),e=n}n=gi(e),t.defaultValue=n,i=t.textContent,i===n&&i!==""&&i!==null&&(t.value=i),cy(t)}function Ko(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var pO=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function m1(t,e,n){var i=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":i?t.setProperty(e,n):typeof n!="number"||n===0||pO.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function ES(t,e,n){if(e!=null&&typeof e!="object")throw Error(ne(62));if(t=t.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||e!=null&&e.hasOwnProperty(i)||(i.indexOf("--")===0?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="");for(var r in e)i=e[r],e.hasOwnProperty(r)&&n[r]!==i&&m1(t,r,i)}else for(var s in e)e.hasOwnProperty(s)&&m1(t,s,e[s])}function yb(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gO=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mO=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Hf(t){return mO.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Nr(){}var dy=null;function _b(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _o=null,ko=null;function y1(t){var e=bl(t);if(e&&(t=e.stateNode)){var n=t[Vn]||null;e:switch(t=e.stateNode,e.type){case"input":if(uy(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+bi(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=i[Vn]||null;if(!r)throw Error(ne(90));uy(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(e=0;e<n.length;e++)i=n[e],i.form===t.form&&xS(i)}break e;case"textarea":wS(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&Do(t,!!n.multiple,e,!1)}}}var Ig=!1;function CS(t,e,n){if(Ig)return t(e,n);Ig=!0;try{var i=t(e);return i}finally{if(Ig=!1,(_o!==null||ko!==null)&&(ap(),_o&&(e=_o,t=ko,ko=_o=null,y1(e),t)))for(e=0;e<t.length;e++)y1(t[e])}}function Uc(t,e){var n=t.stateNode;if(n===null)return null;var i=n[Vn]||null;if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ne(231,e,typeof n));return n}var zr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hy=!1;if(zr)try{var Ll={};Object.defineProperty(Ll,"passive",{get:function(){hy=!0}}),window.addEventListener("test",Ll,Ll),window.removeEventListener("test",Ll,Ll)}catch{hy=!1}var ds=null,bb=null,Wf=null;function RS(){if(Wf)return Wf;var t,e=bb,n=e.length,i,r="value"in ds?ds.value:ds.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[s-i];i++);return Wf=r.slice(t,1<i?1-i:void 0)}function Yf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function cf(){return!0}function _1(){return!1}function jn(t){function e(n,i,r,s,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?cf:_1,this.isPropagationStopped=_1,this}return xt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=cf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=cf)},persist:function(){},isPersistent:cf}),e}var La={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kh=jn(La),mu=xt({},La,{view:0,detail:0}),yO=jn(mu),Pg,Dg,Ul,Zh=xt({},mu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vb,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ul&&(Ul&&t.type==="mousemove"?(Pg=t.screenX-Ul.screenX,Dg=t.screenY-Ul.screenY):Dg=Pg=0,Ul=t),Pg)},movementY:function(t){return"movementY"in t?t.movementY:Dg}}),b1=jn(Zh),_O=xt({},Zh,{dataTransfer:0}),bO=jn(_O),vO=xt({},mu,{relatedTarget:0}),kg=jn(vO),TO=xt({},La,{animationName:0,elapsedTime:0,pseudoElement:0}),xO=jn(TO),SO=xt({},La,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),wO=jn(SO),AO=xt({},La,{data:0}),v1=jn(AO),EO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},CO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function MO(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=RO[t])?!!e[t]:!1}function vb(){return MO}var OO=xt({},mu,{key:function(t){if(t.key){var e=EO[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Yf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?CO[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vb,charCode:function(t){return t.type==="keypress"?Yf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Yf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),IO=jn(OO),PO=xt({},Zh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T1=jn(PO),DO=xt({},mu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vb}),kO=jn(DO),NO=xt({},La,{propertyName:0,elapsedTime:0,pseudoElement:0}),BO=jn(NO),LO=xt({},Zh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),UO=jn(LO),FO=xt({},La,{newState:0,oldState:0}),zO=jn(FO),VO=[9,13,27,32],Tb=zr&&"CompositionEvent"in window,fc=null;zr&&"documentMode"in document&&(fc=document.documentMode);var $O=zr&&"TextEvent"in window&&!fc,MS=zr&&(!Tb||fc&&8<fc&&11>=fc),x1=" ",S1=!1;function OS(t,e){switch(t){case"keyup":return VO.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function IS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var bo=!1;function jO(t,e){switch(t){case"compositionend":return IS(e);case"keypress":return e.which!==32?null:(S1=!0,x1);case"textInput":return t=e.data,t===x1&&S1?null:t;default:return null}}function HO(t,e){if(bo)return t==="compositionend"||!Tb&&OS(t,e)?(t=RS(),Wf=bb=ds=null,bo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return MS&&e.locale!=="ko"?null:e.data;default:return null}}var WO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function w1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!WO[t.type]:e==="textarea"}function PS(t,e,n,i){_o?ko?ko.push(i):ko=[i]:_o=i,e=Fd(e,"onChange"),0<e.length&&(n=new Kh("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var dc=null,Fc=null;function YO(t){CA(t,0)}function Gh(t){var e=Jl(t);if(xS(e))return t}function A1(t,e){if(t==="change")return e}var DS=!1;if(zr){var Ng;if(zr){var Bg="oninput"in document;if(!Bg){var E1=document.createElement("div");E1.setAttribute("oninput","return;"),Bg=typeof E1.oninput=="function"}Ng=Bg}else Ng=!1;DS=Ng&&(!document.documentMode||9<document.documentMode)}function C1(){dc&&(dc.detachEvent("onpropertychange",kS),Fc=dc=null)}function kS(t){if(t.propertyName==="value"&&Gh(Fc)){var e=[];PS(e,Fc,t,_b(t)),CS(YO,e)}}function XO(t,e,n){t==="focusin"?(C1(),dc=e,Fc=n,dc.attachEvent("onpropertychange",kS)):t==="focusout"&&C1()}function qO(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Gh(Fc)}function KO(t,e){if(t==="click")return Gh(e)}function ZO(t,e){if(t==="input"||t==="change")return Gh(e)}function GO(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ai=typeof Object.is=="function"?Object.is:GO;function zc(t,e){if(ai(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!oy.call(e,r)||!ai(t[r],e[r]))return!1}return!0}function R1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function M1(t,e){var n=R1(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=R1(n)}}function NS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?NS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function BS(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Td(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Td(t.document)}return e}function xb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var QO=zr&&"documentMode"in document&&11>=document.documentMode,vo=null,py=null,hc=null,gy=!1;function O1(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;gy||vo==null||vo!==Td(i)||(i=vo,"selectionStart"in i&&xb(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),hc&&zc(hc,i)||(hc=i,i=Fd(py,"onSelect"),0<i.length&&(e=new Kh("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=vo)))}function Xs(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var To={animationend:Xs("Animation","AnimationEnd"),animationiteration:Xs("Animation","AnimationIteration"),animationstart:Xs("Animation","AnimationStart"),transitionrun:Xs("Transition","TransitionRun"),transitionstart:Xs("Transition","TransitionStart"),transitioncancel:Xs("Transition","TransitionCancel"),transitionend:Xs("Transition","TransitionEnd")},Lg={},LS={};zr&&(LS=document.createElement("div").style,"AnimationEvent"in window||(delete To.animationend.animation,delete To.animationiteration.animation,delete To.animationstart.animation),"TransitionEvent"in window||delete To.transitionend.transition);function Ua(t){if(Lg[t])return Lg[t];if(!To[t])return t;var e=To[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in LS)return Lg[t]=e[n];return t}var US=Ua("animationend"),FS=Ua("animationiteration"),zS=Ua("animationstart"),JO=Ua("transitionrun"),eI=Ua("transitionstart"),tI=Ua("transitioncancel"),VS=Ua("transitionend"),$S=new Map,my="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");my.push("scrollEnd");function Yi(t,e){$S.set(t,e),Ba(e,[t])}var xd=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},hi=[],xo=0,Sb=0;function Qh(){for(var t=xo,e=Sb=xo=0;e<t;){var n=hi[e];hi[e++]=null;var i=hi[e];hi[e++]=null;var r=hi[e];hi[e++]=null;var s=hi[e];if(hi[e++]=null,i!==null&&r!==null){var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}s!==0&&jS(n,r,s)}}function Jh(t,e,n,i){hi[xo++]=t,hi[xo++]=e,hi[xo++]=n,hi[xo++]=i,Sb|=i,t.lanes|=i,t=t.alternate,t!==null&&(t.lanes|=i)}function wb(t,e,n,i){return Jh(t,e,n,i),Sd(t)}function Fa(t,e){return Jh(t,null,null,e),Sd(t)}function jS(t,e,n){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n);for(var r=!1,s=t.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(t=s.stateNode,t===null||t._visibility&1||(r=!0)),t=s,s=s.return;return t.tag===3?(s=t.stateNode,r&&e!==null&&(r=31-ni(n),t=s.hiddenUpdates,i=t[r],i===null?t[r]=[e]:i.push(e),e.lane=n|536870912),s):null}function Sd(t){if(50<xc)throw xc=0,Ly=null,Error(ne(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var So={};function nI(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zn(t,e,n,i){return new nI(t,e,n,i)}function Ab(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Lr(t,e){var n=t.alternate;return n===null?(n=Zn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function HS(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function Xf(t,e,n,i,r,s){var a=0;if(i=t,typeof t=="function")Ab(t)&&(a=1);else if(typeof t=="string")a=oP(t,n,cr.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case iy:return t=Zn(31,n,e,r),t.elementType=iy,t.lanes=s,t;case go:return da(n.children,r,s,e);case cS:a=8,r|=24;break;case ey:return t=Zn(12,n,e,r|2),t.elementType=ey,t.lanes=s,t;case ty:return t=Zn(13,n,e,r),t.elementType=ty,t.lanes=s,t;case ny:return t=Zn(19,n,e,r),t.elementType=ny,t.lanes=s,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case kr:a=10;break e;case uS:a=9;break e;case fb:a=11;break e;case db:a=14;break e;case is:a=16,i=null;break e}a=29,n=Error(ne(130,t===null?"null":typeof t,"")),i=null}return e=Zn(a,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function da(t,e,n,i){return t=Zn(7,t,i,e),t.lanes=n,t}function Ug(t,e,n){return t=Zn(6,t,null,e),t.lanes=n,t}function WS(t){var e=Zn(18,null,null,0);return e.stateNode=t,e}function Fg(t,e,n){return e=Zn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var I1=new WeakMap;function vi(t,e){if(typeof t=="object"&&t!==null){var n=I1.get(t);return n!==void 0?n:(e={value:t,source:e,stack:f1(e)},I1.set(t,e),e)}return{value:t,source:e,stack:f1(e)}}var wo=[],Ao=0,wd=null,Vc=0,mi=[],yi=0,Is=null,rr=1,sr="";function Cr(t,e){wo[Ao++]=Vc,wo[Ao++]=wd,wd=t,Vc=e}function YS(t,e,n){mi[yi++]=rr,mi[yi++]=sr,mi[yi++]=Is,Is=t;var i=rr;t=sr;var r=32-ni(i)-1;i&=~(1<<r),n+=1;var s=32-ni(e)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,rr=1<<32-ni(e)+r|n<<r|i,sr=s+t}else rr=1<<s|n<<r|i,sr=t}function Eb(t){t.return!==null&&(Cr(t,1),YS(t,1,0))}function Cb(t){for(;t===wd;)wd=wo[--Ao],wo[Ao]=null,Vc=wo[--Ao],wo[Ao]=null;for(;t===Is;)Is=mi[--yi],mi[yi]=null,sr=mi[--yi],mi[yi]=null,rr=mi[--yi],mi[yi]=null}function XS(t,e){mi[yi++]=rr,mi[yi++]=sr,mi[yi++]=Is,rr=e.id,sr=e.overflow,Is=t}var _n=null,vt=null,$e=!1,Ts=null,Ti=!1,yy=Error(ne(519));function Ps(t){var e=Error(ne(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw $c(vi(e,t)),yy}function P1(t){var e=t.stateNode,n=t.type,i=t.memoizedProps;switch(e[yn]=t,e[Vn]=i,n){case"dialog":Le("cancel",e),Le("close",e);break;case"iframe":case"object":case"embed":Le("load",e);break;case"video":case"audio":for(n=0;n<Yc.length;n++)Le(Yc[n],e);break;case"source":Le("error",e);break;case"img":case"image":case"link":Le("error",e),Le("load",e);break;case"details":Le("toggle",e);break;case"input":Le("invalid",e),SS(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":Le("invalid",e);break;case"textarea":Le("invalid",e),AS(e,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||i.suppressHydrationWarning===!0||MA(e.textContent,n)?(i.popover!=null&&(Le("beforetoggle",e),Le("toggle",e)),i.onScroll!=null&&Le("scroll",e),i.onScrollEnd!=null&&Le("scrollend",e),i.onClick!=null&&(e.onclick=Nr),e=!0):e=!1,e||Ps(t,!0)}function D1(t){for(_n=t.return;_n;)switch(_n.tag){case 5:case 31:case 13:Ti=!1;return;case 27:case 3:Ti=!0;return;default:_n=_n.return}}function qa(t){if(t!==_n)return!1;if(!$e)return D1(t),$e=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||$y(t.type,t.memoizedProps)),n=!n),n&&vt&&Ps(t),D1(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ne(317));vt=b2(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ne(317));vt=b2(t)}else e===27?(e=vt,Vs(t.type)?(t=Yy,Yy=null,vt=t):vt=e):vt=_n?Ei(t.stateNode.nextSibling):null;return!0}function Sa(){vt=_n=null,$e=!1}function zg(){var t=Ts;return t!==null&&(Fn===null?Fn=t:Fn.push.apply(Fn,t),Ts=null),t}function $c(t){Ts===null?Ts=[t]:Ts.push(t)}var _y=hr(null),za=null,Br=null;function os(t,e,n){mt(_y,e._currentValue),e._currentValue=n}function Ur(t){t._currentValue=_y.current,fn(_y)}function by(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function vy(t,e,n,i){var r=t.child;for(r!==null&&(r.return=t);r!==null;){var s=r.dependencies;if(s!==null){var a=r.child;s=s.firstContext;e:for(;s!==null;){var o=s;s=r;for(var l=0;l<e.length;l++)if(o.context===e[l]){s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),by(s.return,n,t),i||(a=null);break e}s=o.next}}else if(r.tag===18){if(a=r.return,a===null)throw Error(ne(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),by(a,n,t),a=null}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===t){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}}function vl(t,e,n,i){t=null;for(var r=e,s=!1;r!==null;){if(!s){if(r.flags&524288)s=!0;else if(r.flags&262144)break}if(r.tag===10){var a=r.alternate;if(a===null)throw Error(ne(387));if(a=a.memoizedProps,a!==null){var o=r.type;ai(r.pendingProps.value,a.value)||(t!==null?t.push(o):t=[o])}}else if(r===yd.current){if(a=r.alternate,a===null)throw Error(ne(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(t!==null?t.push(qc):t=[qc])}r=r.return}t!==null&&vy(e,t,n,i),e.flags|=262144}function Ad(t){for(t=t.firstContext;t!==null;){if(!ai(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function wa(t){za=t,Br=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function bn(t){return qS(za,t)}function uf(t,e){return za===null&&wa(t),qS(t,e)}function qS(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},Br===null){if(t===null)throw Error(ne(308));Br=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else Br=Br.next=e;return n}var iI=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,i){t.push(i)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},rI=on.unstable_scheduleCallback,sI=on.unstable_NormalPriority,Gt={$$typeof:kr,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Rb(){return{controller:new iI,data:new Map,refCount:0}}function yu(t){t.refCount--,t.refCount===0&&rI(sI,function(){t.controller.abort()})}var pc=null,Ty=0,Zo=0,No=null;function aI(t,e){if(pc===null){var n=pc=[];Ty=0,Zo=Jb(),No={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Ty++,e.then(k1,k1),e}function k1(){if(--Ty===0&&pc!==null){No!==null&&(No.status="fulfilled");var t=pc;pc=null,Zo=0,No=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function oI(t,e){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return t.then(function(){i.status="fulfilled",i.value=e;for(var r=0;r<n.length;r++)(0,n[r])(e)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var N1=xe.S;xe.S=function(t,e){lA=ei(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&aI(t,e),N1!==null&&N1(t,e)};var ha=hr(null);function Mb(){var t=ha.current;return t!==null?t:ht.pooledCache}function qf(t,e){e===null?mt(ha,ha.current):mt(ha,e.pool)}function KS(){var t=Mb();return t===null?null:{parent:Gt._currentValue,pool:t}}var Tl=Error(ne(460)),Ob=Error(ne(474)),ep=Error(ne(542)),Ed={then:function(){}};function B1(t){return t=t.status,t==="fulfilled"||t==="rejected"}function ZS(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(Nr,Nr),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,U1(t),t;default:if(typeof e.status=="string")e.then(Nr,Nr);else{if(t=ht,t!==null&&100<t.shellSuspendCounter)throw Error(ne(482));t=e,t.status="pending",t.then(function(i){if(e.status==="pending"){var r=e;r.status="fulfilled",r.value=i}},function(i){if(e.status==="pending"){var r=e;r.status="rejected",r.reason=i}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,U1(t),t}throw pa=e,Tl}}function na(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(pa=n,Tl):n}}var pa=null;function L1(){if(pa===null)throw Error(ne(459));var t=pa;return pa=null,t}function U1(t){if(t===Tl||t===ep)throw Error(ne(483))}var Bo=null,jc=0;function ff(t){var e=jc;return jc+=1,Bo===null&&(Bo=[]),ZS(Bo,t,e)}function Fl(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function df(t,e){throw e.$$typeof===X4?Error(ne(525)):(t=Object.prototype.toString.call(e),Error(ne(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function GS(t){function e(y,_){if(t){var T=y.deletions;T===null?(y.deletions=[_],y.flags|=16):T.push(_)}}function n(y,_){if(!t)return null;for(;_!==null;)e(y,_),_=_.sibling;return null}function i(y){for(var _=new Map;y!==null;)y.key!==null?_.set(y.key,y):_.set(y.index,y),y=y.sibling;return _}function r(y,_){return y=Lr(y,_),y.index=0,y.sibling=null,y}function s(y,_,T){return y.index=T,t?(T=y.alternate,T!==null?(T=T.index,T<_?(y.flags|=67108866,_):T):(y.flags|=67108866,_)):(y.flags|=1048576,_)}function a(y){return t&&y.alternate===null&&(y.flags|=67108866),y}function o(y,_,T,b){return _===null||_.tag!==6?(_=Ug(T,y.mode,b),_.return=y,_):(_=r(_,T),_.return=y,_)}function l(y,_,T,b){var M=T.type;return M===go?u(y,_,T.props.children,b,T.key):_!==null&&(_.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===is&&na(M)===_.type)?(_=r(_,T.props),Fl(_,T),_.return=y,_):(_=Xf(T.type,T.key,T.props,null,y.mode,b),Fl(_,T),_.return=y,_)}function c(y,_,T,b){return _===null||_.tag!==4||_.stateNode.containerInfo!==T.containerInfo||_.stateNode.implementation!==T.implementation?(_=Fg(T,y.mode,b),_.return=y,_):(_=r(_,T.children||[]),_.return=y,_)}function u(y,_,T,b,M){return _===null||_.tag!==7?(_=da(T,y.mode,b,M),_.return=y,_):(_=r(_,T),_.return=y,_)}function f(y,_,T){if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return _=Ug(""+_,y.mode,T),_.return=y,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case rf:return T=Xf(_.type,_.key,_.props,null,y.mode,T),Fl(T,_),T.return=y,T;case Gl:return _=Fg(_,y.mode,T),_.return=y,_;case is:return _=na(_),f(y,_,T)}if(Ql(_)||Bl(_))return _=da(_,y.mode,T,null),_.return=y,_;if(typeof _.then=="function")return f(y,ff(_),T);if(_.$$typeof===kr)return f(y,uf(y,_),T);df(y,_)}return null}function d(y,_,T,b){var M=_!==null?_.key:null;if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return M!==null?null:o(y,_,""+T,b);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case rf:return T.key===M?l(y,_,T,b):null;case Gl:return T.key===M?c(y,_,T,b):null;case is:return T=na(T),d(y,_,T,b)}if(Ql(T)||Bl(T))return M!==null?null:u(y,_,T,b,null);if(typeof T.then=="function")return d(y,_,ff(T),b);if(T.$$typeof===kr)return d(y,_,uf(y,T),b);df(y,T)}return null}function p(y,_,T,b,M){if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return y=y.get(T)||null,o(_,y,""+b,M);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case rf:return y=y.get(b.key===null?T:b.key)||null,l(_,y,b,M);case Gl:return y=y.get(b.key===null?T:b.key)||null,c(_,y,b,M);case is:return b=na(b),p(y,_,T,b,M)}if(Ql(b)||Bl(b))return y=y.get(T)||null,u(_,y,b,M,null);if(typeof b.then=="function")return p(y,_,T,ff(b),M);if(b.$$typeof===kr)return p(y,_,T,uf(_,b),M);df(_,b)}return null}function m(y,_,T,b){for(var M=null,C=null,D=_,F=_=0,L=null;D!==null&&F<T.length;F++){D.index>F?(L=D,D=null):L=D.sibling;var U=d(y,D,T[F],b);if(U===null){D===null&&(D=L);break}t&&D&&U.alternate===null&&e(y,D),_=s(U,_,F),C===null?M=U:C.sibling=U,C=U,D=L}if(F===T.length)return n(y,D),$e&&Cr(y,F),M;if(D===null){for(;F<T.length;F++)D=f(y,T[F],b),D!==null&&(_=s(D,_,F),C===null?M=D:C.sibling=D,C=D);return $e&&Cr(y,F),M}for(D=i(D);F<T.length;F++)L=p(D,y,F,T[F],b),L!==null&&(t&&L.alternate!==null&&D.delete(L.key===null?F:L.key),_=s(L,_,F),C===null?M=L:C.sibling=L,C=L);return t&&D.forEach(function(N){return e(y,N)}),$e&&Cr(y,F),M}function S(y,_,T,b){if(T==null)throw Error(ne(151));for(var M=null,C=null,D=_,F=_=0,L=null,U=T.next();D!==null&&!U.done;F++,U=T.next()){D.index>F?(L=D,D=null):L=D.sibling;var N=d(y,D,U.value,b);if(N===null){D===null&&(D=L);break}t&&D&&N.alternate===null&&e(y,D),_=s(N,_,F),C===null?M=N:C.sibling=N,C=N,D=L}if(U.done)return n(y,D),$e&&Cr(y,F),M;if(D===null){for(;!U.done;F++,U=T.next())U=f(y,U.value,b),U!==null&&(_=s(U,_,F),C===null?M=U:C.sibling=U,C=U);return $e&&Cr(y,F),M}for(D=i(D);!U.done;F++,U=T.next())U=p(D,y,F,U.value,b),U!==null&&(t&&U.alternate!==null&&D.delete(U.key===null?F:U.key),_=s(U,_,F),C===null?M=U:C.sibling=U,C=U);return t&&D.forEach(function(A){return e(y,A)}),$e&&Cr(y,F),M}function v(y,_,T,b){if(typeof T=="object"&&T!==null&&T.type===go&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case rf:e:{for(var M=T.key;_!==null;){if(_.key===M){if(M=T.type,M===go){if(_.tag===7){n(y,_.sibling),b=r(_,T.props.children),b.return=y,y=b;break e}}else if(_.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===is&&na(M)===_.type){n(y,_.sibling),b=r(_,T.props),Fl(b,T),b.return=y,y=b;break e}n(y,_);break}else e(y,_);_=_.sibling}T.type===go?(b=da(T.props.children,y.mode,b,T.key),b.return=y,y=b):(b=Xf(T.type,T.key,T.props,null,y.mode,b),Fl(b,T),b.return=y,y=b)}return a(y);case Gl:e:{for(M=T.key;_!==null;){if(_.key===M)if(_.tag===4&&_.stateNode.containerInfo===T.containerInfo&&_.stateNode.implementation===T.implementation){n(y,_.sibling),b=r(_,T.children||[]),b.return=y,y=b;break e}else{n(y,_);break}else e(y,_);_=_.sibling}b=Fg(T,y.mode,b),b.return=y,y=b}return a(y);case is:return T=na(T),v(y,_,T,b)}if(Ql(T))return m(y,_,T,b);if(Bl(T)){if(M=Bl(T),typeof M!="function")throw Error(ne(150));return T=M.call(T),S(y,_,T,b)}if(typeof T.then=="function")return v(y,_,ff(T),b);if(T.$$typeof===kr)return v(y,_,uf(y,T),b);df(y,T)}return typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint"?(T=""+T,_!==null&&_.tag===6?(n(y,_.sibling),b=r(_,T),b.return=y,y=b):(n(y,_),b=Ug(T,y.mode,b),b.return=y,y=b),a(y)):n(y,_)}return function(y,_,T,b){try{jc=0;var M=v(y,_,T,b);return Bo=null,M}catch(D){if(D===Tl||D===ep)throw D;var C=Zn(29,D,null,y.mode);return C.lanes=b,C.return=y,C}finally{}}}var Aa=GS(!0),QS=GS(!1),rs=!1;function Ib(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function xs(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ss(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Ge&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,e=Sd(t),jS(t,null,n),e}return Jh(t,i,e,n),Sd(t)}function gc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,mS(t,n)}}function Vg(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?r=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Sy=!1;function mc(){if(Sy){var t=No;if(t!==null)throw t}}function yc(t,e,n,i){Sy=!1;var r=t.updateQueue;rs=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?s=c:a.next=c,a=l;var u=t.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==a&&(o===null?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(s!==null){var f=r.baseState;a=0,u=c=l=null,o=s;do{var d=o.lane&-536870913,p=d!==o.lane;if(p?(Ve&d)===d:(i&d)===d){d!==0&&d===Zo&&(Sy=!0),u!==null&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var m=t,S=o;d=e;var v=n;switch(S.tag){case 1:if(m=S.payload,typeof m=="function"){f=m.call(v,f,d);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=S.payload,d=typeof m=="function"?m.call(v,f,d):m,d==null)break e;f=xt({},f,d);break e;case 2:rs=!0}}d=o.callback,d!==null&&(t.flags|=64,p&&(t.flags|=8192),p=r.callbacks,p===null?r.callbacks=[d]:p.push(d))}else p={lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(c=u=p,l=f):u=u.next=p,a|=d;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;p=o,o=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(!0);u===null&&(l=f),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,s===null&&(r.shared.lanes=0),ks|=a,t.lanes=a,t.memoizedState=f}}function JS(t,e){if(typeof t!="function")throw Error(ne(191,t));t.call(e)}function ew(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)JS(n[t],e)}var Go=hr(null),Cd=hr(0);function F1(t,e){t=Hr,mt(Cd,t),mt(Go,e),Hr=t|e.baseLanes}function wy(){mt(Cd,Hr),mt(Go,Go.current)}function Pb(){Hr=Cd.current,fn(Go),fn(Cd)}var oi=hr(null),Ai=null;function ls(t){var e=t.alternate;mt(Vt,Vt.current&1),mt(oi,t),Ai===null&&(e===null||Go.current!==null||e.memoizedState!==null)&&(Ai=t)}function Ay(t){mt(Vt,Vt.current),mt(oi,t),Ai===null&&(Ai=t)}function tw(t){t.tag===22?(mt(Vt,Vt.current),mt(oi,t),Ai===null&&(Ai=t)):cs()}function cs(){mt(Vt,Vt.current),mt(oi,oi.current)}function qn(t){fn(oi),Ai===t&&(Ai=null),fn(Vt)}var Vt=hr(0);function Rd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Hy(n)||Wy(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Vr=0,Ie=null,ct=null,Kt=null,Md=!1,Lo=!1,Ea=!1,Od=0,Hc=0,Uo=null,lI=0;function Bt(){throw Error(ne(321))}function Db(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ai(t[n],e[n]))return!1;return!0}function kb(t,e,n,i,r,s){return Vr=s,Ie=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,xe.H=t===null||t.memoizedState===null?Pw:Wb,Ea=!1,s=n(i,r),Ea=!1,Lo&&(s=iw(e,n,i,r)),nw(t),s}function nw(t){xe.H=Wc;var e=ct!==null&&ct.next!==null;if(Vr=0,Kt=ct=Ie=null,Md=!1,Hc=0,Uo=null,e)throw Error(ne(300));t===null||en||(t=t.dependencies,t!==null&&Ad(t)&&(en=!0))}function iw(t,e,n,i){Ie=t;var r=0;do{if(Lo&&(Uo=null),Hc=0,Lo=!1,25<=r)throw Error(ne(301));if(r+=1,Kt=ct=null,t.updateQueue!=null){var s=t.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}xe.H=Dw,s=e(n,i)}while(Lo);return s}function cI(){var t=xe.H,e=t.useState()[0];return e=typeof e.then=="function"?_u(e):e,t=t.useState()[0],(ct!==null?ct.memoizedState:null)!==t&&(Ie.flags|=1024),e}function Nb(){var t=Od!==0;return Od=0,t}function Bb(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function Lb(t){if(Md){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}Md=!1}Vr=0,Kt=ct=Ie=null,Lo=!1,Hc=Od=0,Uo=null}function Mn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kt===null?Ie.memoizedState=Kt=t:Kt=Kt.next=t,Kt}function $t(){if(ct===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=ct.next;var e=Kt===null?Ie.memoizedState:Kt.next;if(e!==null)Kt=e,ct=t;else{if(t===null)throw Ie.alternate===null?Error(ne(467)):Error(ne(310));ct=t,t={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},Kt===null?Ie.memoizedState=Kt=t:Kt=Kt.next=t}return Kt}function tp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function _u(t){var e=Hc;return Hc+=1,Uo===null&&(Uo=[]),t=ZS(Uo,t,e),e=Ie,(Kt===null?e.memoizedState:Kt.next)===null&&(e=e.alternate,xe.H=e===null||e.memoizedState===null?Pw:Wb),t}function np(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return _u(t);if(t.$$typeof===kr)return bn(t)}throw Error(ne(438,String(t)))}function Ub(t){var e=null,n=Ie.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var i=Ie.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(e={data:i.data.map(function(r){return r.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=tp(),Ie.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),i=0;i<t;i++)n[i]=q4;return e.index++,n}function $r(t,e){return typeof e=="function"?e(t):e}function Kf(t){var e=$t();return Fb(e,ct,t)}function Fb(t,e,n){var i=t.queue;if(i===null)throw Error(ne(311));i.lastRenderedReducer=n;var r=t.baseQueue,s=i.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}e.baseQueue=r=s,i.pending=null}if(s=t.baseState,r===null)t.memoizedState=s;else{e=r.next;var o=a=null,l=null,c=e,u=!1;do{var f=c.lane&-536870913;if(f!==c.lane?(Ve&f)===f:(Vr&f)===f){var d=c.revertLane;if(d===0)l!==null&&(l=l.next={lane:0,revertLane:0,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),f===Zo&&(u=!0);else if((Vr&d)===d){c=c.next,d===Zo&&(u=!0);continue}else f={lane:0,revertLane:c.revertLane,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(o=l=f,a=s):l=l.next=f,Ie.lanes|=d,ks|=d;f=c.action,Ea&&n(s,f),s=c.hasEagerState?c.eagerState:n(s,f)}else d={lane:f,revertLane:c.revertLane,gesture:c.gesture,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(o=l=d,a=s):l=l.next=d,Ie.lanes|=f,ks|=f;c=c.next}while(c!==null&&c!==e);if(l===null?a=s:l.next=o,!ai(s,t.memoizedState)&&(en=!0,u&&(n=No,n!==null)))throw n;t.memoizedState=s,t.baseState=a,t.baseQueue=l,i.lastRenderedState=s}return r===null&&(i.lanes=0),[t.memoizedState,i.dispatch]}function $g(t){var e=$t(),n=e.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do s=t(s,a.action),a=a.next;while(a!==r);ai(s,e.memoizedState)||(en=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function rw(t,e,n){var i=Ie,r=$t(),s=$e;if(s){if(n===void 0)throw Error(ne(407));n=n()}else n=e();var a=!ai((ct||r).memoizedState,n);if(a&&(r.memoizedState=n,en=!0),r=r.queue,zb(ow.bind(null,i,r,t),[t]),r.getSnapshot!==e||a||Kt!==null&&Kt.memoizedState.tag&1){if(i.flags|=2048,Qo(9,{destroy:void 0},aw.bind(null,i,r,n,e),null),ht===null)throw Error(ne(349));s||Vr&127||sw(i,e,n)}return n}function sw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ie.updateQueue,e===null?(e=tp(),Ie.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function aw(t,e,n,i){e.value=n,e.getSnapshot=i,lw(e)&&cw(t)}function ow(t,e,n){return n(function(){lw(e)&&cw(t)})}function lw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ai(t,n)}catch{return!0}}function cw(t){var e=Fa(t,2);e!==null&&zn(e,t,2)}function Ey(t){var e=Mn();if(typeof t=="function"){var n=t;if(t=n(),Ea){fs(!0);try{n()}finally{fs(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$r,lastRenderedState:t},e}function uw(t,e,n,i){return t.baseState=n,Fb(t,ct,typeof i=="function"?i:$r)}function uI(t,e,n,i,r){if(rp(t))throw Error(ne(485));if(t=e.action,t!==null){var s={payload:r,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){s.listeners.push(a)}};xe.T!==null?n(!0):s.isTransition=!1,i(s),n=e.pending,n===null?(s.next=e.pending=s,fw(e,s)):(s.next=n.next,e.pending=n.next=s)}}function fw(t,e){var n=e.action,i=e.payload,r=t.state;if(e.isTransition){var s=xe.T,a={};xe.T=a;try{var o=n(r,i),l=xe.S;l!==null&&l(a,o),z1(t,e,o)}catch(c){Cy(t,e,c)}finally{s!==null&&a.types!==null&&(s.types=a.types),xe.T=s}}else try{s=n(r,i),z1(t,e,s)}catch(c){Cy(t,e,c)}}function z1(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){V1(t,e,i)},function(i){return Cy(t,e,i)}):V1(t,e,n)}function V1(t,e,n){e.status="fulfilled",e.value=n,dw(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,fw(t,n)))}function Cy(t,e,n){var i=t.pending;if(t.pending=null,i!==null){i=i.next;do e.status="rejected",e.reason=n,dw(e),e=e.next;while(e!==i)}t.action=null}function dw(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function hw(t,e){return e}function $1(t,e){if($e){var n=ht.formState;if(n!==null){e:{var i=Ie;if($e){if(vt){t:{for(var r=vt,s=Ti;r.nodeType!==8;){if(!s){r=null;break t}if(r=Ei(r.nextSibling),r===null){r=null;break t}}s=r.data,r=s==="F!"||s==="F"?r:null}if(r){vt=Ei(r.nextSibling),i=r.data==="F!";break e}}Ps(i)}i=!1}i&&(e=n[0])}}return n=Mn(),n.memoizedState=n.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hw,lastRenderedState:e},n.queue=i,n=Mw.bind(null,Ie,i),i.dispatch=n,i=Ey(!1),s=Hb.bind(null,Ie,!1,i.queue),i=Mn(),r={state:e,dispatch:null,action:t,pending:null},i.queue=r,n=uI.bind(null,Ie,r,s,n),r.dispatch=n,i.memoizedState=t,[e,n,!1]}function j1(t){var e=$t();return pw(e,ct,t)}function pw(t,e,n){if(e=Fb(t,e,hw)[0],t=Kf($r)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var i=_u(e)}catch(a){throw a===Tl?ep:a}else i=e;e=$t();var r=e.queue,s=r.dispatch;return n!==e.memoizedState&&(Ie.flags|=2048,Qo(9,{destroy:void 0},fI.bind(null,r,n),null)),[i,s,t]}function fI(t,e){t.action=e}function H1(t){var e=$t(),n=ct;if(n!==null)return pw(e,n,t);$t(),e=e.memoizedState,n=$t();var i=n.queue.dispatch;return n.memoizedState=t,[e,i,!1]}function Qo(t,e,n,i){return t={tag:t,create:n,deps:i,inst:e,next:null},e=Ie.updateQueue,e===null&&(e=tp(),Ie.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function gw(){return $t().memoizedState}function Zf(t,e,n,i){var r=Mn();Ie.flags|=t,r.memoizedState=Qo(1|e,{destroy:void 0},n,i===void 0?null:i)}function ip(t,e,n,i){var r=$t();i=i===void 0?null:i;var s=r.memoizedState.inst;ct!==null&&i!==null&&Db(i,ct.memoizedState.deps)?r.memoizedState=Qo(e,s,n,i):(Ie.flags|=t,r.memoizedState=Qo(1|e,s,n,i))}function W1(t,e){Zf(8390656,8,t,e)}function zb(t,e){ip(2048,8,t,e)}function dI(t){Ie.flags|=4;var e=Ie.updateQueue;if(e===null)e=tp(),Ie.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function mw(t){var e=$t().memoizedState;return dI({ref:e,nextImpl:t}),function(){if(Ge&2)throw Error(ne(440));return e.impl.apply(void 0,arguments)}}function yw(t,e){return ip(4,2,t,e)}function _w(t,e){return ip(4,4,t,e)}function bw(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function vw(t,e,n){n=n!=null?n.concat([t]):null,ip(4,4,bw.bind(null,e,t),n)}function Vb(){}function Tw(t,e){var n=$t();e=e===void 0?null:e;var i=n.memoizedState;return e!==null&&Db(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function xw(t,e){var n=$t();e=e===void 0?null:e;var i=n.memoizedState;if(e!==null&&Db(e,i[1]))return i[0];if(i=t(),Ea){fs(!0);try{t()}finally{fs(!1)}}return n.memoizedState=[i,e],i}function $b(t,e,n){return n===void 0||Vr&1073741824&&!(Ve&261930)?t.memoizedState=e:(t.memoizedState=n,t=uA(),Ie.lanes|=t,ks|=t,n)}function Sw(t,e,n,i){return ai(n,e)?n:Go.current!==null?(t=$b(t,n,i),ai(t,e)||(en=!0),t):!(Vr&42)||Vr&1073741824&&!(Ve&261930)?(en=!0,t.memoizedState=n):(t=uA(),Ie.lanes|=t,ks|=t,e)}function ww(t,e,n,i,r){var s=Qe.p;Qe.p=s!==0&&8>s?s:8;var a=xe.T,o={};xe.T=o,Hb(t,!1,e,n);try{var l=r(),c=xe.S;if(c!==null&&c(o,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=oI(l,i);_c(t,e,u,ii(t))}else _c(t,e,i,ii(t))}catch(f){_c(t,e,{then:function(){},status:"rejected",reason:f},ii())}finally{Qe.p=s,a!==null&&o.types!==null&&(a.types=o.types),xe.T=a}}function hI(){}function Ry(t,e,n,i){if(t.tag!==5)throw Error(ne(476));var r=Aw(t).queue;ww(t,r,e,fa,n===null?hI:function(){return Ew(t),n(i)})}function Aw(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:fa,baseState:fa,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$r,lastRenderedState:fa},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$r,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function Ew(t){var e=Aw(t);e.next===null&&(e=t.alternate.memoizedState),_c(t,e.next.queue,{},ii())}function jb(){return bn(qc)}function Cw(){return $t().memoizedState}function Rw(){return $t().memoizedState}function pI(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=ii();t=xs(n);var i=Ss(e,t,n);i!==null&&(zn(i,e,n),gc(i,e,n)),e={cache:Rb()},t.payload=e;return}e=e.return}}function gI(t,e,n){var i=ii();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},rp(t)?Ow(e,n):(n=wb(t,e,n,i),n!==null&&(zn(n,t,i),Iw(n,e,i)))}function Mw(t,e,n){var i=ii();_c(t,e,n,i)}function _c(t,e,n,i){var r={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(rp(t))Ow(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,n);if(r.hasEagerState=!0,r.eagerState=o,ai(o,a))return Jh(t,e,r,0),ht===null&&Qh(),!1}catch{}finally{}if(n=wb(t,e,r,i),n!==null)return zn(n,t,i),Iw(n,e,i),!0}return!1}function Hb(t,e,n,i){if(i={lane:2,revertLane:Jb(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},rp(t)){if(e)throw Error(ne(479))}else e=wb(t,n,i,2),e!==null&&zn(e,t,2)}function rp(t){var e=t.alternate;return t===Ie||e!==null&&e===Ie}function Ow(t,e){Lo=Md=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Iw(t,e,n){if(n&4194048){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,mS(t,n)}}var Wc={readContext:bn,use:np,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useLayoutEffect:Bt,useInsertionEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useSyncExternalStore:Bt,useId:Bt,useHostTransitionStatus:Bt,useFormState:Bt,useActionState:Bt,useOptimistic:Bt,useMemoCache:Bt,useCacheRefresh:Bt};Wc.useEffectEvent=Bt;var Pw={readContext:bn,use:np,useCallback:function(t,e){return Mn().memoizedState=[t,e===void 0?null:e],t},useContext:bn,useEffect:W1,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,Zf(4194308,4,bw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Zf(4194308,4,t,e)},useInsertionEffect:function(t,e){Zf(4,2,t,e)},useMemo:function(t,e){var n=Mn();e=e===void 0?null:e;var i=t();if(Ea){fs(!0);try{t()}finally{fs(!1)}}return n.memoizedState=[i,e],i},useReducer:function(t,e,n){var i=Mn();if(n!==void 0){var r=n(e);if(Ea){fs(!0);try{n(e)}finally{fs(!1)}}}else r=e;return i.memoizedState=i.baseState=r,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},i.queue=t,t=t.dispatch=gI.bind(null,Ie,t),[i.memoizedState,t]},useRef:function(t){var e=Mn();return t={current:t},e.memoizedState=t},useState:function(t){t=Ey(t);var e=t.queue,n=Mw.bind(null,Ie,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:Vb,useDeferredValue:function(t,e){var n=Mn();return $b(n,t,e)},useTransition:function(){var t=Ey(!1);return t=ww.bind(null,Ie,t.queue,!0,!1),Mn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var i=Ie,r=Mn();if($e){if(n===void 0)throw Error(ne(407));n=n()}else{if(n=e(),ht===null)throw Error(ne(349));Ve&127||sw(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,W1(ow.bind(null,i,s,t),[t]),i.flags|=2048,Qo(9,{destroy:void 0},aw.bind(null,i,s,n,e),null),n},useId:function(){var t=Mn(),e=ht.identifierPrefix;if($e){var n=sr,i=rr;n=(i&~(1<<32-ni(i)-1)).toString(32)+n,e="_"+e+"R_"+n,n=Od++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=lI++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:jb,useFormState:$1,useActionState:$1,useOptimistic:function(t){var e=Mn();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=Hb.bind(null,Ie,!0,n),n.dispatch=e,[t,e]},useMemoCache:Ub,useCacheRefresh:function(){return Mn().memoizedState=pI.bind(null,Ie)},useEffectEvent:function(t){var e=Mn(),n={impl:t};return e.memoizedState=n,function(){if(Ge&2)throw Error(ne(440));return n.impl.apply(void 0,arguments)}}},Wb={readContext:bn,use:np,useCallback:Tw,useContext:bn,useEffect:zb,useImperativeHandle:vw,useInsertionEffect:yw,useLayoutEffect:_w,useMemo:xw,useReducer:Kf,useRef:gw,useState:function(){return Kf($r)},useDebugValue:Vb,useDeferredValue:function(t,e){var n=$t();return Sw(n,ct.memoizedState,t,e)},useTransition:function(){var t=Kf($r)[0],e=$t().memoizedState;return[typeof t=="boolean"?t:_u(t),e]},useSyncExternalStore:rw,useId:Cw,useHostTransitionStatus:jb,useFormState:j1,useActionState:j1,useOptimistic:function(t,e){var n=$t();return uw(n,ct,t,e)},useMemoCache:Ub,useCacheRefresh:Rw};Wb.useEffectEvent=mw;var Dw={readContext:bn,use:np,useCallback:Tw,useContext:bn,useEffect:zb,useImperativeHandle:vw,useInsertionEffect:yw,useLayoutEffect:_w,useMemo:xw,useReducer:$g,useRef:gw,useState:function(){return $g($r)},useDebugValue:Vb,useDeferredValue:function(t,e){var n=$t();return ct===null?$b(n,t,e):Sw(n,ct.memoizedState,t,e)},useTransition:function(){var t=$g($r)[0],e=$t().memoizedState;return[typeof t=="boolean"?t:_u(t),e]},useSyncExternalStore:rw,useId:Cw,useHostTransitionStatus:jb,useFormState:H1,useActionState:H1,useOptimistic:function(t,e){var n=$t();return ct!==null?uw(n,ct,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:Ub,useCacheRefresh:Rw};Dw.useEffectEvent=mw;function jg(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:xt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var My={enqueueSetState:function(t,e,n){t=t._reactInternals;var i=ii(),r=xs(i);r.payload=e,n!=null&&(r.callback=n),e=Ss(t,r,i),e!==null&&(zn(e,t,i),gc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=ii(),r=xs(i);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=Ss(t,r,i),e!==null&&(zn(e,t,i),gc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ii(),i=xs(n);i.tag=2,e!=null&&(i.callback=e),e=Ss(t,i,n),e!==null&&(zn(e,t,n),gc(e,t,n))}};function Y1(t,e,n,i,r,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,a):e.prototype&&e.prototype.isPureReactComponent?!zc(n,i)||!zc(r,s):!0}function X1(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&My.enqueueReplaceState(e,e.state,null)}function Ca(t,e){var n=e;if("ref"in e){n={};for(var i in e)i!=="ref"&&(n[i]=e[i])}if(t=t.defaultProps){n===e&&(n=xt({},n));for(var r in t)n[r]===void 0&&(n[r]=t[r])}return n}function kw(t){xd(t)}function Nw(t){console.error(t)}function Bw(t){xd(t)}function Id(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function q1(t,e,n){try{var i=t.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Oy(t,e,n){return n=xs(n),n.tag=3,n.payload={element:null},n.callback=function(){Id(t,e)},n}function Lw(t){return t=xs(t),t.tag=3,t}function Uw(t,e,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=i.value;t.payload=function(){return r(s)},t.callback=function(){q1(e,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){q1(e,n,i),typeof r!="function"&&(ws===null?ws=new Set([this]):ws.add(this));var o=i.stack;this.componentDidCatch(i.value,{componentStack:o!==null?o:""})})}function mI(t,e,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(e=n.alternate,e!==null&&vl(e,n,r,!0),n=oi.current,n!==null){switch(n.tag){case 31:case 13:return Ai===null?Bd():n.alternate===null&&zt===0&&(zt=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===Ed?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([i]):e.add(i),em(t,i,r)),!1;case 22:return n.flags|=65536,i===Ed?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([i]):n.add(i)),em(t,i,r)),!1}throw Error(ne(435,n.tag))}return em(t,i,r),Bd(),!1}if($e)return e=oi.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=r,i!==yy&&(t=Error(ne(422),{cause:i}),$c(vi(t,n)))):(i!==yy&&(e=Error(ne(423),{cause:i}),$c(vi(e,n))),t=t.current.alternate,t.flags|=65536,r&=-r,t.lanes|=r,i=vi(i,n),r=Oy(t.stateNode,i,r),Vg(t,r),zt!==4&&(zt=2)),!1;var s=Error(ne(520),{cause:i});if(s=vi(s,n),Tc===null?Tc=[s]:Tc.push(s),zt!==4&&(zt=2),e===null)return!0;i=vi(i,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=r&-r,n.lanes|=t,t=Oy(n.stateNode,i,t),Vg(n,t),!1;case 1:if(e=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(ws===null||!ws.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,r=Lw(r),Uw(r,t,n,i),Vg(n,r),!1}n=n.return}while(n!==null);return!1}var Yb=Error(ne(461)),en=!1;function pn(t,e,n,i){e.child=t===null?QS(e,null,n,i):Aa(e,t.child,n,i)}function K1(t,e,n,i,r){n=n.render;var s=e.ref;if("ref"in i){var a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}else a=i;return wa(e),i=kb(t,e,n,a,s,r),o=Nb(),t!==null&&!en?(Bb(t,e,r),jr(t,e,r)):($e&&o&&Eb(e),e.flags|=1,pn(t,e,i,r),e.child)}function Z1(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!Ab(s)&&s.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=s,Fw(t,e,s,i,r)):(t=Xf(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!Xb(t,r)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:zc,n(a,i)&&t.ref===e.ref)return jr(t,e,r)}return e.flags|=1,t=Lr(s,i),t.ref=e.ref,t.return=e,e.child=t}function Fw(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(zc(s,i)&&t.ref===e.ref)if(en=!1,e.pendingProps=i=s,Xb(t,r))t.flags&131072&&(en=!0);else return e.lanes=t.lanes,jr(t,e,r)}return Iy(t,e,n,i,r)}function zw(t,e,n,i){var r=i.children,s=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if(e.flags&128){if(s=s!==null?s.baseLanes|n:n,t!==null){for(i=e.child=t.child,r=0;i!==null;)r=r|i.lanes|i.childLanes,i=i.sibling;i=r&~s}else i=0,e.child=null;return G1(t,e,s,n,i)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&qf(e,s!==null?s.cachePool:null),s!==null?F1(e,s):wy(),tw(e);else return i=e.lanes=536870912,G1(t,e,s!==null?s.baseLanes|n:n,n,i)}else s!==null?(qf(e,s.cachePool),F1(e,s),cs(),e.memoizedState=null):(t!==null&&qf(e,null),wy(),cs());return pn(t,e,r,n),e.child}function ec(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function G1(t,e,n,i,r){var s=Mb();return s=s===null?null:{parent:Gt._currentValue,pool:s},e.memoizedState={baseLanes:n,cachePool:s},t!==null&&qf(e,null),wy(),tw(e),t!==null&&vl(t,e,i,!0),e.childLanes=r,null}function Gf(t,e){return e=Pd({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function Q1(t,e,n){return Aa(e,t.child,null,n),t=Gf(e,e.pendingProps),t.flags|=2,qn(e),e.memoizedState=null,t}function yI(t,e,n){var i=e.pendingProps,r=(e.flags&128)!==0;if(e.flags&=-129,t===null){if($e){if(i.mode==="hidden")return t=Gf(e,i),e.lanes=536870912,ec(null,t);if(Ay(e),(t=vt)?(t=PA(t,Ti),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Is!==null?{id:rr,overflow:sr}:null,retryLane:536870912,hydrationErrors:null},n=WS(t),n.return=e,e.child=n,_n=e,vt=null)):t=null,t===null)throw Ps(e);return e.lanes=536870912,null}return Gf(e,i)}var s=t.memoizedState;if(s!==null){var a=s.dehydrated;if(Ay(e),r)if(e.flags&256)e.flags&=-257,e=Q1(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(ne(558));else if(en||vl(t,e,n,!1),r=(n&t.childLanes)!==0,en||r){if(i=ht,i!==null&&(a=yS(i,n),a!==0&&a!==s.retryLane))throw s.retryLane=a,Fa(t,a),zn(i,t,a),Yb;Bd(),e=Q1(t,e,n)}else t=s.treeContext,vt=Ei(a.nextSibling),_n=e,$e=!0,Ts=null,Ti=!1,t!==null&&XS(e,t),e=Gf(e,i),e.flags|=4096;return e}return t=Lr(t.child,{mode:i.mode,children:i.children}),t.ref=e.ref,e.child=t,t.return=e,t}function Qf(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(ne(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function Iy(t,e,n,i,r){return wa(e),n=kb(t,e,n,i,void 0,r),i=Nb(),t!==null&&!en?(Bb(t,e,r),jr(t,e,r)):($e&&i&&Eb(e),e.flags|=1,pn(t,e,n,r),e.child)}function J1(t,e,n,i,r,s){return wa(e),e.updateQueue=null,n=iw(e,i,n,r),nw(t),i=Nb(),t!==null&&!en?(Bb(t,e,s),jr(t,e,s)):($e&&i&&Eb(e),e.flags|=1,pn(t,e,n,s),e.child)}function e2(t,e,n,i,r){if(wa(e),e.stateNode===null){var s=So,a=n.contextType;typeof a=="object"&&a!==null&&(s=bn(a)),s=new n(i,s),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=My,e.stateNode=s,s._reactInternals=e,s=e.stateNode,s.props=i,s.state=e.memoizedState,s.refs={},Ib(e),a=n.contextType,s.context=typeof a=="object"&&a!==null?bn(a):So,s.state=e.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(jg(e,n,a,i),s.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(a=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),a!==s.state&&My.enqueueReplaceState(s,s.state,null),yc(e,i,s,r),mc(),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!0}else if(t===null){s=e.stateNode;var o=e.memoizedProps,l=Ca(n,o);s.props=l;var c=s.context,u=n.contextType;a=So,typeof u=="object"&&u!==null&&(a=bn(u));var f=n.getDerivedStateFromProps;u=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function",o=e.pendingProps!==o,u||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o||c!==a)&&X1(e,s,i,a),rs=!1;var d=e.memoizedState;s.state=d,yc(e,i,s,r),mc(),c=e.memoizedState,o||d!==c||rs?(typeof f=="function"&&(jg(e,n,f,i),c=e.memoizedState),(l=rs||Y1(e,n,l,i,d,c,a))?(u||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),s.props=i,s.state=c,s.context=a,i=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{s=e.stateNode,xy(t,e),a=e.memoizedProps,u=Ca(n,a),s.props=u,f=e.pendingProps,d=s.context,c=n.contextType,l=So,typeof c=="object"&&c!==null&&(l=bn(c)),o=n.getDerivedStateFromProps,(c=typeof o=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==f||d!==l)&&X1(e,s,i,l),rs=!1,d=e.memoizedState,s.state=d,yc(e,i,s,r),mc();var p=e.memoizedState;a!==f||d!==p||rs||t!==null&&t.dependencies!==null&&Ad(t.dependencies)?(typeof o=="function"&&(jg(e,n,o,i),p=e.memoizedState),(u=rs||Y1(e,n,u,i,d,p,l)||t!==null&&t.dependencies!==null&&Ad(t.dependencies))?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,p,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,p,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),s.props=i,s.state=p,s.context=l,i=u):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),i=!1)}return s=i,Qf(t,e),i=(e.flags&128)!==0,s||i?(s=e.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),e.flags|=1,t!==null&&i?(e.child=Aa(e,t.child,null,r),e.child=Aa(e,null,n,r)):pn(t,e,n,r),e.memoizedState=s.state,t=e.child):t=jr(t,e,r),t}function t2(t,e,n,i){return Sa(),e.flags|=256,pn(t,e,n,i),e.child}var Hg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wg(t){return{baseLanes:t,cachePool:KS()}}function Yg(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=Qn),t}function Vw(t,e,n){var i=e.pendingProps,r=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(Vt.current&2)!==0),a&&(r=!0,e.flags&=-129),a=(e.flags&32)!==0,e.flags&=-33,t===null){if($e){if(r?ls(e):cs(),(t=vt)?(t=PA(t,Ti),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Is!==null?{id:rr,overflow:sr}:null,retryLane:536870912,hydrationErrors:null},n=WS(t),n.return=e,e.child=n,_n=e,vt=null)):t=null,t===null)throw Ps(e);return Wy(t)?e.lanes=32:e.lanes=536870912,null}var o=i.children;return i=i.fallback,r?(cs(),r=e.mode,o=Pd({mode:"hidden",children:o},r),i=da(i,r,n,null),o.return=e,i.return=e,o.sibling=i,e.child=o,i=e.child,i.memoizedState=Wg(n),i.childLanes=Yg(t,a,n),e.memoizedState=Hg,ec(null,i)):(ls(e),Py(e,o))}var l=t.memoizedState;if(l!==null&&(o=l.dehydrated,o!==null)){if(s)e.flags&256?(ls(e),e.flags&=-257,e=Xg(t,e,n)):e.memoizedState!==null?(cs(),e.child=t.child,e.flags|=128,e=null):(cs(),o=i.fallback,r=e.mode,i=Pd({mode:"visible",children:i.children},r),o=da(o,r,n,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,Aa(e,t.child,null,n),i=e.child,i.memoizedState=Wg(n),i.childLanes=Yg(t,a,n),e.memoizedState=Hg,e=ec(null,i));else if(ls(e),Wy(o)){if(a=o.nextSibling&&o.nextSibling.dataset,a)var c=a.dgst;a=c,i=Error(ne(419)),i.stack="",i.digest=a,$c({value:i,source:null,stack:null}),e=Xg(t,e,n)}else if(en||vl(t,e,n,!1),a=(n&t.childLanes)!==0,en||a){if(a=ht,a!==null&&(i=yS(a,n),i!==0&&i!==l.retryLane))throw l.retryLane=i,Fa(t,i),zn(a,t,i),Yb;Hy(o)||Bd(),e=Xg(t,e,n)}else Hy(o)?(e.flags|=192,e.child=t.child,e=null):(t=l.treeContext,vt=Ei(o.nextSibling),_n=e,$e=!0,Ts=null,Ti=!1,t!==null&&XS(e,t),e=Py(e,i.children),e.flags|=4096);return e}return r?(cs(),o=i.fallback,r=e.mode,l=t.child,c=l.sibling,i=Lr(l,{mode:"hidden",children:i.children}),i.subtreeFlags=l.subtreeFlags&65011712,c!==null?o=Lr(c,o):(o=da(o,r,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,ec(null,i),i=e.child,o=t.child.memoizedState,o===null?o=Wg(n):(r=o.cachePool,r!==null?(l=Gt._currentValue,r=r.parent!==l?{parent:l,pool:l}:r):r=KS(),o={baseLanes:o.baseLanes|n,cachePool:r}),i.memoizedState=o,i.childLanes=Yg(t,a,n),e.memoizedState=Hg,ec(t.child,i)):(ls(e),n=t.child,t=n.sibling,n=Lr(n,{mode:"visible",children:i.children}),n.return=e,n.sibling=null,t!==null&&(a=e.deletions,a===null?(e.deletions=[t],e.flags|=16):a.push(t)),e.child=n,e.memoizedState=null,n)}function Py(t,e){return e=Pd({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function Pd(t,e){return t=Zn(22,t,null,e),t.lanes=0,t}function Xg(t,e,n){return Aa(e,t.child,null,n),t=Py(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function n2(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),by(t.return,e,n)}function qg(t,e,n,i,r,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r,treeForkCount:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=r,a.treeForkCount=s)}function $w(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;i=i.children;var a=Vt.current,o=(a&2)!==0;if(o?(a=a&1|2,e.flags|=128):a&=1,mt(Vt,a),pn(t,e,i,n),i=$e?Vc:0,!o&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&n2(t,n,e);else if(t.tag===19)n2(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Rd(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),qg(e,!1,r,n,s,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Rd(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}qg(e,!0,n,null,s,i);break;case"together":qg(e,!1,null,null,void 0,i);break;default:e.memoizedState=null}return e.child}function jr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ks|=e.lanes,!(n&e.childLanes))if(t!==null){if(vl(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(ne(153));if(e.child!==null){for(t=e.child,n=Lr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Lr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Xb(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&Ad(t)))}function _I(t,e,n){switch(e.tag){case 3:_d(e,e.stateNode.containerInfo),os(e,Gt,t.memoizedState.cache),Sa();break;case 27:case 5:ay(e);break;case 4:_d(e,e.stateNode.containerInfo);break;case 10:os(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,Ay(e),null;break;case 13:var i=e.memoizedState;if(i!==null)return i.dehydrated!==null?(ls(e),e.flags|=128,null):n&e.child.childLanes?Vw(t,e,n):(ls(e),t=jr(t,e,n),t!==null?t.sibling:null);ls(e);break;case 19:var r=(t.flags&128)!==0;if(i=(n&e.childLanes)!==0,i||(vl(t,e,n,!1),i=(n&e.childLanes)!==0),r){if(i)return $w(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),mt(Vt,Vt.current),i)break;return null;case 22:return e.lanes=0,zw(t,e,n,e.pendingProps);case 24:os(e,Gt,t.memoizedState.cache)}return jr(t,e,n)}function jw(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)en=!0;else{if(!Xb(t,n)&&!(e.flags&128))return en=!1,_I(t,e,n);en=!!(t.flags&131072)}else en=!1,$e&&e.flags&1048576&&YS(e,Vc,e.index);switch(e.lanes=0,e.tag){case 16:e:{var i=e.pendingProps;if(t=na(e.elementType),e.type=t,typeof t=="function")Ab(t)?(i=Ca(t,i),e.tag=1,e=e2(null,e,t,i,n)):(e.tag=0,e=Iy(null,e,t,i,n));else{if(t!=null){var r=t.$$typeof;if(r===fb){e.tag=11,e=K1(null,e,t,i,n);break e}else if(r===db){e.tag=14,e=Z1(null,e,t,i,n);break e}}throw e=ry(t)||t,Error(ne(306,e,""))}}return e;case 0:return Iy(t,e,e.type,e.pendingProps,n);case 1:return i=e.type,r=Ca(i,e.pendingProps),e2(t,e,i,r,n);case 3:e:{if(_d(e,e.stateNode.containerInfo),t===null)throw Error(ne(387));i=e.pendingProps;var s=e.memoizedState;r=s.element,xy(t,e),yc(e,i,null,n);var a=e.memoizedState;if(i=a.cache,os(e,Gt,i),i!==s.cache&&vy(e,[Gt],n,!0),mc(),i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){e=t2(t,e,i,n);break e}else if(i!==r){r=vi(Error(ne(424)),e),$c(r),e=t2(t,e,i,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(vt=Ei(t.firstChild),_n=e,$e=!0,Ts=null,Ti=!0,n=QS(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Sa(),i===r){e=jr(t,e,n);break e}pn(t,e,i,n)}e=e.child}return e;case 26:return Qf(t,e),t===null?(n=x2(e.type,null,e.pendingProps,null))?e.memoizedState=n:$e||(n=e.type,t=e.pendingProps,i=zd(vs.current).createElement(n),i[yn]=e,i[Vn]=t,vn(i,n,t),un(i),e.stateNode=i):e.memoizedState=x2(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return ay(e),t===null&&$e&&(i=e.stateNode=DA(e.type,e.pendingProps,vs.current),_n=e,Ti=!0,r=vt,Vs(e.type)?(Yy=r,vt=Ei(i.firstChild)):vt=r),pn(t,e,e.pendingProps.children,n),Qf(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&$e&&((r=i=vt)&&(i=qI(i,e.type,e.pendingProps,Ti),i!==null?(e.stateNode=i,_n=e,vt=Ei(i.firstChild),Ti=!1,r=!0):r=!1),r||Ps(e)),ay(e),r=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,i=s.children,$y(r,s)?i=null:a!==null&&$y(r,a)&&(e.flags|=32),e.memoizedState!==null&&(r=kb(t,e,cI,null,null,n),qc._currentValue=r),Qf(t,e),pn(t,e,i,n),e.child;case 6:return t===null&&$e&&((t=n=vt)&&(n=KI(n,e.pendingProps,Ti),n!==null?(e.stateNode=n,_n=e,vt=null,t=!0):t=!1),t||Ps(e)),null;case 13:return Vw(t,e,n);case 4:return _d(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Aa(e,null,i,n):pn(t,e,i,n),e.child;case 11:return K1(t,e,e.type,e.pendingProps,n);case 7:return pn(t,e,e.pendingProps,n),e.child;case 8:return pn(t,e,e.pendingProps.children,n),e.child;case 12:return pn(t,e,e.pendingProps.children,n),e.child;case 10:return i=e.pendingProps,os(e,e.type,i.value),pn(t,e,i.children,n),e.child;case 9:return r=e.type._context,i=e.pendingProps.children,wa(e),r=bn(r),i=i(r),e.flags|=1,pn(t,e,i,n),e.child;case 14:return Z1(t,e,e.type,e.pendingProps,n);case 15:return Fw(t,e,e.type,e.pendingProps,n);case 19:return $w(t,e,n);case 31:return yI(t,e,n);case 22:return zw(t,e,n,e.pendingProps);case 24:return wa(e),i=bn(Gt),t===null?(r=Mb(),r===null&&(r=ht,s=Rb(),r.pooledCache=s,s.refCount++,s!==null&&(r.pooledCacheLanes|=n),r=s),e.memoizedState={parent:i,cache:r},Ib(e),os(e,Gt,r)):(t.lanes&n&&(xy(t,e),yc(e,null,null,n),mc()),r=t.memoizedState,s=e.memoizedState,r.parent!==i?(r={parent:i,cache:i},e.memoizedState=r,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=r),os(e,Gt,i)):(i=s.cache,os(e,Gt,i),i!==r.cache&&vy(e,[Gt],n,!0))),pn(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(ne(156,e.tag))}function vr(t){t.flags|=4}function Kg(t,e,n,i,r){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(r&335544128)===r)if(t.stateNode.complete)t.flags|=8192;else if(hA())t.flags|=8192;else throw pa=Ed,Ob}else t.flags&=-16777217}function i2(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!BA(e))if(hA())t.flags|=8192;else throw pa=Ed,Ob}function hf(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?pS():536870912,t.lanes|=e,Jo|=e)}function zl(t,e){if(!$e)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function bt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function bI(t,e,n){var i=e.pendingProps;switch(Cb(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(e),null;case 1:return bt(e),null;case 3:return n=e.stateNode,i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),Ur(Gt),Xo(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(qa(e)?vr(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zg())),bt(e),null;case 26:var r=e.type,s=e.memoizedState;return t===null?(vr(e),s!==null?(bt(e),i2(e,s)):(bt(e),Kg(e,r,null,i,n))):s?s!==t.memoizedState?(vr(e),bt(e),i2(e,s)):(bt(e),e.flags&=-16777217):(t=t.memoizedProps,t!==i&&vr(e),bt(e),Kg(e,r,t,i,n)),null;case 27:if(bd(e),n=vs.current,r=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&vr(e);else{if(!i){if(e.stateNode===null)throw Error(ne(166));return bt(e),null}t=cr.current,qa(e)?P1(e):(t=DA(r,i,n),e.stateNode=t,vr(e))}return bt(e),null;case 5:if(bd(e),r=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&vr(e);else{if(!i){if(e.stateNode===null)throw Error(ne(166));return bt(e),null}if(s=cr.current,qa(e))P1(e);else{var a=zd(vs.current);switch(s){case 1:s=a.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:s=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":s=a.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":s=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":s=a.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof i.is=="string"?a.createElement("select",{is:i.is}):a.createElement("select"),i.multiple?s.multiple=!0:i.size&&(s.size=i.size);break;default:s=typeof i.is=="string"?a.createElement(r,{is:i.is}):a.createElement(r)}}s[yn]=e,s[Vn]=i;e:for(a=e.child;a!==null;){if(a.tag===5||a.tag===6)s.appendChild(a.stateNode);else if(a.tag!==4&&a.tag!==27&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}e.stateNode=s;e:switch(vn(s,r,i),r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&vr(e)}}return bt(e),Kg(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==i&&vr(e);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ne(166));if(t=vs.current,qa(e)){if(t=e.stateNode,n=e.memoizedProps,i=null,r=_n,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}t[yn]=e,t=!!(t.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||MA(t.nodeValue,n)),t||Ps(e,!0)}else t=zd(t).createTextNode(i),t[yn]=e,e.stateNode=t}return bt(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(i=qa(e),n!==null){if(t===null){if(!i)throw Error(ne(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ne(557));t[yn]=e}else Sa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;bt(e),t=!1}else n=zg(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(qn(e),e):(qn(e),null);if(e.flags&128)throw Error(ne(558))}return bt(e),null;case 13:if(i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(r=qa(e),i!==null&&i.dehydrated!==null){if(t===null){if(!r)throw Error(ne(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(ne(317));r[yn]=e}else Sa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;bt(e),r=!1}else r=zg(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),r=!0;if(!r)return e.flags&256?(qn(e),e):(qn(e),null)}return qn(e),e.flags&128?(e.lanes=n,e):(n=i!==null,t=t!==null&&t.memoizedState!==null,n&&(i=e.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),hf(e,e.updateQueue),bt(e),null);case 4:return Xo(),t===null&&e0(e.stateNode.containerInfo),bt(e),null;case 10:return Ur(e.type),bt(e),null;case 19:if(fn(Vt),i=e.memoizedState,i===null)return bt(e),null;if(r=(e.flags&128)!==0,s=i.rendering,s===null)if(r)zl(i,!1);else{if(zt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Rd(t),s!==null){for(e.flags|=128,zl(i,!1),t=s.updateQueue,e.updateQueue=t,hf(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)HS(n,t),n=n.sibling;return mt(Vt,Vt.current&1|2),$e&&Cr(e,i.treeForkCount),e.child}t=t.sibling}i.tail!==null&&ei()>kd&&(e.flags|=128,r=!0,zl(i,!1),e.lanes=4194304)}else{if(!r)if(t=Rd(s),t!==null){if(e.flags|=128,r=!0,t=t.updateQueue,e.updateQueue=t,hf(e,t),zl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!$e)return bt(e),null}else 2*ei()-i.renderingStartTime>kd&&n!==536870912&&(e.flags|=128,r=!0,zl(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(t=i.last,t!==null?t.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ei(),t.sibling=null,n=Vt.current,mt(Vt,r?n&1|2:n&1),$e&&Cr(e,i.treeForkCount),t):(bt(e),null);case 22:case 23:return qn(e),Pb(),i=e.memoizedState!==null,t!==null?t.memoizedState!==null!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?n&536870912&&!(e.flags&128)&&(bt(e),e.subtreeFlags&6&&(e.flags|=8192)):bt(e),n=e.updateQueue,n!==null&&hf(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==n&&(e.flags|=2048),t!==null&&fn(ha),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),Ur(Gt),bt(e),null;case 25:return null;case 30:return null}throw Error(ne(156,e.tag))}function vI(t,e){switch(Cb(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ur(Gt),Xo(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return bd(e),null;case 31:if(e.memoizedState!==null){if(qn(e),e.alternate===null)throw Error(ne(340));Sa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(qn(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ne(340));Sa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return fn(Vt),null;case 4:return Xo(),null;case 10:return Ur(e.type),null;case 22:case 23:return qn(e),Pb(),t!==null&&fn(ha),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return Ur(Gt),null;case 25:return null;default:return null}}function Hw(t,e){switch(Cb(e),e.tag){case 3:Ur(Gt),Xo();break;case 26:case 27:case 5:bd(e);break;case 4:Xo();break;case 31:e.memoizedState!==null&&qn(e);break;case 13:qn(e);break;case 19:fn(Vt);break;case 10:Ur(e.type);break;case 22:case 23:qn(e),Pb(),t!==null&&fn(ha);break;case 24:Ur(Gt)}}function bu(t,e){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&t)===t){i=void 0;var s=n.create,a=n.inst;i=s(),a.destroy=i}n=n.next}while(n!==r)}}catch(o){st(e,e.return,o)}}function Ds(t,e,n){try{var i=e.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&t)===t){var a=i.inst,o=a.destroy;if(o!==void 0){a.destroy=void 0,r=e;var l=n,c=o;try{c()}catch(u){st(r,l,u)}}}i=i.next}while(i!==s)}}catch(u){st(e,e.return,u)}}function Ww(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{ew(e,n)}catch(i){st(t,t.return,i)}}}function Yw(t,e,n){n.props=Ca(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(i){st(t,e,i)}}function bc(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var i=t.stateNode;break;case 30:i=t.stateNode;break;default:i=t.stateNode}typeof n=="function"?t.refCleanup=n(i):n.current=i}}catch(r){st(t,e,r)}}function ar(t,e){var n=t.ref,i=t.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){st(t,e,r)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){st(t,e,r)}else n.current=null}function Xw(t){var e=t.type,n=t.memoizedProps,i=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){st(t,t.return,r)}}function Zg(t,e,n){try{var i=t.stateNode;$I(i,t.type,n,e),i[Vn]=e}catch(r){st(t,t.return,r)}}function qw(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Vs(t.type)||t.tag===4}function Gg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||qw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Vs(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Dy(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Nr));else if(i!==4&&(i===27&&Vs(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(Dy(t,e,n),t=t.sibling;t!==null;)Dy(t,e,n),t=t.sibling}function Dd(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(i===27&&Vs(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(Dd(t,e,n),t=t.sibling;t!==null;)Dd(t,e,n),t=t.sibling}function Kw(t){var e=t.stateNode,n=t.memoizedProps;try{for(var i=t.type,r=e.attributes;r.length;)e.removeAttributeNode(r[0]);vn(e,i,n),e[yn]=t,e[Vn]=n}catch(s){st(t,t.return,s)}}var Ir=!1,Zt=!1,Qg=!1,r2=typeof WeakSet=="function"?WeakSet:Set,cn=null;function TI(t,e){if(t=t.containerInfo,zy=Hd,t=BS(t),xb(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,c=0,u=0,f=t,d=null;t:for(;;){for(var p;f!==n||r!==0&&f.nodeType!==3||(o=a+r),f!==s||i!==0&&f.nodeType!==3||(l=a+i),f.nodeType===3&&(a+=f.nodeValue.length),(p=f.firstChild)!==null;)d=f,f=p;for(;;){if(f===t)break t;if(d===n&&++c===r&&(o=a),d===s&&++u===i&&(l=a),(p=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=p}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Vy={focusedElem:t,selectionRange:n},Hd=!1,cn=e;cn!==null;)if(e=cn,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,cn=t;else for(;cn!==null;){switch(e=cn,s=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)r=t[n],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&s!==null){t=void 0,n=e,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var m=Ca(n.type,r);t=i.getSnapshotBeforeUpdate(m,s),i.__reactInternalSnapshotBeforeUpdate=t}catch(S){st(n,n.return,S)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)jy(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":jy(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(ne(163))}if(t=e.sibling,t!==null){t.return=e.return,cn=t;break}cn=e.return}}function Zw(t,e,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:xr(t,n),i&4&&bu(5,n);break;case 1:if(xr(t,n),i&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(a){st(n,n.return,a)}else{var r=Ca(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(r,e,t.__reactInternalSnapshotBeforeUpdate)}catch(a){st(n,n.return,a)}}i&64&&Ww(n),i&512&&bc(n,n.return);break;case 3:if(xr(t,n),i&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{ew(t,e)}catch(a){st(n,n.return,a)}}break;case 27:e===null&&i&4&&Kw(n);case 26:case 5:xr(t,n),e===null&&i&4&&Xw(n),i&512&&bc(n,n.return);break;case 12:xr(t,n);break;case 31:xr(t,n),i&4&&Jw(t,n);break;case 13:xr(t,n),i&4&&eA(t,n),i&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=OI.bind(null,n),ZI(t,n))));break;case 22:if(i=n.memoizedState!==null||Ir,!i){e=e!==null&&e.memoizedState!==null||Zt,r=Ir;var s=Zt;Ir=i,(Zt=e)&&!s?Er(t,n,(n.subtreeFlags&8772)!==0):xr(t,n),Ir=r,Zt=s}break;case 30:break;default:xr(t,n)}}function Gw(t){var e=t.alternate;e!==null&&(t.alternate=null,Gw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&mb(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Et=null,Un=!1;function Tr(t,e,n){for(n=n.child;n!==null;)Qw(t,e,n),n=n.sibling}function Qw(t,e,n){if(ti&&typeof ti.onCommitFiberUnmount=="function")try{ti.onCommitFiberUnmount(du,n)}catch{}switch(n.tag){case 26:Zt||ar(n,e),Tr(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Zt||ar(n,e);var i=Et,r=Un;Vs(n.type)&&(Et=n.stateNode,Un=!1),Tr(t,e,n),Sc(n.stateNode),Et=i,Un=r;break;case 5:Zt||ar(n,e);case 6:if(i=Et,r=Un,Et=null,Tr(t,e,n),Et=i,Un=r,Et!==null)if(Un)try{(Et.nodeType===9?Et.body:Et.nodeName==="HTML"?Et.ownerDocument.body:Et).removeChild(n.stateNode)}catch(s){st(n,e,s)}else try{Et.removeChild(n.stateNode)}catch(s){st(n,e,s)}break;case 18:Et!==null&&(Un?(t=Et,y2(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),il(t)):y2(Et,n.stateNode));break;case 4:i=Et,r=Un,Et=n.stateNode.containerInfo,Un=!0,Tr(t,e,n),Et=i,Un=r;break;case 0:case 11:case 14:case 15:Ds(2,n,e),Zt||Ds(4,n,e),Tr(t,e,n);break;case 1:Zt||(ar(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"&&Yw(n,e,i)),Tr(t,e,n);break;case 21:Tr(t,e,n);break;case 22:Zt=(i=Zt)||n.memoizedState!==null,Tr(t,e,n),Zt=i;break;default:Tr(t,e,n)}}function Jw(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{il(t)}catch(n){st(e,e.return,n)}}}function eA(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{il(t)}catch(n){st(e,e.return,n)}}function xI(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new r2),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new r2),e;default:throw Error(ne(435,t.tag))}}function pf(t,e){var n=xI(t);e.forEach(function(i){if(!n.has(i)){n.add(i);var r=II.bind(null,t,i);i.then(r,r)}})}function Bn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 27:if(Vs(o.type)){Et=o.stateNode,Un=!1;break e}break;case 5:Et=o.stateNode,Un=!1;break e;case 3:case 4:Et=o.stateNode.containerInfo,Un=!0;break e}o=o.return}if(Et===null)throw Error(ne(160));Qw(s,a,r),Et=null,Un=!1,s=r.alternate,s!==null&&(s.return=null),r.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)tA(e,t),e=e.sibling}var ji=null;function tA(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Bn(e,t),Ln(t),i&4&&(Ds(3,t,t.return),bu(3,t),Ds(5,t,t.return));break;case 1:Bn(e,t),Ln(t),i&512&&(Zt||n===null||ar(n,n.return)),i&64&&Ir&&(t=t.updateQueue,t!==null&&(i=t.callbacks,i!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=ji;if(Bn(e,t),Ln(t),i&512&&(Zt||n===null||ar(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=t.memoizedState,n===null)if(i===null)if(t.stateNode===null){e:{i=t.type,n=t.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":s=r.getElementsByTagName("title")[0],(!s||s[gu]||s[yn]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),vn(s,i,n),s[yn]=t,un(s),i=s;break e;case"link":var a=w2("link","href",r).get(i+(n.href||""));if(a){for(var o=0;o<a.length;o++)if(s=a[o],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(o,1);break t}}s=r.createElement(i),vn(s,i,n),r.head.appendChild(s);break;case"meta":if(a=w2("meta","content",r).get(i+(n.content||""))){for(o=0;o<a.length;o++)if(s=a[o],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(o,1);break t}}s=r.createElement(i),vn(s,i,n),r.head.appendChild(s);break;default:throw Error(ne(468,i))}s[yn]=t,un(s),i=s}t.stateNode=i}else A2(r,t.type,t.stateNode);else t.stateNode=S2(r,i,t.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?A2(r,t.type,t.stateNode):S2(r,i,t.memoizedProps)):i===null&&t.stateNode!==null&&Zg(t,t.memoizedProps,n.memoizedProps)}break;case 27:Bn(e,t),Ln(t),i&512&&(Zt||n===null||ar(n,n.return)),n!==null&&i&4&&Zg(t,t.memoizedProps,n.memoizedProps);break;case 5:if(Bn(e,t),Ln(t),i&512&&(Zt||n===null||ar(n,n.return)),t.flags&32){r=t.stateNode;try{Ko(r,"")}catch(m){st(t,t.return,m)}}i&4&&t.stateNode!=null&&(r=t.memoizedProps,Zg(t,r,n!==null?n.memoizedProps:r)),i&1024&&(Qg=!0);break;case 6:if(Bn(e,t),Ln(t),i&4){if(t.stateNode===null)throw Error(ne(162));i=t.memoizedProps,n=t.stateNode;try{n.nodeValue=i}catch(m){st(t,t.return,m)}}break;case 3:if(td=null,r=ji,ji=Vd(e.containerInfo),Bn(e,t),ji=r,Ln(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{il(e.containerInfo)}catch(m){st(t,t.return,m)}Qg&&(Qg=!1,nA(t));break;case 4:i=ji,ji=Vd(t.stateNode.containerInfo),Bn(e,t),Ln(t),ji=i;break;case 12:Bn(e,t),Ln(t);break;case 31:Bn(e,t),Ln(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,pf(t,i)));break;case 13:Bn(e,t),Ln(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(sp=ei()),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,pf(t,i)));break;case 22:r=t.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,c=Ir,u=Zt;if(Ir=c||r,Zt=u||l,Bn(e,t),Zt=u,Ir=c,Ln(t),i&8192)e:for(e=t.stateNode,e._visibility=r?e._visibility&-2:e._visibility|1,r&&(n===null||l||Ir||Zt||ia(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){l=n=e;try{if(s=l.stateNode,r)a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{o=l.stateNode;var f=l.memoizedProps.style,d=f!=null&&f.hasOwnProperty("display")?f.display:null;o.style.display=d==null||typeof d=="boolean"?"":(""+d).trim()}}catch(m){st(l,l.return,m)}}}else if(e.tag===6){if(n===null){l=e;try{l.stateNode.nodeValue=r?"":l.memoizedProps}catch(m){st(l,l.return,m)}}}else if(e.tag===18){if(n===null){l=e;try{var p=l.stateNode;r?_2(p,!0):_2(l.stateNode,!1)}catch(m){st(l,l.return,m)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}i&4&&(i=t.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,pf(t,n))));break;case 19:Bn(e,t),Ln(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,pf(t,i)));break;case 30:break;case 21:break;default:Bn(e,t),Ln(t)}}function Ln(t){var e=t.flags;if(e&2){try{for(var n,i=t.return;i!==null;){if(qw(i)){n=i;break}i=i.return}if(n==null)throw Error(ne(160));switch(n.tag){case 27:var r=n.stateNode,s=Gg(t);Dd(t,s,r);break;case 5:var a=n.stateNode;n.flags&32&&(Ko(a,""),n.flags&=-33);var o=Gg(t);Dd(t,o,a);break;case 3:case 4:var l=n.stateNode.containerInfo,c=Gg(t);Dy(t,c,l);break;default:throw Error(ne(161))}}catch(u){st(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function nA(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;nA(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function xr(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)Zw(t,e.alternate,e),e=e.sibling}function ia(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Ds(4,e,e.return),ia(e);break;case 1:ar(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&Yw(e,e.return,n),ia(e);break;case 27:Sc(e.stateNode);case 26:case 5:ar(e,e.return),ia(e);break;case 22:e.memoizedState===null&&ia(e);break;case 30:ia(e);break;default:ia(e)}t=t.sibling}}function Er(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var i=e.alternate,r=t,s=e,a=s.flags;switch(s.tag){case 0:case 11:case 15:Er(r,s,n),bu(4,s);break;case 1:if(Er(r,s,n),i=s,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(c){st(i,i.return,c)}if(i=s,r=i.updateQueue,r!==null){var o=i.stateNode;try{var l=r.shared.hiddenCallbacks;if(l!==null)for(r.shared.hiddenCallbacks=null,r=0;r<l.length;r++)JS(l[r],o)}catch(c){st(i,i.return,c)}}n&&a&64&&Ww(s),bc(s,s.return);break;case 27:Kw(s);case 26:case 5:Er(r,s,n),n&&i===null&&a&4&&Xw(s),bc(s,s.return);break;case 12:Er(r,s,n);break;case 31:Er(r,s,n),n&&a&4&&Jw(r,s);break;case 13:Er(r,s,n),n&&a&4&&eA(r,s);break;case 22:s.memoizedState===null&&Er(r,s,n),bc(s,s.return);break;case 30:break;default:Er(r,s,n)}e=e.sibling}}function qb(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&yu(n))}function Kb(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&yu(t))}function Ui(t,e,n,i){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)iA(t,e,n,i),e=e.sibling}function iA(t,e,n,i){var r=e.flags;switch(e.tag){case 0:case 11:case 15:Ui(t,e,n,i),r&2048&&bu(9,e);break;case 1:Ui(t,e,n,i);break;case 3:Ui(t,e,n,i),r&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&yu(t)));break;case 12:if(r&2048){Ui(t,e,n,i),t=e.stateNode;try{var s=e.memoizedProps,a=s.id,o=s.onPostCommit;typeof o=="function"&&o(a,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(l){st(e,e.return,l)}}else Ui(t,e,n,i);break;case 31:Ui(t,e,n,i);break;case 13:Ui(t,e,n,i);break;case 23:break;case 22:s=e.stateNode,a=e.alternate,e.memoizedState!==null?s._visibility&2?Ui(t,e,n,i):vc(t,e):s._visibility&2?Ui(t,e,n,i):(s._visibility|=2,uo(t,e,n,i,(e.subtreeFlags&10256)!==0||!1)),r&2048&&qb(a,e);break;case 24:Ui(t,e,n,i),r&2048&&Kb(e.alternate,e);break;default:Ui(t,e,n,i)}}function uo(t,e,n,i,r){for(r=r&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var s=t,a=e,o=n,l=i,c=a.flags;switch(a.tag){case 0:case 11:case 15:uo(s,a,o,l,r),bu(8,a);break;case 23:break;case 22:var u=a.stateNode;a.memoizedState!==null?u._visibility&2?uo(s,a,o,l,r):vc(s,a):(u._visibility|=2,uo(s,a,o,l,r)),r&&c&2048&&qb(a.alternate,a);break;case 24:uo(s,a,o,l,r),r&&c&2048&&Kb(a.alternate,a);break;default:uo(s,a,o,l,r)}e=e.sibling}}function vc(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,i=e,r=i.flags;switch(i.tag){case 22:vc(n,i),r&2048&&qb(i.alternate,i);break;case 24:vc(n,i),r&2048&&Kb(i.alternate,i);break;default:vc(n,i)}e=e.sibling}}var tc=8192;function Ka(t,e,n){if(t.subtreeFlags&tc)for(t=t.child;t!==null;)rA(t,e,n),t=t.sibling}function rA(t,e,n){switch(t.tag){case 26:Ka(t,e,n),t.flags&tc&&t.memoizedState!==null&&lP(n,ji,t.memoizedState,t.memoizedProps);break;case 5:Ka(t,e,n);break;case 3:case 4:var i=ji;ji=Vd(t.stateNode.containerInfo),Ka(t,e,n),ji=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=tc,tc=16777216,Ka(t,e,n),tc=i):Ka(t,e,n));break;default:Ka(t,e,n)}}function sA(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Vl(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];cn=i,oA(i,t)}sA(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)aA(t),t=t.sibling}function aA(t){switch(t.tag){case 0:case 11:case 15:Vl(t),t.flags&2048&&Ds(9,t,t.return);break;case 3:Vl(t);break;case 12:Vl(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Jf(t)):Vl(t);break;default:Vl(t)}}function Jf(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];cn=i,oA(i,t)}sA(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Ds(8,e,e.return),Jf(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,Jf(e));break;default:Jf(e)}t=t.sibling}}function oA(t,e){for(;cn!==null;){var n=cn;switch(n.tag){case 0:case 11:case 15:Ds(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:yu(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,cn=i;else e:for(n=t;cn!==null;){i=cn;var r=i.sibling,s=i.return;if(Gw(i),i===n){cn=null;break e}if(r!==null){r.return=s,cn=r;break e}cn=s}}}var SI={getCacheForType:function(t){var e=bn(Gt),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return bn(Gt).controller.signal}},wI=typeof WeakMap=="function"?WeakMap:Map,Ge=0,ht=null,Ue=null,Ve=0,rt=0,Yn=null,hs=!1,xl=!1,Zb=!1,Hr=0,zt=0,ks=0,ga=0,Gb=0,Qn=0,Jo=0,Tc=null,Fn=null,ky=!1,sp=0,lA=0,kd=1/0,Nd=null,ws=null,an=0,As=null,el=null,Fr=0,Ny=0,By=null,cA=null,xc=0,Ly=null;function ii(){return Ge&2&&Ve!==0?Ve&-Ve:xe.T!==null?Jb():_S()}function uA(){if(Qn===0)if(!(Ve&536870912)||$e){var t=af;af<<=1,!(af&3932160)&&(af=262144),Qn=t}else Qn=536870912;return t=oi.current,t!==null&&(t.flags|=32),Qn}function zn(t,e,n){(t===ht&&(rt===2||rt===9)||t.cancelPendingCommit!==null)&&(tl(t,0),ps(t,Ve,Qn,!1)),pu(t,n),(!(Ge&2)||t!==ht)&&(t===ht&&(!(Ge&2)&&(ga|=n),zt===4&&ps(t,Ve,Qn,!1)),pr(t))}function fA(t,e,n){if(Ge&6)throw Error(ne(327));var i=!n&&(e&127)===0&&(e&t.expiredLanes)===0||hu(t,e),r=i?CI(t,e):Jg(t,e,!0),s=i;do{if(r===0){xl&&!i&&ps(t,e,0,!1);break}else{if(n=t.current.alternate,s&&!AI(n)){r=Jg(t,e,!1),s=!1;continue}if(r===2){if(s=e,t.errorRecoveryDisabledLanes&s)var a=0;else a=t.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){e=a;e:{var o=t;r=Tc;var l=o.current.memoizedState.isDehydrated;if(l&&(tl(o,a).flags|=256),a=Jg(o,a,!1),a!==2){if(Zb&&!l){o.errorRecoveryDisabledLanes|=s,ga|=s,r=4;break e}s=Fn,Fn=r,s!==null&&(Fn===null?Fn=s:Fn.push.apply(Fn,s))}r=a}if(s=!1,r!==2)continue}}if(r===1){tl(t,0),ps(t,e,0,!0);break}e:{switch(i=t,s=r,s){case 0:case 1:throw Error(ne(345));case 4:if((e&4194048)!==e)break;case 6:ps(i,e,Qn,!hs);break e;case 2:Fn=null;break;case 3:case 5:break;default:throw Error(ne(329))}if((e&62914560)===e&&(r=sp+300-ei(),10<r)){if(ps(i,e,Qn,!hs),qh(i,0,!0)!==0)break e;Fr=e,i.timeoutHandle=IA(s2.bind(null,i,n,Fn,Nd,ky,e,Qn,ga,Jo,hs,s,"Throttled",-0,0),r);break e}s2(i,n,Fn,Nd,ky,e,Qn,ga,Jo,hs,s,null,-0,0)}}break}while(!0);pr(t)}function s2(t,e,n,i,r,s,a,o,l,c,u,f,d,p){if(t.timeoutHandle=-1,f=e.subtreeFlags,f&8192||(f&16785408)===16785408){f={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Nr},rA(e,s,f);var m=(s&62914560)===s?sp-ei():(s&4194048)===s?lA-ei():0;if(m=cP(f,m),m!==null){Fr=s,t.cancelPendingCommit=m(o2.bind(null,t,e,s,n,i,r,a,o,l,u,f,null,d,p)),ps(t,s,a,!c);return}}o2(t,e,s,n,i,r,a,o,l)}function AI(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!ai(s(),r))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ps(t,e,n,i){e&=~Gb,e&=~ga,t.suspendedLanes|=e,t.pingedLanes&=~e,i&&(t.warmLanes|=e),i=t.expirationTimes;for(var r=e;0<r;){var s=31-ni(r),a=1<<s;i[s]=-1,r&=~a}n!==0&&gS(t,n,e)}function ap(){return Ge&6?!0:(vu(0),!1)}function Qb(){if(Ue!==null){if(rt===0)var t=Ue.return;else t=Ue,Br=za=null,Lb(t),Bo=null,jc=0,t=Ue;for(;t!==null;)Hw(t.alternate,t),t=t.return;Ue=null}}function tl(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,WI(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),Fr=0,Qb(),ht=t,Ue=n=Lr(t.current,null),Ve=e,rt=0,Yn=null,hs=!1,xl=hu(t,e),Zb=!1,Jo=Qn=Gb=ga=ks=zt=0,Fn=Tc=null,ky=!1,e&8&&(e|=e&32);var i=t.entangledLanes;if(i!==0)for(t=t.entanglements,i&=e;0<i;){var r=31-ni(i),s=1<<r;e|=t[r],i&=~s}return Hr=e,Qh(),n}function dA(t,e){Ie=null,xe.H=Wc,e===Tl||e===ep?(e=L1(),rt=3):e===Ob?(e=L1(),rt=4):rt=e===Yb?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Yn=e,Ue===null&&(zt=1,Id(t,vi(e,t.current)))}function hA(){var t=oi.current;return t===null?!0:(Ve&4194048)===Ve?Ai===null:(Ve&62914560)===Ve||Ve&536870912?t===Ai:!1}function pA(){var t=xe.H;return xe.H=Wc,t===null?Wc:t}function gA(){var t=xe.A;return xe.A=SI,t}function Bd(){zt=4,hs||(Ve&4194048)!==Ve&&oi.current!==null||(xl=!0),!(ks&134217727)&&!(ga&134217727)||ht===null||ps(ht,Ve,Qn,!1)}function Jg(t,e,n){var i=Ge;Ge|=2;var r=pA(),s=gA();(ht!==t||Ve!==e)&&(Nd=null,tl(t,e)),e=!1;var a=zt;e:do try{if(rt!==0&&Ue!==null){var o=Ue,l=Yn;switch(rt){case 8:Qb(),a=6;break e;case 3:case 2:case 9:case 6:oi.current===null&&(e=!0);var c=rt;if(rt=0,Yn=null,Eo(t,o,l,c),n&&xl){a=0;break e}break;default:c=rt,rt=0,Yn=null,Eo(t,o,l,c)}}EI(),a=zt;break}catch(u){dA(t,u)}while(!0);return e&&t.shellSuspendCounter++,Br=za=null,Ge=i,xe.H=r,xe.A=s,Ue===null&&(ht=null,Ve=0,Qh()),a}function EI(){for(;Ue!==null;)mA(Ue)}function CI(t,e){var n=Ge;Ge|=2;var i=pA(),r=gA();ht!==t||Ve!==e?(Nd=null,kd=ei()+500,tl(t,e)):xl=hu(t,e);e:do try{if(rt!==0&&Ue!==null){e=Ue;var s=Yn;t:switch(rt){case 1:rt=0,Yn=null,Eo(t,e,s,1);break;case 2:case 9:if(B1(s)){rt=0,Yn=null,a2(e);break}e=function(){rt!==2&&rt!==9||ht!==t||(rt=7),pr(t)},s.then(e,e);break e;case 3:rt=7;break e;case 4:rt=5;break e;case 7:B1(s)?(rt=0,Yn=null,a2(e)):(rt=0,Yn=null,Eo(t,e,s,7));break;case 5:var a=null;switch(Ue.tag){case 26:a=Ue.memoizedState;case 5:case 27:var o=Ue;if(a?BA(a):o.stateNode.complete){rt=0,Yn=null;var l=o.sibling;if(l!==null)Ue=l;else{var c=o.return;c!==null?(Ue=c,op(c)):Ue=null}break t}}rt=0,Yn=null,Eo(t,e,s,5);break;case 6:rt=0,Yn=null,Eo(t,e,s,6);break;case 8:Qb(),zt=6;break e;default:throw Error(ne(462))}}RI();break}catch(u){dA(t,u)}while(!0);return Br=za=null,xe.H=i,xe.A=r,Ge=n,Ue!==null?0:(ht=null,Ve=0,Qh(),zt)}function RI(){for(;Ue!==null&&!G4();)mA(Ue)}function mA(t){var e=jw(t.alternate,t,Hr);t.memoizedProps=t.pendingProps,e===null?op(t):Ue=e}function a2(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=J1(n,e,e.pendingProps,e.type,void 0,Ve);break;case 11:e=J1(n,e,e.pendingProps,e.type.render,e.ref,Ve);break;case 5:Lb(e);default:Hw(n,e),e=Ue=HS(e,Hr),e=jw(n,e,Hr)}t.memoizedProps=t.pendingProps,e===null?op(t):Ue=e}function Eo(t,e,n,i){Br=za=null,Lb(e),Bo=null,jc=0;var r=e.return;try{if(mI(t,r,e,n,Ve)){zt=1,Id(t,vi(n,t.current)),Ue=null;return}}catch(s){if(r!==null)throw Ue=r,s;zt=1,Id(t,vi(n,t.current)),Ue=null;return}e.flags&32768?($e||i===1?t=!0:xl||Ve&536870912?t=!1:(hs=t=!0,(i===2||i===9||i===3||i===6)&&(i=oi.current,i!==null&&i.tag===13&&(i.flags|=16384))),yA(e,t)):op(e)}function op(t){var e=t;do{if(e.flags&32768){yA(e,hs);return}t=e.return;var n=bI(e.alternate,e,Hr);if(n!==null){Ue=n;return}if(e=e.sibling,e!==null){Ue=e;return}Ue=e=t}while(e!==null);zt===0&&(zt=5)}function yA(t,e){do{var n=vI(t.alternate,t);if(n!==null){n.flags&=32767,Ue=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){Ue=t;return}Ue=t=n}while(t!==null);zt=6,Ue=null}function o2(t,e,n,i,r,s,a,o,l){t.cancelPendingCommit=null;do lp();while(an!==0);if(Ge&6)throw Error(ne(327));if(e!==null){if(e===t.current)throw Error(ne(177));if(s=e.lanes|e.childLanes,s|=Sb,oO(t,n,s,a,o,l),t===ht&&(Ue=ht=null,Ve=0),el=e,As=t,Fr=n,Ny=s,By=r,cA=i,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,PI(vd,function(){return xA(),null})):(t.callbackNode=null,t.callbackPriority=0),i=(e.flags&13878)!==0,e.subtreeFlags&13878||i){i=xe.T,xe.T=null,r=Qe.p,Qe.p=2,a=Ge,Ge|=4;try{TI(t,e,n)}finally{Ge=a,Qe.p=r,xe.T=i}}an=1,_A(),bA(),vA()}}function _A(){if(an===1){an=0;var t=As,e=el,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=xe.T,xe.T=null;var i=Qe.p;Qe.p=2;var r=Ge;Ge|=4;try{tA(e,t);var s=Vy,a=BS(t.containerInfo),o=s.focusedElem,l=s.selectionRange;if(a!==o&&o&&o.ownerDocument&&NS(o.ownerDocument.documentElement,o)){if(l!==null&&xb(o)){var c=l.start,u=l.end;if(u===void 0&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var f=o.ownerDocument||document,d=f&&f.defaultView||window;if(d.getSelection){var p=d.getSelection(),m=o.textContent.length,S=Math.min(l.start,m),v=l.end===void 0?S:Math.min(l.end,m);!p.extend&&S>v&&(a=v,v=S,S=a);var y=M1(o,S),_=M1(o,v);if(y&&_&&(p.rangeCount!==1||p.anchorNode!==y.node||p.anchorOffset!==y.offset||p.focusNode!==_.node||p.focusOffset!==_.offset)){var T=f.createRange();T.setStart(y.node,y.offset),p.removeAllRanges(),S>v?(p.addRange(T),p.extend(_.node,_.offset)):(T.setEnd(_.node,_.offset),p.addRange(T))}}}}for(f=[],p=o;p=p.parentNode;)p.nodeType===1&&f.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<f.length;o++){var b=f[o];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}Hd=!!zy,Vy=zy=null}finally{Ge=r,Qe.p=i,xe.T=n}}t.current=e,an=2}}function bA(){if(an===2){an=0;var t=As,e=el,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=xe.T,xe.T=null;var i=Qe.p;Qe.p=2;var r=Ge;Ge|=4;try{Zw(t,e.alternate,e)}finally{Ge=r,Qe.p=i,xe.T=n}}an=3}}function vA(){if(an===4||an===3){an=0,Q4();var t=As,e=el,n=Fr,i=cA;e.subtreeFlags&10256||e.flags&10256?an=5:(an=0,el=As=null,TA(t,t.pendingLanes));var r=t.pendingLanes;if(r===0&&(ws=null),gb(n),e=e.stateNode,ti&&typeof ti.onCommitFiberRoot=="function")try{ti.onCommitFiberRoot(du,e,void 0,(e.current.flags&128)===128)}catch{}if(i!==null){e=xe.T,r=Qe.p,Qe.p=2,xe.T=null;try{for(var s=t.onRecoverableError,a=0;a<i.length;a++){var o=i[a];s(o.value,{componentStack:o.stack})}}finally{xe.T=e,Qe.p=r}}Fr&3&&lp(),pr(t),r=t.pendingLanes,n&261930&&r&42?t===Ly?xc++:(xc=0,Ly=t):xc=0,vu(0)}}function TA(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,yu(e)))}function lp(){return _A(),bA(),vA(),xA()}function xA(){if(an!==5)return!1;var t=As,e=Ny;Ny=0;var n=gb(Fr),i=xe.T,r=Qe.p;try{Qe.p=32>n?32:n,xe.T=null,n=By,By=null;var s=As,a=Fr;if(an=0,el=As=null,Fr=0,Ge&6)throw Error(ne(331));var o=Ge;if(Ge|=4,aA(s.current),iA(s,s.current,a,n),Ge=o,vu(0,!1),ti&&typeof ti.onPostCommitFiberRoot=="function")try{ti.onPostCommitFiberRoot(du,s)}catch{}return!0}finally{Qe.p=r,xe.T=i,TA(t,e)}}function l2(t,e,n){e=vi(n,e),e=Oy(t.stateNode,e,2),t=Ss(t,e,2),t!==null&&(pu(t,2),pr(t))}function st(t,e,n){if(t.tag===3)l2(t,t,n);else for(;e!==null;){if(e.tag===3){l2(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ws===null||!ws.has(i))){t=vi(n,t),n=Lw(2),i=Ss(e,n,2),i!==null&&(Uw(n,i,e,t),pu(i,2),pr(i));break}}e=e.return}}function em(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new wI;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(Zb=!0,r.add(n),t=MI.bind(null,t,e,n),e.then(t,t))}function MI(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,ht===t&&(Ve&n)===n&&(zt===4||zt===3&&(Ve&62914560)===Ve&&300>ei()-sp?!(Ge&2)&&tl(t,0):Gb|=n,Jo===Ve&&(Jo=0)),pr(t)}function SA(t,e){e===0&&(e=pS()),t=Fa(t,e),t!==null&&(pu(t,e),pr(t))}function OI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),SA(t,n)}function II(t,e){var n=0;switch(t.tag){case 31:case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(ne(314))}i!==null&&i.delete(e),SA(t,n)}function PI(t,e){return hb(t,e)}var Ld=null,fo=null,Uy=!1,Ud=!1,tm=!1,gs=0;function pr(t){t!==fo&&t.next===null&&(fo===null?Ld=fo=t:fo=fo.next=t),Ud=!0,Uy||(Uy=!0,kI())}function vu(t,e){if(!tm&&Ud){tm=!0;do for(var n=!1,i=Ld;i!==null;){if(t!==0){var r=i.pendingLanes;if(r===0)var s=0;else{var a=i.suspendedLanes,o=i.pingedLanes;s=(1<<31-ni(42|t)+1)-1,s&=r&~(a&~o),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,c2(i,s))}else s=Ve,s=qh(i,i===ht?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(s&3)||hu(i,s)||(n=!0,c2(i,s));i=i.next}while(n);tm=!1}}function DI(){wA()}function wA(){Ud=Uy=!1;var t=0;gs!==0&&HI()&&(t=gs);for(var e=ei(),n=null,i=Ld;i!==null;){var r=i.next,s=AA(i,e);s===0?(i.next=null,n===null?Ld=r:n.next=r,r===null&&(fo=n)):(n=i,(t!==0||s&3)&&(Ud=!0)),i=r}an!==0&&an!==5||vu(t),gs!==0&&(gs=0)}function AA(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes&-62914561;0<s;){var a=31-ni(s),o=1<<a,l=r[a];l===-1?(!(o&n)||o&i)&&(r[a]=aO(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}if(e=ht,n=Ve,n=qh(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i=t.callbackNode,n===0||t===e&&(rt===2||rt===9)||t.cancelPendingCommit!==null)return i!==null&&i!==null&&Mg(i),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||hu(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(i!==null&&Mg(i),gb(n)){case 2:case 8:n=dS;break;case 32:n=vd;break;case 268435456:n=hS;break;default:n=vd}return i=EA.bind(null,t),n=hb(n,i),t.callbackPriority=e,t.callbackNode=n,e}return i!==null&&i!==null&&Mg(i),t.callbackPriority=2,t.callbackNode=null,2}function EA(t,e){if(an!==0&&an!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(lp()&&t.callbackNode!==n)return null;var i=Ve;return i=qh(t,t===ht?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i===0?null:(fA(t,i,e),AA(t,ei()),t.callbackNode!=null&&t.callbackNode===n?EA.bind(null,t):null)}function c2(t,e){if(lp())return null;fA(t,e,!0)}function kI(){YI(function(){Ge&6?hb(fS,DI):wA()})}function Jb(){if(gs===0){var t=Zo;t===0&&(t=sf,sf<<=1,!(sf&261888)&&(sf=256)),gs=t}return gs}function u2(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Hf(""+t)}function f2(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function NI(t,e,n,i,r){if(e==="submit"&&n&&n.stateNode===r){var s=u2((r[Vn]||null).action),a=i.submitter;a&&(e=(e=a[Vn]||null)?u2(e.formAction):a.getAttribute("formAction"),e!==null&&(s=e,a=null));var o=new Kh("action","action",null,i,r);t.push({event:o,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(gs!==0){var l=a?f2(r,a):new FormData(r);Ry(n,{pending:!0,data:l,method:r.method,action:s},null,l)}}else typeof s=="function"&&(o.preventDefault(),l=a?f2(r,a):new FormData(r),Ry(n,{pending:!0,data:l,method:r.method,action:s},s,l))},currentTarget:r}]})}}for(var nm=0;nm<my.length;nm++){var im=my[nm],BI=im.toLowerCase(),LI=im[0].toUpperCase()+im.slice(1);Yi(BI,"on"+LI)}Yi(US,"onAnimationEnd");Yi(FS,"onAnimationIteration");Yi(zS,"onAnimationStart");Yi("dblclick","onDoubleClick");Yi("focusin","onFocus");Yi("focusout","onBlur");Yi(JO,"onTransitionRun");Yi(eI,"onTransitionStart");Yi(tI,"onTransitionCancel");Yi(VS,"onTransitionEnd");qo("onMouseEnter",["mouseout","mouseover"]);qo("onMouseLeave",["mouseout","mouseover"]);qo("onPointerEnter",["pointerout","pointerover"]);qo("onPointerLeave",["pointerout","pointerover"]);Ba("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ba("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ba("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ba("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ba("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ba("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Yc));function CA(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break e;s=o,r.currentTarget=c;try{s(r)}catch(u){xd(u)}r.currentTarget=null,s=l}else for(a=0;a<i.length;a++){if(o=i[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break e;s=o,r.currentTarget=c;try{s(r)}catch(u){xd(u)}r.currentTarget=null,s=l}}}}function Le(t,e){var n=e[ly];n===void 0&&(n=e[ly]=new Set);var i=t+"__bubble";n.has(i)||(RA(e,t,2,!1),n.add(i))}function rm(t,e,n){var i=0;e&&(i|=4),RA(n,t,i,e)}var gf="_reactListening"+Math.random().toString(36).slice(2);function e0(t){if(!t[gf]){t[gf]=!0,bS.forEach(function(n){n!=="selectionchange"&&(UI.has(n)||rm(n,!1,t),rm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[gf]||(e[gf]=!0,rm("selectionchange",!1,e))}}function RA(t,e,n,i){switch(VA(e)){case 2:var r=dP;break;case 8:r=hP;break;default:r=r0}n=r.bind(null,e,n,t),r=void 0,!hy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function sm(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var o=i.stateNode.containerInfo;if(o===r)break;if(a===4)for(a=i.return;a!==null;){var l=a.tag;if((l===3||l===4)&&a.stateNode.containerInfo===r)return;a=a.return}for(;o!==null;){if(a=yo(o),a===null)return;if(l=a.tag,l===5||l===6||l===26||l===27){i=s=a;continue e}o=o.parentNode}}i=i.return}CS(function(){var c=s,u=_b(n),f=[];e:{var d=$S.get(t);if(d!==void 0){var p=Kh,m=t;switch(t){case"keypress":if(Yf(n)===0)break e;case"keydown":case"keyup":p=IO;break;case"focusin":m="focus",p=kg;break;case"focusout":m="blur",p=kg;break;case"beforeblur":case"afterblur":p=kg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=b1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=bO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=kO;break;case US:case FS:case zS:p=xO;break;case VS:p=BO;break;case"scroll":case"scrollend":p=yO;break;case"wheel":p=UO;break;case"copy":case"cut":case"paste":p=wO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=T1;break;case"toggle":case"beforetoggle":p=zO}var S=(e&4)!==0,v=!S&&(t==="scroll"||t==="scrollend"),y=S?d!==null?d+"Capture":null:d;S=[];for(var _=c,T;_!==null;){var b=_;if(T=b.stateNode,b=b.tag,b!==5&&b!==26&&b!==27||T===null||y===null||(b=Uc(_,y),b!=null&&S.push(Xc(_,b,T))),v)break;_=_.return}0<S.length&&(d=new p(d,m,null,n,u),f.push({event:d,listeners:S}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",d&&n!==dy&&(m=n.relatedTarget||n.fromElement)&&(yo(m)||m[_l]))break e;if((p||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=c,m=m?yo(m):null,m!==null&&(v=fu(m),S=m.tag,m!==v||S!==5&&S!==27&&S!==6)&&(m=null)):(p=null,m=c),p!==m)){if(S=b1,b="onMouseLeave",y="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(S=T1,b="onPointerLeave",y="onPointerEnter",_="pointer"),v=p==null?d:Jl(p),T=m==null?d:Jl(m),d=new S(b,_+"leave",p,n,u),d.target=v,d.relatedTarget=T,b=null,yo(u)===c&&(S=new S(y,_+"enter",m,n,u),S.target=T,S.relatedTarget=v,b=S),v=b,p&&m)t:{for(S=FI,y=p,_=m,T=0,b=y;b;b=S(b))T++;b=0;for(var M=_;M;M=S(M))b++;for(;0<T-b;)y=S(y),T--;for(;0<b-T;)_=S(_),b--;for(;T--;){if(y===_||_!==null&&y===_.alternate){S=y;break t}y=S(y),_=S(_)}S=null}else S=null;p!==null&&d2(f,d,p,S,!1),m!==null&&v!==null&&d2(f,v,m,S,!0)}}e:{if(d=c?Jl(c):window,p=d.nodeName&&d.nodeName.toLowerCase(),p==="select"||p==="input"&&d.type==="file")var C=A1;else if(w1(d))if(DS)C=ZO;else{C=qO;var D=XO}else p=d.nodeName,!p||p.toLowerCase()!=="input"||d.type!=="checkbox"&&d.type!=="radio"?c&&yb(c.elementType)&&(C=A1):C=KO;if(C&&(C=C(t,c))){PS(f,C,n,u);break e}D&&D(t,d,c),t==="focusout"&&c&&d.type==="number"&&c.memoizedProps.value!=null&&fy(d,"number",d.value)}switch(D=c?Jl(c):window,t){case"focusin":(w1(D)||D.contentEditable==="true")&&(vo=D,py=c,hc=null);break;case"focusout":hc=py=vo=null;break;case"mousedown":gy=!0;break;case"contextmenu":case"mouseup":case"dragend":gy=!1,O1(f,n,u);break;case"selectionchange":if(QO)break;case"keydown":case"keyup":O1(f,n,u)}var F;if(Tb)e:{switch(t){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else bo?OS(t,n)&&(L="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(L="onCompositionStart");L&&(MS&&n.locale!=="ko"&&(bo||L!=="onCompositionStart"?L==="onCompositionEnd"&&bo&&(F=RS()):(ds=u,bb="value"in ds?ds.value:ds.textContent,bo=!0)),D=Fd(c,L),0<D.length&&(L=new v1(L,t,null,n,u),f.push({event:L,listeners:D}),F?L.data=F:(F=IS(n),F!==null&&(L.data=F)))),(F=$O?jO(t,n):HO(t,n))&&(L=Fd(c,"onBeforeInput"),0<L.length&&(D=new v1("onBeforeInput","beforeinput",null,n,u),f.push({event:D,listeners:L}),D.data=F)),NI(f,t,c,n,u)}CA(f,e)})}function Xc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Fd(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||s===null||(r=Uc(t,n),r!=null&&i.unshift(Xc(t,r,s)),r=Uc(t,e),r!=null&&i.push(Xc(t,r,s))),t.tag===3)return i;t=t.return}return[]}function FI(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function d2(t,e,n,i,r){for(var s=e._reactName,a=[];n!==null&&n!==i;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,l!==null&&l===i)break;o!==5&&o!==26&&o!==27||c===null||(l=c,r?(c=Uc(n,s),c!=null&&a.unshift(Xc(n,c,l))):r||(c=Uc(n,s),c!=null&&a.push(Xc(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var zI=/\r\n?/g,VI=/\u0000|\uFFFD/g;function h2(t){return(typeof t=="string"?t:""+t).replace(zI,`
`).replace(VI,"")}function MA(t,e){return e=h2(e),h2(t)===e}function lt(t,e,n,i,r,s){switch(n){case"children":typeof i=="string"?e==="body"||e==="textarea"&&i===""||Ko(t,i):(typeof i=="number"||typeof i=="bigint")&&e!=="body"&&Ko(t,""+i);break;case"className":lf(t,"class",i);break;case"tabIndex":lf(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":lf(t,n,i);break;case"style":ES(t,i,s);break;case"data":if(e!=="object"){lf(t,"data",i);break}case"src":case"href":if(i===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Hf(""+i),t.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(e!=="input"&&lt(t,e,"name",r.name,r,null),lt(t,e,"formEncType",r.formEncType,r,null),lt(t,e,"formMethod",r.formMethod,r,null),lt(t,e,"formTarget",r.formTarget,r,null)):(lt(t,e,"encType",r.encType,r,null),lt(t,e,"method",r.method,r,null),lt(t,e,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Hf(""+i),t.setAttribute(n,i);break;case"onClick":i!=null&&(t.onclick=Nr);break;case"onScroll":i!=null&&Le("scroll",t);break;case"onScrollEnd":i!=null&&Le("scrollend",t);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(ne(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(ne(60));t.innerHTML=n}}break;case"multiple":t.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":t.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){t.removeAttribute("xlink:href");break}n=Hf(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""+i):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":i===!0?t.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,i):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?t.setAttribute(n,i):t.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?t.removeAttribute(n):t.setAttribute(n,i);break;case"popover":Le("beforetoggle",t),Le("toggle",t),jf(t,"popover",i);break;case"xlinkActuate":br(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":br(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":br(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":br(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":br(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":br(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":br(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":br(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":br(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":jf(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=gO.get(n)||n,jf(t,n,i))}}function Fy(t,e,n,i,r,s){switch(n){case"style":ES(t,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(ne(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(ne(60));t.innerHTML=n}}break;case"children":typeof i=="string"?Ko(t,i):(typeof i=="number"||typeof i=="bigint")&&Ko(t,""+i);break;case"onScroll":i!=null&&Le("scroll",t);break;case"onScrollEnd":i!=null&&Le("scrollend",t);break;case"onClick":i!=null&&(t.onclick=Nr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vS.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),e=n.slice(2,r?n.length-7:void 0),s=t[Vn]||null,s=s!=null?s[n]:null,typeof s=="function"&&t.removeEventListener(e,s,r),typeof i=="function")){typeof s!="function"&&s!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,i,r);break e}n in t?t[n]=i:i===!0?t.setAttribute(n,""):jf(t,n,i)}}}function vn(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",t),Le("load",t);var i=!1,r=!1,s;for(s in n)if(n.hasOwnProperty(s)){var a=n[s];if(a!=null)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(ne(137,e));default:lt(t,e,s,a,n,null)}}r&&lt(t,e,"srcSet",n.srcSet,n,null),i&&lt(t,e,"src",n.src,n,null);return;case"input":Le("invalid",t);var o=s=a=r=null,l=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var u=n[i];if(u!=null)switch(i){case"name":r=u;break;case"type":a=u;break;case"checked":l=u;break;case"defaultChecked":c=u;break;case"value":s=u;break;case"defaultValue":o=u;break;case"children":case"dangerouslySetInnerHTML":if(u!=null)throw Error(ne(137,e));break;default:lt(t,e,i,u,n,null)}}SS(t,s,o,l,c,a,r,!1);return;case"select":Le("invalid",t),i=a=s=null;for(r in n)if(n.hasOwnProperty(r)&&(o=n[r],o!=null))switch(r){case"value":s=o;break;case"defaultValue":a=o;break;case"multiple":i=o;default:lt(t,e,r,o,n,null)}e=s,n=a,t.multiple=!!i,e!=null?Do(t,!!i,e,!1):n!=null&&Do(t,!!i,n,!0);return;case"textarea":Le("invalid",t),s=r=i=null;for(a in n)if(n.hasOwnProperty(a)&&(o=n[a],o!=null))switch(a){case"value":i=o;break;case"defaultValue":r=o;break;case"children":s=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(ne(91));break;default:lt(t,e,a,o,n,null)}AS(t,i,r,s);return;case"option":for(l in n)if(n.hasOwnProperty(l)&&(i=n[l],i!=null))switch(l){case"selected":t.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:lt(t,e,l,i,n,null)}return;case"dialog":Le("beforetoggle",t),Le("toggle",t),Le("cancel",t),Le("close",t);break;case"iframe":case"object":Le("load",t);break;case"video":case"audio":for(i=0;i<Yc.length;i++)Le(Yc[i],t);break;case"image":Le("error",t),Le("load",t);break;case"details":Le("toggle",t);break;case"embed":case"source":case"link":Le("error",t),Le("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&(i=n[c],i!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(ne(137,e));default:lt(t,e,c,i,n,null)}return;default:if(yb(e)){for(u in n)n.hasOwnProperty(u)&&(i=n[u],i!==void 0&&Fy(t,e,u,i,n,void 0));return}}for(o in n)n.hasOwnProperty(o)&&(i=n[o],i!=null&&lt(t,e,o,i,n,null))}function $I(t,e,n,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,a=null,o=null,l=null,c=null,u=null;for(p in n){var f=n[p];if(n.hasOwnProperty(p)&&f!=null)switch(p){case"checked":break;case"value":break;case"defaultValue":l=f;default:i.hasOwnProperty(p)||lt(t,e,p,null,i,f)}}for(var d in i){var p=i[d];if(f=n[d],i.hasOwnProperty(d)&&(p!=null||f!=null))switch(d){case"type":s=p;break;case"name":r=p;break;case"checked":c=p;break;case"defaultChecked":u=p;break;case"value":a=p;break;case"defaultValue":o=p;break;case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(ne(137,e));break;default:p!==f&&lt(t,e,d,p,i,f)}}uy(t,a,o,l,c,u,s,r);return;case"select":p=a=o=d=null;for(s in n)if(l=n[s],n.hasOwnProperty(s)&&l!=null)switch(s){case"value":break;case"multiple":p=l;default:i.hasOwnProperty(s)||lt(t,e,s,null,i,l)}for(r in i)if(s=i[r],l=n[r],i.hasOwnProperty(r)&&(s!=null||l!=null))switch(r){case"value":d=s;break;case"defaultValue":o=s;break;case"multiple":a=s;default:s!==l&&lt(t,e,r,s,i,l)}e=o,n=a,i=p,d!=null?Do(t,!!n,d,!1):!!i!=!!n&&(e!=null?Do(t,!!n,e,!0):Do(t,!!n,n?[]:"",!1));return;case"textarea":p=d=null;for(o in n)if(r=n[o],n.hasOwnProperty(o)&&r!=null&&!i.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:lt(t,e,o,null,i,r)}for(a in i)if(r=i[a],s=n[a],i.hasOwnProperty(a)&&(r!=null||s!=null))switch(a){case"value":d=r;break;case"defaultValue":p=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(ne(91));break;default:r!==s&&lt(t,e,a,r,i,s)}wS(t,d,p);return;case"option":for(var m in n)if(d=n[m],n.hasOwnProperty(m)&&d!=null&&!i.hasOwnProperty(m))switch(m){case"selected":t.selected=!1;break;default:lt(t,e,m,null,i,d)}for(l in i)if(d=i[l],p=n[l],i.hasOwnProperty(l)&&d!==p&&(d!=null||p!=null))switch(l){case"selected":t.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:lt(t,e,l,d,i,p)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var S in n)d=n[S],n.hasOwnProperty(S)&&d!=null&&!i.hasOwnProperty(S)&&lt(t,e,S,null,i,d);for(c in i)if(d=i[c],p=n[c],i.hasOwnProperty(c)&&d!==p&&(d!=null||p!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(ne(137,e));break;default:lt(t,e,c,d,i,p)}return;default:if(yb(e)){for(var v in n)d=n[v],n.hasOwnProperty(v)&&d!==void 0&&!i.hasOwnProperty(v)&&Fy(t,e,v,void 0,i,d);for(u in i)d=i[u],p=n[u],!i.hasOwnProperty(u)||d===p||d===void 0&&p===void 0||Fy(t,e,u,d,i,p);return}}for(var y in n)d=n[y],n.hasOwnProperty(y)&&d!=null&&!i.hasOwnProperty(y)&&lt(t,e,y,null,i,d);for(f in i)d=i[f],p=n[f],!i.hasOwnProperty(f)||d===p||d==null&&p==null||lt(t,e,f,d,i,p)}function p2(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function jI(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var r=n[i],s=r.transferSize,a=r.initiatorType,o=r.duration;if(s&&o&&p2(a)){for(a=0,o=r.responseEnd,i+=1;i<n.length;i++){var l=n[i],c=l.startTime;if(c>o)break;var u=l.transferSize,f=l.initiatorType;u&&p2(f)&&(l=l.responseEnd,a+=u*(l<o?1:(o-c)/(l-c)))}if(--i,e+=8*(s+a)/(r.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var zy=null,Vy=null;function zd(t){return t.nodeType===9?t:t.ownerDocument}function g2(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function OA(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function $y(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var am=null;function HI(){var t=window.event;return t&&t.type==="popstate"?t===am?!1:(am=t,!0):(am=null,!1)}var IA=typeof setTimeout=="function"?setTimeout:void 0,WI=typeof clearTimeout=="function"?clearTimeout:void 0,m2=typeof Promise=="function"?Promise:void 0,YI=typeof queueMicrotask=="function"?queueMicrotask:typeof m2<"u"?function(t){return m2.resolve(null).then(t).catch(XI)}:IA;function XI(t){setTimeout(function(){throw t})}function Vs(t){return t==="head"}function y2(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"||n==="/&"){if(i===0){t.removeChild(r),il(e);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")Sc(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,Sc(n);for(var s=n.firstChild;s;){var a=s.nextSibling,o=s.nodeName;s[gu]||o==="SCRIPT"||o==="STYLE"||o==="LINK"&&s.rel.toLowerCase()==="stylesheet"||n.removeChild(s),s=a}}else n==="body"&&Sc(t.ownerDocument.body);n=r}while(n);il(e)}function _2(t,e){var n=t;t=0;do{var i=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=i}while(n)}function jy(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":jy(n),mb(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function qI(t,e,n,i){for(;t.nodeType===1;){var r=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(i){if(!t[gu])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(s=t.getAttribute("rel"),s==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(s!==r.rel||t.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||t.getAttribute("title")!==(r.title==null?null:r.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(s=t.getAttribute("src"),(s!==(r.src==null?null:r.src)||t.getAttribute("type")!==(r.type==null?null:r.type)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&s&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var s=r.name==null?null:""+r.name;if(r.type==="hidden"&&t.getAttribute("name")===s)return t}else return t;if(t=Ei(t.nextSibling),t===null)break}return null}function KI(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Ei(t.nextSibling),t===null))return null;return t}function PA(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=Ei(t.nextSibling),t===null))return null;return t}function Hy(t){return t.data==="$?"||t.data==="$~"}function Wy(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function ZI(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var i=function(){e(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),t._reactRetry=i}}function Ei(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var Yy=null;function b2(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return Ei(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function v2(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function DA(t,e,n){switch(e=zd(n),t){case"html":if(t=e.documentElement,!t)throw Error(ne(452));return t;case"head":if(t=e.head,!t)throw Error(ne(453));return t;case"body":if(t=e.body,!t)throw Error(ne(454));return t;default:throw Error(ne(451))}}function Sc(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);mb(t)}var Oi=new Map,T2=new Set;function Vd(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Xr=Qe.d;Qe.d={f:GI,r:QI,D:JI,C:eP,L:tP,m:nP,X:rP,S:iP,M:sP};function GI(){var t=Xr.f(),e=ap();return t||e}function QI(t){var e=bl(t);e!==null&&e.tag===5&&e.type==="form"?Ew(e):Xr.r(t)}var Sl=typeof document>"u"?null:document;function kA(t,e,n){var i=Sl;if(i&&typeof e=="string"&&e){var r=bi(e);r='link[rel="'+t+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),T2.has(r)||(T2.add(r),t={rel:t,crossOrigin:n,href:e},i.querySelector(r)===null&&(e=i.createElement("link"),vn(e,"link",t),un(e),i.head.appendChild(e)))}}function JI(t){Xr.D(t),kA("dns-prefetch",t,null)}function eP(t,e){Xr.C(t,e),kA("preconnect",t,e)}function tP(t,e,n){Xr.L(t,e,n);var i=Sl;if(i&&t&&e){var r='link[rel="preload"][as="'+bi(e)+'"]';e==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+bi(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+bi(n.imageSizes)+'"]')):r+='[href="'+bi(t)+'"]';var s=r;switch(e){case"style":s=nl(t);break;case"script":s=wl(t)}Oi.has(s)||(t=xt({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),Oi.set(s,t),i.querySelector(r)!==null||e==="style"&&i.querySelector(Tu(s))||e==="script"&&i.querySelector(xu(s))||(e=i.createElement("link"),vn(e,"link",t),un(e),i.head.appendChild(e)))}}function nP(t,e){Xr.m(t,e);var n=Sl;if(n&&t){var i=e&&typeof e.as=="string"?e.as:"script",r='link[rel="modulepreload"][as="'+bi(i)+'"][href="'+bi(t)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=wl(t)}if(!Oi.has(s)&&(t=xt({rel:"modulepreload",href:t},e),Oi.set(s,t),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(xu(s)))return}i=n.createElement("link"),vn(i,"link",t),un(i),n.head.appendChild(i)}}}function iP(t,e,n){Xr.S(t,e,n);var i=Sl;if(i&&t){var r=Po(i).hoistableStyles,s=nl(t);e=e||"default";var a=r.get(s);if(!a){var o={loading:0,preload:null};if(a=i.querySelector(Tu(s)))o.loading=5;else{t=xt({rel:"stylesheet",href:t,"data-precedence":e},n),(n=Oi.get(s))&&t0(t,n);var l=a=i.createElement("link");un(l),vn(l,"link",t),l._p=new Promise(function(c,u){l.onload=c,l.onerror=u}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,ed(a,e,i)}a={type:"stylesheet",instance:a,count:1,state:o},r.set(s,a)}}}function rP(t,e){Xr.X(t,e);var n=Sl;if(n&&t){var i=Po(n).hoistableScripts,r=wl(t),s=i.get(r);s||(s=n.querySelector(xu(r)),s||(t=xt({src:t,async:!0},e),(e=Oi.get(r))&&n0(t,e),s=n.createElement("script"),un(s),vn(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function sP(t,e){Xr.M(t,e);var n=Sl;if(n&&t){var i=Po(n).hoistableScripts,r=wl(t),s=i.get(r);s||(s=n.querySelector(xu(r)),s||(t=xt({src:t,async:!0,type:"module"},e),(e=Oi.get(r))&&n0(t,e),s=n.createElement("script"),un(s),vn(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function x2(t,e,n,i){var r=(r=vs.current)?Vd(r):null;if(!r)throw Error(ne(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=nl(n.href),n=Po(r).hoistableStyles,i=n.get(e),i||(i={type:"style",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=nl(n.href);var s=Po(r).hoistableStyles,a=s.get(t);if(a||(r=r.ownerDocument||r,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(t,a),(s=r.querySelector(Tu(t)))&&!s._p&&(a.instance=s,a.state.loading=5),Oi.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Oi.set(t,n),s||aP(r,t,n,a.state))),e&&i===null)throw Error(ne(528,""));return a}if(e&&i!==null)throw Error(ne(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=wl(n),n=Po(r).hoistableScripts,i=n.get(e),i||(i={type:"script",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(ne(444,t))}}function nl(t){return'href="'+bi(t)+'"'}function Tu(t){return'link[rel="stylesheet"]['+t+"]"}function NA(t){return xt({},t,{"data-precedence":t.precedence,precedence:null})}function aP(t,e,n,i){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?i.loading=1:(e=t.createElement("link"),i.preload=e,e.addEventListener("load",function(){return i.loading|=1}),e.addEventListener("error",function(){return i.loading|=2}),vn(e,"link",n),un(e),t.head.appendChild(e))}function wl(t){return'[src="'+bi(t)+'"]'}function xu(t){return"script[async]"+t}function S2(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var i=t.querySelector('style[data-href~="'+bi(n.href)+'"]');if(i)return e.instance=i,un(i),i;var r=xt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(t.ownerDocument||t).createElement("style"),un(i),vn(i,"style",r),ed(i,n.precedence,t),e.instance=i;case"stylesheet":r=nl(n.href);var s=t.querySelector(Tu(r));if(s)return e.state.loading|=4,e.instance=s,un(s),s;i=NA(n),(r=Oi.get(r))&&t0(i,r),s=(t.ownerDocument||t).createElement("link"),un(s);var a=s;return a._p=new Promise(function(o,l){a.onload=o,a.onerror=l}),vn(s,"link",i),e.state.loading|=4,ed(s,n.precedence,t),e.instance=s;case"script":return s=wl(n.src),(r=t.querySelector(xu(s)))?(e.instance=r,un(r),r):(i=n,(r=Oi.get(s))&&(i=xt({},n),n0(i,r)),t=t.ownerDocument||t,r=t.createElement("script"),un(r),vn(r,"link",i),t.head.appendChild(r),e.instance=r);case"void":return null;default:throw Error(ne(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(i=e.instance,e.state.loading|=4,ed(i,n.precedence,t));return e.instance}function ed(t,e,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,a=0;a<i.length;a++){var o=i[a];if(o.dataset.precedence===e)s=o;else if(s!==r)break}s?s.parentNode.insertBefore(t,s.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function t0(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function n0(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var td=null;function w2(t,e,n){if(td===null){var i=new Map,r=td=new Map;r.set(n,i)}else r=td,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(t))return i;for(i.set(t,null),n=n.getElementsByTagName(t),r=0;r<n.length;r++){var s=n[r];if(!(s[gu]||s[yn]||t==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var a=s.getAttribute(e)||"";a=t+a;var o=i.get(a);o?o.push(s):i.set(a,[s])}}return i}function A2(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function oP(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function BA(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function lP(t,e,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var r=nl(i.href),s=e.querySelector(Tu(r));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=$d.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=s,un(s);return}s=e.ownerDocument||e,i=NA(i),(r=Oi.get(r))&&t0(i,r),s=s.createElement("link"),un(s);var a=s;a._p=new Promise(function(o,l){a.onload=o,a.onerror=l}),vn(s,"link",i),n.instance=s}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=$d.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var om=0;function cP(t,e){return t.stylesheets&&t.count===0&&nd(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var i=setTimeout(function(){if(t.stylesheets&&nd(t,t.stylesheets),t.unsuspend){var s=t.unsuspend;t.unsuspend=null,s()}},6e4+e);0<t.imgBytes&&om===0&&(om=62500*jI());var r=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&nd(t,t.stylesheets),t.unsuspend)){var s=t.unsuspend;t.unsuspend=null,s()}},(t.imgBytes>om?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(i),clearTimeout(r)}}:null}function $d(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)nd(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var jd=null;function nd(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,jd=new Map,e.forEach(uP,t),jd=null,$d.call(t))}function uP(t,e){if(!(e.state.loading&4)){var n=jd.get(t);if(n)var i=n.get(null);else{n=new Map,jd.set(t,n);for(var r=t.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var a=r[s];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}r=e.instance,a=r.getAttribute("data-precedence"),s=n.get(a)||i,s===i&&n.set(null,r),n.set(a,r),this.count++,i=$d.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(r,t.firstChild)),e.state.loading|=4}}var qc={$$typeof:kr,Provider:null,Consumer:null,_currentValue:fa,_currentValue2:fa,_threadCount:0};function fP(t,e,n,i,r,s,a,o,l){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Og(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Og(0),this.hiddenUpdates=Og(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function LA(t,e,n,i,r,s,a,o,l,c,u,f){return t=new fP(t,e,n,a,l,c,u,f,o),e=1,s===!0&&(e|=24),s=Zn(3,null,null,e),t.current=s,s.stateNode=t,e=Rb(),e.refCount++,t.pooledCache=e,e.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:e},Ib(s),t}function UA(t){return t?(t=So,t):So}function FA(t,e,n,i,r,s){r=UA(r),i.context===null?i.context=r:i.pendingContext=r,i=xs(e),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=Ss(t,i,e),n!==null&&(zn(n,t,e),gc(n,t,e))}function E2(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function i0(t,e){E2(t,e),(t=t.alternate)&&E2(t,e)}function zA(t){if(t.tag===13||t.tag===31){var e=Fa(t,67108864);e!==null&&zn(e,t,67108864),i0(t,67108864)}}function C2(t){if(t.tag===13||t.tag===31){var e=ii();e=pb(e);var n=Fa(t,e);n!==null&&zn(n,t,e),i0(t,e)}}var Hd=!0;function dP(t,e,n,i){var r=xe.T;xe.T=null;var s=Qe.p;try{Qe.p=2,r0(t,e,n,i)}finally{Qe.p=s,xe.T=r}}function hP(t,e,n,i){var r=xe.T;xe.T=null;var s=Qe.p;try{Qe.p=8,r0(t,e,n,i)}finally{Qe.p=s,xe.T=r}}function r0(t,e,n,i){if(Hd){var r=Xy(i);if(r===null)sm(t,e,i,Wd,n),R2(t,i);else if(gP(r,t,e,n,i))i.stopPropagation();else if(R2(t,i),e&4&&-1<pP.indexOf(t)){for(;r!==null;){var s=bl(r);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var a=ta(s.pendingLanes);if(a!==0){var o=s;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-ni(a);o.entanglements[1]|=l,a&=~l}pr(s),!(Ge&6)&&(kd=ei()+500,vu(0))}}break;case 31:case 13:o=Fa(s,2),o!==null&&zn(o,s,2),ap(),i0(s,2)}if(s=Xy(i),s===null&&sm(t,e,i,Wd,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else sm(t,e,i,null,n)}}function Xy(t){return t=_b(t),s0(t)}var Wd=null;function s0(t){if(Wd=null,t=yo(t),t!==null){var e=fu(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=aS(e),t!==null)return t;t=null}else if(n===31){if(t=oS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return Wd=t,null}function VA(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(J4()){case fS:return 2;case dS:return 8;case vd:case eO:return 32;case hS:return 268435456;default:return 32}default:return 32}}var qy=!1,Es=null,Cs=null,Rs=null,Kc=new Map,Zc=new Map,us=[],pP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function R2(t,e){switch(t){case"focusin":case"focusout":Es=null;break;case"dragenter":case"dragleave":Cs=null;break;case"mouseover":case"mouseout":Rs=null;break;case"pointerover":case"pointerout":Kc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zc.delete(e.pointerId)}}function $l(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=bl(e),e!==null&&zA(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function gP(t,e,n,i,r){switch(e){case"focusin":return Es=$l(Es,t,e,n,i,r),!0;case"dragenter":return Cs=$l(Cs,t,e,n,i,r),!0;case"mouseover":return Rs=$l(Rs,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Kc.set(s,$l(Kc.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Zc.set(s,$l(Zc.get(s)||null,t,e,n,i,r)),!0}return!1}function $A(t){var e=yo(t.target);if(e!==null){var n=fu(e);if(n!==null){if(e=n.tag,e===13){if(e=aS(n),e!==null){t.blockedOn=e,d1(t.priority,function(){C2(n)});return}}else if(e===31){if(e=oS(n),e!==null){t.blockedOn=e,d1(t.priority,function(){C2(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function id(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Xy(t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);dy=i,n.target.dispatchEvent(i),dy=null}else return e=bl(n),e!==null&&zA(e),t.blockedOn=n,!1;e.shift()}return!0}function M2(t,e,n){id(t)&&n.delete(e)}function mP(){qy=!1,Es!==null&&id(Es)&&(Es=null),Cs!==null&&id(Cs)&&(Cs=null),Rs!==null&&id(Rs)&&(Rs=null),Kc.forEach(M2),Zc.forEach(M2)}function mf(t,e){t.blockedOn===e&&(t.blockedOn=null,qy||(qy=!0,on.unstable_scheduleCallback(on.unstable_NormalPriority,mP)))}var yf=null;function O2(t){yf!==t&&(yf=t,on.unstable_scheduleCallback(on.unstable_NormalPriority,function(){yf===t&&(yf=null);for(var e=0;e<t.length;e+=3){var n=t[e],i=t[e+1],r=t[e+2];if(typeof i!="function"){if(s0(i||n)===null)continue;break}var s=bl(n);s!==null&&(t.splice(e,3),e-=3,Ry(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function il(t){function e(l){return mf(l,t)}Es!==null&&mf(Es,t),Cs!==null&&mf(Cs,t),Rs!==null&&mf(Rs,t),Kc.forEach(e),Zc.forEach(e);for(var n=0;n<us.length;n++){var i=us[n];i.blockedOn===t&&(i.blockedOn=null)}for(;0<us.length&&(n=us[0],n.blockedOn===null);)$A(n),n.blockedOn===null&&us.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],a=r[Vn]||null;if(typeof s=="function")a||O2(n);else if(a){var o=null;if(s&&s.hasAttribute("formAction")){if(r=s,a=s[Vn]||null)o=a.formAction;else if(s0(r)!==null)continue}else o=a.action;typeof o=="function"?n[i+1]=o:(n.splice(i,3),i-=3),O2(n)}}}function jA(){function t(s){s.canIntercept&&s.info==="react-transition"&&s.intercept({handler:function(){return new Promise(function(a){return r=a})},focusReset:"manual",scroll:"manual"})}function e(){r!==null&&(r(),r=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var s=navigation.currentEntry;s&&s.url!=null&&navigation.navigate(s.url,{state:s.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,r=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),r!==null&&(r(),r=null)}}}function a0(t){this._internalRoot=t}cp.prototype.render=a0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ne(409));var n=e.current,i=ii();FA(n,i,t,e,null,null)};cp.prototype.unmount=a0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;FA(t.current,2,null,t,null,null),ap(),e[_l]=null}};function cp(t){this._internalRoot=t}cp.prototype.unstable_scheduleHydration=function(t){if(t){var e=_S();t={blockedOn:null,target:t,priority:e};for(var n=0;n<us.length&&e!==0&&e<us[n].priority;n++);us.splice(n,0,t),n===0&&$A(t)}};var I2=rS.version;if(I2!=="19.2.3")throw Error(ne(527,I2,"19.2.3"));Qe.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ne(188)):(t=Object.keys(t).join(","),Error(ne(268,t)));return t=Y4(e),t=t!==null?lS(t):null,t=t===null?null:t.stateNode,t};var yP={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:xe,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_f.isDisabled&&_f.supportsFiber)try{du=_f.inject(yP),ti=_f}catch{}}Yh.createRoot=function(t,e){if(!sS(t))throw Error(ne(299));var n=!1,i="",r=kw,s=Nw,a=Bw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(r=e.onUncaughtError),e.onCaughtError!==void 0&&(s=e.onCaughtError),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=LA(t,1,!1,null,null,n,i,null,r,s,a,jA),t[_l]=e.current,e0(t),new a0(e)};Yh.hydrateRoot=function(t,e,n){if(!sS(t))throw Error(ne(299));var i=!1,r="",s=kw,a=Nw,o=Bw,l=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(o=n.onRecoverableError),n.formState!==void 0&&(l=n.formState)),e=LA(t,1,!0,e,n??null,i,r,l,s,a,o,jA),e.context=UA(null),n=e.current,i=ii(),i=pb(i),r=xs(i),r.callback=null,Ss(n,r,i),n=i,e.current.lanes=n,pu(e,n),pr(e),t[_l]=e.current,e0(t),new cp(e)};Yh.version="19.2.3";function HA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(HA)}catch(t){console.error(t)}}HA(),Qx.exports=Yh;var _P=Qx.exports;const bP=Wi(_P);function Ra(t,...e){const n=new URL(`https://mui.com/production-error/?code=${t}`);return e.forEach(i=>n.searchParams.append("args[]",i)),`Minified MUI error #${t}; visit ${n} for the full message.`}function me(){return me=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},me.apply(null,arguments)}function vP(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function TP(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var xP=function(){function t(n){var i=this;this._insertTag=function(r){var s;i.tags.length===0?i.insertionPoint?s=i.insertionPoint.nextSibling:i.prepend?s=i.container.firstChild:s=i.before:s=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(r,s),i.tags.push(r)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(i){i.forEach(this._insertTag)},e.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(TP(this));var r=this.tags[this.tags.length-1];if(this.isSpeedy){var s=vP(r);try{s.insertRule(i,s.cssRules.length)}catch{}}else r.appendChild(document.createTextNode(i));this.ctr++},e.flush=function(){this.tags.forEach(function(i){var r;return(r=i.parentNode)==null?void 0:r.removeChild(i)}),this.tags=[],this.ctr=0},t}(),wn="-ms-",Yd="-moz-",Xe="-webkit-",WA="comm",o0="rule",l0="decl",SP="@import",YA="@keyframes",wP="@layer",AP=Math.abs,up=String.fromCharCode,EP=Object.assign;function CP(t,e){return gn(t,0)^45?(((e<<2^gn(t,0))<<2^gn(t,1))<<2^gn(t,2))<<2^gn(t,3):0}function XA(t){return t.trim()}function RP(t,e){return(t=e.exec(t))?t[0]:t}function qe(t,e,n){return t.replace(e,n)}function Ky(t,e){return t.indexOf(e)}function gn(t,e){return t.charCodeAt(e)|0}function Gc(t,e,n){return t.slice(e,n)}function er(t){return t.length}function c0(t){return t.length}function bf(t,e){return e.push(t),t}function MP(t,e){return t.map(e).join("")}var fp=1,rl=1,qA=0,$n=0,Qt=0,Al="";function dp(t,e,n,i,r,s,a){return{value:t,root:e,parent:n,type:i,props:r,children:s,line:fp,column:rl,length:a,return:""}}function jl(t,e){return EP(dp("",null,null,"",null,null,0),t,{length:-t.length},e)}function OP(){return Qt}function IP(){return Qt=$n>0?gn(Al,--$n):0,rl--,Qt===10&&(rl=1,fp--),Qt}function ri(){return Qt=$n<qA?gn(Al,$n++):0,rl++,Qt===10&&(rl=1,fp++),Qt}function ur(){return gn(Al,$n)}function rd(){return $n}function Su(t,e){return Gc(Al,t,e)}function Qc(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function KA(t){return fp=rl=1,qA=er(Al=t),$n=0,[]}function ZA(t){return Al="",t}function sd(t){return XA(Su($n-1,Zy(t===91?t+2:t===40?t+1:t)))}function PP(t){for(;(Qt=ur())&&Qt<33;)ri();return Qc(t)>2||Qc(Qt)>3?"":" "}function DP(t,e){for(;--e&&ri()&&!(Qt<48||Qt>102||Qt>57&&Qt<65||Qt>70&&Qt<97););return Su(t,rd()+(e<6&&ur()==32&&ri()==32))}function Zy(t){for(;ri();)switch(Qt){case t:return $n;case 34:case 39:t!==34&&t!==39&&Zy(Qt);break;case 40:t===41&&Zy(t);break;case 92:ri();break}return $n}function kP(t,e){for(;ri()&&t+Qt!==57;)if(t+Qt===84&&ur()===47)break;return"/*"+Su(e,$n-1)+"*"+up(t===47?t:ri())}function NP(t){for(;!Qc(ur());)ri();return Su(t,$n)}function BP(t){return ZA(ad("",null,null,null,[""],t=KA(t),0,[0],t))}function ad(t,e,n,i,r,s,a,o,l){for(var c=0,u=0,f=a,d=0,p=0,m=0,S=1,v=1,y=1,_=0,T="",b=r,M=s,C=i,D=T;v;)switch(m=_,_=ri()){case 40:if(m!=108&&gn(D,f-1)==58){Ky(D+=qe(sd(_),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:D+=sd(_);break;case 9:case 10:case 13:case 32:D+=PP(m);break;case 92:D+=DP(rd()-1,7);continue;case 47:switch(ur()){case 42:case 47:bf(LP(kP(ri(),rd()),e,n),l);break;default:D+="/"}break;case 123*S:o[c++]=er(D)*y;case 125*S:case 59:case 0:switch(_){case 0:case 125:v=0;case 59+u:y==-1&&(D=qe(D,/\f/g,"")),p>0&&er(D)-f&&bf(p>32?D2(D+";",i,n,f-1):D2(qe(D," ","")+";",i,n,f-2),l);break;case 59:D+=";";default:if(bf(C=P2(D,e,n,c,u,r,o,T,b=[],M=[],f),s),_===123)if(u===0)ad(D,e,C,C,b,s,f,o,M);else switch(d===99&&gn(D,3)===110?100:d){case 100:case 108:case 109:case 115:ad(t,C,C,i&&bf(P2(t,C,C,0,0,r,o,T,r,b=[],f),M),r,M,f,o,i?b:M);break;default:ad(D,C,C,C,[""],M,0,o,M)}}c=u=p=0,S=y=1,T=D="",f=a;break;case 58:f=1+er(D),p=m;default:if(S<1){if(_==123)--S;else if(_==125&&S++==0&&IP()==125)continue}switch(D+=up(_),_*S){case 38:y=u>0?1:(D+="\f",-1);break;case 44:o[c++]=(er(D)-1)*y,y=1;break;case 64:ur()===45&&(D+=sd(ri())),d=ur(),u=f=er(T=D+=NP(rd())),_++;break;case 45:m===45&&er(D)==2&&(S=0)}}return s}function P2(t,e,n,i,r,s,a,o,l,c,u){for(var f=r-1,d=r===0?s:[""],p=c0(d),m=0,S=0,v=0;m<i;++m)for(var y=0,_=Gc(t,f+1,f=AP(S=a[m])),T=t;y<p;++y)(T=XA(S>0?d[y]+" "+_:qe(_,/&\f/g,d[y])))&&(l[v++]=T);return dp(t,e,n,r===0?o0:o,l,c,u)}function LP(t,e,n){return dp(t,e,n,WA,up(OP()),Gc(t,2,-2),0)}function D2(t,e,n,i){return dp(t,e,n,l0,Gc(t,0,i),Gc(t,i+1,-1),i)}function Fo(t,e){for(var n="",i=c0(t),r=0;r<i;r++)n+=e(t[r],r,t,e)||"";return n}function UP(t,e,n,i){switch(t.type){case wP:if(t.children.length)break;case SP:case l0:return t.return=t.return||t.value;case WA:return"";case YA:return t.return=t.value+"{"+Fo(t.children,i)+"}";case o0:t.value=t.props.join(",")}return er(n=Fo(t.children,i))?t.return=t.value+"{"+n+"}":""}function FP(t){var e=c0(t);return function(n,i,r,s){for(var a="",o=0;o<e;o++)a+=t[o](n,i,r,s)||"";return a}}function zP(t){return function(e){e.root||(e=e.return)&&t(e)}}function GA(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var VP=function(e,n,i){for(var r=0,s=0;r=s,s=ur(),r===38&&s===12&&(n[i]=1),!Qc(s);)ri();return Su(e,$n)},$P=function(e,n){var i=-1,r=44;do switch(Qc(r)){case 0:r===38&&ur()===12&&(n[i]=1),e[i]+=VP($n-1,n,i);break;case 2:e[i]+=sd(r);break;case 4:if(r===44){e[++i]=ur()===58?"&\f":"",n[i]=e[i].length;break}default:e[i]+=up(r)}while(r=ri());return e},jP=function(e,n){return ZA($P(KA(e),n))},k2=new WeakMap,HP=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,i=e.parent,r=e.column===i.column&&e.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!k2.get(i))&&!r){k2.set(e,!0);for(var s=[],a=jP(n,s),o=i.props,l=0,c=0;l<a.length;l++)for(var u=0;u<o.length;u++,c++)e.props[c]=s[l]?a[l].replace(/&\f/g,o[u]):o[u]+" "+a[l]}}},WP=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function QA(t,e){switch(CP(t,e)){case 5103:return Xe+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Xe+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Xe+t+Yd+t+wn+t+t;case 6828:case 4268:return Xe+t+wn+t+t;case 6165:return Xe+t+wn+"flex-"+t+t;case 5187:return Xe+t+qe(t,/(\w+).+(:[^]+)/,Xe+"box-$1$2"+wn+"flex-$1$2")+t;case 5443:return Xe+t+wn+"flex-item-"+qe(t,/flex-|-self/,"")+t;case 4675:return Xe+t+wn+"flex-line-pack"+qe(t,/align-content|flex-|-self/,"")+t;case 5548:return Xe+t+wn+qe(t,"shrink","negative")+t;case 5292:return Xe+t+wn+qe(t,"basis","preferred-size")+t;case 6060:return Xe+"box-"+qe(t,"-grow","")+Xe+t+wn+qe(t,"grow","positive")+t;case 4554:return Xe+qe(t,/([^-])(transform)/g,"$1"+Xe+"$2")+t;case 6187:return qe(qe(qe(t,/(zoom-|grab)/,Xe+"$1"),/(image-set)/,Xe+"$1"),t,"")+t;case 5495:case 3959:return qe(t,/(image-set\([^]*)/,Xe+"$1$`$1");case 4968:return qe(qe(t,/(.+:)(flex-)?(.*)/,Xe+"box-pack:$3"+wn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Xe+t+t;case 4095:case 3583:case 4068:case 2532:return qe(t,/(.+)-inline(.+)/,Xe+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(er(t)-1-e>6)switch(gn(t,e+1)){case 109:if(gn(t,e+4)!==45)break;case 102:return qe(t,/(.+:)(.+)-([^]+)/,"$1"+Xe+"$2-$3$1"+Yd+(gn(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~Ky(t,"stretch")?QA(qe(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(gn(t,e+1)!==115)break;case 6444:switch(gn(t,er(t)-3-(~Ky(t,"!important")&&10))){case 107:return qe(t,":",":"+Xe)+t;case 101:return qe(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Xe+(gn(t,14)===45?"inline-":"")+"box$3$1"+Xe+"$2$3$1"+wn+"$2box$3")+t}break;case 5936:switch(gn(t,e+11)){case 114:return Xe+t+wn+qe(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Xe+t+wn+qe(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Xe+t+wn+qe(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Xe+t+wn+t+t}return t}var YP=function(e,n,i,r){if(e.length>-1&&!e.return)switch(e.type){case l0:e.return=QA(e.value,e.length);break;case YA:return Fo([jl(e,{value:qe(e.value,"@","@"+Xe)})],r);case o0:if(e.length)return MP(e.props,function(s){switch(RP(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Fo([jl(e,{props:[qe(s,/:(read-\w+)/,":"+Yd+"$1")]})],r);case"::placeholder":return Fo([jl(e,{props:[qe(s,/:(plac\w+)/,":"+Xe+"input-$1")]}),jl(e,{props:[qe(s,/:(plac\w+)/,":"+Yd+"$1")]}),jl(e,{props:[qe(s,/:(plac\w+)/,wn+"input-$1")]})],r)}return""})}},XP=[YP],qP=function(e){var n=e.key;if(n==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(S){var v=S.getAttribute("data-emotion");v.indexOf(" ")!==-1&&(document.head.appendChild(S),S.setAttribute("data-s",""))})}var r=e.stylisPlugins||XP,s={},a,o=[];a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(S){for(var v=S.getAttribute("data-emotion").split(" "),y=1;y<v.length;y++)s[v[y]]=!0;o.push(S)});var l,c=[HP,WP];{var u,f=[UP,zP(function(S){u.insert(S)})],d=FP(c.concat(r,f)),p=function(v){return Fo(BP(v),d)};l=function(v,y,_,T){u=_,p(v?v+"{"+y.styles+"}":y.styles),T&&(m.inserted[y.name]=!0)}}var m={key:n,sheet:new xP({key:n,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return m.sheet.hydrate(o),m},JA={exports:{}},at={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dn=typeof Symbol=="function"&&Symbol.for,u0=dn?Symbol.for("react.element"):60103,f0=dn?Symbol.for("react.portal"):60106,hp=dn?Symbol.for("react.fragment"):60107,pp=dn?Symbol.for("react.strict_mode"):60108,gp=dn?Symbol.for("react.profiler"):60114,mp=dn?Symbol.for("react.provider"):60109,yp=dn?Symbol.for("react.context"):60110,d0=dn?Symbol.for("react.async_mode"):60111,_p=dn?Symbol.for("react.concurrent_mode"):60111,bp=dn?Symbol.for("react.forward_ref"):60112,vp=dn?Symbol.for("react.suspense"):60113,KP=dn?Symbol.for("react.suspense_list"):60120,Tp=dn?Symbol.for("react.memo"):60115,xp=dn?Symbol.for("react.lazy"):60116,ZP=dn?Symbol.for("react.block"):60121,GP=dn?Symbol.for("react.fundamental"):60117,QP=dn?Symbol.for("react.responder"):60118,JP=dn?Symbol.for("react.scope"):60119;function li(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case u0:switch(t=t.type,t){case d0:case _p:case hp:case gp:case pp:case vp:return t;default:switch(t=t&&t.$$typeof,t){case yp:case bp:case xp:case Tp:case mp:return t;default:return e}}case f0:return e}}}function eE(t){return li(t)===_p}at.AsyncMode=d0;at.ConcurrentMode=_p;at.ContextConsumer=yp;at.ContextProvider=mp;at.Element=u0;at.ForwardRef=bp;at.Fragment=hp;at.Lazy=xp;at.Memo=Tp;at.Portal=f0;at.Profiler=gp;at.StrictMode=pp;at.Suspense=vp;at.isAsyncMode=function(t){return eE(t)||li(t)===d0};at.isConcurrentMode=eE;at.isContextConsumer=function(t){return li(t)===yp};at.isContextProvider=function(t){return li(t)===mp};at.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===u0};at.isForwardRef=function(t){return li(t)===bp};at.isFragment=function(t){return li(t)===hp};at.isLazy=function(t){return li(t)===xp};at.isMemo=function(t){return li(t)===Tp};at.isPortal=function(t){return li(t)===f0};at.isProfiler=function(t){return li(t)===gp};at.isStrictMode=function(t){return li(t)===pp};at.isSuspense=function(t){return li(t)===vp};at.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===hp||t===_p||t===gp||t===pp||t===vp||t===KP||typeof t=="object"&&t!==null&&(t.$$typeof===xp||t.$$typeof===Tp||t.$$typeof===mp||t.$$typeof===yp||t.$$typeof===bp||t.$$typeof===GP||t.$$typeof===QP||t.$$typeof===JP||t.$$typeof===ZP)};at.typeOf=li;JA.exports=at;var eD=JA.exports,tE=eD,tD={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},nD={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},nE={};nE[tE.ForwardRef]=tD;nE[tE.Memo]=nD;var iD=!0;function iE(t,e,n){var i="";return n.split(" ").forEach(function(r){t[r]!==void 0?e.push(t[r]+";"):r&&(i+=r+" ")}),i}var h0=function(e,n,i){var r=e.key+"-"+n.name;(i===!1||iD===!1)&&e.registered[r]===void 0&&(e.registered[r]=n.styles)},rE=function(e,n,i){h0(e,n,i);var r=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+r:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function rD(t){for(var e=0,n,i=0,r=t.length;r>=4;++i,r-=4)n=t.charCodeAt(i)&255|(t.charCodeAt(++i)&255)<<8|(t.charCodeAt(++i)&255)<<16|(t.charCodeAt(++i)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(r){case 3:e^=(t.charCodeAt(i+2)&255)<<16;case 2:e^=(t.charCodeAt(i+1)&255)<<8;case 1:e^=t.charCodeAt(i)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var sD={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},aD=/[A-Z]|^ms/g,oD=/_EMO_([^_]+?)_([^]*?)_EMO_/g,sE=function(e){return e.charCodeAt(1)===45},N2=function(e){return e!=null&&typeof e!="boolean"},lm=GA(function(t){return sE(t)?t:t.replace(aD,"-$&").toLowerCase()}),B2=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(oD,function(i,r,s){return tr={name:r,styles:s,next:tr},r})}return sD[e]!==1&&!sE(e)&&typeof n=="number"&&n!==0?n+"px":n};function Jc(t,e,n){if(n==null)return"";var i=n;if(i.__emotion_styles!==void 0)return i;switch(typeof n){case"boolean":return"";case"object":{var r=n;if(r.anim===1)return tr={name:r.name,styles:r.styles,next:tr},r.name;var s=n;if(s.styles!==void 0){var a=s.next;if(a!==void 0)for(;a!==void 0;)tr={name:a.name,styles:a.styles,next:tr},a=a.next;var o=s.styles+";";return o}return lD(t,e,n)}case"function":{if(t!==void 0){var l=tr,c=n(t);return tr=l,Jc(t,e,c)}break}}var u=n;if(e==null)return u;var f=e[u];return f!==void 0?f:u}function lD(t,e,n){var i="";if(Array.isArray(n))for(var r=0;r<n.length;r++)i+=Jc(t,e,n[r])+";";else for(var s in n){var a=n[s];if(typeof a!="object"){var o=a;e!=null&&e[o]!==void 0?i+=s+"{"+e[o]+"}":N2(o)&&(i+=lm(s)+":"+B2(s,o)+";")}else if(Array.isArray(a)&&typeof a[0]=="string"&&(e==null||e[a[0]]===void 0))for(var l=0;l<a.length;l++)N2(a[l])&&(i+=lm(s)+":"+B2(s,a[l])+";");else{var c=Jc(t,e,a);switch(s){case"animation":case"animationName":{i+=lm(s)+":"+c+";";break}default:i+=s+"{"+c+"}"}}}return i}var L2=/label:\s*([^\s;{]+)\s*(;|$)/g,tr;function Sp(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var i=!0,r="";tr=void 0;var s=t[0];if(s==null||s.raw===void 0)i=!1,r+=Jc(n,e,s);else{var a=s;r+=a[0]}for(var o=1;o<t.length;o++)if(r+=Jc(n,e,t[o]),i){var l=s;r+=l[o]}L2.lastIndex=0;for(var c="",u;(u=L2.exec(r))!==null;)c+="-"+u[1];var f=rD(r)+c;return{name:f,styles:r,next:tr}}var cD=function(e){return e()},uD=md.useInsertionEffect?md.useInsertionEffect:!1,aE=uD||cD,oE=I.createContext(typeof HTMLElement<"u"?qP({key:"css"}):null);oE.Provider;var lE=function(e){return I.forwardRef(function(n,i){var r=I.useContext(oE);return e(n,r,i)})},p0=I.createContext({}),g0={}.hasOwnProperty,Gy="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",fD=function(e,n){var i={};for(var r in n)g0.call(n,r)&&(i[r]=n[r]);return i[Gy]=e,i},dD=function(e){var n=e.cache,i=e.serialized,r=e.isStringTag;return h0(n,i,r),aE(function(){return rE(n,i,r)}),null},hD=lE(function(t,e,n){var i=t.css;typeof i=="string"&&e.registered[i]!==void 0&&(i=e.registered[i]);var r=t[Gy],s=[i],a="";typeof t.className=="string"?a=iE(e.registered,s,t.className):t.className!=null&&(a=t.className+" ");var o=Sp(s,void 0,I.useContext(p0));a+=e.key+"-"+o.name;var l={};for(var c in t)g0.call(t,c)&&c!=="css"&&c!==Gy&&(l[c]=t[c]);return l.className=a,n&&(l.ref=n),I.createElement(I.Fragment,null,I.createElement(dD,{cache:e,serialized:o,isStringTag:typeof r=="string"}),I.createElement(r,l))}),pD=hD,U2=function(e,n){var i=arguments;if(n==null||!g0.call(n,"css"))return I.createElement.apply(void 0,i);var r=i.length,s=new Array(r);s[0]=pD,s[1]=fD(e,n);for(var a=2;a<r;a++)s[a]=i[a];return I.createElement.apply(null,s)};(function(t){var e;e||(e=t.JSX||(t.JSX={}))})(U2||(U2={}));function m0(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Sp(e)}function wu(){var t=m0.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var gD=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,mD=GA(function(t){return gD.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),yD=mD,_D=function(e){return e!=="theme"},F2=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?yD:_D},z2=function(e,n,i){var r;if(n){var s=n.shouldForwardProp;r=e.__emotion_forwardProp&&s?function(a){return e.__emotion_forwardProp(a)&&s(a)}:s}return typeof r!="function"&&i&&(r=e.__emotion_forwardProp),r},bD=function(e){var n=e.cache,i=e.serialized,r=e.isStringTag;return h0(n,i,r),aE(function(){return rE(n,i,r)}),null},vD=function t(e,n){var i=e.__emotion_real===e,r=i&&e.__emotion_base||e,s,a;n!==void 0&&(s=n.label,a=n.target);var o=z2(e,n,i),l=o||F2(r),c=!l("as");return function(){var u=arguments,f=i&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&f.push("label:"+s+";"),u[0]==null||u[0].raw===void 0)f.push.apply(f,u);else{var d=u[0];f.push(d[0]);for(var p=u.length,m=1;m<p;m++)f.push(u[m],d[m])}var S=lE(function(v,y,_){var T=c&&v.as||r,b="",M=[],C=v;if(v.theme==null){C={};for(var D in v)C[D]=v[D];C.theme=I.useContext(p0)}typeof v.className=="string"?b=iE(y.registered,M,v.className):v.className!=null&&(b=v.className+" ");var F=Sp(f.concat(M),y.registered,C);b+=y.key+"-"+F.name,a!==void 0&&(b+=" "+a);var L=c&&o===void 0?F2(T):l,U={};for(var N in v)c&&N==="as"||L(N)&&(U[N]=v[N]);return U.className=b,_&&(U.ref=_),I.createElement(I.Fragment,null,I.createElement(bD,{cache:y,serialized:F,isStringTag:typeof T=="string"}),I.createElement(T,U))});return S.displayName=s!==void 0?s:"Styled("+(typeof r=="string"?r:r.displayName||r.name||"Component")+")",S.defaultProps=e.defaultProps,S.__emotion_real=S,S.__emotion_base=r,S.__emotion_styles=f,S.__emotion_forwardProp=o,Object.defineProperty(S,"toString",{value:function(){return"."+a}}),S.withComponent=function(v,y){var _=t(v,me({},n,y,{shouldForwardProp:z2(S,y,!0)}));return _.apply(void 0,f)},S}},TD=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Qy=vD.bind(null);TD.forEach(function(t){Qy[t]=Qy(t)});function cE(t,e){return Qy(t,e)}function xD(t,e){Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))}const V2=[];function ma(t){return V2[0]=t,Sp(V2)}var uE={exports:{}},pt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y0=Symbol.for("react.transitional.element"),_0=Symbol.for("react.portal"),wp=Symbol.for("react.fragment"),Ap=Symbol.for("react.strict_mode"),Ep=Symbol.for("react.profiler"),Cp=Symbol.for("react.consumer"),Rp=Symbol.for("react.context"),Mp=Symbol.for("react.forward_ref"),Op=Symbol.for("react.suspense"),Ip=Symbol.for("react.suspense_list"),Pp=Symbol.for("react.memo"),Dp=Symbol.for("react.lazy"),SD=Symbol.for("react.view_transition"),wD=Symbol.for("react.client.reference");function Di(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case y0:switch(t=t.type,t){case wp:case Ep:case Ap:case Op:case Ip:case SD:return t;default:switch(t=t&&t.$$typeof,t){case Rp:case Mp:case Dp:case Pp:return t;case Cp:return t;default:return e}}case _0:return e}}}pt.ContextConsumer=Cp;pt.ContextProvider=Rp;pt.Element=y0;pt.ForwardRef=Mp;pt.Fragment=wp;pt.Lazy=Dp;pt.Memo=Pp;pt.Portal=_0;pt.Profiler=Ep;pt.StrictMode=Ap;pt.Suspense=Op;pt.SuspenseList=Ip;pt.isContextConsumer=function(t){return Di(t)===Cp};pt.isContextProvider=function(t){return Di(t)===Rp};pt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===y0};pt.isForwardRef=function(t){return Di(t)===Mp};pt.isFragment=function(t){return Di(t)===wp};pt.isLazy=function(t){return Di(t)===Dp};pt.isMemo=function(t){return Di(t)===Pp};pt.isPortal=function(t){return Di(t)===_0};pt.isProfiler=function(t){return Di(t)===Ep};pt.isStrictMode=function(t){return Di(t)===Ap};pt.isSuspense=function(t){return Di(t)===Op};pt.isSuspenseList=function(t){return Di(t)===Ip};pt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===wp||t===Ep||t===Ap||t===Op||t===Ip||typeof t=="object"&&t!==null&&(t.$$typeof===Dp||t.$$typeof===Pp||t.$$typeof===Rp||t.$$typeof===Cp||t.$$typeof===Mp||t.$$typeof===wD||t.getModuleId!==void 0)};pt.typeOf=Di;uE.exports=pt;var fE=uE.exports;function nr(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function dE(t){if(I.isValidElement(t)||fE.isValidElementType(t)||!nr(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=dE(t[n])}),e}function si(t,e,n={clone:!0}){const i=n.clone?{...t}:t;return nr(t)&&nr(e)&&Object.keys(e).forEach(r=>{I.isValidElement(e[r])||fE.isValidElementType(e[r])?i[r]=e[r]:nr(e[r])&&Object.prototype.hasOwnProperty.call(t,r)&&nr(t[r])?i[r]=si(t[r],e[r],n):n.clone?i[r]=nr(e[r])?dE(e[r]):e[r]:i[r]=e[r]}),i}const AD=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,i)=>n.val-i.val),e.reduce((n,i)=>({...n,[i.key]:i.val}),{})};function ED(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:i=5,...r}=t,s=AD(e),a=Object.keys(s);function o(d){return`@media (min-width:${typeof e[d]=="number"?e[d]:d}${n})`}function l(d){return`@media (max-width:${(typeof e[d]=="number"?e[d]:d)-i/100}${n})`}function c(d,p){const m=a.indexOf(p);return`@media (min-width:${typeof e[d]=="number"?e[d]:d}${n}) and (max-width:${(m!==-1&&typeof e[a[m]]=="number"?e[a[m]]:p)-i/100}${n})`}function u(d){return a.indexOf(d)+1<a.length?c(d,a[a.indexOf(d)+1]):o(d)}function f(d){const p=a.indexOf(d);return p===0?o(a[1]):p===a.length-1?l(a[p]):c(d,a[a.indexOf(d)+1]).replace("@media","@media not all and")}return{keys:a,values:s,up:o,down:l,between:c,only:u,not:f,unit:n,...r}}function $2(t,e){if(!t.containerQueries)return e;const n=Object.keys(e).filter(i=>i.startsWith("@container")).sort((i,r)=>{var a,o;const s=/min-width:\s*([0-9.]+)/;return+(((a=i.match(s))==null?void 0:a[1])||0)-+(((o=r.match(s))==null?void 0:o[1])||0)});return n.length?n.reduce((i,r)=>{const s=e[r];return delete i[r],i[r]=s,i},{...e}):e}function CD(t,e){return e==="@"||e.startsWith("@")&&(t.some(n=>e.startsWith(`@${n}`))||!!e.match(/^@\d/))}function RD(t,e){const n=e.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,i,r]=n,s=Number.isNaN(+i)?i||0:+i;return t.containerQueries(r).up(s)}function MD(t){const e=(s,a)=>s.replace("@media",a?`@container ${a}`:"@container");function n(s,a){s.up=(...o)=>e(t.breakpoints.up(...o),a),s.down=(...o)=>e(t.breakpoints.down(...o),a),s.between=(...o)=>e(t.breakpoints.between(...o),a),s.only=(...o)=>e(t.breakpoints.only(...o),a),s.not=(...o)=>{const l=e(t.breakpoints.not(...o),a);return l.includes("not all and")?l.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):l}}const i={},r=s=>(n(i,s),i);return n(r),{...t,containerQueries:r}}const OD={borderRadius:4};function wc(t,e){return e?si(t,e,{clone:!1}):t}const kp={xs:0,sm:600,md:900,lg:1200,xl:1536},j2={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${kp[t]}px)`},ID={containerQueries:t=>({up:e=>{let n=typeof e=="number"?e:kp[e]||e;return typeof n=="number"&&(n=`${n}px`),t?`@container ${t} (min-width:${n})`:`@container (min-width:${n})`}})};function Wr(t,e,n){const i=t.theme||{};if(Array.isArray(e)){const s=i.breakpoints||j2;return e.reduce((a,o,l)=>(a[s.up(s.keys[l])]=n(e[l]),a),{})}if(typeof e=="object"){const s=i.breakpoints||j2;return Object.keys(e).reduce((a,o)=>{if(CD(s.keys,o)){const l=RD(i.containerQueries?i:ID,o);l&&(a[l]=n(e[o],o))}else if(Object.keys(s.values||kp).includes(o)){const l=s.up(o);a[l]=n(e[o],o)}else{const l=o;a[l]=e[l]}return a},{})}return n(e)}function PD(t={}){var n;return((n=t.keys)==null?void 0:n.reduce((i,r)=>{const s=t.up(r);return i[s]={},i},{}))||{}}function H2(t,e){return t.reduce((n,i)=>{const r=n[i];return(!r||Object.keys(r).length===0)&&delete n[i],n},e)}function Ke(t){if(typeof t!="string")throw new Error(Ra(7));return t.charAt(0).toUpperCase()+t.slice(1)}function Np(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const i=`vars.${e}`.split(".").reduce((r,s)=>r&&r[s]?r[s]:null,t);if(i!=null)return i}return e.split(".").reduce((i,r)=>i&&i[r]!=null?i[r]:null,t)}function Xd(t,e,n,i=n){let r;return typeof t=="function"?r=t(n):Array.isArray(t)?r=t[n]||i:r=Np(t,n)||i,e&&(r=e(r,i,t)),r}function jt(t){const{prop:e,cssProperty:n=t.prop,themeKey:i,transform:r}=t,s=a=>{if(a[e]==null)return null;const o=a[e],l=a.theme,c=Np(l,i)||{};return Wr(a,o,f=>{let d=Xd(c,r,f);return f===d&&typeof f=="string"&&(d=Xd(c,r,`${e}${f==="default"?"":Ke(f)}`,f)),n===!1?d:{[n]:d}})};return s.propTypes={},s.filterProps=[e],s}function DD(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const kD={m:"margin",p:"padding"},ND={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},W2={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},BD=DD(t=>{if(t.length>2)if(W2[t])t=W2[t];else return[t];const[e,n]=t.split(""),i=kD[e],r=ND[n]||"";return Array.isArray(r)?r.map(s=>i+s):[i+r]}),b0=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],v0=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...b0,...v0];function Au(t,e,n,i){const r=Np(t,e,!0)??n;return typeof r=="number"||typeof r=="string"?s=>typeof s=="string"?s:typeof r=="string"?r.startsWith("var(")&&s===0?0:r.startsWith("var(")&&s===1?r:`calc(${s} * ${r})`:r*s:Array.isArray(r)?s=>{if(typeof s=="string")return s;const a=Math.abs(s),o=r[a];return s>=0?o:typeof o=="number"?-o:typeof o=="string"&&o.startsWith("var(")?`calc(-1 * ${o})`:`-${o}`}:typeof r=="function"?r:()=>{}}function T0(t){return Au(t,"spacing",8)}function Eu(t,e){return typeof e=="string"||e==null?e:t(e)}function LD(t,e){return n=>t.reduce((i,r)=>(i[r]=Eu(e,n),i),{})}function UD(t,e,n,i){if(!e.includes(n))return null;const r=BD(n),s=LD(r,i),a=t[n];return Wr(t,a,s)}function hE(t,e){const n=T0(t.theme);return Object.keys(t).map(i=>UD(t,e,i,n)).reduce(wc,{})}function Lt(t){return hE(t,b0)}Lt.propTypes={};Lt.filterProps=b0;function Ut(t){return hE(t,v0)}Ut.propTypes={};Ut.filterProps=v0;function pE(t=8,e=T0({spacing:t})){if(t.mui)return t;const n=(...i)=>(i.length===0?[1]:i).map(s=>{const a=e(s);return typeof a=="number"?`${a}px`:a}).join(" ");return n.mui=!0,n}function Bp(...t){const e=t.reduce((i,r)=>(r.filterProps.forEach(s=>{i[s]=r}),i),{}),n=i=>Object.keys(i).reduce((r,s)=>e[s]?wc(r,e[s](i)):r,{});return n.propTypes={},n.filterProps=t.reduce((i,r)=>i.concat(r.filterProps),[]),n}function _i(t){return typeof t!="number"?t:`${t}px solid`}function ki(t,e){return jt({prop:t,themeKey:"borders",transform:e})}const FD=ki("border",_i),zD=ki("borderTop",_i),VD=ki("borderRight",_i),$D=ki("borderBottom",_i),jD=ki("borderLeft",_i),HD=ki("borderColor"),WD=ki("borderTopColor"),YD=ki("borderRightColor"),XD=ki("borderBottomColor"),qD=ki("borderLeftColor"),KD=ki("outline",_i),ZD=ki("outlineColor"),Lp=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=Au(t.theme,"shape.borderRadius",4),n=i=>({borderRadius:Eu(e,i)});return Wr(t,t.borderRadius,n)}return null};Lp.propTypes={};Lp.filterProps=["borderRadius"];Bp(FD,zD,VD,$D,jD,HD,WD,YD,XD,qD,Lp,KD,ZD);const Up=t=>{if(t.gap!==void 0&&t.gap!==null){const e=Au(t.theme,"spacing",8),n=i=>({gap:Eu(e,i)});return Wr(t,t.gap,n)}return null};Up.propTypes={};Up.filterProps=["gap"];const Fp=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=Au(t.theme,"spacing",8),n=i=>({columnGap:Eu(e,i)});return Wr(t,t.columnGap,n)}return null};Fp.propTypes={};Fp.filterProps=["columnGap"];const zp=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=Au(t.theme,"spacing",8),n=i=>({rowGap:Eu(e,i)});return Wr(t,t.rowGap,n)}return null};zp.propTypes={};zp.filterProps=["rowGap"];const GD=jt({prop:"gridColumn"}),QD=jt({prop:"gridRow"}),JD=jt({prop:"gridAutoFlow"}),ek=jt({prop:"gridAutoColumns"}),tk=jt({prop:"gridAutoRows"}),nk=jt({prop:"gridTemplateColumns"}),ik=jt({prop:"gridTemplateRows"}),rk=jt({prop:"gridTemplateAreas"}),sk=jt({prop:"gridArea"});Bp(Up,Fp,zp,GD,QD,JD,ek,tk,nk,ik,rk,sk);function zo(t,e){return e==="grey"?e:t}const ak=jt({prop:"color",themeKey:"palette",transform:zo}),ok=jt({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:zo}),lk=jt({prop:"backgroundColor",themeKey:"palette",transform:zo});Bp(ak,ok,lk);function Gn(t){return t<=1&&t!==0?`${t*100}%`:t}const ck=jt({prop:"width",transform:Gn}),x0=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var r,s,a,o,l;const i=((a=(s=(r=t.theme)==null?void 0:r.breakpoints)==null?void 0:s.values)==null?void 0:a[n])||kp[n];return i?((l=(o=t.theme)==null?void 0:o.breakpoints)==null?void 0:l.unit)!=="px"?{maxWidth:`${i}${t.theme.breakpoints.unit}`}:{maxWidth:i}:{maxWidth:Gn(n)}};return Wr(t,t.maxWidth,e)}return null};x0.filterProps=["maxWidth"];const uk=jt({prop:"minWidth",transform:Gn}),fk=jt({prop:"height",transform:Gn}),dk=jt({prop:"maxHeight",transform:Gn}),hk=jt({prop:"minHeight",transform:Gn});jt({prop:"size",cssProperty:"width",transform:Gn});jt({prop:"size",cssProperty:"height",transform:Gn});const pk=jt({prop:"boxSizing"});Bp(ck,x0,uk,fk,dk,hk,pk);const Cu={border:{themeKey:"borders",transform:_i},borderTop:{themeKey:"borders",transform:_i},borderRight:{themeKey:"borders",transform:_i},borderBottom:{themeKey:"borders",transform:_i},borderLeft:{themeKey:"borders",transform:_i},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:_i},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Lp},color:{themeKey:"palette",transform:zo},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:zo},backgroundColor:{themeKey:"palette",transform:zo},p:{style:Ut},pt:{style:Ut},pr:{style:Ut},pb:{style:Ut},pl:{style:Ut},px:{style:Ut},py:{style:Ut},padding:{style:Ut},paddingTop:{style:Ut},paddingRight:{style:Ut},paddingBottom:{style:Ut},paddingLeft:{style:Ut},paddingX:{style:Ut},paddingY:{style:Ut},paddingInline:{style:Ut},paddingInlineStart:{style:Ut},paddingInlineEnd:{style:Ut},paddingBlock:{style:Ut},paddingBlockStart:{style:Ut},paddingBlockEnd:{style:Ut},m:{style:Lt},mt:{style:Lt},mr:{style:Lt},mb:{style:Lt},ml:{style:Lt},mx:{style:Lt},my:{style:Lt},margin:{style:Lt},marginTop:{style:Lt},marginRight:{style:Lt},marginBottom:{style:Lt},marginLeft:{style:Lt},marginX:{style:Lt},marginY:{style:Lt},marginInline:{style:Lt},marginInlineStart:{style:Lt},marginInlineEnd:{style:Lt},marginBlock:{style:Lt},marginBlockStart:{style:Lt},marginBlockEnd:{style:Lt},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Up},rowGap:{style:zp},columnGap:{style:Fp},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Gn},maxWidth:{style:x0},minWidth:{transform:Gn},height:{transform:Gn},maxHeight:{transform:Gn},minHeight:{transform:Gn},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function gk(...t){const e=t.reduce((i,r)=>i.concat(Object.keys(r)),[]),n=new Set(e);return t.every(i=>n.size===Object.keys(i).length)}function mk(t,e){return typeof t=="function"?t(e):t}function yk(){function t(n,i,r,s){const a={[n]:i,theme:r},o=s[n];if(!o)return{[n]:i};const{cssProperty:l=n,themeKey:c,transform:u,style:f}=o;if(i==null)return null;if(c==="typography"&&i==="inherit")return{[n]:i};const d=Np(r,c)||{};return f?f(a):Wr(a,i,m=>{let S=Xd(d,u,m);return m===S&&typeof m=="string"&&(S=Xd(d,u,`${n}${m==="default"?"":Ke(m)}`,m)),l===!1?S:{[l]:S}})}function e(n){const{sx:i,theme:r={},nested:s}=n||{};if(!i)return null;const a=r.unstable_sxConfig??Cu;function o(l){let c=l;if(typeof l=="function")c=l(r);else if(typeof l!="object")return l;if(!c)return null;const u=PD(r.breakpoints),f=Object.keys(u);let d=u;return Object.keys(c).forEach(p=>{const m=mk(c[p],r);if(m!=null)if(typeof m=="object")if(a[p])d=wc(d,t(p,m,r,a));else{const S=Wr({theme:r},m,v=>({[p]:v}));gk(S,m)?d[p]=e({sx:m,theme:r,nested:!0}):d=wc(d,S)}else d=wc(d,t(p,m,r,a))}),!s&&r.modularCssLayers?{"@layer sx":$2(r,H2(f,d))}:$2(r,H2(f,d))}return Array.isArray(i)?i.map(o):o(i)}return e}const Ma=yk();Ma.filterProps=["sx"];function _k(t,e){var i;const n=this;if(n.vars){if(!((i=n.colorSchemes)!=null&&i[t])||typeof n.getColorSchemeSelector!="function")return{};let r=n.getColorSchemeSelector(t);return r==="&"?e:((r.includes("data-")||r.includes("."))&&(r=`*:where(${r.replace(/\s*&$/,"")}) &`),{[r]:e})}return n.palette.mode===t?e:{}}function Vp(t={},...e){const{breakpoints:n={},palette:i={},spacing:r,shape:s={},...a}=t,o=ED(n),l=pE(r);let c=si({breakpoints:o,direction:"ltr",components:{},palette:{mode:"light",...i},spacing:l,shape:{...OD,...s}},a);return c=MD(c),c.applyStyles=_k,c=e.reduce((u,f)=>si(u,f),c),c.unstable_sxConfig={...Cu,...a==null?void 0:a.unstable_sxConfig},c.unstable_sx=function(f){return Ma({sx:f,theme:this})},c}function bk(t){return Object.keys(t).length===0}function gE(t=null){const e=I.useContext(p0);return!e||bk(e)?t:e}const vk=Vp();function $p(t=vk){return gE(t)}const Tk=t=>{var i;const e={systemProps:{},otherProps:{}},n=((i=t==null?void 0:t.theme)==null?void 0:i.unstable_sxConfig)??Cu;return Object.keys(t).forEach(r=>{n[r]?e.systemProps[r]=t[r]:e.otherProps[r]=t[r]}),e};function S0(t){const{sx:e,...n}=t,{systemProps:i,otherProps:r}=Tk(n);let s;return Array.isArray(e)?s=[i,...e]:typeof e=="function"?s=(...a)=>{const o=e(...a);return nr(o)?{...i,...o}:i}:s={...i,...e},{...r,sx:s}}const Y2=t=>t,xk=()=>{let t=Y2;return{configure(e){t=e},generate(e){return t(e)},reset(){t=Y2}}},mE=xk();function yE(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=yE(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function Oe(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=yE(t))&&(i&&(i+=" "),i+=e);return i}function Sk(t={}){const{themeId:e,defaultTheme:n,defaultClassName:i="MuiBox-root",generateClassName:r}=t,s=cE("div",{shouldForwardProp:o=>o!=="theme"&&o!=="sx"&&o!=="as"})(Ma);return I.forwardRef(function(l,c){const u=$p(n),{className:f,component:d="div",...p}=S0(l);return $.jsx(s,{as:d,ref:c,className:Oe(f,r?r(i):i),theme:e&&u[e]||u,...p})})}const wk={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Ct(t,e,n="Mui"){const i=wk[e];return i?`${n}-${i}`:`${mE.generate(t)}-${e}`}function St(t,e,n="Mui"){const i={};return e.forEach(r=>{i[r]=Ct(t,r,n)}),i}function _E(t){const{variants:e,...n}=t,i={variants:e,style:ma(n),isProcessed:!0};return i.style===n||e&&e.forEach(r=>{typeof r.style!="function"&&(r.style=ma(r.style))}),i}const Ak=Vp();function Ac(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}function la(t,e){return e&&t&&typeof t=="object"&&t.styles&&!t.styles.startsWith("@layer")&&(t.styles=`@layer ${e}{${String(t.styles)}}`),t}function Ek(t){return t?(e,n)=>n[t]:null}function Ck(t,e,n){t.theme=Mk(t.theme)?n:t.theme[e]||t.theme}function od(t,e,n){const i=typeof e=="function"?e(t):e;if(Array.isArray(i))return i.flatMap(r=>od(t,r,n));if(Array.isArray(i==null?void 0:i.variants)){let r;if(i.isProcessed)r=n?la(i.style,n):i.style;else{const{variants:s,...a}=i;r=n?la(ma(a),n):a}return bE(t,i.variants,[r],n)}return i!=null&&i.isProcessed?n?la(ma(i.style),n):i.style:n?la(ma(i),n):i}function bE(t,e,n=[],i=void 0){var s;let r;e:for(let a=0;a<e.length;a+=1){const o=e[a];if(typeof o.props=="function"){if(r??(r={...t,...t.ownerState,ownerState:t.ownerState}),!o.props(r))continue}else for(const l in o.props)if(t[l]!==o.props[l]&&((s=t.ownerState)==null?void 0:s[l])!==o.props[l])continue e;typeof o.style=="function"?(r??(r={...t,...t.ownerState,ownerState:t.ownerState}),n.push(i?la(ma(o.style(r)),i):o.style(r))):n.push(i?la(ma(o.style),i):o.style)}return n}function vE(t={}){const{themeId:e,defaultTheme:n=Ak,rootShouldForwardProp:i=Ac,slotShouldForwardProp:r=Ac}=t;function s(o){Ck(o,e,n)}return(o,l={})=>{xD(o,C=>C.filter(D=>D!==Ma));const{name:c,slot:u,skipVariantsResolver:f,skipSx:d,overridesResolver:p=Ek(Ik(u)),...m}=l,S=c&&c.startsWith("Mui")||u?"components":"custom",v=f!==void 0?f:u&&u!=="Root"&&u!=="root"||!1,y=d||!1;let _=Ac;u==="Root"||u==="root"?_=i:u?_=r:Ok(o)&&(_=void 0);const T=cE(o,{shouldForwardProp:_,label:Rk(),...m}),b=C=>{if(C.__emotion_real===C)return C;if(typeof C=="function")return function(F){return od(F,C,F.theme.modularCssLayers?S:void 0)};if(nr(C)){const D=_E(C);return function(L){return D.variants?od(L,D,L.theme.modularCssLayers?S:void 0):L.theme.modularCssLayers?la(D.style,S):D.style}}return C},M=(...C)=>{const D=[],F=C.map(b),L=[];if(D.push(s),c&&p&&L.push(function(Y){var z,G;const j=(G=(z=Y.theme.components)==null?void 0:z[c])==null?void 0:G.styleOverrides;if(!j)return null;const P={};for(const Q in j)P[Q]=od(Y,j[Q],Y.theme.modularCssLayers?"theme":void 0);return p(Y,P)}),c&&!v&&L.push(function(Y){var P,z;const k=Y.theme,j=(z=(P=k==null?void 0:k.components)==null?void 0:P[c])==null?void 0:z.variants;return j?bE(Y,j,[],Y.theme.modularCssLayers?"theme":void 0):null}),y||L.push(Ma),Array.isArray(F[0])){const A=F.shift(),Y=new Array(D.length).fill(""),k=new Array(L.length).fill("");let j;j=[...Y,...A,...k],j.raw=[...Y,...A.raw,...k],D.unshift(j)}const U=[...D,...F,...L],N=T(...U);return o.muiName&&(N.muiName=o.muiName),N};return T.withConfig&&(M.withConfig=T.withConfig),M}}function Rk(t,e){return void 0}function Mk(t){for(const e in t)return!1;return!0}function Ok(t){return typeof t=="string"&&t.charCodeAt(0)>96}function Ik(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}const Pk=vE();function eu(t,e,n=!1){const i={...e};for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){const s=r;if(s==="components"||s==="slots")i[s]={...t[s],...i[s]};else if(s==="componentsProps"||s==="slotProps"){const a=t[s],o=e[s];if(!o)i[s]=a||{};else if(!a)i[s]=o;else{i[s]={...o};for(const l in a)if(Object.prototype.hasOwnProperty.call(a,l)){const c=l;i[s][c]=eu(a[c],o[c],n)}}}else s==="className"&&n&&e.className?i.className=Oe(t==null?void 0:t.className,e==null?void 0:e.className):s==="style"&&n&&e.style?i.style={...t==null?void 0:t.style,...e==null?void 0:e.style}:i[s]===void 0&&(i[s]=t[s])}return i}function TE(t){const{theme:e,name:n,props:i}=t;return!e||!e.components||!e.components[n]||!e.components[n].defaultProps?i:eu(e.components[n].defaultProps,i)}function xE({props:t,name:e,defaultTheme:n,themeId:i}){let r=$p(n);return i&&(r=r[i]||r),TE({theme:r,name:e,props:t})}const Ru=typeof window<"u"?I.useLayoutEffect:I.useEffect;function Dk(t,e,n,i,r){const[s,a]=I.useState(()=>r&&n?n(t).matches:i?i(t).matches:e);return Ru(()=>{if(!n)return;const o=n(t),l=()=>{a(o.matches)};return l(),o.addEventListener("change",l),()=>{o.removeEventListener("change",l)}},[t,n]),s}const kk={...md},SE=kk.useSyncExternalStore;function Nk(t,e,n,i,r){const s=I.useCallback(()=>e,[e]),a=I.useMemo(()=>{if(r&&n)return()=>n(t).matches;if(i!==null){const{matches:u}=i(t);return()=>u}return s},[s,t,i,r,n]),[o,l]=I.useMemo(()=>{if(n===null)return[s,()=>()=>{}];const u=n(t);return[()=>u.matches,f=>(u.addEventListener("change",f),()=>{u.removeEventListener("change",f)})]},[s,n,t]);return SE(l,o,a)}function wE(t={}){const{themeId:e}=t;return function(i,r={}){let s=gE();s&&e&&(s=s[e]||s);const a=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:o=!1,matchMedia:l=a?window.matchMedia:null,ssrMatchMedia:c=null,noSsr:u=!1}=TE({name:"MuiUseMediaQuery",props:r,theme:s});let f=typeof i=="function"?i(s):i;return f=f.replace(/^@media( ?)/m,""),f.includes("print")&&console.warn(["MUI: You have provided a `print` query to the `useMediaQuery` hook.","Using the print media query to modify print styles can lead to unexpected results.","Consider using the `displayPrint` field in the `sx` prop instead.","More information about `displayPrint` on our docs: https://mui.com/system/display/#display-in-print."].join(`
`)),(SE!==void 0?Nk:Dk)(f,o,l,c,u)}}wE();function Bk(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}function w0(t,e=0,n=1){return Bk(t,e,n)}function Lk(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(i=>i+i)),n?`rgb${n.length===4?"a":""}(${n.map((i,r)=>r<3?parseInt(i,16):Math.round(parseInt(i,16)/255*1e3)/1e3).join(", ")})`:""}function Ns(t){if(t.type)return t;if(t.charAt(0)==="#")return Ns(Lk(t));const e=t.indexOf("("),n=t.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(Ra(9,t));let i=t.substring(e+1,t.length-1),r;if(n==="color"){if(i=i.split(" "),r=i.shift(),i.length===4&&i[3].charAt(0)==="/"&&(i[3]=i[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(r))throw new Error(Ra(10,r))}else i=i.split(",");return i=i.map(s=>parseFloat(s)),{type:n,values:i,colorSpace:r}}const Uk=t=>{const e=Ns(t);return e.values.slice(0,3).map((n,i)=>e.type.includes("hsl")&&i!==0?`${n}%`:n).join(" ")},nc=(t,e)=>{try{return Uk(t)}catch{return t}};function jp(t){const{type:e,colorSpace:n}=t;let{values:i}=t;return e.includes("rgb")?i=i.map((r,s)=>s<3?parseInt(r,10):r):e.includes("hsl")&&(i[1]=`${i[1]}%`,i[2]=`${i[2]}%`),e.includes("color")?i=`${n} ${i.join(" ")}`:i=`${i.join(", ")}`,`${e}(${i})`}function AE(t){t=Ns(t);const{values:e}=t,n=e[0],i=e[1]/100,r=e[2]/100,s=i*Math.min(r,1-r),a=(c,u=(c+n/30)%12)=>r-s*Math.max(Math.min(u-3,9-u,1),-1);let o="rgb";const l=[Math.round(a(0)*255),Math.round(a(8)*255),Math.round(a(4)*255)];return t.type==="hsla"&&(o+="a",l.push(e[3])),jp({type:o,values:l})}function Jy(t){t=Ns(t);let e=t.type==="hsl"||t.type==="hsla"?Ns(AE(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function Fk(t,e){const n=Jy(t),i=Jy(e);return(Math.max(n,i)+.05)/(Math.min(n,i)+.05)}function Bs(t,e){return t=Ns(t),e=w0(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,jp(t)}function qs(t,e,n){try{return Bs(t,e)}catch{return t}}function Hp(t,e){if(t=Ns(t),e=w0(e),t.type.includes("hsl"))t.values[2]*=1-e;else if(t.type.includes("rgb")||t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]*=1-e;return jp(t)}function nt(t,e,n){try{return Hp(t,e)}catch{return t}}function Wp(t,e){if(t=Ns(t),e=w0(e),t.type.includes("hsl"))t.values[2]+=(100-t.values[2])*e;else if(t.type.includes("rgb"))for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return jp(t)}function it(t,e,n){try{return Wp(t,e)}catch{return t}}function zk(t,e=.15){return Jy(t)>.5?Hp(t,e):Wp(t,e)}function vf(t,e,n){try{return zk(t,e)}catch{return t}}const Vk=I.createContext(),Yp=()=>I.useContext(Vk)??!1,$k=I.createContext(void 0);function jk(t){const{theme:e,name:n,props:i}=t;if(!e||!e.components||!e.components[n])return i;const r=e.components[n];return r.defaultProps?eu(r.defaultProps,i,e.components.mergeClassNameAndStyle):!r.styleOverrides&&!r.variants?eu(r,i,e.components.mergeClassNameAndStyle):i}function Hk({props:t,name:e}){const n=I.useContext($k);return jk({props:t,name:e,theme:{components:n}})}let X2=0;function Wk(t){const[e,n]=I.useState(t),i=t||e;return I.useEffect(()=>{e==null&&(X2+=1,n(`mui-${X2}`))},[e]),i}const Yk={...md},q2=Yk.useId;function A0(t){if(q2!==void 0){const e=q2();return t??e}return Wk(t)}const K2={theme:void 0};function Xk(t){let e,n;return function(r){let s=e;return(s===void 0||r.theme!==n)&&(K2.theme=r.theme,s=_E(t(K2)),e=s,n=r.theme),s}}function qk(t=""){function e(...i){if(!i.length)return"";const r=i[0];return typeof r=="string"&&!r.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${t?`${t}-`:""}${r}${e(...i.slice(1))})`:`, ${r}`}return(i,...r)=>`var(--${t?`${t}-`:""}${i}${e(...r)})`}const Z2=(t,e,n,i=[])=>{let r=t;e.forEach((s,a)=>{a===e.length-1?Array.isArray(r)?r[Number(s)]=n:r&&typeof r=="object"&&(r[s]=n):r&&typeof r=="object"&&(r[s]||(r[s]=i.includes(s)?[]:{}),r=r[s])})},Kk=(t,e,n)=>{function i(r,s=[],a=[]){Object.entries(r).forEach(([o,l])=>{(!n||n&&!n([...s,o]))&&l!=null&&(typeof l=="object"&&Object.keys(l).length>0?i(l,[...s,o],Array.isArray(l)?[...a,o]:a):e([...s,o],l,a))})}i(t)},Zk=(t,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(i=>t.includes(i))||t[t.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function cm(t,e){const{prefix:n,shouldSkipGeneratingVar:i}=e||{},r={},s={},a={};return Kk(t,(o,l,c)=>{if((typeof l=="string"||typeof l=="number")&&(!i||!i(o,l))){const u=`--${n?`${n}-`:""}${o.join("-")}`,f=Zk(o,l);Object.assign(r,{[u]:f}),Z2(s,o,`var(${u})`,c),Z2(a,o,`var(${u}, ${f})`,c)}},o=>o[0]==="vars"),{css:r,vars:s,varsWithDefaults:a}}function Gk(t,e={}){const{getSelector:n=y,disableCssColorScheme:i,colorSchemeSelector:r,enableContrastVars:s}=e,{colorSchemes:a={},components:o,defaultColorScheme:l="light",...c}=t,{vars:u,css:f,varsWithDefaults:d}=cm(c,e);let p=d;const m={},{[l]:S,...v}=a;if(Object.entries(v||{}).forEach(([b,M])=>{const{vars:C,css:D,varsWithDefaults:F}=cm(M,e);p=si(p,F),m[b]={css:D,vars:C}}),S){const{css:b,vars:M,varsWithDefaults:C}=cm(S,e);p=si(p,C),m[l]={css:b,vars:M}}function y(b,M){var D,F;let C=r;if(r==="class"&&(C=".%s"),r==="data"&&(C="[data-%s]"),r!=null&&r.startsWith("data-")&&!r.includes("%s")&&(C=`[${r}="%s"]`),b){if(C==="media")return t.defaultColorScheme===b?":root":{[`@media (prefers-color-scheme: ${((F=(D=a[b])==null?void 0:D.palette)==null?void 0:F.mode)||b})`]:{":root":M}};if(C)return t.defaultColorScheme===b?`:root, ${C.replace("%s",String(b))}`:C.replace("%s",String(b))}return":root"}return{vars:p,generateThemeVars:()=>{let b={...u};return Object.entries(m).forEach(([,{vars:M}])=>{b=si(b,M)}),b},generateStyleSheets:()=>{var L,U;const b=[],M=t.defaultColorScheme||"light";function C(N,A){Object.keys(A).length&&b.push(typeof N=="string"?{[N]:{...A}}:N)}C(n(void 0,{...f}),f);const{[M]:D,...F}=m;if(D){const{css:N}=D,A=(U=(L=a[M])==null?void 0:L.palette)==null?void 0:U.mode,Y=!i&&A?{colorScheme:A,...N}:{...N};C(n(M,{...Y}),Y)}return Object.entries(F).forEach(([N,{css:A}])=>{var j,P;const Y=(P=(j=a[N])==null?void 0:j.palette)==null?void 0:P.mode,k=!i&&Y?{colorScheme:Y,...A}:{...A};C(n(N,{...k}),k)}),s&&b.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),b}}}function Qk(t){return function(n){return t==="media"?`@media (prefers-color-scheme: ${n})`:t?t.startsWith("data-")&&!t.includes("%s")?`[${t}="${n}"] &`:t==="class"?`.${n} &`:t==="data"?`[data-${n}] &`:`${t.replace("%s",n)} &`:"&"}}function wt(t,e,n=void 0){const i={};for(const r in t){const s=t[r];let a="",o=!0;for(let l=0;l<s.length;l+=1){const c=s[l];c&&(a+=(o===!0?"":" ")+e(c),o=!1,n&&n[c]&&(a+=" "+n[c]))}i[r]=a}return i}function EE(t,e){var n,i,r;return I.isValidElement(t)&&e.indexOf(t.type.muiName??((r=(i=(n=t.type)==null?void 0:n._payload)==null?void 0:i.value)==null?void 0:r.muiName))!==-1}const Jk=(t,e)=>t.filter(n=>e.includes(n)),El=(t,e,n)=>{const i=t.keys[0];Array.isArray(e)?e.forEach((r,s)=>{n((a,o)=>{s<=t.keys.length-1&&(s===0?Object.assign(a,o):a[t.up(t.keys[s])]=o)},r)}):e&&typeof e=="object"?(Object.keys(e).length>t.keys.length?t.keys:Jk(t.keys,Object.keys(e))).forEach(s=>{if(t.keys.includes(s)){const a=e[s];a!==void 0&&n((o,l)=>{i===s?Object.assign(o,l):o[t.up(s)]=l},a)}}):(typeof e=="number"||typeof e=="string")&&n((r,s)=>{Object.assign(r,s)},e)};function qd(t){return`--Grid-${t}Spacing`}function Xp(t){return`--Grid-parent-${t}Spacing`}const G2="--Grid-columns",Vo="--Grid-parent-columns",eN=({theme:t,ownerState:e})=>{const n={};return El(t.breakpoints,e.size,(i,r)=>{let s={};r==="grow"&&(s={flexBasis:0,flexGrow:1,maxWidth:"100%"}),r==="auto"&&(s={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof r=="number"&&(s={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${r} / var(${Vo}) - (var(${Vo}) - ${r}) * (var(${Xp("column")}) / var(${Vo})))`}),i(n,s)}),n},tN=({theme:t,ownerState:e})=>{const n={};return El(t.breakpoints,e.offset,(i,r)=>{let s={};r==="auto"&&(s={marginLeft:"auto"}),typeof r=="number"&&(s={marginLeft:r===0?"0px":`calc(100% * ${r} / var(${Vo}) + var(${Xp("column")}) * ${r} / var(${Vo}))`}),i(n,s)}),n},nN=({theme:t,ownerState:e})=>{if(!e.container)return{};const n={[G2]:12};return El(t.breakpoints,e.columns,(i,r)=>{const s=r??12;i(n,{[G2]:s,"> *":{[Vo]:s}})}),n},iN=({theme:t,ownerState:e})=>{if(!e.container)return{};const n={};return El(t.breakpoints,e.rowSpacing,(i,r)=>{var a;const s=typeof r=="string"?r:(a=t.spacing)==null?void 0:a.call(t,r);i(n,{[qd("row")]:s,"> *":{[Xp("row")]:s}})}),n},rN=({theme:t,ownerState:e})=>{if(!e.container)return{};const n={};return El(t.breakpoints,e.columnSpacing,(i,r)=>{var a;const s=typeof r=="string"?r:(a=t.spacing)==null?void 0:a.call(t,r);i(n,{[qd("column")]:s,"> *":{[Xp("column")]:s}})}),n},sN=({theme:t,ownerState:e})=>{if(!e.container)return{};const n={};return El(t.breakpoints,e.direction,(i,r)=>{i(n,{flexDirection:r})}),n},aN=({ownerState:t})=>({minWidth:0,boxSizing:"border-box",...t.container&&{display:"flex",flexWrap:"wrap",...t.wrap&&t.wrap!=="wrap"&&{flexWrap:t.wrap},gap:`var(${qd("row")}) var(${qd("column")})`}}),oN=t=>{const e=[];return Object.entries(t).forEach(([n,i])=>{i!==!1&&i!==void 0&&e.push(`grid-${n}-${String(i)}`)}),e},lN=(t,e="xs")=>{function n(i){return i===void 0?!1:typeof i=="string"&&!Number.isNaN(Number(i))||typeof i=="number"&&i>0}if(n(t))return[`spacing-${e}-${String(t)}`];if(typeof t=="object"&&!Array.isArray(t)){const i=[];return Object.entries(t).forEach(([r,s])=>{n(s)&&i.push(`spacing-${r}-${String(s)}`)}),i}return[]},cN=t=>t===void 0?[]:typeof t=="object"?Object.entries(t).map(([e,n])=>`direction-${e}-${n}`):[`direction-xs-${String(t)}`];function uN(t,e){t.item!==void 0&&delete t.item,t.zeroMinWidth!==void 0&&delete t.zeroMinWidth,e.keys.forEach(n=>{t[n]!==void 0&&delete t[n]})}const fN=Vp(),dN=Pk("div",{name:"MuiGrid",slot:"Root"});function hN(t){return xE({props:t,name:"MuiGrid",defaultTheme:fN})}function pN(t={}){const{createStyledComponent:e=dN,useThemeProps:n=hN,useTheme:i=$p,componentName:r="MuiGrid"}=t,s=(c,u)=>{const{container:f,direction:d,spacing:p,wrap:m,size:S}=c,v={root:["root",f&&"container",m!=="wrap"&&`wrap-xs-${String(m)}`,...cN(d),...oN(S),...f?lN(p,u.breakpoints.keys[0]):[]]};return wt(v,y=>Ct(r,y),{})};function a(c,u,f=()=>!0){const d={};return c===null||(Array.isArray(c)?c.forEach((p,m)=>{p!==null&&f(p)&&u.keys[m]&&(d[u.keys[m]]=p)}):typeof c=="object"?Object.keys(c).forEach(p=>{const m=c[p];m!=null&&f(m)&&(d[p]=m)}):d[u.keys[0]]=c),d}const o=e(nN,rN,iN,eN,sN,aN,tN),l=I.forwardRef(function(u,f){const d=i(),p=n(u),m=S0(p);uN(m,d.breakpoints);const{className:S,children:v,columns:y=12,container:_=!1,component:T="div",direction:b="row",wrap:M="wrap",size:C={},offset:D={},spacing:F=0,rowSpacing:L=F,columnSpacing:U=F,unstable_level:N=0,...A}=m,Y=a(C,d.breakpoints,ae=>ae!==!1),k=a(D,d.breakpoints),j=u.columns??(N?void 0:y),P=u.spacing??(N?void 0:F),z=u.rowSpacing??u.spacing??(N?void 0:L),G=u.columnSpacing??u.spacing??(N?void 0:U),Q={...m,level:N,columns:j,container:_,direction:b,wrap:M,spacing:P,rowSpacing:z,columnSpacing:G,size:Y,offset:k},se=s(Q,d);return $.jsx(o,{ref:f,as:T,ownerState:Q,className:Oe(se.root,S),...A,children:I.Children.map(v,ae=>{var ce;return I.isValidElement(ae)&&EE(ae,["Grid"])&&_&&ae.props.container?I.cloneElement(ae,{unstable_level:((ce=ae.props)==null?void 0:ce.unstable_level)??N+1}):ae})})});return l.muiName="Grid",l}const Mu="$$material",tu={black:"#000",white:"#fff"},gN={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Za={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},Ga={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},Hl={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},Qa={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},Ja={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},eo={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function CE(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:tu.white,default:tu.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const RE=CE();function ME(){return{text:{primary:tu.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:tu.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const e_=ME();function Q2(t,e,n,i){const r=i.light||i,s=i.dark||i*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=Wp(t.main,r):e==="dark"&&(t.dark=Hp(t.main,s)))}function J2(t,e,n,i,r){const s=r.light||r,a=r.dark||r*1.5;e[n]||(e.hasOwnProperty(i)?e[n]=e[i]:n==="light"?e.light=`color-mix(in ${t}, ${e.main}, #fff ${(s*100).toFixed(0)}%)`:n==="dark"&&(e.dark=`color-mix(in ${t}, ${e.main}, #000 ${(a*100).toFixed(0)}%)`))}function mN(t="light"){return t==="dark"?{main:Qa[200],light:Qa[50],dark:Qa[400]}:{main:Qa[700],light:Qa[400],dark:Qa[800]}}function yN(t="light"){return t==="dark"?{main:Za[200],light:Za[50],dark:Za[400]}:{main:Za[500],light:Za[300],dark:Za[700]}}function _N(t="light"){return t==="dark"?{main:Ga[500],light:Ga[300],dark:Ga[700]}:{main:Ga[700],light:Ga[400],dark:Ga[800]}}function bN(t="light"){return t==="dark"?{main:Ja[400],light:Ja[300],dark:Ja[700]}:{main:Ja[700],light:Ja[500],dark:Ja[900]}}function vN(t="light"){return t==="dark"?{main:eo[400],light:eo[300],dark:eo[700]}:{main:eo[800],light:eo[500],dark:eo[900]}}function TN(t="light"){return t==="dark"?{main:Hl[400],light:Hl[300],dark:Hl[700]}:{main:"#ed6c02",light:Hl[500],dark:Hl[900]}}function xN(t){return`oklch(from ${t} var(--__l) 0 h / var(--__a))`}function E0(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:i=.2,colorSpace:r,...s}=t,a=t.primary||mN(e),o=t.secondary||yN(e),l=t.error||_N(e),c=t.info||bN(e),u=t.success||vN(e),f=t.warning||TN(e);function d(v){return r?xN(v):Fk(v,e_.text.primary)>=n?e_.text.primary:RE.text.primary}const p=({color:v,name:y,mainShade:_=500,lightShade:T=300,darkShade:b=700})=>{if(v={...v},!v.main&&v[_]&&(v.main=v[_]),!v.hasOwnProperty("main"))throw new Error(Ra(11,y?` (${y})`:"",_));if(typeof v.main!="string")throw new Error(Ra(12,y?` (${y})`:"",JSON.stringify(v.main)));return r?(J2(r,v,"light",T,i),J2(r,v,"dark",b,i)):(Q2(v,"light",T,i),Q2(v,"dark",b,i)),v.contrastText||(v.contrastText=d(v.main)),v};let m;return e==="light"?m=CE():e==="dark"&&(m=ME()),si({common:{...tu},mode:e,primary:p({color:a,name:"primary"}),secondary:p({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:p({color:l,name:"error"}),warning:p({color:f,name:"warning"}),info:p({color:c,name:"info"}),success:p({color:u,name:"success"}),grey:gN,contrastThreshold:n,getContrastText:d,augmentColor:p,tonalOffset:i,...m},s)}function SN(t){const e={};return Object.entries(t).forEach(i=>{const[r,s]=i;typeof s=="object"&&(e[r]=`${s.fontStyle?`${s.fontStyle} `:""}${s.fontVariant?`${s.fontVariant} `:""}${s.fontWeight?`${s.fontWeight} `:""}${s.fontStretch?`${s.fontStretch} `:""}${s.fontSize||""}${s.lineHeight?`/${s.lineHeight} `:""}${s.fontFamily||""}`)}),e}function wN(t,e){return{toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}},...e}}function AN(t){return Math.round(t*1e5)/1e5}const e3={textTransform:"uppercase"},t3='"Roboto", "Helvetica", "Arial", sans-serif';function EN(t,e){const{fontFamily:n=t3,fontSize:i=14,fontWeightLight:r=300,fontWeightRegular:s=400,fontWeightMedium:a=500,fontWeightBold:o=700,htmlFontSize:l=16,allVariants:c,pxToRem:u,...f}=typeof e=="function"?e(t):e,d=i/14,p=u||(v=>`${v/l*d}rem`),m=(v,y,_,T,b)=>({fontFamily:n,fontWeight:v,fontSize:p(y),lineHeight:_,...n===t3?{letterSpacing:`${AN(T/y)}em`}:{},...b,...c}),S={h1:m(r,96,1.167,-1.5),h2:m(r,60,1.2,-.5),h3:m(s,48,1.167,0),h4:m(s,34,1.235,.25),h5:m(s,24,1.334,0),h6:m(a,20,1.6,.15),subtitle1:m(s,16,1.75,.15),subtitle2:m(a,14,1.57,.1),body1:m(s,16,1.5,.15),body2:m(s,14,1.43,.15),button:m(a,14,1.75,.4,e3),caption:m(s,12,1.66,.4),overline:m(s,12,2.66,1,e3),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return si({htmlFontSize:l,pxToRem:p,fontFamily:n,fontSize:i,fontWeightLight:r,fontWeightRegular:s,fontWeightMedium:a,fontWeightBold:o,...S},f,{clone:!1})}const CN=.2,RN=.14,MN=.12;function At(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${CN})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${RN})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${MN})`].join(",")}const ON=["none",At(0,2,1,-1,0,1,1,0,0,1,3,0),At(0,3,1,-2,0,2,2,0,0,1,5,0),At(0,3,3,-2,0,3,4,0,0,1,8,0),At(0,2,4,-1,0,4,5,0,0,1,10,0),At(0,3,5,-1,0,5,8,0,0,1,14,0),At(0,3,5,-1,0,6,10,0,0,1,18,0),At(0,4,5,-2,0,7,10,1,0,2,16,1),At(0,5,5,-3,0,8,10,1,0,3,14,2),At(0,5,6,-3,0,9,12,1,0,3,16,2),At(0,6,6,-3,0,10,14,1,0,4,18,3),At(0,6,7,-4,0,11,15,1,0,4,20,3),At(0,7,8,-4,0,12,17,2,0,5,22,4),At(0,7,8,-4,0,13,19,2,0,5,24,4),At(0,7,9,-4,0,14,21,2,0,5,26,4),At(0,8,9,-5,0,15,22,2,0,6,28,5),At(0,8,10,-5,0,16,24,2,0,6,30,5),At(0,8,11,-5,0,17,26,2,0,6,32,5),At(0,9,11,-5,0,18,28,2,0,7,34,6),At(0,9,12,-6,0,19,29,2,0,7,36,6),At(0,10,13,-6,0,20,31,3,0,8,38,7),At(0,10,13,-6,0,21,33,3,0,8,40,7),At(0,10,14,-6,0,22,35,3,0,8,42,7),At(0,11,14,-7,0,23,36,3,0,9,44,8),At(0,11,15,-7,0,24,38,3,0,9,46,8)],IN={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},PN={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function n3(t){return`${Math.round(t)}ms`}function DN(t){if(!t)return 0;const e=t/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function kN(t){const e={...IN,...t.easing},n={...PN,...t.duration};return{getAutoHeightDuration:DN,create:(r=["all"],s={})=>{const{duration:a=n.standard,easing:o=e.easeInOut,delay:l=0,...c}=s;return(Array.isArray(r)?r:[r]).map(u=>`${u} ${typeof a=="string"?a:n3(a)} ${o} ${typeof l=="string"?l:n3(l)}`).join(",")},...t,easing:e,duration:n}}const NN={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function BN(t){return nr(t)||typeof t>"u"||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||Array.isArray(t)}function OE(t={}){const e={...t};function n(i){const r=Object.entries(i);for(let s=0;s<r.length;s++){const[a,o]=r[s];!BN(o)||a.startsWith("unstable_")?delete i[a]:nr(o)&&(i[a]={...o},n(i[a]))}}return n(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function i3(t){return typeof t=="number"?`${(t*100).toFixed(0)}%`:`calc((${t}) * 100%)`}const LN=t=>{if(!Number.isNaN(+t))return+t;const e=t.match(/\d*\.?\d+/g);if(!e)return 0;let n=0;for(let i=0;i<e.length;i+=1)n+=+e[i];return n};function UN(t){Object.assign(t,{alpha(e,n){const i=this||t;return i.colorSpace?`oklch(from ${e} l c h / ${typeof n=="string"?`calc(${n})`:n})`:i.vars?`rgba(${e.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof n=="string"?`calc(${n})`:n})`:Bs(e,LN(n))},lighten(e,n){const i=this||t;return i.colorSpace?`color-mix(in ${i.colorSpace}, ${e}, #fff ${i3(n)})`:Wp(e,n)},darken(e,n){const i=this||t;return i.colorSpace?`color-mix(in ${i.colorSpace}, ${e}, #000 ${i3(n)})`:Hp(e,n)}})}function t_(t={},...e){const{breakpoints:n,mixins:i={},spacing:r,palette:s={},transitions:a={},typography:o={},shape:l,colorSpace:c,...u}=t;if(t.vars&&t.generateThemeVars===void 0)throw new Error(Ra(20));const f=E0({...s,colorSpace:c}),d=Vp(t);let p=si(d,{mixins:wN(d.breakpoints,i),palette:f,shadows:ON.slice(),typography:EN(f,o),transitions:kN(a),zIndex:{...NN}});return p=si(p,u),p=e.reduce((m,S)=>si(m,S),p),p.unstable_sxConfig={...Cu,...u==null?void 0:u.unstable_sxConfig},p.unstable_sx=function(S){return Ma({sx:S,theme:this})},p.toRuntimeSource=OE,UN(p),p}function FN(t){let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,Math.round(e*10)/1e3}const zN=[...Array(25)].map((t,e)=>{if(e===0)return"none";const n=FN(e);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function IE(t){return{inputPlaceholder:t==="dark"?.5:.42,inputUnderline:t==="dark"?.7:.42,switchTrackDisabled:t==="dark"?.2:.12,switchTrack:t==="dark"?.3:.38}}function PE(t){return t==="dark"?zN:[]}function VN(t){const{palette:e={mode:"light"},opacity:n,overlays:i,colorSpace:r,...s}=t,a=E0({...e,colorSpace:r});return{palette:a,opacity:{...IE(a.mode),...n},overlays:i||PE(a.mode),...s}}function $N(t){var e;return!!t[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!t[0].match(/sxConfig$/)||t[0]==="palette"&&!!((e=t[1])!=null&&e.match(/(mode|contrastThreshold|tonalOffset)/))}const jN=t=>[...[...Array(25)].map((e,n)=>`--${t?`${t}-`:""}overlays-${n}`),`--${t?`${t}-`:""}palette-AppBar-darkBg`,`--${t?`${t}-`:""}palette-AppBar-darkColor`],HN=t=>(e,n)=>{const i=t.rootSelector||":root",r=t.colorSchemeSelector;let s=r;if(r==="class"&&(s=".%s"),r==="data"&&(s="[data-%s]"),r!=null&&r.startsWith("data-")&&!r.includes("%s")&&(s=`[${r}="%s"]`),t.defaultColorScheme===e){if(e==="dark"){const a={};return jN(t.cssVarPrefix).forEach(o=>{a[o]=n[o],delete n[o]}),s==="media"?{[i]:n,"@media (prefers-color-scheme: dark)":{[i]:a}}:s?{[s.replace("%s",e)]:a,[`${i}, ${s.replace("%s",e)}`]:n}:{[i]:{...n,...a}}}if(s&&s!=="media")return`${i}, ${s.replace("%s",String(e))}`}else if(e){if(s==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[i]:n}};if(s)return s.replace("%s",String(e))}return i};function WN(t,e){e.forEach(n=>{t[n]||(t[n]={})})}function J(t,e,n){!t[e]&&n&&(t[e]=n)}function ic(t){return typeof t!="string"||!t.startsWith("hsl")?t:AE(t)}function Sr(t,e){`${e}Channel`in t||(t[`${e}Channel`]=nc(ic(t[e])))}function YN(t){return typeof t=="number"?`${t}px`:typeof t=="string"||typeof t=="function"||Array.isArray(t)?t:"8px"}const Zi=t=>{try{return t()}catch{}},XN=(t="mui")=>qk(t);function um(t,e,n,i,r){if(!n)return;n=n===!0?{}:n;const s=r==="dark"?"dark":"light";if(!i){e[r]=VN({...n,palette:{mode:s,...n==null?void 0:n.palette},colorSpace:t});return}const{palette:a,...o}=t_({...i,palette:{mode:s,...n==null?void 0:n.palette},colorSpace:t});return e[r]={...n,palette:a,opacity:{...IE(s),...n==null?void 0:n.opacity},overlays:(n==null?void 0:n.overlays)||PE(s)},o}function qN(t={},...e){const{colorSchemes:n={light:!0},defaultColorScheme:i,disableCssColorScheme:r=!1,cssVarPrefix:s="mui",nativeColor:a=!1,shouldSkipGeneratingVar:o=$N,colorSchemeSelector:l=n.light&&n.dark?"media":void 0,rootSelector:c=":root",...u}=t,f=Object.keys(n)[0],d=i||(n.light&&f!=="light"?"light":f),p=XN(s),{[d]:m,light:S,dark:v,...y}=n,_={...y};let T=m;if((d==="dark"&&!("dark"in n)||d==="light"&&!("light"in n))&&(T=!0),!T)throw new Error(Ra(21,d));let b;a&&(b="oklch");const M=um(b,_,T,u,d);S&&!_.light&&um(b,_,S,void 0,"light"),v&&!_.dark&&um(b,_,v,void 0,"dark");let C={defaultColorScheme:d,...M,cssVarPrefix:s,colorSchemeSelector:l,rootSelector:c,getCssVar:p,colorSchemes:_,font:{...SN(M.typography),...M.font},spacing:YN(u.spacing)};Object.keys(C.colorSchemes).forEach(N=>{const A=C.colorSchemes[N].palette,Y=j=>{const P=j.split("-"),z=P[1],G=P[2];return p(j,A[z][G])};A.mode==="light"&&(J(A.common,"background","#fff"),J(A.common,"onBackground","#000")),A.mode==="dark"&&(J(A.common,"background","#000"),J(A.common,"onBackground","#fff"));function k(j,P,z){if(b){let G;return j===qs&&(G=`transparent ${((1-z)*100).toFixed(0)}%`),j===nt&&(G=`#000 ${(z*100).toFixed(0)}%`),j===it&&(G=`#fff ${(z*100).toFixed(0)}%`),`color-mix(in ${b}, ${P}, ${G})`}return j(P,z)}if(WN(A,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),A.mode==="light"){J(A.Alert,"errorColor",k(nt,A.error.light,.6)),J(A.Alert,"infoColor",k(nt,A.info.light,.6)),J(A.Alert,"successColor",k(nt,A.success.light,.6)),J(A.Alert,"warningColor",k(nt,A.warning.light,.6)),J(A.Alert,"errorFilledBg",Y("palette-error-main")),J(A.Alert,"infoFilledBg",Y("palette-info-main")),J(A.Alert,"successFilledBg",Y("palette-success-main")),J(A.Alert,"warningFilledBg",Y("palette-warning-main")),J(A.Alert,"errorFilledColor",Zi(()=>A.getContrastText(A.error.main))),J(A.Alert,"infoFilledColor",Zi(()=>A.getContrastText(A.info.main))),J(A.Alert,"successFilledColor",Zi(()=>A.getContrastText(A.success.main))),J(A.Alert,"warningFilledColor",Zi(()=>A.getContrastText(A.warning.main))),J(A.Alert,"errorStandardBg",k(it,A.error.light,.9)),J(A.Alert,"infoStandardBg",k(it,A.info.light,.9)),J(A.Alert,"successStandardBg",k(it,A.success.light,.9)),J(A.Alert,"warningStandardBg",k(it,A.warning.light,.9)),J(A.Alert,"errorIconColor",Y("palette-error-main")),J(A.Alert,"infoIconColor",Y("palette-info-main")),J(A.Alert,"successIconColor",Y("palette-success-main")),J(A.Alert,"warningIconColor",Y("palette-warning-main")),J(A.AppBar,"defaultBg",Y("palette-grey-100")),J(A.Avatar,"defaultBg",Y("palette-grey-400")),J(A.Button,"inheritContainedBg",Y("palette-grey-300")),J(A.Button,"inheritContainedHoverBg",Y("palette-grey-A100")),J(A.Chip,"defaultBorder",Y("palette-grey-400")),J(A.Chip,"defaultAvatarColor",Y("palette-grey-700")),J(A.Chip,"defaultIconColor",Y("palette-grey-700")),J(A.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),J(A.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),J(A.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),J(A.LinearProgress,"primaryBg",k(it,A.primary.main,.62)),J(A.LinearProgress,"secondaryBg",k(it,A.secondary.main,.62)),J(A.LinearProgress,"errorBg",k(it,A.error.main,.62)),J(A.LinearProgress,"infoBg",k(it,A.info.main,.62)),J(A.LinearProgress,"successBg",k(it,A.success.main,.62)),J(A.LinearProgress,"warningBg",k(it,A.warning.main,.62)),J(A.Skeleton,"bg",b?k(qs,A.text.primary,.11):`rgba(${Y("palette-text-primaryChannel")} / 0.11)`),J(A.Slider,"primaryTrack",k(it,A.primary.main,.62)),J(A.Slider,"secondaryTrack",k(it,A.secondary.main,.62)),J(A.Slider,"errorTrack",k(it,A.error.main,.62)),J(A.Slider,"infoTrack",k(it,A.info.main,.62)),J(A.Slider,"successTrack",k(it,A.success.main,.62)),J(A.Slider,"warningTrack",k(it,A.warning.main,.62));const j=b?k(nt,A.background.default,.6825):vf(A.background.default,.8);J(A.SnackbarContent,"bg",j),J(A.SnackbarContent,"color",Zi(()=>b?e_.text.primary:A.getContrastText(j))),J(A.SpeedDialAction,"fabHoverBg",vf(A.background.paper,.15)),J(A.StepConnector,"border",Y("palette-grey-400")),J(A.StepContent,"border",Y("palette-grey-400")),J(A.Switch,"defaultColor",Y("palette-common-white")),J(A.Switch,"defaultDisabledColor",Y("palette-grey-100")),J(A.Switch,"primaryDisabledColor",k(it,A.primary.main,.62)),J(A.Switch,"secondaryDisabledColor",k(it,A.secondary.main,.62)),J(A.Switch,"errorDisabledColor",k(it,A.error.main,.62)),J(A.Switch,"infoDisabledColor",k(it,A.info.main,.62)),J(A.Switch,"successDisabledColor",k(it,A.success.main,.62)),J(A.Switch,"warningDisabledColor",k(it,A.warning.main,.62)),J(A.TableCell,"border",k(it,k(qs,A.divider,1),.88)),J(A.Tooltip,"bg",k(qs,A.grey[700],.92))}if(A.mode==="dark"){J(A.Alert,"errorColor",k(it,A.error.light,.6)),J(A.Alert,"infoColor",k(it,A.info.light,.6)),J(A.Alert,"successColor",k(it,A.success.light,.6)),J(A.Alert,"warningColor",k(it,A.warning.light,.6)),J(A.Alert,"errorFilledBg",Y("palette-error-dark")),J(A.Alert,"infoFilledBg",Y("palette-info-dark")),J(A.Alert,"successFilledBg",Y("palette-success-dark")),J(A.Alert,"warningFilledBg",Y("palette-warning-dark")),J(A.Alert,"errorFilledColor",Zi(()=>A.getContrastText(A.error.dark))),J(A.Alert,"infoFilledColor",Zi(()=>A.getContrastText(A.info.dark))),J(A.Alert,"successFilledColor",Zi(()=>A.getContrastText(A.success.dark))),J(A.Alert,"warningFilledColor",Zi(()=>A.getContrastText(A.warning.dark))),J(A.Alert,"errorStandardBg",k(nt,A.error.light,.9)),J(A.Alert,"infoStandardBg",k(nt,A.info.light,.9)),J(A.Alert,"successStandardBg",k(nt,A.success.light,.9)),J(A.Alert,"warningStandardBg",k(nt,A.warning.light,.9)),J(A.Alert,"errorIconColor",Y("palette-error-main")),J(A.Alert,"infoIconColor",Y("palette-info-main")),J(A.Alert,"successIconColor",Y("palette-success-main")),J(A.Alert,"warningIconColor",Y("palette-warning-main")),J(A.AppBar,"defaultBg",Y("palette-grey-900")),J(A.AppBar,"darkBg",Y("palette-background-paper")),J(A.AppBar,"darkColor",Y("palette-text-primary")),J(A.Avatar,"defaultBg",Y("palette-grey-600")),J(A.Button,"inheritContainedBg",Y("palette-grey-800")),J(A.Button,"inheritContainedHoverBg",Y("palette-grey-700")),J(A.Chip,"defaultBorder",Y("palette-grey-700")),J(A.Chip,"defaultAvatarColor",Y("palette-grey-300")),J(A.Chip,"defaultIconColor",Y("palette-grey-300")),J(A.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),J(A.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),J(A.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),J(A.LinearProgress,"primaryBg",k(nt,A.primary.main,.5)),J(A.LinearProgress,"secondaryBg",k(nt,A.secondary.main,.5)),J(A.LinearProgress,"errorBg",k(nt,A.error.main,.5)),J(A.LinearProgress,"infoBg",k(nt,A.info.main,.5)),J(A.LinearProgress,"successBg",k(nt,A.success.main,.5)),J(A.LinearProgress,"warningBg",k(nt,A.warning.main,.5)),J(A.Skeleton,"bg",b?k(qs,A.text.primary,.13):`rgba(${Y("palette-text-primaryChannel")} / 0.13)`),J(A.Slider,"primaryTrack",k(nt,A.primary.main,.5)),J(A.Slider,"secondaryTrack",k(nt,A.secondary.main,.5)),J(A.Slider,"errorTrack",k(nt,A.error.main,.5)),J(A.Slider,"infoTrack",k(nt,A.info.main,.5)),J(A.Slider,"successTrack",k(nt,A.success.main,.5)),J(A.Slider,"warningTrack",k(nt,A.warning.main,.5));const j=b?k(it,A.background.default,.985):vf(A.background.default,.98);J(A.SnackbarContent,"bg",j),J(A.SnackbarContent,"color",Zi(()=>b?RE.text.primary:A.getContrastText(j))),J(A.SpeedDialAction,"fabHoverBg",vf(A.background.paper,.15)),J(A.StepConnector,"border",Y("palette-grey-600")),J(A.StepContent,"border",Y("palette-grey-600")),J(A.Switch,"defaultColor",Y("palette-grey-300")),J(A.Switch,"defaultDisabledColor",Y("palette-grey-600")),J(A.Switch,"primaryDisabledColor",k(nt,A.primary.main,.55)),J(A.Switch,"secondaryDisabledColor",k(nt,A.secondary.main,.55)),J(A.Switch,"errorDisabledColor",k(nt,A.error.main,.55)),J(A.Switch,"infoDisabledColor",k(nt,A.info.main,.55)),J(A.Switch,"successDisabledColor",k(nt,A.success.main,.55)),J(A.Switch,"warningDisabledColor",k(nt,A.warning.main,.55)),J(A.TableCell,"border",k(nt,k(qs,A.divider,1),.68)),J(A.Tooltip,"bg",k(qs,A.grey[700],.92))}Sr(A.background,"default"),Sr(A.background,"paper"),Sr(A.common,"background"),Sr(A.common,"onBackground"),Sr(A,"divider"),Object.keys(A).forEach(j=>{const P=A[j];j!=="tonalOffset"&&P&&typeof P=="object"&&(P.main&&J(A[j],"mainChannel",nc(ic(P.main))),P.light&&J(A[j],"lightChannel",nc(ic(P.light))),P.dark&&J(A[j],"darkChannel",nc(ic(P.dark))),P.contrastText&&J(A[j],"contrastTextChannel",nc(ic(P.contrastText))),j==="text"&&(Sr(A[j],"primary"),Sr(A[j],"secondary")),j==="action"&&(P.active&&Sr(A[j],"active"),P.selected&&Sr(A[j],"selected")))})}),C=e.reduce((N,A)=>si(N,A),C);const D={prefix:s,disableCssColorScheme:r,shouldSkipGeneratingVar:o,getSelector:HN(C),enableContrastVars:a},{vars:F,generateThemeVars:L,generateStyleSheets:U}=Gk(C,D);return C.vars=F,Object.entries(C.colorSchemes[C.defaultColorScheme]).forEach(([N,A])=>{C[N]=A}),C.generateThemeVars=L,C.generateStyleSheets=U,C.generateSpacing=function(){return pE(u.spacing,T0(this))},C.getColorSchemeSelector=Qk(l),C.spacing=C.generateSpacing(),C.shouldSkipGeneratingVar=o,C.unstable_sxConfig={...Cu,...u==null?void 0:u.unstable_sxConfig},C.unstable_sx=function(A){return Ma({sx:A,theme:this})},C.toRuntimeSource=OE,C}function r3(t,e,n){t.colorSchemes&&n&&(t.colorSchemes[e]={...n!==!0&&n,palette:E0({...n===!0?{}:n.palette,mode:e})})}function DE(t={},...e){const{palette:n,cssVariables:i=!1,colorSchemes:r=n?void 0:{light:!0},defaultColorScheme:s=n==null?void 0:n.mode,...a}=t,o=s||"light",l=r==null?void 0:r[o],c={...r,...n?{[o]:{...typeof l!="boolean"&&l,palette:n}}:void 0};if(i===!1){if(!("colorSchemes"in t))return t_(t,...e);let u=n;"palette"in t||c[o]&&(c[o]!==!0?u=c[o].palette:o==="dark"&&(u={mode:"dark"}));const f=t_({...t,palette:u},...e);return f.defaultColorScheme=o,f.colorSchemes=c,f.palette.mode==="light"&&(f.colorSchemes.light={...c.light!==!0&&c.light,palette:f.palette},r3(f,"dark",c.dark)),f.palette.mode==="dark"&&(f.colorSchemes.dark={...c.dark!==!0&&c.dark,palette:f.palette},r3(f,"light",c.light)),f}return!n&&!("light"in c)&&o==="light"&&(c.light=!0),qN({...a,colorSchemes:c,defaultColorScheme:o,...typeof i!="boolean"&&i},...e)}const C0=DE();function qp(){const t=$p(C0);return t[Mu]||t}function gr({props:t,name:e}){return xE({props:t,name:e,defaultTheme:C0,themeId:Mu})}function KN(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const kE=t=>KN(t)&&t!=="classes",ye=vE({themeId:Mu,defaultTheme:C0,rootShouldForwardProp:kE}),ZN=St("MuiBox",["root"]),GN=DE(),ms=Sk({themeId:Mu,defaultTheme:GN,defaultClassName:ZN.root,generateClassName:mE.generate});function Pn(t){return Hk(t)}const fm=pN({createStyledComponent:ye("div",{name:"MuiGrid",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.container&&e.container]}}),componentName:"MuiGrid",useThemeProps:t=>Pn({props:t,name:"MuiGrid"}),useTheme:qp});function QN(){return S0}const Ii=Xk;function JN(t){return Ct("MuiSvgIcon",t)}St("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const e6=t=>{const{color:e,fontSize:n,classes:i}=t,r={root:["root",e!=="inherit"&&`color${Ke(e)}`,`fontSize${Ke(n)}`]};return wt(r,JN,i)},t6=ye("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="inherit"&&e[`color${Ke(n.color)}`],e[`fontSize${Ke(n.fontSize)}`]]}})(Ii(({theme:t})=>{var e,n,i,r,s,a,o,l,c,u,f,d,p,m;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(r=(e=t.transitions)==null?void 0:e.create)==null?void 0:r.call(e,"fill",{duration:(i=(n=(t.vars??t).transitions)==null?void 0:n.duration)==null?void 0:i.shorter}),variants:[{props:S=>!S.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((a=(s=t.typography)==null?void 0:s.pxToRem)==null?void 0:a.call(s,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((l=(o=t.typography)==null?void 0:o.pxToRem)==null?void 0:l.call(o,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((u=(c=t.typography)==null?void 0:c.pxToRem)==null?void 0:u.call(c,35))||"2.1875rem"}},...Object.entries((t.vars??t).palette).filter(([,S])=>S&&S.main).map(([S])=>{var v,y;return{props:{color:S},style:{color:(y=(v=(t.vars??t).palette)==null?void 0:v[S])==null?void 0:y.main}}}),{props:{color:"action"},style:{color:(d=(f=(t.vars??t).palette)==null?void 0:f.action)==null?void 0:d.active}},{props:{color:"disabled"},style:{color:(m=(p=(t.vars??t).palette)==null?void 0:p.action)==null?void 0:m.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),n_=I.forwardRef(function(e,n){const i=Pn({props:e,name:"MuiSvgIcon"}),{children:r,className:s,color:a="inherit",component:o="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:u=!1,titleAccess:f,viewBox:d="0 0 24 24",...p}=i,m=I.isValidElement(r)&&r.type==="svg",S={...i,color:a,component:o,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:u,viewBox:d,hasSvgAsChild:m},v={};u||(v.viewBox=d);const y=e6(S);return $.jsxs(t6,{as:o,className:Oe(y.root,s),focusable:"false",color:c,"aria-hidden":f?void 0:!0,role:f?"img":void 0,ref:n,...v,...p,...m&&r.props,ownerState:S,children:[m?r.props.children:r,f?$.jsx("title",{children:f}):null]})});n_.muiName="SvgIcon";function Pt(t,e){function n(i,r){return $.jsx(n_,{"data-testid":void 0,ref:r,...i,children:t})}return n.muiName=n_.muiName,I.memo(I.forwardRef(n))}function nu(t){const{controlled:e,default:n,name:i,state:r="value"}=t,{current:s}=I.useRef(e!==void 0),[a,o]=I.useState(n),l=s?e:a,c=I.useCallback(u=>{s||o(u)},[]);return[l,c]}function et(t){const e=I.useRef(t);return Ru(()=>{e.current=t}),I.useRef((...n)=>(0,e.current)(...n)).current}function Ls(...t){const e=I.useRef(void 0),n=I.useCallback(i=>{const r=t.map(s=>{if(s==null)return null;if(typeof s=="function"){const a=s,o=a(i);return typeof o=="function"?o:()=>{a(null)}}return s.current=i,()=>{s.current=null}});return()=>{r.forEach(s=>s==null?void 0:s())}},t);return I.useMemo(()=>t.every(i=>i==null)?null:i=>{e.current&&(e.current(),e.current=void 0),i!=null&&(e.current=n(i))},t)}function s3(t){try{return t.matches(":focus-visible")}catch{}return!1}const a3={};function NE(t,e){const n=I.useRef(a3);return n.current===a3&&(n.current=t(e)),n}class Kd{constructor(){x(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new Kd}static use(){const e=NE(Kd.create).current,[n,i]=I.useState(!1);return e.shouldMount=n,e.setShouldMount=i,I.useEffect(e.mountEffect,[n]),e}mount(){return this.mounted||(this.mounted=i6(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...e){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.start(...e)})}stop(...e){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.stop(...e)})}pulsate(...e){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.pulsate(...e)})}}function n6(){return Kd.use()}function i6(){let t,e;const n=new Promise((i,r)=>{t=i,e=r});return n.resolve=t,n.reject=e,n}function tn(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function i_(t,e){return i_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},i_(t,e)}function R0(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,i_(t,e)}function r6(t,e){return t.classList?!!e&&t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function s6(t,e){t.classList?t.classList.add(e):r6(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function o3(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function a6(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=o3(t.className,e):t.setAttribute("class",o3(t.className&&t.className.baseVal||"",e))}const l3={disabled:!1},Zd=Ne.createContext(null);var BE=function(e){return e.scrollTop},rc="unmounted",ra="exited",sa="entering",ho="entered",r_="exiting",mr=function(t){R0(e,t);function e(i,r){var s;s=t.call(this,i,r)||this;var a=r,o=a&&!a.isMounting?i.enter:i.appear,l;return s.appearStatus=null,i.in?o?(l=ra,s.appearStatus=sa):l=ho:i.unmountOnExit||i.mountOnEnter?l=rc:l=ra,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(r,s){var a=r.in;return a&&s.status===rc?{status:ra}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(r){var s=null;if(r!==this.props){var a=this.state.status;this.props.in?a!==sa&&a!==ho&&(s=sa):(a===sa||a===ho)&&(s=r_)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var r=this.props.timeout,s,a,o;return s=a=o=r,r!=null&&typeof r!="number"&&(s=r.exit,a=r.enter,o=r.appear!==void 0?r.appear:a),{exit:s,enter:a,appear:o}},n.updateStatus=function(r,s){if(r===void 0&&(r=!1),s!==null)if(this.cancelNextCallback(),s===sa){if(this.props.unmountOnExit||this.props.mountOnEnter){var a=this.props.nodeRef?this.props.nodeRef.current:nf.findDOMNode(this);a&&BE(a)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===ra&&this.setState({status:rc})},n.performEnter=function(r){var s=this,a=this.props.enter,o=this.context?this.context.isMounting:r,l=this.props.nodeRef?[o]:[nf.findDOMNode(this),o],c=l[0],u=l[1],f=this.getTimeouts(),d=o?f.appear:f.enter;if(!r&&!a||l3.disabled){this.safeSetState({status:ho},function(){s.props.onEntered(c)});return}this.props.onEnter(c,u),this.safeSetState({status:sa},function(){s.props.onEntering(c,u),s.onTransitionEnd(d,function(){s.safeSetState({status:ho},function(){s.props.onEntered(c,u)})})})},n.performExit=function(){var r=this,s=this.props.exit,a=this.getTimeouts(),o=this.props.nodeRef?void 0:nf.findDOMNode(this);if(!s||l3.disabled){this.safeSetState({status:ra},function(){r.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:r_},function(){r.props.onExiting(o),r.onTransitionEnd(a.exit,function(){r.safeSetState({status:ra},function(){r.props.onExited(o)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(r,s){s=this.setNextCallback(s),this.setState(r,s)},n.setNextCallback=function(r){var s=this,a=!0;return this.nextCallback=function(o){a&&(a=!1,s.nextCallback=null,r(o))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},n.onTransitionEnd=function(r,s){this.setNextCallback(s);var a=this.props.nodeRef?this.props.nodeRef.current:nf.findDOMNode(this),o=r==null&&!this.props.addEndListener;if(!a||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],c=l[0],u=l[1];this.props.addEndListener(c,u)}r!=null&&setTimeout(this.nextCallback,r)},n.render=function(){var r=this.state.status;if(r===rc)return null;var s=this.props,a=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var o=tn(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Ne.createElement(Zd.Provider,{value:null},typeof a=="function"?a(r,o):Ne.cloneElement(Ne.Children.only(a),o))},e}(Ne.Component);mr.contextType=Zd;mr.propTypes={};function to(){}mr.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:to,onEntering:to,onEntered:to,onExit:to,onExiting:to,onExited:to};mr.UNMOUNTED=rc;mr.EXITED=ra;mr.ENTERING=sa;mr.ENTERED=ho;mr.EXITING=r_;var o6=function(e,n){return e&&n&&n.split(" ").forEach(function(i){return s6(e,i)})},dm=function(e,n){return e&&n&&n.split(" ").forEach(function(i){return a6(e,i)})},M0=function(t){R0(e,t);function e(){for(var i,r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return i=t.call.apply(t,[this].concat(s))||this,i.appliedClasses={appear:{},enter:{},exit:{}},i.onEnter=function(o,l){var c=i.resolveArguments(o,l),u=c[0],f=c[1];i.removeClasses(u,"exit"),i.addClass(u,f?"appear":"enter","base"),i.props.onEnter&&i.props.onEnter(o,l)},i.onEntering=function(o,l){var c=i.resolveArguments(o,l),u=c[0],f=c[1],d=f?"appear":"enter";i.addClass(u,d,"active"),i.props.onEntering&&i.props.onEntering(o,l)},i.onEntered=function(o,l){var c=i.resolveArguments(o,l),u=c[0],f=c[1],d=f?"appear":"enter";i.removeClasses(u,d),i.addClass(u,d,"done"),i.props.onEntered&&i.props.onEntered(o,l)},i.onExit=function(o){var l=i.resolveArguments(o),c=l[0];i.removeClasses(c,"appear"),i.removeClasses(c,"enter"),i.addClass(c,"exit","base"),i.props.onExit&&i.props.onExit(o)},i.onExiting=function(o){var l=i.resolveArguments(o),c=l[0];i.addClass(c,"exit","active"),i.props.onExiting&&i.props.onExiting(o)},i.onExited=function(o){var l=i.resolveArguments(o),c=l[0];i.removeClasses(c,"exit"),i.addClass(c,"exit","done"),i.props.onExited&&i.props.onExited(o)},i.resolveArguments=function(o,l){return i.props.nodeRef?[i.props.nodeRef.current,o]:[o,l]},i.getClassNames=function(o){var l=i.props.classNames,c=typeof l=="string",u=c&&l?l+"-":"",f=c?""+u+o:l[o],d=c?f+"-active":l[o+"Active"],p=c?f+"-done":l[o+"Done"];return{baseClassName:f,activeClassName:d,doneClassName:p}},i}var n=e.prototype;return n.addClass=function(r,s,a){var o=this.getClassNames(s)[a+"ClassName"],l=this.getClassNames("enter"),c=l.doneClassName;s==="appear"&&a==="done"&&c&&(o+=" "+c),a==="active"&&r&&BE(r),o&&(this.appliedClasses[s][a]=o,o6(r,o))},n.removeClasses=function(r,s){var a=this.appliedClasses[s],o=a.base,l=a.active,c=a.done;this.appliedClasses[s]={},o&&dm(r,o),l&&dm(r,l),c&&dm(r,c)},n.render=function(){var r=this.props;r.classNames;var s=tn(r,["classNames"]);return Ne.createElement(mr,me({},s,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},e}(Ne.Component);M0.defaultProps={classNames:""};M0.propTypes={};function l6(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O0(t,e){var n=function(s){return e&&I.isValidElement(s)?e(s):s},i=Object.create(null);return t&&I.Children.map(t,function(r){return r}).forEach(function(r){i[r.key]=n(r)}),i}function c6(t,e){t=t||{},e=e||{};function n(u){return u in e?e[u]:t[u]}var i=Object.create(null),r=[];for(var s in t)s in e?r.length&&(i[s]=r,r=[]):r.push(s);var a,o={};for(var l in e){if(i[l])for(a=0;a<i[l].length;a++){var c=i[l][a];o[i[l][a]]=n(c)}o[l]=n(l)}for(a=0;a<r.length;a++)o[r[a]]=n(r[a]);return o}function ca(t,e,n){return n[e]!=null?n[e]:t.props[e]}function u6(t,e){return O0(t.children,function(n){return I.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:ca(n,"appear",t),enter:ca(n,"enter",t),exit:ca(n,"exit",t)})})}function f6(t,e,n){var i=O0(t.children),r=c6(e,i);return Object.keys(r).forEach(function(s){var a=r[s];if(I.isValidElement(a)){var o=s in e,l=s in i,c=e[s],u=I.isValidElement(c)&&!c.props.in;l&&(!o||u)?r[s]=I.cloneElement(a,{onExited:n.bind(null,a),in:!0,exit:ca(a,"exit",t),enter:ca(a,"enter",t)}):!l&&o&&!u?r[s]=I.cloneElement(a,{in:!1}):l&&o&&I.isValidElement(c)&&(r[s]=I.cloneElement(a,{onExited:n.bind(null,a),in:c.props.in,exit:ca(a,"exit",t),enter:ca(a,"enter",t)}))}}),r}var d6=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},h6={component:"div",childFactory:function(e){return e}},Ou=function(t){R0(e,t);function e(i,r){var s;s=t.call(this,i,r)||this;var a=s.handleExited.bind(l6(s));return s.state={contextValue:{isMounting:!0},handleExited:a,firstRender:!0},s}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(r,s){var a=s.children,o=s.handleExited,l=s.firstRender;return{children:l?u6(r,o):f6(r,a,o),firstRender:!1}},n.handleExited=function(r,s){var a=O0(this.props.children);r.key in a||(r.props.onExited&&r.props.onExited(s),this.mounted&&this.setState(function(o){var l=me({},o.children);return delete l[r.key],{children:l}}))},n.render=function(){var r=this.props,s=r.component,a=r.childFactory,o=tn(r,["component","childFactory"]),l=this.state.contextValue,c=d6(this.state.children).map(a);return delete o.appear,delete o.enter,delete o.exit,s===null?Ne.createElement(Zd.Provider,{value:l},c):Ne.createElement(Zd.Provider,{value:l},Ne.createElement(s,o,c))},e}(Ne.Component);Ou.propTypes={};Ou.defaultProps=h6;const p6=[];function g6(t){I.useEffect(t,p6)}class I0{constructor(){x(this,"currentId",null);x(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});x(this,"disposeEffect",()=>this.clear)}static create(){return new I0}start(e,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},e)}}function m6(){const t=NE(I0.create).current;return g6(t.disposeEffect),t}function y6(t){const{className:e,classes:n,pulsate:i=!1,rippleX:r,rippleY:s,rippleSize:a,in:o,onExited:l,timeout:c}=t,[u,f]=I.useState(!1),d=Oe(e,n.ripple,n.rippleVisible,i&&n.ripplePulsate),p={width:a,height:a,top:-(a/2)+s,left:-(a/2)+r},m=Oe(n.child,u&&n.childLeaving,i&&n.childPulsate);return!o&&!u&&f(!0),I.useEffect(()=>{if(!o&&l!=null){const S=setTimeout(l,c);return()=>{clearTimeout(S)}}},[l,o,c]),$.jsx("span",{className:d,style:p,children:$.jsx("span",{className:m})})}const pi=St("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),s_=550,_6=80,b6=wu`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,v6=wu`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,T6=wu`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,x6=ye("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),S6=ye(y6,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${pi.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${b6};
    animation-duration: ${s_}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  &.${pi.ripplePulsate} {
    animation-duration: ${({theme:t})=>t.transitions.duration.shorter}ms;
  }

  & .${pi.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${pi.childLeaving} {
    opacity: 0;
    animation-name: ${v6};
    animation-duration: ${s_}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  & .${pi.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${T6};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,w6=I.forwardRef(function(e,n){const i=Pn({props:e,name:"MuiTouchRipple"}),{center:r=!1,classes:s={},className:a,...o}=i,[l,c]=I.useState([]),u=I.useRef(0),f=I.useRef(null);I.useEffect(()=>{f.current&&(f.current(),f.current=null)},[l]);const d=I.useRef(!1),p=m6(),m=I.useRef(null),S=I.useRef(null),v=I.useCallback(b=>{const{pulsate:M,rippleX:C,rippleY:D,rippleSize:F,cb:L}=b;c(U=>[...U,$.jsx(S6,{classes:{ripple:Oe(s.ripple,pi.ripple),rippleVisible:Oe(s.rippleVisible,pi.rippleVisible),ripplePulsate:Oe(s.ripplePulsate,pi.ripplePulsate),child:Oe(s.child,pi.child),childLeaving:Oe(s.childLeaving,pi.childLeaving),childPulsate:Oe(s.childPulsate,pi.childPulsate)},timeout:s_,pulsate:M,rippleX:C,rippleY:D,rippleSize:F},u.current)]),u.current+=1,f.current=L},[s]),y=I.useCallback((b={},M={},C=()=>{})=>{const{pulsate:D=!1,center:F=r||M.pulsate,fakeElement:L=!1}=M;if((b==null?void 0:b.type)==="mousedown"&&d.current){d.current=!1;return}(b==null?void 0:b.type)==="touchstart"&&(d.current=!0);const U=L?null:S.current,N=U?U.getBoundingClientRect():{width:0,height:0,left:0,top:0};let A,Y,k;if(F||b===void 0||b.clientX===0&&b.clientY===0||!b.clientX&&!b.touches)A=Math.round(N.width/2),Y=Math.round(N.height/2);else{const{clientX:j,clientY:P}=b.touches&&b.touches.length>0?b.touches[0]:b;A=Math.round(j-N.left),Y=Math.round(P-N.top)}if(F)k=Math.sqrt((2*N.width**2+N.height**2)/3),k%2===0&&(k+=1);else{const j=Math.max(Math.abs((U?U.clientWidth:0)-A),A)*2+2,P=Math.max(Math.abs((U?U.clientHeight:0)-Y),Y)*2+2;k=Math.sqrt(j**2+P**2)}b!=null&&b.touches?m.current===null&&(m.current=()=>{v({pulsate:D,rippleX:A,rippleY:Y,rippleSize:k,cb:C})},p.start(_6,()=>{m.current&&(m.current(),m.current=null)})):v({pulsate:D,rippleX:A,rippleY:Y,rippleSize:k,cb:C})},[r,v,p]),_=I.useCallback(()=>{y({},{pulsate:!0})},[y]),T=I.useCallback((b,M)=>{if(p.clear(),(b==null?void 0:b.type)==="touchend"&&m.current){m.current(),m.current=null,p.start(0,()=>{T(b,M)});return}m.current=null,c(C=>C.length>0?C.slice(1):C),f.current=M},[p]);return I.useImperativeHandle(n,()=>({pulsate:_,start:y,stop:T}),[_,y,T]),$.jsx(x6,{className:Oe(pi.root,s.root,a),ref:S,...o,children:$.jsx(Ou,{component:null,exit:!0,children:l})})});function A6(t){return Ct("MuiButtonBase",t)}const E6=St("MuiButtonBase",["root","disabled","focusVisible"]),C6=t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:i,classes:r}=t,a=wt({root:["root",e&&"disabled",n&&"focusVisible"]},A6,r);return n&&i&&(a.root+=` ${i}`),a},R6=ye("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${E6.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),P0=I.forwardRef(function(e,n){const i=Pn({props:e,name:"MuiButtonBase"}),{action:r,centerRipple:s=!1,children:a,className:o,component:l="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:f=!1,focusRipple:d=!1,focusVisibleClassName:p,LinkComponent:m="a",onBlur:S,onClick:v,onContextMenu:y,onDragLeave:_,onFocus:T,onFocusVisible:b,onKeyDown:M,onKeyUp:C,onMouseDown:D,onMouseLeave:F,onMouseUp:L,onTouchEnd:U,onTouchMove:N,onTouchStart:A,tabIndex:Y=0,TouchRippleProps:k,touchRippleRef:j,type:P,...z}=i,G=I.useRef(null),Q=n6(),se=Ls(Q.ref,j),[ae,ce]=I.useState(!1);c&&ae&&ce(!1),I.useImperativeHandle(r,()=>({focusVisible:()=>{ce(!0),G.current.focus()}}),[]);const we=Q.shouldMount&&!u&&!c;I.useEffect(()=>{ae&&d&&!u&&Q.pulsate()},[u,d,ae,Q]);const Pe=wr(Q,"start",D,f),He=wr(Q,"stop",y,f),Ht=wr(Q,"stop",_,f),yt=wr(Q,"stop",L,f),Mt=wr(Q,"stop",_e=>{ae&&_e.preventDefault(),F&&F(_e)},f),je=wr(Q,"start",A,f),De=wr(Q,"stop",U,f),ue=wr(Q,"stop",N,f),fe=wr(Q,"stop",_e=>{s3(_e.target)||ce(!1),S&&S(_e)},!1),Fe=et(_e=>{G.current||(G.current=_e.currentTarget),s3(_e.target)&&(ce(!0),b&&b(_e)),T&&T(_e)}),he=()=>{const _e=G.current;return l&&l!=="button"&&!(_e.tagName==="A"&&_e.href)},Me=et(_e=>{d&&!_e.repeat&&ae&&_e.key===" "&&Q.stop(_e,()=>{Q.start(_e)}),_e.target===_e.currentTarget&&he()&&_e.key===" "&&_e.preventDefault(),M&&M(_e),_e.target===_e.currentTarget&&he()&&_e.key==="Enter"&&!c&&(_e.preventDefault(),v&&v(_e))}),Se=et(_e=>{d&&_e.key===" "&&ae&&!_e.defaultPrevented&&Q.stop(_e,()=>{Q.pulsate(_e)}),C&&C(_e),v&&_e.target===_e.currentTarget&&he()&&_e.key===" "&&!_e.defaultPrevented&&v(_e)});let gt=l;gt==="button"&&(z.href||z.to)&&(gt=m);const Dt={};if(gt==="button"){const _e=!!z.formAction;Dt.type=P===void 0&&!_e?"button":P,Dt.disabled=c}else!z.href&&!z.to&&(Dt.role="button"),c&&(Dt["aria-disabled"]=c);const Wt=Ls(n,G),Te={...i,centerRipple:s,component:l,disabled:c,disableRipple:u,disableTouchRipple:f,focusRipple:d,tabIndex:Y,focusVisible:ae},ze=C6(Te);return $.jsxs(R6,{as:gt,className:Oe(ze.root,o),ownerState:Te,onBlur:fe,onClick:v,onContextMenu:He,onFocus:Fe,onKeyDown:Me,onKeyUp:Se,onMouseDown:Pe,onMouseLeave:Mt,onMouseUp:yt,onDragLeave:Ht,onTouchEnd:De,onTouchMove:ue,onTouchStart:je,ref:Wt,tabIndex:c?-1:Y,type:P,...Dt,...z,children:[a,we?$.jsx(w6,{ref:se,center:s,...k}):null]})});function wr(t,e,n,i=!1){return et(r=>(n&&n(r),i||t[e](r),!0))}function M6(t){return typeof t.main=="string"}function O6(t,e=[]){if(!M6(t))return!1;for(const n of e)if(!t.hasOwnProperty(n)||typeof t[n]!="string")return!1;return!0}function iu(t=[]){return([,e])=>e&&O6(e,t)}function I6(t){return Ct("MuiCircularProgress",t)}St("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","track","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Fi=44,a_=wu`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,o_=wu`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,P6=typeof a_!="string"?m0`
        animation: ${a_} 1.4s linear infinite;
      `:null,D6=typeof o_!="string"?m0`
        animation: ${o_} 1.4s ease-in-out infinite;
      `:null,k6=t=>{const{classes:e,variant:n,color:i,disableShrink:r}=t,s={root:["root",n,`color${Ke(i)}`],svg:["svg"],track:["track"],circle:["circle",`circle${Ke(n)}`,r&&"circleDisableShrink"]};return wt(s,I6,e)},N6=ye("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`color${Ke(n.color)}`]]}})(Ii(({theme:t})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("transform")}},{props:{variant:"indeterminate"},style:P6||{animation:`${a_} 1.4s linear infinite`}},...Object.entries(t.palette).filter(iu()).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}}))]}))),B6=ye("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),L6=ye("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.circle,e[`circle${Ke(n.variant)}`],n.disableShrink&&e.circleDisableShrink]}})(Ii(({theme:t})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink,style:D6||{animation:`${o_} 1.4s ease-in-out infinite`}}]}))),U6=ye("circle",{name:"MuiCircularProgress",slot:"Track"})(Ii(({theme:t})=>({stroke:"currentColor",opacity:(t.vars||t).palette.action.activatedOpacity}))),D0=I.forwardRef(function(e,n){const i=Pn({props:e,name:"MuiCircularProgress"}),{className:r,color:s="primary",disableShrink:a=!1,enableTrackSlot:o=!1,size:l=40,style:c,thickness:u=3.6,value:f=0,variant:d="indeterminate",...p}=i,m={...i,color:s,disableShrink:a,size:l,thickness:u,value:f,variant:d,enableTrackSlot:o},S=k6(m),v={},y={},_={};if(d==="determinate"){const T=2*Math.PI*((Fi-u)/2);v.strokeDasharray=T.toFixed(3),_["aria-valuenow"]=Math.round(f),v.strokeDashoffset=`${((100-f)/100*T).toFixed(3)}px`,y.transform="rotate(-90deg)"}return $.jsx(N6,{className:Oe(S.root,r),style:{width:l,height:l,...y,...c},ownerState:m,ref:n,role:"progressbar",..._,...p,children:$.jsxs(B6,{className:S.svg,ownerState:m,viewBox:`${Fi/2} ${Fi/2} ${Fi} ${Fi}`,children:[o?$.jsx(U6,{className:S.track,ownerState:m,cx:Fi,cy:Fi,r:(Fi-u)/2,fill:"none",strokeWidth:u,"aria-hidden":"true"}):null,$.jsx(L6,{className:S.circle,style:v,ownerState:m,cx:Fi,cy:Fi,r:(Fi-u)/2,fill:"none",strokeWidth:u})]})})});function F6(t){return Ct("MuiButton",t)}const Ks=St("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),z6=I.createContext({}),V6=I.createContext(void 0),$6=t=>{const{color:e,disableElevation:n,fullWidth:i,size:r,variant:s,loading:a,loadingPosition:o,classes:l}=t,c={root:["root",a&&"loading",s,`${s}${Ke(e)}`,`size${Ke(r)}`,`${s}Size${Ke(r)}`,`color${Ke(e)}`,n&&"disableElevation",i&&"fullWidth",a&&`loadingPosition${Ke(o)}`],startIcon:["icon","startIcon",`iconSize${Ke(r)}`],endIcon:["icon","endIcon",`iconSize${Ke(r)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},u=wt(c,F6,l);return{...l,...u}},LE=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],j6=ye(P0,{shouldForwardProp:t=>kE(t)||t==="classes",name:"MuiButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`${n.variant}${Ke(n.color)}`],e[`size${Ke(n.size)}`],e[`${n.variant}Size${Ke(n.size)}`],n.color==="inherit"&&e.colorInherit,n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth,n.loading&&e.loading]}})(Ii(({theme:t})=>{const e=t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[800],n=t.palette.mode==="light"?t.palette.grey.A100:t.palette.grey[700];return{...t.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${Ks.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(t.vars||t).shadows[2],"&:hover":{boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2]}},"&:active":{boxShadow:(t.vars||t).shadows[8]},[`&.${Ks.focusVisible}`]:{boxShadow:(t.vars||t).shadows[6]},[`&.${Ks.disabled}`]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${Ks.disabled}`]:{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(t.palette).filter(iu()).map(([i])=>({props:{color:i},style:{"--variant-textColor":(t.vars||t).palette[i].main,"--variant-outlinedColor":(t.vars||t).palette[i].main,"--variant-outlinedBorder":t.alpha((t.vars||t).palette[i].main,.5),"--variant-containedColor":(t.vars||t).palette[i].contrastText,"--variant-containedBg":(t.vars||t).palette[i].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(t.vars||t).palette[i].dark,"--variant-textBg":t.alpha((t.vars||t).palette[i].main,(t.vars||t).palette.action.hoverOpacity),"--variant-outlinedBorder":(t.vars||t).palette[i].main,"--variant-outlinedBg":t.alpha((t.vars||t).palette[i].main,(t.vars||t).palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedBg:e,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedHoverBg:n,"--variant-textBg":t.alpha((t.vars||t).palette.text.primary,(t.vars||t).palette.action.hoverOpacity),"--variant-outlinedBg":t.alpha((t.vars||t).palette.text.primary,(t.vars||t).palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:t.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Ks.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Ks.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),[`&.${Ks.loading}`]:{color:"transparent"}}}]}})),H6=ye("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.startIcon,n.loading&&e.startIconLoadingStart,e[`iconSize${Ke(n.size)}`]]}})(({theme:t})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...LE]})),W6=ye("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.endIcon,n.loading&&e.endIconLoadingEnd,e[`iconSize${Ke(n.size)}`]]}})(({theme:t})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...LE]})),Y6=ye("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:t})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(t.vars||t).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),c3=ye("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),X6=I.forwardRef(function(e,n){const i=I.useContext(z6),r=I.useContext(V6),s=eu(i,e),a=Pn({props:s,name:"MuiButton"}),{children:o,color:l="primary",component:c="button",className:u,disabled:f=!1,disableElevation:d=!1,disableFocusRipple:p=!1,endIcon:m,focusVisibleClassName:S,fullWidth:v=!1,id:y,loading:_=null,loadingIndicator:T,loadingPosition:b="center",size:M="medium",startIcon:C,type:D,variant:F="text",...L}=a,U=A0(y),N=T??$.jsx(D0,{"aria-labelledby":U,color:"inherit",size:16}),A={...a,color:l,component:c,disabled:f,disableElevation:d,disableFocusRipple:p,fullWidth:v,loading:_,loadingIndicator:N,loadingPosition:b,size:M,type:D,variant:F},Y=$6(A),k=(C||_&&b==="start")&&$.jsx(H6,{className:Y.startIcon,ownerState:A,children:C||$.jsx(c3,{className:Y.loadingIconPlaceholder,ownerState:A})}),j=(m||_&&b==="end")&&$.jsx(W6,{className:Y.endIcon,ownerState:A,children:m||$.jsx(c3,{className:Y.loadingIconPlaceholder,ownerState:A})}),P=r||"",z=typeof _=="boolean"?$.jsx("span",{className:Y.loadingWrapper,style:{display:"contents"},children:_&&$.jsx(Y6,{className:Y.loadingIndicator,ownerState:A,children:N})}):null;return $.jsxs(j6,{ownerState:A,className:Oe(i.className,Y.root,u,P),component:c,disabled:f||_,focusRipple:!p,focusVisibleClassName:Oe(Y.focusVisible,S),ref:n,type:D,id:_?U:y,...L,classes:Y,children:[k,b!=="end"&&z,o,b==="end"&&z,j]})}),q6=["localeText"],l_=I.createContext(null),K6=function(e){const{localeText:n}=e,i=tn(e,q6),{adapter:r,localeText:s}=I.useContext(l_)??{adapter:void 0,localeText:void 0},a=gr({props:i,name:"MuiLocalizationProvider"}),{children:o,dateAdapter:l,dateFormats:c,dateLibInstance:u,adapterLocale:f,localeText:d}=a,p=I.useMemo(()=>me({},d,s,n),[d,s,n]),m=I.useMemo(()=>{if(!l)return r||null;const y=new l({locale:f,formats:c,instance:u});if(!y.isMUIAdapter)throw new Error(["MUI X: The date adapter should be imported from `@mui/x-date-pickers` or `@mui/x-date-pickers-pro`, not from `@date-io`","For example, `import { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs'` instead of `import AdapterDayjs from '@date-io/dayjs'`","More information on the installation documentation: https://mui.com/x/react-date-pickers/quickstart/#installation"].join(`
`));return y},[l,f,c,u,r]),S=I.useMemo(()=>m?{minDate:m.date("1900-01-01T00:00:00.000"),maxDate:m.date("2099-12-31T00:00:00.000")}:null,[m]),v=I.useMemo(()=>({utils:m,adapter:m,defaultDates:S,localeText:p}),[S,m,p]);return $.jsx(l_.Provider,{value:v,children:o})};var UE={exports:{}};(function(t,e){(function(n,i){t.exports=i()})(ml,function(){var n=1e3,i=6e4,r=36e5,s="millisecond",a="second",o="minute",l="hour",c="day",u="week",f="month",d="quarter",p="year",m="date",S="Invalid Date",v=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(k){var j=["th","st","nd","rd"],P=k%100;return"["+k+(j[(P-20)%10]||j[P]||j[0])+"]"}},T=function(k,j,P){var z=String(k);return!z||z.length>=j?k:""+Array(j+1-z.length).join(P)+k},b={s:T,z:function(k){var j=-k.utcOffset(),P=Math.abs(j),z=Math.floor(P/60),G=P%60;return(j<=0?"+":"-")+T(z,2,"0")+":"+T(G,2,"0")},m:function k(j,P){if(j.date()<P.date())return-k(P,j);var z=12*(P.year()-j.year())+(P.month()-j.month()),G=j.clone().add(z,f),Q=P-G<0,se=j.clone().add(z+(Q?-1:1),f);return+(-(z+(P-G)/(Q?G-se:se-G))||0)},a:function(k){return k<0?Math.ceil(k)||0:Math.floor(k)},p:function(k){return{M:f,y:p,w:u,d:c,D:m,h:l,m:o,s:a,ms:s,Q:d}[k]||String(k||"").toLowerCase().replace(/s$/,"")},u:function(k){return k===void 0}},M="en",C={};C[M]=_;var D="$isDayjsObject",F=function(k){return k instanceof A||!(!k||!k[D])},L=function k(j,P,z){var G;if(!j)return M;if(typeof j=="string"){var Q=j.toLowerCase();C[Q]&&(G=Q),P&&(C[Q]=P,G=Q);var se=j.split("-");if(!G&&se.length>1)return k(se[0])}else{var ae=j.name;C[ae]=j,G=ae}return!z&&G&&(M=G),G||!z&&M},U=function(k,j){if(F(k))return k.clone();var P=typeof j=="object"?j:{};return P.date=k,P.args=arguments,new A(P)},N=b;N.l=L,N.i=F,N.w=function(k,j){return U(k,{locale:j.$L,utc:j.$u,x:j.$x,$offset:j.$offset})};var A=function(){function k(P){this.$L=L(P.locale,null,!0),this.parse(P),this.$x=this.$x||P.x||{},this[D]=!0}var j=k.prototype;return j.parse=function(P){this.$d=function(z){var G=z.date,Q=z.utc;if(G===null)return new Date(NaN);if(N.u(G))return new Date;if(G instanceof Date)return new Date(G);if(typeof G=="string"&&!/Z$/i.test(G)){var se=G.match(v);if(se){var ae=se[2]-1||0,ce=(se[7]||"0").substring(0,3);return Q?new Date(Date.UTC(se[1],ae,se[3]||1,se[4]||0,se[5]||0,se[6]||0,ce)):new Date(se[1],ae,se[3]||1,se[4]||0,se[5]||0,se[6]||0,ce)}}return new Date(G)}(P),this.init()},j.init=function(){var P=this.$d;this.$y=P.getFullYear(),this.$M=P.getMonth(),this.$D=P.getDate(),this.$W=P.getDay(),this.$H=P.getHours(),this.$m=P.getMinutes(),this.$s=P.getSeconds(),this.$ms=P.getMilliseconds()},j.$utils=function(){return N},j.isValid=function(){return this.$d.toString()!==S},j.isSame=function(P,z){var G=U(P);return this.startOf(z)<=G&&G<=this.endOf(z)},j.isAfter=function(P,z){return U(P)<this.startOf(z)},j.isBefore=function(P,z){return this.endOf(z)<U(P)},j.$g=function(P,z,G){return N.u(P)?this[z]:this.set(G,P)},j.unix=function(){return Math.floor(this.valueOf()/1e3)},j.valueOf=function(){return this.$d.getTime()},j.startOf=function(P,z){var G=this,Q=!!N.u(z)||z,se=N.p(P),ae=function(je,De){var ue=N.w(G.$u?Date.UTC(G.$y,De,je):new Date(G.$y,De,je),G);return Q?ue:ue.endOf(c)},ce=function(je,De){return N.w(G.toDate()[je].apply(G.toDate("s"),(Q?[0,0,0,0]:[23,59,59,999]).slice(De)),G)},we=this.$W,Pe=this.$M,He=this.$D,Ht="set"+(this.$u?"UTC":"");switch(se){case p:return Q?ae(1,0):ae(31,11);case f:return Q?ae(1,Pe):ae(0,Pe+1);case u:var yt=this.$locale().weekStart||0,Mt=(we<yt?we+7:we)-yt;return ae(Q?He-Mt:He+(6-Mt),Pe);case c:case m:return ce(Ht+"Hours",0);case l:return ce(Ht+"Minutes",1);case o:return ce(Ht+"Seconds",2);case a:return ce(Ht+"Milliseconds",3);default:return this.clone()}},j.endOf=function(P){return this.startOf(P,!1)},j.$set=function(P,z){var G,Q=N.p(P),se="set"+(this.$u?"UTC":""),ae=(G={},G[c]=se+"Date",G[m]=se+"Date",G[f]=se+"Month",G[p]=se+"FullYear",G[l]=se+"Hours",G[o]=se+"Minutes",G[a]=se+"Seconds",G[s]=se+"Milliseconds",G)[Q],ce=Q===c?this.$D+(z-this.$W):z;if(Q===f||Q===p){var we=this.clone().set(m,1);we.$d[ae](ce),we.init(),this.$d=we.set(m,Math.min(this.$D,we.daysInMonth())).$d}else ae&&this.$d[ae](ce);return this.init(),this},j.set=function(P,z){return this.clone().$set(P,z)},j.get=function(P){return this[N.p(P)]()},j.add=function(P,z){var G,Q=this;P=Number(P);var se=N.p(z),ae=function(Pe){var He=U(Q);return N.w(He.date(He.date()+Math.round(Pe*P)),Q)};if(se===f)return this.set(f,this.$M+P);if(se===p)return this.set(p,this.$y+P);if(se===c)return ae(1);if(se===u)return ae(7);var ce=(G={},G[o]=i,G[l]=r,G[a]=n,G)[se]||1,we=this.$d.getTime()+P*ce;return N.w(we,this)},j.subtract=function(P,z){return this.add(-1*P,z)},j.format=function(P){var z=this,G=this.$locale();if(!this.isValid())return G.invalidDate||S;var Q=P||"YYYY-MM-DDTHH:mm:ssZ",se=N.z(this),ae=this.$H,ce=this.$m,we=this.$M,Pe=G.weekdays,He=G.months,Ht=G.meridiem,yt=function(De,ue,fe,Fe){return De&&(De[ue]||De(z,Q))||fe[ue].slice(0,Fe)},Mt=function(De){return N.s(ae%12||12,De,"0")},je=Ht||function(De,ue,fe){var Fe=De<12?"AM":"PM";return fe?Fe.toLowerCase():Fe};return Q.replace(y,function(De,ue){return ue||function(fe){switch(fe){case"YY":return String(z.$y).slice(-2);case"YYYY":return N.s(z.$y,4,"0");case"M":return we+1;case"MM":return N.s(we+1,2,"0");case"MMM":return yt(G.monthsShort,we,He,3);case"MMMM":return yt(He,we);case"D":return z.$D;case"DD":return N.s(z.$D,2,"0");case"d":return String(z.$W);case"dd":return yt(G.weekdaysMin,z.$W,Pe,2);case"ddd":return yt(G.weekdaysShort,z.$W,Pe,3);case"dddd":return Pe[z.$W];case"H":return String(ae);case"HH":return N.s(ae,2,"0");case"h":return Mt(1);case"hh":return Mt(2);case"a":return je(ae,ce,!0);case"A":return je(ae,ce,!1);case"m":return String(ce);case"mm":return N.s(ce,2,"0");case"s":return String(z.$s);case"ss":return N.s(z.$s,2,"0");case"SSS":return N.s(z.$ms,3,"0");case"Z":return se}return null}(De)||se.replace(":","")})},j.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},j.diff=function(P,z,G){var Q,se=this,ae=N.p(z),ce=U(P),we=(ce.utcOffset()-this.utcOffset())*i,Pe=this-ce,He=function(){return N.m(se,ce)};switch(ae){case p:Q=He()/12;break;case f:Q=He();break;case d:Q=He()/3;break;case u:Q=(Pe-we)/6048e5;break;case c:Q=(Pe-we)/864e5;break;case l:Q=Pe/r;break;case o:Q=Pe/i;break;case a:Q=Pe/n;break;default:Q=Pe}return G?Q:N.a(Q)},j.daysInMonth=function(){return this.endOf(f).$D},j.$locale=function(){return C[this.$L]},j.locale=function(P,z){if(!P)return this.$L;var G=this.clone(),Q=L(P,z,!0);return Q&&(G.$L=Q),G},j.clone=function(){return N.w(this.$d,this)},j.toDate=function(){return new Date(this.valueOf())},j.toJSON=function(){return this.isValid()?this.toISOString():null},j.toISOString=function(){return this.$d.toISOString()},j.toString=function(){return this.$d.toUTCString()},k}(),Y=A.prototype;return U.prototype=Y,[["$ms",s],["$s",a],["$m",o],["$H",l],["$W",c],["$M",f],["$y",p],["$D",m]].forEach(function(k){Y[k[1]]=function(j){return this.$g(j,k[0],k[1])}}),U.extend=function(k,j){return k.$i||(k(j,A,U),k.$i=!0),U},U.locale=L,U.isDayjs=F,U.unix=function(k){return U(1e3*k)},U.en=C[M],U.Ls=C,U.p={},U})})(UE);var Z6=UE.exports;const Ot=Wi(Z6);var FE={exports:{}};(function(t,e){(function(n,i){t.exports=i()})(ml,function(){var n="week",i="year";return function(r,s,a){var o=s.prototype;o.week=function(l){if(l===void 0&&(l=null),l!==null)return this.add(7*(l-this.week()),"day");var c=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var u=a(this).startOf(i).add(1,i).date(c),f=a(this).endOf(n);if(u.isBefore(f))return 1}var d=a(this).startOf(i).date(c).startOf(n).subtract(1,"millisecond"),p=this.diff(d,n,!0);return p<0?a(this).startOf("week").week():Math.ceil(p)},o.weeks=function(l){return l===void 0&&(l=null),this.week(l)}}})})(FE);var G6=FE.exports;const Q6=Wi(G6);var zE={exports:{}};(function(t,e){(function(n,i){t.exports=i()})(ml,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},i=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d/,s=/\d\d/,a=/\d\d?/,o=/\d*[^-_:/,()\s\d]+/,l={},c=function(v){return(v=+v)+(v>68?1900:2e3)},u=function(v){return function(y){this[v]=+y}},f=[/[+-]\d\d:?(\d\d)?|Z/,function(v){(this.zone||(this.zone={})).offset=function(y){if(!y||y==="Z")return 0;var _=y.match(/([+-]|\d\d)/g),T=60*_[1]+(+_[2]||0);return T===0?0:_[0]==="+"?-T:T}(v)}],d=function(v){var y=l[v];return y&&(y.indexOf?y:y.s.concat(y.f))},p=function(v,y){var _,T=l.meridiem;if(T){for(var b=1;b<=24;b+=1)if(v.indexOf(T(b,0,y))>-1){_=b>12;break}}else _=v===(y?"pm":"PM");return _},m={A:[o,function(v){this.afternoon=p(v,!1)}],a:[o,function(v){this.afternoon=p(v,!0)}],Q:[r,function(v){this.month=3*(v-1)+1}],S:[r,function(v){this.milliseconds=100*+v}],SS:[s,function(v){this.milliseconds=10*+v}],SSS:[/\d{3}/,function(v){this.milliseconds=+v}],s:[a,u("seconds")],ss:[a,u("seconds")],m:[a,u("minutes")],mm:[a,u("minutes")],H:[a,u("hours")],h:[a,u("hours")],HH:[a,u("hours")],hh:[a,u("hours")],D:[a,u("day")],DD:[s,u("day")],Do:[o,function(v){var y=l.ordinal,_=v.match(/\d+/);if(this.day=_[0],y)for(var T=1;T<=31;T+=1)y(T).replace(/\[|\]/g,"")===v&&(this.day=T)}],w:[a,u("week")],ww:[s,u("week")],M:[a,u("month")],MM:[s,u("month")],MMM:[o,function(v){var y=d("months"),_=(d("monthsShort")||y.map(function(T){return T.slice(0,3)})).indexOf(v)+1;if(_<1)throw new Error;this.month=_%12||_}],MMMM:[o,function(v){var y=d("months").indexOf(v)+1;if(y<1)throw new Error;this.month=y%12||y}],Y:[/[+-]?\d+/,u("year")],YY:[s,function(v){this.year=c(v)}],YYYY:[/\d{4}/,u("year")],Z:f,ZZ:f};function S(v){var y,_;y=v,_=l&&l.formats;for(var T=(v=y.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(U,N,A){var Y=A&&A.toUpperCase();return N||_[A]||n[A]||_[Y].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(k,j,P){return j||P.slice(1)})})).match(i),b=T.length,M=0;M<b;M+=1){var C=T[M],D=m[C],F=D&&D[0],L=D&&D[1];T[M]=L?{regex:F,parser:L}:C.replace(/^\[|\]$/g,"")}return function(U){for(var N={},A=0,Y=0;A<b;A+=1){var k=T[A];if(typeof k=="string")Y+=k.length;else{var j=k.regex,P=k.parser,z=U.slice(Y),G=j.exec(z)[0];P.call(N,G),U=U.replace(G,"")}}return function(Q){var se=Q.afternoon;if(se!==void 0){var ae=Q.hours;se?ae<12&&(Q.hours+=12):ae===12&&(Q.hours=0),delete Q.afternoon}}(N),N}}return function(v,y,_){_.p.customParseFormat=!0,v&&v.parseTwoDigitYear&&(c=v.parseTwoDigitYear);var T=y.prototype,b=T.parse;T.parse=function(M){var C=M.date,D=M.utc,F=M.args;this.$u=D;var L=F[1];if(typeof L=="string"){var U=F[2]===!0,N=F[3]===!0,A=U||N,Y=F[2];N&&(Y=F[2]),l=this.$locale(),!U&&Y&&(l=_.Ls[Y]),this.$d=function(z,G,Q,se){try{if(["x","X"].indexOf(G)>-1)return new Date((G==="X"?1e3:1)*z);var ae=S(G)(z),ce=ae.year,we=ae.month,Pe=ae.day,He=ae.hours,Ht=ae.minutes,yt=ae.seconds,Mt=ae.milliseconds,je=ae.zone,De=ae.week,ue=new Date,fe=Pe||(ce||we?1:ue.getDate()),Fe=ce||ue.getFullYear(),he=0;ce&&!we||(he=we>0?we-1:ue.getMonth());var Me,Se=He||0,gt=Ht||0,Dt=yt||0,Wt=Mt||0;return je?new Date(Date.UTC(Fe,he,fe,Se,gt,Dt,Wt+60*je.offset*1e3)):Q?new Date(Date.UTC(Fe,he,fe,Se,gt,Dt,Wt)):(Me=new Date(Fe,he,fe,Se,gt,Dt,Wt),De&&(Me=se(Me).week(De).toDate()),Me)}catch{return new Date("")}}(C,L,D,_),this.init(),Y&&Y!==!0&&(this.$L=this.locale(Y).$L),A&&C!=this.format(L)&&(this.$d=new Date("")),l={}}else if(L instanceof Array)for(var k=L.length,j=1;j<=k;j+=1){F[1]=L[j-1];var P=_.apply(this,F);if(P.isValid()){this.$d=P.$d,this.$L=P.$L,this.init();break}j===k&&(this.$d=new Date(""))}else b.call(this,M)}}})})(zE);var J6=zE.exports;const e5=Wi(J6);var VE={exports:{}};(function(t,e){(function(n,i){t.exports=i()})(ml,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(i,r,s){var a=r.prototype,o=a.format;s.en.formats=n,a.format=function(l){l===void 0&&(l="YYYY-MM-DDTHH:mm:ssZ");var c=this.$locale().formats,u=function(f,d){return f.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(p,m,S){var v=S&&S.toUpperCase();return m||d[S]||n[S]||d[v].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(y,_,T){return _||T.slice(1)})})}(l,c===void 0?{}:c);return o.call(this,u)}}})})(VE);var t5=VE.exports;const n5=Wi(t5);var $E={exports:{}};(function(t,e){(function(n,i){t.exports=i()})(ml,function(){return function(n,i,r){i.prototype.isBetween=function(s,a,o,l){var c=r(s),u=r(a),f=(l=l||"()")[0]==="(",d=l[1]===")";return(f?this.isAfter(c,o):!this.isBefore(c,o))&&(d?this.isBefore(u,o):!this.isAfter(u,o))||(f?this.isBefore(c,o):!this.isAfter(c,o))&&(d?this.isAfter(u,o):!this.isBefore(u,o))}}})})($E);var i5=$E.exports;const r5=Wi(i5);var jE={exports:{}};(function(t,e){(function(n,i){t.exports=i()})(ml,function(){return function(n,i){var r=i.prototype,s=r.format;r.format=function(a){var o=this,l=this.$locale();if(!this.isValid())return s.bind(this)(a);var c=this.$utils(),u=(a||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(f){switch(f){case"Q":return Math.ceil((o.$M+1)/3);case"Do":return l.ordinal(o.$D);case"gggg":return o.weekYear();case"GGGG":return o.isoWeekYear();case"wo":return l.ordinal(o.week(),"W");case"w":case"ww":return c.s(o.week(),f==="w"?1:2,"0");case"W":case"WW":return c.s(o.isoWeek(),f==="W"?1:2,"0");case"k":case"kk":return c.s(String(o.$H===0?24:o.$H),f==="k"?1:2,"0");case"X":return Math.floor(o.$d.getTime()/1e3);case"x":return o.$d.getTime();case"z":return"["+o.offsetName()+"]";case"zzz":return"["+o.offsetName("long")+"]";default:return f}});return s.bind(this)(u)}}})})(jE);var s5=jE.exports;const a5=Wi(s5);Ot.extend(n5);Ot.extend(Q6);Ot.extend(r5);Ot.extend(a5);const o5={YY:"year",YYYY:{sectionType:"year",contentType:"digit",maxLength:4},M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMM:{sectionType:"month",contentType:"letter"},MMMM:{sectionType:"month",contentType:"letter"},D:{sectionType:"day",contentType:"digit",maxLength:2},DD:"day",Do:{sectionType:"day",contentType:"digit-with-letter"},d:{sectionType:"weekDay",contentType:"digit",maxLength:2},dd:{sectionType:"weekDay",contentType:"letter"},ddd:{sectionType:"weekDay",contentType:"letter"},dddd:{sectionType:"weekDay",contentType:"letter"},A:"meridiem",a:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},l5={year:"YYYY",month:"MMMM",monthShort:"MMM",dayOfMonth:"D",dayOfMonthFull:"Do",weekday:"dddd",weekdayShort:"dd",hours24h:"HH",hours12h:"hh",meridiem:"A",minutes:"mm",seconds:"ss",fullDate:"ll",keyboardDate:"L",shortDate:"MMM D",normalDate:"D MMMM",normalDateWithWeekday:"ddd, MMM D",fullTime12h:"hh:mm A",fullTime24h:"HH:mm",keyboardDateTime12h:"L hh:mm A",keyboardDateTime24h:"L HH:mm"},hm=["Missing UTC plugin","To be able to use UTC or timezones, you have to enable the `utc` plugin","Find more information on https://mui.com/x/react-date-pickers/timezone/#day-js-and-utc"].join(`
`),u3=["Missing timezone plugin","To be able to use timezones, you have to enable both the `utc` and the `timezone` plugin","Find more information on https://mui.com/x/react-date-pickers/timezone/#day-js-and-timezone"].join(`
`);class c5{constructor({locale:e,formats:n}={}){x(this,"isMUIAdapter",!0);x(this,"isTimezoneCompatible",!0);x(this,"lib","dayjs");x(this,"escapedCharacters",{start:"[",end:"]"});x(this,"formatTokenMap",o5);x(this,"setLocaleToValue",e=>{const n=this.getCurrentLocaleCode();return n===e.locale()?e:e.locale(n)});x(this,"hasUTCPlugin",()=>typeof Ot.utc<"u");x(this,"hasTimezonePlugin",()=>typeof Ot.tz<"u");x(this,"isSame",(e,n,i)=>{const r=this.setTimezone(n,this.getTimezone(e));return e.format(i)===r.format(i)});x(this,"cleanTimezone",e=>{switch(e){case"default":return;case"system":return Ot.tz.guess();default:return e}});x(this,"createSystemDate",e=>{let n;if(this.hasUTCPlugin()&&this.hasTimezonePlugin()){const i=Ot.tz.guess();i==="UTC"?n=Ot(e):n=Ot.tz(e,i)}else n=Ot(e);return this.setLocaleToValue(n)});x(this,"createUTCDate",e=>{if(!this.hasUTCPlugin())throw new Error(hm);return this.setLocaleToValue(Ot.utc(e))});x(this,"createTZDate",(e,n)=>{if(!this.hasUTCPlugin())throw new Error(hm);if(!this.hasTimezonePlugin())throw new Error(u3);const i=e!==void 0&&!e.endsWith("Z");return this.setLocaleToValue(Ot(e).tz(this.cleanTimezone(n),i))});x(this,"getLocaleFormats",()=>{const e=Ot.Ls,n=this.locale||"en";let i=e[n];return i===void 0&&(i=e.en),i.formats});x(this,"adjustOffset",e=>{if(!this.hasTimezonePlugin())return e;const n=this.getTimezone(e);if(n!=="UTC"){const i=e.tz(this.cleanTimezone(n),!0);if(i.$offset===(e.$offset??0))return e;e.$offset=i.$offset}return e});x(this,"date",(e,n="default")=>e===null?null:n==="UTC"?this.createUTCDate(e):n==="system"||n==="default"&&!this.hasTimezonePlugin()?this.createSystemDate(e):this.createTZDate(e,n));x(this,"getInvalidDate",()=>Ot(new Date("Invalid date")));x(this,"getTimezone",e=>{var n;if(this.hasTimezonePlugin()){const i=(n=e.$x)==null?void 0:n.$timezone;if(i)return i}return this.hasUTCPlugin()&&e.isUTC()?"UTC":"system"});x(this,"setTimezone",(e,n)=>{if(this.getTimezone(e)===n)return e;if(n==="UTC"){if(!this.hasUTCPlugin())throw new Error(hm);return e.utc()}if(n==="system")return e.local();if(!this.hasTimezonePlugin()){if(n==="default")return e;throw new Error(u3)}return this.setLocaleToValue(Ot.tz(e,this.cleanTimezone(n)))});x(this,"toJsDate",e=>e.toDate());x(this,"parse",(e,n)=>e===""?null:Ot(e,n,this.locale,!0));x(this,"getCurrentLocaleCode",()=>this.locale||"en");x(this,"is12HourCycleInCurrentLocale",()=>/A|a/.test(this.getLocaleFormats().LT||""));x(this,"expandFormat",e=>{const n=this.getLocaleFormats(),i=r=>r.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(s,a,o)=>a||o.slice(1));return e.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(r,s,a)=>{const o=a&&a.toUpperCase();return s||n[a]||i(n[o])})});x(this,"isValid",e=>e==null?!1:e.isValid());x(this,"format",(e,n)=>this.formatByString(e,this.formats[n]));x(this,"formatByString",(e,n)=>this.setLocaleToValue(e).format(n));x(this,"formatNumber",e=>e);x(this,"isEqual",(e,n)=>e===null&&n===null?!0:e===null||n===null?!1:e.toDate().getTime()===n.toDate().getTime());x(this,"isSameYear",(e,n)=>this.isSame(e,n,"YYYY"));x(this,"isSameMonth",(e,n)=>this.isSame(e,n,"YYYY-MM"));x(this,"isSameDay",(e,n)=>this.isSame(e,n,"YYYY-MM-DD"));x(this,"isSameHour",(e,n)=>e.isSame(n,"hour"));x(this,"isAfter",(e,n)=>e>n);x(this,"isAfterYear",(e,n)=>this.hasUTCPlugin()?!this.isSameYear(e,n)&&e.utc()>n.utc():e.isAfter(n,"year"));x(this,"isAfterDay",(e,n)=>this.hasUTCPlugin()?!this.isSameDay(e,n)&&e.utc()>n.utc():e.isAfter(n,"day"));x(this,"isBefore",(e,n)=>e<n);x(this,"isBeforeYear",(e,n)=>this.hasUTCPlugin()?!this.isSameYear(e,n)&&e.utc()<n.utc():e.isBefore(n,"year"));x(this,"isBeforeDay",(e,n)=>this.hasUTCPlugin()?!this.isSameDay(e,n)&&e.utc()<n.utc():e.isBefore(n,"day"));x(this,"isWithinRange",(e,[n,i])=>e>=n&&e<=i);x(this,"startOfYear",e=>this.adjustOffset(e.startOf("year")));x(this,"startOfMonth",e=>this.adjustOffset(e.startOf("month")));x(this,"startOfWeek",e=>this.adjustOffset(this.setLocaleToValue(e).startOf("week")));x(this,"startOfDay",e=>this.adjustOffset(e.startOf("day")));x(this,"endOfYear",e=>this.adjustOffset(e.endOf("year")));x(this,"endOfMonth",e=>this.adjustOffset(e.endOf("month")));x(this,"endOfWeek",e=>this.adjustOffset(this.setLocaleToValue(e).endOf("week")));x(this,"endOfDay",e=>this.adjustOffset(e.endOf("day")));x(this,"addYears",(e,n)=>this.adjustOffset(e.add(n,"year")));x(this,"addMonths",(e,n)=>this.adjustOffset(e.add(n,"month")));x(this,"addWeeks",(e,n)=>this.adjustOffset(e.add(n,"week")));x(this,"addDays",(e,n)=>this.adjustOffset(e.add(n,"day")));x(this,"addHours",(e,n)=>this.adjustOffset(e.add(n,"hour")));x(this,"addMinutes",(e,n)=>this.adjustOffset(e.add(n,"minute")));x(this,"addSeconds",(e,n)=>this.adjustOffset(e.add(n,"second")));x(this,"getYear",e=>e.year());x(this,"getMonth",e=>e.month());x(this,"getDate",e=>e.date());x(this,"getHours",e=>e.hour());x(this,"getMinutes",e=>e.minute());x(this,"getSeconds",e=>e.second());x(this,"getMilliseconds",e=>e.millisecond());x(this,"setYear",(e,n)=>this.adjustOffset(e.set("year",n)));x(this,"setMonth",(e,n)=>this.adjustOffset(e.set("month",n)));x(this,"setDate",(e,n)=>this.adjustOffset(e.set("date",n)));x(this,"setHours",(e,n)=>this.adjustOffset(e.set("hour",n)));x(this,"setMinutes",(e,n)=>this.adjustOffset(e.set("minute",n)));x(this,"setSeconds",(e,n)=>this.adjustOffset(e.set("second",n)));x(this,"setMilliseconds",(e,n)=>this.adjustOffset(e.set("millisecond",n)));x(this,"getDaysInMonth",e=>e.daysInMonth());x(this,"getWeekArray",e=>{const n=this.startOfWeek(this.startOfMonth(e)),i=this.endOfWeek(this.endOfMonth(e));let r=0,s=n;const a=[];for(;s<i;){const o=Math.floor(r/7);a[o]=a[o]||[],a[o].push(s),s=this.addDays(s,1),r+=1}return a});x(this,"getWeekNumber",e=>e.week());x(this,"getYearRange",([e,n])=>{const i=this.startOfYear(e),r=this.endOfYear(n),s=[];let a=i;for(;this.isBefore(a,r);)s.push(a),a=this.addYears(a,1);return s});this.locale=e,this.formats=me({},l5,n),Ot.extend(e5)}getDayOfWeek(e){return e.day()+1}}function c_(t){return typeof t=="string"}function HE(t,e,n){return t===void 0||c_(t)?e:{...e,ownerState:{...e.ownerState,...n}}}function u5(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(i=>i.match(/^on[A-Z]/)&&typeof t[i]=="function"&&!e.includes(i)).forEach(i=>{n[i]=t[i]}),n}function f3(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function WE(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:i,externalForwardedProps:r,className:s}=t;if(!e){const p=Oe(n==null?void 0:n.className,s,r==null?void 0:r.className,i==null?void 0:i.className),m={...n==null?void 0:n.style,...r==null?void 0:r.style,...i==null?void 0:i.style},S={...n,...r,...i};return p.length>0&&(S.className=p),Object.keys(m).length>0&&(S.style=m),{props:S,internalRef:void 0}}const a=u5({...r,...i}),o=f3(i),l=f3(r),c=e(a),u=Oe(c==null?void 0:c.className,n==null?void 0:n.className,s,r==null?void 0:r.className,i==null?void 0:i.className),f={...c==null?void 0:c.style,...n==null?void 0:n.style,...r==null?void 0:r.style,...i==null?void 0:i.style},d={...c,...n,...l,...o};return u.length>0&&(d.className=u),Object.keys(f).length>0&&(d.style=f),{props:d,internalRef:c.ref}}function YE(t,e,n){return typeof t=="function"?t(e,n):t}function or(t){var f;const{elementType:e,externalSlotProps:n,ownerState:i,skipResolvingSlotProps:r=!1,...s}=t,a=r?{}:YE(n,i),{props:o,internalRef:l}=WE({...s,externalSlotProps:a}),c=Ls(l,a==null?void 0:a.ref,(f=t.additionalProps)==null?void 0:f.ref);return HE(e,{...o,ref:c},i)}const Gd=(t,e,n)=>{let i=e;return i=t.setHours(i,t.getHours(n)),i=t.setMinutes(i,t.getMinutes(n)),i=t.setSeconds(i,t.getSeconds(n)),i=t.setMilliseconds(i,t.getMilliseconds(n)),i},ru=({date:t,disableFuture:e,disablePast:n,maxDate:i,minDate:r,isDateDisabled:s,adapter:a,timezone:o})=>{const l=Gd(a,a.date(void 0,o),t);n&&a.isBefore(r,l)&&(r=l),e&&a.isAfter(i,l)&&(i=l);let c=t,u=t;for(a.isBefore(t,r)&&(c=r,u=null),a.isAfter(t,i)&&(u&&(u=i),c=null);c||u;){if(c&&a.isAfter(c,i)&&(c=null),u&&a.isBefore(u,r)&&(u=null),c){if(!s(c))return c;c=a.addDays(c,1)}if(u){if(!s(u))return u;u=a.addDays(u,-1)}}return null},f5=(t,e)=>t.isValid(e)?e:null,d3=(t,e,n)=>e==null||!t.isValid(e)?n:e,d5=(t,e,n)=>!t.isValid(e)&&e!=null&&!t.isValid(n)&&n!=null?!0:t.isEqual(e,n),h5=(t,e)=>{const i=[t.startOfYear(e)];for(;i.length<12;){const r=i[i.length-1];i.push(t.addMonths(r,1))}return i},XE=(t,e,n)=>n==="date"?t.startOfDay(t.date(void 0,e)):t.date(void 0,e),p5=(t,e)=>{const n=t.startOfWeek(e);return[0,1,2,3,4,5,6].map(i=>t.addDays(n,i))},h3=(t,e)=>e.getHours(t)*3600+e.getMinutes(t)*60+e.getSeconds(t),g5=(t,e)=>(n,i)=>t?e.isAfter(n,i):h3(n,e)>h3(i,e),Rr={year:1,month:2,day:3,minutes:5,seconds:6,milliseconds:7},Wl=(t,e,n)=>{if(e===Rr.year)return t.startOfYear(n);if(e===Rr.month)return t.startOfMonth(n);if(e===Rr.day)return t.startOfDay(n);let i=n;return e<Rr.minutes&&(i=t.setMinutes(i,0)),e<Rr.seconds&&(i=t.setSeconds(i,0)),e<Rr.milliseconds&&(i=t.setMilliseconds(i,0)),i},m5=({props:t,adapter:e,granularity:n,timezone:i,getTodayDate:r})=>{let s=r?r():Wl(e,n,XE(e,i));t.minDate!=null&&e.isAfterDay(t.minDate,s)&&(s=Wl(e,n,t.minDate)),t.maxDate!=null&&e.isBeforeDay(t.maxDate,s)&&(s=Wl(e,n,t.maxDate));const a=g5(t.disableIgnoringDatePartForTimeValidation??!1,e);return t.minTime!=null&&a(t.minTime,s)&&(s=Wl(e,n,t.disableIgnoringDatePartForTimeValidation?t.minTime:Gd(e,s,t.minTime))),t.maxTime!=null&&a(s,t.maxTime)&&(s=Wl(e,n,t.disableIgnoringDatePartForTimeValidation?t.maxTime:Gd(e,s,t.maxTime))),s},y5=["value","referenceDate"],Oa={emptyValue:null,getTodayValue:XE,getInitialReferenceValue:t=>{let{value:e,referenceDate:n}=t,i=tn(t,y5);return i.adapter.isValid(e)?e:n??m5(i)},cleanValue:f5,areValuesEqual:d5,isSameError:(t,e)=>t===e,hasError:t=>t!=null,defaultErrorState:null,getTimezone:(t,e)=>t.isValid(e)?t.getTimezone(e):null,setTimezone:(t,e,n)=>n==null?null:t.setTimezone(n,e)},qE=({props:t,value:e,timezone:n,adapter:i})=>{if(e===null)return null;const{shouldDisableDate:r,shouldDisableMonth:s,shouldDisableYear:a,disablePast:o,disableFuture:l,minDate:c,maxDate:u}=t,f=i.date(void 0,n);switch(!0){case!i.isValid(e):return"invalidDate";case!!(r&&r(e)):return"shouldDisableDate";case!!(s&&s(e)):return"shouldDisableMonth";case!!(a&&a(e)):return"shouldDisableYear";case!!(l&&i.isAfterDay(e,f)):return"disableFuture";case!!(o&&i.isBeforeDay(e,f)):return"disablePast";case!!(c&&i.isBeforeDay(e,c)):return"minDate";case!!(u&&i.isAfterDay(e,u)):return"maxDate";default:return null}};qE.valueManager=Oa;const _5=t=>({components:{MuiLocalizationProvider:{defaultProps:{localeText:me({},t)}}}}),KE={previousMonth:"Previous month",nextMonth:"Next month",openPreviousView:"Open previous view",openNextView:"Open next view",calendarViewSwitchingButtonAriaLabel:t=>t==="year"?"year view is open, switch to calendar view":"calendar view is open, switch to year view",start:"Start",end:"End",startDate:"Start date",startTime:"Start time",endDate:"End date",endTime:"End time",cancelButtonLabel:"Cancel",clearButtonLabel:"Clear",okButtonLabel:"OK",todayButtonLabel:"Today",nextStepButtonLabel:"Next",datePickerToolbarTitle:"Select date",dateTimePickerToolbarTitle:"Select date & time",timePickerToolbarTitle:"Select time",dateRangePickerToolbarTitle:"Select date range",timeRangePickerToolbarTitle:"Select time range",clockLabelText:(t,e)=>`Select ${t}. ${e?`Selected time is ${e}`:"No time selected"}`,hoursClockNumberText:t=>`${t} hours`,minutesClockNumberText:t=>`${t} minutes`,secondsClockNumberText:t=>`${t} seconds`,selectViewText:t=>`Select ${t}`,calendarWeekNumberHeaderLabel:"Week number",calendarWeekNumberHeaderText:"#",calendarWeekNumberAriaLabelText:t=>`Week ${t}`,calendarWeekNumberText:t=>`${t}`,openDatePickerDialogue:t=>t?`Choose date, selected date is ${t}`:"Choose date",openTimePickerDialogue:t=>t?`Choose time, selected time is ${t}`:"Choose time",openRangePickerDialogue:t=>t?`Choose range, selected range is ${t}`:"Choose range",fieldClearLabel:"Clear",timeTableLabel:"pick time",dateTableLabel:"pick date",fieldYearPlaceholder:t=>"Y".repeat(t.digitAmount),fieldMonthPlaceholder:t=>t.contentType==="letter"?"MMMM":"MM",fieldDayPlaceholder:()=>"DD",fieldWeekDayPlaceholder:t=>t.contentType==="letter"?"EEEE":"EE",fieldHoursPlaceholder:()=>"hh",fieldMinutesPlaceholder:()=>"mm",fieldSecondsPlaceholder:()=>"ss",fieldMeridiemPlaceholder:()=>"aa",year:"Year",month:"Month",day:"Day",weekDay:"Week day",hours:"Hours",minutes:"Minutes",seconds:"Seconds",meridiem:"Meridiem",empty:"Empty"},b5=KE;_5(KE);const k0=()=>{const t=I.useContext(l_);if(t===null)throw new Error(["MUI X: Can not find the date and time pickers localization context.","It looks like you forgot to wrap your component in LocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-date-pickers` package"].join(`
`));if(t.adapter===null)throw new Error(["MUI X: Can not find the date and time pickers adapter from its localization context.","It looks like you forgot to pass a `dateAdapter` to your LocalizationProvider."].join(`
`));const e=I.useMemo(()=>me({},b5,t.localeText),[t.localeText]);return I.useMemo(()=>me({},t,{localeText:e}),[t,e])},Dn=()=>k0().adapter,ZE=()=>k0().localeText,v5=I.createContext({ownerState:{isPickerDisabled:!1,isPickerReadOnly:!1,isPickerValueEmpty:!1,isPickerOpen:!1,pickerVariant:"desktop",pickerOrientation:"portrait"},rootRefObject:{current:null},labelId:void 0,dismissViews:()=>{},hasUIView:!0,getCurrentViewMode:()=>"UI",triggerElement:null,viewContainerRole:null,defaultActionBarActions:[],onPopperExited:void 0}),GE=({shouldDisableDate:t,shouldDisableMonth:e,shouldDisableYear:n,minDate:i,maxDate:r,disableFuture:s,disablePast:a,timezone:o})=>{const l=Dn();return I.useCallback(c=>qE({adapter:l,value:c,timezone:o,props:{shouldDisableDate:t,shouldDisableMonth:e,shouldDisableYear:n,minDate:i,maxDate:r,disableFuture:s,disablePast:a}})!==null,[l,t,e,n,i,r,s,a,o])},T5=(t,e)=>(n,i)=>{switch(i.type){case"setVisibleDate":return me({},n,{slideDirection:i.direction,currentMonth:i.month,isMonthSwitchingAnimating:!e.isSameMonth(i.month,n.currentMonth)&&!t&&!i.skipAnimation,focusedDay:i.focusedDay});case"changeMonthTimezone":{const r=i.newTimezone;if(e.getTimezone(n.currentMonth)===r)return n;let s=e.setTimezone(n.currentMonth,r);return e.getMonth(s)!==e.getMonth(n.currentMonth)&&(s=e.setMonth(s,e.getMonth(n.currentMonth))),me({},n,{currentMonth:s})}case"finishMonthSwitchingAnimation":return me({},n,{isMonthSwitchingAnimating:!1});default:throw new Error("missing support")}},x5=t=>{const{value:e,referenceDate:n,disableFuture:i,disablePast:r,maxDate:s,minDate:a,onMonthChange:o,onYearChange:l,reduceAnimations:c,shouldDisableDate:u,timezone:f,getCurrentMonthFromVisibleDate:d}=t,p=Dn(),m=I.useRef(T5(!!c,p)).current,S=I.useMemo(()=>Oa.getInitialReferenceValue({value:e,adapter:p,timezone:f,props:t,referenceDate:n,granularity:Rr.day}),[n,f]),[v,y]=I.useReducer(m,{isMonthSwitchingAnimating:!1,focusedDay:S,currentMonth:p.startOfMonth(S),slideDirection:"left"}),_=GE({shouldDisableDate:u,minDate:a,maxDate:s,disableFuture:i,disablePast:r,timezone:f});I.useEffect(()=>{y({type:"changeMonthTimezone",newTimezone:p.getTimezone(S)})},[S,p]);const T=et(({target:M,reason:C})=>{if(C==="cell-interaction"&&v.focusedDay!=null&&p.isSameDay(M,v.focusedDay))return;const D=C==="cell-interaction";let F,L;if(C==="cell-interaction")F=d(M,v.currentMonth),L=M;else if(F=p.isSameMonth(M,v.currentMonth)?v.currentMonth:p.startOfMonth(M),L=M,_(L)){const A=p.startOfMonth(M),Y=p.endOfMonth(M);L=ru({adapter:p,date:L,minDate:p.isBefore(a,A)?A:a,maxDate:p.isAfter(s,Y)?Y:s,disablePast:r,disableFuture:i,isDateDisabled:_,timezone:f})}const U=!p.isSameMonth(v.currentMonth,F),N=!p.isSameYear(v.currentMonth,F);U&&(o==null||o(F)),N&&(l==null||l(p.startOfYear(F))),y({type:"setVisibleDate",month:F,direction:p.isAfterDay(F,v.currentMonth)?"left":"right",focusedDay:v.focusedDay!=null&&L!=null&&p.isSameDay(L,v.focusedDay)?v.focusedDay:L,skipAnimation:D})}),b=I.useCallback(()=>{y({type:"finishMonthSwitchingAnimation"})},[]);return{referenceDate:S,calendarState:v,setVisibleDate:T,isDateDisabled:_,onMonthSwitchingAnimationEnd:b}};function S5(t){var e;return parseInt(I.version,10)>=19?((e=t==null?void 0:t.props)==null?void 0:e.ref)||null:(t==null?void 0:t.ref)||null}const w5=t=>t.scrollTop;function p3(t,e){const{timeout:n,easing:i,style:r={}}=t;return{duration:r.transitionDuration??(typeof n=="number"?n:n[e.mode]||0),easing:r.transitionTimingFunction??(typeof i=="object"?i[e.mode]:i),delay:r.transitionDelay}}const A5={entering:{opacity:1},entered:{opacity:1}},N0=I.forwardRef(function(e,n){const i=qp(),r={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{addEndListener:s,appear:a=!0,children:o,easing:l,in:c,onEnter:u,onEntered:f,onEntering:d,onExit:p,onExited:m,onExiting:S,style:v,timeout:y=r,TransitionComponent:_=mr,...T}=e,b=I.useRef(null),M=Ls(b,S5(o),n),C=k=>j=>{if(k){const P=b.current;j===void 0?k(P):k(P,j)}},D=C(d),F=C((k,j)=>{w5(k);const P=p3({style:v,timeout:y,easing:l},{mode:"enter"});k.style.webkitTransition=i.transitions.create("opacity",P),k.style.transition=i.transitions.create("opacity",P),u&&u(k,j)}),L=C(f),U=C(S),N=C(k=>{const j=p3({style:v,timeout:y,easing:l},{mode:"exit"});k.style.webkitTransition=i.transitions.create("opacity",j),k.style.transition=i.transitions.create("opacity",j),p&&p(k)}),A=C(m),Y=k=>{s&&s(b.current,k)};return $.jsx(_,{appear:a,in:c,nodeRef:b,onEnter:F,onEntered:L,onEntering:D,onExit:N,onExited:A,onExiting:U,addEndListener:Y,timeout:y,...T,children:(k,{ownerState:j,...P})=>I.cloneElement(o,{style:{opacity:0,visibility:k==="exited"&&!c?"hidden":void 0,...A5[k],...v,...o.props.style},ref:M,...P})})}),E5=t=>Ct("MuiPickersFadeTransitionGroup",t);St("MuiPickersFadeTransitionGroup",["root"]);const C5=["children"],R5=t=>wt({root:["root"]},E5,t),M5=ye(Ou,{name:"MuiPickersFadeTransitionGroup",slot:"Root"})({display:"block",position:"relative"});function QE(t){const e=gr({props:t,name:"MuiPickersFadeTransitionGroup"}),{className:n,reduceAnimations:i,transKey:r,classes:s}=e,{children:a}=e,o=tn(e,C5),l=R5(s),c=qp();return i?a:$.jsx(M5,{className:Oe(l.root,n),ownerState:o,children:$.jsx(N0,{appear:!1,mountOnEnter:!0,unmountOnExit:!0,timeout:{appear:c.transitions.duration.enteringScreen,enter:c.transitions.duration.enteringScreen,exit:0},children:a},r)})}function O5(t){return Ct("MuiTypography",t)}const g3=St("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]),I5={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},P5=QN(),D5=t=>{const{align:e,gutterBottom:n,noWrap:i,paragraph:r,variant:s,classes:a}=t,o={root:["root",s,t.align!=="inherit"&&`align${Ke(e)}`,n&&"gutterBottom",i&&"noWrap",r&&"paragraph"]};return wt(o,O5,a)},k5=ye("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],n.align!=="inherit"&&e[`align${Ke(n.align)}`],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})(Ii(({theme:t})=>{var e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(t.typography).filter(([n,i])=>n!=="inherit"&&i&&typeof i=="object").map(([n,i])=>({props:{variant:n},style:i})),...Object.entries(t.palette).filter(iu()).map(([n])=>({props:{color:n},style:{color:(t.vars||t).palette[n].main}})),...Object.entries(((e=t.palette)==null?void 0:e.text)||{}).filter(([,n])=>typeof n=="string").map(([n])=>({props:{color:`text${Ke(n)}`},style:{color:(t.vars||t).palette.text[n]}})),{props:({ownerState:n})=>n.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:n})=>n.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:n})=>n.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:n})=>n.paragraph,style:{marginBottom:16}}]}})),m3={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},xi=I.forwardRef(function(e,n){const{color:i,...r}=Pn({props:e,name:"MuiTypography"}),s=!I5[i],a=P5({...r,...s&&{color:i}}),{align:o="inherit",className:l,component:c,gutterBottom:u=!1,noWrap:f=!1,paragraph:d=!1,variant:p="body1",variantMapping:m=m3,...S}=a,v={...a,align:o,color:i,className:l,component:c,gutterBottom:u,noWrap:f,paragraph:d,variant:p,variantMapping:m},y=c||(d?"p":m[p]||m3[p])||"span",_=D5(v);return $.jsx(k5,{as:y,ref:n,className:Oe(_.root,l),...S,ownerState:v,style:{...o!=="inherit"&&{"--Typography-textAlign":o},...S.style}})}),su=36,Kp=2,B0=320,N5=280,JE=336;function B5(t){return Ct("MuiPickersDay",t)}const Zs=St("MuiPickersDay",["root","dayWithMargin","dayOutsideMonth","hiddenDaySpacingFiller","today","selected","disabled"]),qr=()=>I.useContext(v5);function eC(t){const{disabled:e,selected:n,today:i,outsideCurrentMonth:r,day:s,disableMargin:a,disableHighlightToday:o,showDaysOutsideCurrentMonth:l}=t,c=Dn(),{ownerState:u}=qr();return I.useMemo(()=>me({},u,{day:s,isDaySelected:n??!1,isDayDisabled:e??!1,isDayCurrent:i??!1,isDayOutsideMonth:r??!1,isDayStartOfWeek:c.isSameDay(s,c.startOfWeek(s)),isDayEndOfWeek:c.isSameDay(s,c.endOfWeek(s)),disableMargin:a??!1,disableHighlightToday:o??!1,showDaysOutsideCurrentMonth:l??!1}),[c,u,s,n,e,i,r,a,o,l])}const L5=["autoFocus","className","classes","hidden","isAnimating","onClick","onDaySelect","onFocus","onBlur","onKeyDown","onMouseDown","onMouseEnter","children","isFirstVisibleCell","isLastVisibleCell","day","selected","disabled","today","outsideCurrentMonth","disableMargin","disableHighlightToday","showDaysOutsideCurrentMonth"],U5=(t,e)=>{const{isDaySelected:n,isDayDisabled:i,isDayCurrent:r,isDayOutsideMonth:s,disableMargin:a,disableHighlightToday:o,showDaysOutsideCurrentMonth:l}=e,c=s&&!l;return wt({root:["root",n&&!c&&"selected",i&&"disabled",!a&&"dayWithMargin",!o&&r&&"today",s&&l&&"dayOutsideMonth",c&&"hiddenDaySpacingFiller"],hiddenDaySpacingFiller:["hiddenDaySpacingFiller"]},B5,t)},tC=({theme:t})=>me({},t.typography.caption,{width:su,height:su,borderRadius:"50%",padding:0,backgroundColor:"transparent",transition:t.transitions.create("background-color",{duration:t.transitions.duration.short}),color:(t.vars||t).palette.text.primary,"@media (pointer: fine)":{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Bs(t.palette.primary.main,t.palette.action.hoverOpacity)}},"&:focus":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.focusOpacity})`:Bs(t.palette.primary.main,t.palette.action.focusOpacity),[`&.${Zs.selected}`]:{willChange:"background-color",backgroundColor:(t.vars||t).palette.primary.dark}},[`&.${Zs.selected}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.main,fontWeight:t.typography.fontWeightMedium,"&:hover":{willChange:"background-color",backgroundColor:(t.vars||t).palette.primary.dark}},[`&.${Zs.disabled}:not(.${Zs.selected})`]:{color:(t.vars||t).palette.text.disabled},[`&.${Zs.disabled}&.${Zs.selected}`]:{opacity:.6},variants:[{props:{disableMargin:!1},style:{margin:`0 ${Kp}px`}},{props:{isDayOutsideMonth:!0,showDaysOutsideCurrentMonth:!0},style:{color:(t.vars||t).palette.text.secondary}},{props:{disableHighlightToday:!1,isDayCurrent:!0},style:{[`&:not(.${Zs.selected})`]:{border:`1px solid ${(t.vars||t).palette.text.secondary}`}}}]}),nC=(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableMargin&&e.dayWithMargin,!n.disableHighlightToday&&n.isDayCurrent&&e.today,!n.isDayOutsideMonth&&n.showDaysOutsideCurrentMonth&&e.dayOutsideMonth,n.isDayOutsideMonth&&!n.showDaysOutsideCurrentMonth&&e.hiddenDaySpacingFiller]},F5=ye(P0,{name:"MuiPickersDay",slot:"Root",overridesResolver:nC})(tC),z5=ye("div",{name:"MuiPickersDay",slot:"Root",overridesResolver:nC})(({theme:t})=>me({},tC({theme:t}),{opacity:0,pointerEvents:"none"})),Yl=()=>{},V5=I.forwardRef(function(e,n){const i=gr({props:e,name:"MuiPickersDay"}),{autoFocus:r=!1,className:s,classes:a,isAnimating:o,onClick:l,onDaySelect:c,onFocus:u=Yl,onBlur:f=Yl,onKeyDown:d=Yl,onMouseDown:p=Yl,onMouseEnter:m=Yl,children:S,day:v,selected:y,disabled:_,today:T,outsideCurrentMonth:b,disableMargin:M,disableHighlightToday:C,showDaysOutsideCurrentMonth:D}=i,F=tn(i,L5),L=eC({day:v,selected:y,disabled:_,today:T,outsideCurrentMonth:b,disableMargin:M,disableHighlightToday:C,showDaysOutsideCurrentMonth:D}),U=U5(a,L),N=Dn(),A=I.useRef(null),Y=Ls(A,n);Ru(()=>{r&&!_&&!o&&!b&&A.current.focus()},[r,_,o,b]);const k=P=>{p(P),b&&P.preventDefault()},j=P=>{P.defaultMuiPrevented=!0,_||c(v),b&&P.currentTarget.focus(),l&&l(P)};return b&&!D?$.jsx(z5,{className:Oe(U.root,U.hiddenDaySpacingFiller,s),ownerState:L,role:F.role}):$.jsx(F5,me({className:Oe(U.root,s),ref:Y,centerRipple:!0,disabled:_,tabIndex:y?0:-1,onKeyDown:P=>d(P,v),onFocus:P=>u(P,v),onBlur:P=>f(P,v),onMouseEnter:P=>m(P,v),onClick:j,onMouseDown:k},F,{ownerState:L,children:S??N.format(v,"dayOfMonth")}))}),$5=I.memo(V5),j5=()=>k0().defaultDates,Zp=t=>{const e=Dn(),n=I.useRef(void 0);return n.current===void 0&&(n.current=e.date(void 0,t)),n.current},H5=t=>Ct("MuiPickersSlideTransition",t),di=St("MuiPickersSlideTransition",["root","slideEnter-left","slideEnter-right","slideEnterActive","slideExit","slideExitActiveLeft-left","slideExitActiveLeft-right"]),W5=["children","className","reduceAnimations","slideDirection","transKey","classes"],Y5=(t,e)=>{const{slideDirection:n}=e,i={root:["root"],exit:["slideExit"],enterActive:["slideEnterActive"],enter:[`slideEnter-${n}`],exitActive:[`slideExitActiveLeft-${n}`]};return wt(i,H5,t)},X5=ye(Ou,{name:"MuiPickersSlideTransition",slot:"Root",overridesResolver:(t,e)=>[e.root,{[`.${di["slideEnter-left"]}`]:e["slideEnter-left"]},{[`.${di["slideEnter-right"]}`]:e["slideEnter-right"]},{[`.${di.slideEnterActive}`]:e.slideEnterActive},{[`.${di.slideExit}`]:e.slideExit},{[`.${di["slideExitActiveLeft-left"]}`]:e["slideExitActiveLeft-left"]},{[`.${di["slideExitActiveLeft-right"]}`]:e["slideExitActiveLeft-right"]}]})(({theme:t})=>{const e=t.transitions.create("transform",{duration:t.transitions.duration.complex,easing:"cubic-bezier(0.35, 0.8, 0.4, 1)"});return{display:"block",position:"relative",overflowX:"hidden","& > *":{position:"absolute",top:0,right:0,left:0},[`& .${di["slideEnter-left"]}`]:{willChange:"transform",transform:"translate(100%)",zIndex:1},[`& .${di["slideEnter-right"]}`]:{willChange:"transform",transform:"translate(-100%)",zIndex:1},[`& .${di.slideEnterActive}`]:{transform:"translate(0%)",transition:e},[`& .${di.slideExit}`]:{transform:"translate(0%)"},[`& .${di["slideExitActiveLeft-left"]}`]:{willChange:"transform",transform:"translate(-100%)",transition:e,zIndex:0},[`& .${di["slideExitActiveLeft-right"]}`]:{willChange:"transform",transform:"translate(100%)",transition:e,zIndex:0}}});function q5(t){const e=gr({props:t,name:"MuiPickersSlideTransition"}),{children:n,className:i,reduceAnimations:r,slideDirection:s,transKey:a,classes:o}=e,l=tn(e,W5),{ownerState:c}=qr(),u=me({},c,{slideDirection:s}),f=Y5(o,u),d=qp();if(r)return $.jsx("div",{className:Oe(f.root,i),children:n});const p={exit:f.exit,enterActive:f.enterActive,enter:f.enter,exitActive:f.exitActive};return $.jsx(X5,{className:Oe(f.root,i),childFactory:m=>I.cloneElement(m,{classNames:p}),role:"presentation",ownerState:u,children:$.jsx(M0,me({mountOnEnter:!0,unmountOnExit:!0,timeout:d.transitions.duration.complex,classNames:p},l,{children:n}),a)})}const K5=t=>Ct("MuiDayCalendar",t);St("MuiDayCalendar",["root","header","weekDayLabel","loadingContainer","slideTransition","monthContainer","weekContainer","weekNumberLabel","weekNumber"]);const Z5=["parentProps","day","focusedDay","selectedDays","isDateDisabled","currentMonthNumber","isViewFocused"],G5=["ownerState"],Q5=t=>wt({root:["root"],header:["header"],weekDayLabel:["weekDayLabel"],loadingContainer:["loadingContainer"],slideTransition:["slideTransition"],monthContainer:["monthContainer"],weekContainer:["weekContainer"],weekNumberLabel:["weekNumberLabel"],weekNumber:["weekNumber"]},K5,t),iC=(su+Kp*2)*6,J5=ye("div",{name:"MuiDayCalendar",slot:"Root"})({}),eB=ye("div",{name:"MuiDayCalendar",slot:"Header"})({display:"flex",justifyContent:"center",alignItems:"center"}),tB=ye(xi,{name:"MuiDayCalendar",slot:"WeekDayLabel"})(({theme:t})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(t.vars||t).palette.text.secondary})),nB=ye(xi,{name:"MuiDayCalendar",slot:"WeekNumberLabel"})(({theme:t})=>({width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(t.vars||t).palette.text.disabled})),iB=ye(xi,{name:"MuiDayCalendar",slot:"WeekNumber"})(({theme:t})=>me({},t.typography.caption,{width:su,height:su,padding:0,margin:`0 ${Kp}px`,color:(t.vars||t).palette.text.disabled,fontSize:"0.75rem",alignItems:"center",justifyContent:"center",display:"inline-flex"})),rB=ye("div",{name:"MuiDayCalendar",slot:"LoadingContainer"})({display:"flex",justifyContent:"center",alignItems:"center",minHeight:iC}),sB=ye(q5,{name:"MuiDayCalendar",slot:"SlideTransition"})({minHeight:iC}),aB=ye("div",{name:"MuiDayCalendar",slot:"MonthContainer"})({overflow:"hidden"}),oB=ye("div",{name:"MuiDayCalendar",slot:"WeekContainer"})({margin:`${Kp}px 0`,display:"flex",justifyContent:"center"});function lB(t){let{parentProps:e,day:n,focusedDay:i,selectedDays:r,isDateDisabled:s,currentMonthNumber:a,isViewFocused:o}=t,l=tn(t,Z5);const{disabled:c,disableHighlightToday:u,isMonthSwitchingAnimating:f,showDaysOutsideCurrentMonth:d,slots:p,slotProps:m,timezone:S}=e,v=Dn(),y=Zp(S),_=i!=null&&v.isSameDay(n,i),T=o&&_,b=r.some(k=>v.isSameDay(k,n)),M=v.isSameDay(n,y),C=I.useMemo(()=>c||s(n),[c,s,n]),D=I.useMemo(()=>v.getMonth(n)!==a,[v,n,a]),F=eC({day:n,selected:b,disabled:C,today:M,outsideCurrentMonth:D,disableMargin:void 0,disableHighlightToday:u,showDaysOutsideCurrentMonth:d}),L=(p==null?void 0:p.day)??$5,U=or({elementType:L,externalSlotProps:m==null?void 0:m.day,additionalProps:me({disableHighlightToday:u,showDaysOutsideCurrentMonth:d,role:"gridcell",isAnimating:f,"data-timestamp":v.toJsDate(n).valueOf()},l),ownerState:me({},F,{day:n,isDayDisabled:C,isDaySelected:b})}),N=tn(U,G5),A=I.useMemo(()=>{const k=v.startOfMonth(v.setMonth(n,a));return d?v.isSameDay(n,v.startOfWeek(k)):v.isSameDay(n,k)},[a,n,d,v]),Y=I.useMemo(()=>{const k=v.endOfMonth(v.setMonth(n,a));return d?v.isSameDay(n,v.endOfWeek(k)):v.isSameDay(n,k)},[a,n,d,v]);return $.jsx(L,me({},N,{day:n,disabled:C,autoFocus:!D&&T,today:M,outsideCurrentMonth:D,isFirstVisibleCell:A,isLastVisibleCell:Y,selected:b,tabIndex:_?0:-1,"aria-selected":b,"aria-current":M?"date":void 0}))}function cB(t){const e=gr({props:t,name:"MuiDayCalendar"}),n=Dn(),{onFocusedDayChange:i,className:r,classes:s,currentMonth:a,selectedDays:o,focusedDay:l,loading:c,onSelectedDaysChange:u,onMonthSwitchingAnimationEnd:f,readOnly:d,reduceAnimations:p,renderLoading:m=()=>$.jsx("span",{children:"..."}),slideDirection:S,TransitionProps:v,disablePast:y,disableFuture:_,minDate:T,maxDate:b,shouldDisableDate:M,shouldDisableMonth:C,shouldDisableYear:D,dayOfWeekFormatter:F=ue=>n.format(ue,"weekdayShort").charAt(0).toUpperCase(),hasFocus:L,onFocusedViewChange:U,gridLabelId:N,displayWeekNumber:A,fixedWeekNumber:Y,timezone:k}=e,j=Zp(k),P=Q5(s),z=Yp(),G=GE({shouldDisableDate:M,shouldDisableMonth:C,shouldDisableYear:D,minDate:T,maxDate:b,disablePast:y,disableFuture:_,timezone:k}),Q=ZE(),se=et(ue=>{d||u(ue)}),ae=ue=>{G(ue)||(i(ue),U==null||U(!0))},ce=et((ue,fe)=>{switch(ue.key){case"ArrowUp":ae(n.addDays(fe,-7)),ue.preventDefault();break;case"ArrowDown":ae(n.addDays(fe,7)),ue.preventDefault();break;case"ArrowLeft":{const Fe=n.addDays(fe,z?1:-1),he=n.addMonths(fe,z?1:-1),Me=ru({adapter:n,date:Fe,minDate:z?Fe:n.startOfMonth(he),maxDate:z?n.endOfMonth(he):Fe,isDateDisabled:G,timezone:k});ae(Me||Fe),ue.preventDefault();break}case"ArrowRight":{const Fe=n.addDays(fe,z?-1:1),he=n.addMonths(fe,z?-1:1),Me=ru({adapter:n,date:Fe,minDate:z?n.startOfMonth(he):Fe,maxDate:z?Fe:n.endOfMonth(he),isDateDisabled:G,timezone:k});ae(Me||Fe),ue.preventDefault();break}case"Home":ae(n.startOfWeek(fe)),ue.preventDefault();break;case"End":ae(n.endOfWeek(fe)),ue.preventDefault();break;case"PageUp":ae(n.addMonths(fe,1)),ue.preventDefault();break;case"PageDown":ae(n.addMonths(fe,-1)),ue.preventDefault();break}}),we=et((ue,fe)=>ae(fe)),Pe=et((ue,fe)=>{l!=null&&n.isSameDay(l,fe)&&(U==null||U(!1))}),He=n.getMonth(a),Ht=n.getYear(a),yt=I.useMemo(()=>o.filter(ue=>!!ue).map(ue=>n.startOfDay(ue)),[n,o]),Mt=`${Ht}-${He}`,je=I.useMemo(()=>I.createRef(),[Mt]),De=I.useMemo(()=>{const ue=n.getWeekArray(a);let fe=n.addMonths(a,1);for(;Y&&ue.length<Y;){const Fe=n.getWeekArray(fe),he=n.isSameDay(ue[ue.length-1][0],Fe[0][0]);Fe.slice(he?1:0).forEach(Me=>{ue.length<Y&&ue.push(Me)}),fe=n.addMonths(fe,1)}return ue},[a,Y,n]);return $.jsxs(J5,{role:"grid","aria-labelledby":N,className:P.root,children:[$.jsxs(eB,{role:"row",className:P.header,children:[A&&$.jsx(nB,{variant:"caption",role:"columnheader","aria-label":Q.calendarWeekNumberHeaderLabel,className:P.weekNumberLabel,children:Q.calendarWeekNumberHeaderText}),p5(n,j).map((ue,fe)=>$.jsx(tB,{variant:"caption",role:"columnheader","aria-label":n.format(ue,"weekday"),className:P.weekDayLabel,children:F(ue)},fe.toString()))]}),c?$.jsx(rB,{className:P.loadingContainer,children:m()}):$.jsx(sB,me({transKey:Mt,onExited:f,reduceAnimations:p,slideDirection:S,className:Oe(r,P.slideTransition)},v,{nodeRef:je,children:$.jsx(aB,{ref:je,role:"rowgroup",className:P.monthContainer,children:De.map((ue,fe)=>$.jsxs(oB,{role:"row",className:P.weekContainer,"aria-rowindex":fe+1,children:[A&&$.jsx(iB,{className:P.weekNumber,role:"rowheader","aria-label":Q.calendarWeekNumberAriaLabelText(n.getWeekNumber(ue[0])),children:Q.calendarWeekNumberText(n.getWeekNumber(ue[0]))}),ue.map((Fe,he)=>$.jsx(lB,{parentProps:e,day:Fe,selectedDays:yt,isViewFocused:L,focusedDay:l,onKeyDown:ce,onFocus:we,onBlur:Pe,onDaySelect:se,isDateDisabled:G,currentMonthNumber:He,"aria-colindex":he+1},Fe.toString()))]},`week-${ue[0]}`))})}))]})}function rC(t){return Ct("MuiMonthCalendar",t)}const Tf=St("MuiMonthCalendar",["root","button","disabled","selected"]),uB=["autoFocus","classes","disabled","selected","value","onClick","onKeyDown","onFocus","onBlur","slots","slotProps"],fB=(t,e)=>{const n={button:["button",e.isMonthDisabled&&"disabled",e.isMonthSelected&&"selected"]};return wt(n,rC,t)},dB=ye("button",{name:"MuiMonthCalendar",slot:"Button",overridesResolver:(t,e)=>[e.button,{[`&.${Tf.disabled}`]:e.disabled},{[`&.${Tf.selected}`]:e.selected}]})(({theme:t})=>me({color:"unset",backgroundColor:"transparent",border:0,outline:0},t.typography.subtitle1,{height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:Bs(t.palette.action.active,t.palette.action.hoverOpacity)},"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:Bs(t.palette.action.active,t.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${Tf.disabled}`]:{color:(t.vars||t).palette.text.secondary},[`&.${Tf.selected}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.main,"&:focus, &:hover":{backgroundColor:(t.vars||t).palette.primary.dark}}})),hB=I.memo(function(e){const{autoFocus:n,classes:i,disabled:r,selected:s,value:a,onClick:o,onKeyDown:l,onFocus:c,onBlur:u,slots:f,slotProps:d}=e,p=tn(e,uB),m=I.useRef(null),{ownerState:S}=qr(),v=me({},S,{isMonthDisabled:r,isMonthSelected:s}),y=fB(i,v);Ru(()=>{var b;n&&((b=m.current)==null||b.focus())},[n]);const _=(f==null?void 0:f.monthButton)??dB,T=or({elementType:_,externalSlotProps:d==null?void 0:d.monthButton,externalForwardedProps:p,additionalProps:{disabled:r,ref:m,type:"button",role:"radio","aria-checked":s,onClick:b=>o(b,a),onKeyDown:b=>l(b,a),onFocus:b=>c(b,a),onBlur:b=>u(b,a)},ownerState:v,className:y.button});return $.jsx(_,me({},T))}),L0=({name:t,timezone:e,value:n,defaultValue:i,referenceDate:r,onChange:s,valueManager:a})=>{const o=Dn(),[l,c]=nu({name:t,state:"value",controlled:n,default:i??a.emptyValue}),u=I.useMemo(()=>a.getTimezone(o,l),[o,a,l]),f=et(S=>u==null?S:a.setTimezone(o,u,S)),d=I.useMemo(()=>e||u||(r?o.getTimezone(Array.isArray(r)?r[0]:r):"default"),[e,u,r,o]),p=I.useMemo(()=>a.setTimezone(o,d,l),[a,o,d,l]),m=et((S,...v)=>{const y=f(S);c(y),s==null||s(y,...v)});return{value:p,handleValueChange:m,timezone:d}};function U0(t){const e=Dn(),n=j5();return I.useMemo(()=>({disablePast:t.disablePast??!1,disableFuture:t.disableFuture??!1,minDate:d3(e,t.minDate,n.minDate),maxDate:d3(e,t.maxDate,n.maxDate)}),[t.minDate,t.maxDate,t.disableFuture,t.disablePast,e,n])}const pB=["autoFocus","className","currentMonth","classes","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","shouldDisableMonth","readOnly","disableHighlightToday","onMonthFocus","hasFocus","onFocusedViewChange","monthsPerRow","timezone","gridLabelId","slots","slotProps"],gB=t=>wt({root:["root"]},rC,t);function mB(t,e){const n=gr({props:t,name:e}),i=U0(n);return me({},n,i,{monthsPerRow:n.monthsPerRow??3})}const y3=(t,e,n,i,r)=>!!(t===e&&i&&r.isSameYear(n,i)),yB=ye("div",{name:"MuiMonthCalendar",slot:"Root",shouldForwardProp:t=>Ac(t)&&t!=="monthsPerRow"})({display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",rowGap:16,padding:"8px 0",width:B0,boxSizing:"border-box",variants:[{props:{monthsPerRow:3},style:{columnGap:24}},{props:{monthsPerRow:4},style:{columnGap:0}}]}),_B=I.forwardRef(function(e,n){const i=mB(e,"MuiMonthCalendar"),{autoFocus:r,className:s,currentMonth:a,classes:o,value:l,defaultValue:c,referenceDate:u,disabled:f,disableFuture:d,disablePast:p,maxDate:m,minDate:S,onChange:v,shouldDisableMonth:y,readOnly:_,onMonthFocus:T,hasFocus:b,onFocusedViewChange:M,monthsPerRow:C,timezone:D,gridLabelId:F,slots:L,slotProps:U}=i,N=tn(i,pB),{value:A,handleValueChange:Y,timezone:k}=L0({name:"MonthCalendar",timezone:D,value:l,defaultValue:c,referenceDate:u,onChange:v,valueManager:Oa}),j=Zp(k),P=Yp(),z=Dn(),{ownerState:G}=qr(),Q=I.useMemo(()=>Oa.getInitialReferenceValue({value:A,adapter:z,props:i,timezone:k,referenceDate:u,granularity:Rr.month}),[]),se=gB(o),ae=I.useMemo(()=>z.getMonth(j),[z,j]),ce=I.useMemo(()=>A!=null?z.getMonth(A):null,[A,z]),[we,Pe]=I.useState(()=>ce||z.getMonth(Q)),[He,Ht]=nu({name:"MonthCalendar",state:"hasFocus",controlled:b,default:r??!1}),yt=et(he=>{Ht(he),M&&M(he)}),Mt=I.useCallback(he=>{const Me=z.startOfMonth(p&&z.isAfter(j,S)?j:S),Se=z.startOfMonth(d&&z.isBefore(j,m)?j:m),gt=z.startOfMonth(he);return z.isBefore(gt,Me)||z.isAfter(gt,Se)?!0:y?y(gt):!1},[d,p,m,S,j,y,z]),je=et((he,Me)=>{if(_)return;const Se=A&&a&&!z.isSameYear(A,a)?z.setYear(A,z.getYear(a)):A,gt=z.setMonth(Se??Q,Me);Y(gt)}),De=et(he=>{Mt(z.setMonth(A??a??Q,he))||(Pe(he),yt(!0),T&&T(he))});I.useEffect(()=>{Pe(he=>ce!==null&&he!==ce?ce:he)},[ce]);const ue=et((he,Me)=>{switch(he.key){case"ArrowUp":De((12+Me-3)%12),he.preventDefault();break;case"ArrowDown":De((12+Me+3)%12),he.preventDefault();break;case"ArrowLeft":De((12+Me+(P?1:-1))%12),he.preventDefault();break;case"ArrowRight":De((12+Me+(P?-1:1))%12),he.preventDefault();break}}),fe=et((he,Me)=>{De(Me)}),Fe=et((he,Me)=>{we===Me&&yt(!1)});return $.jsx(yB,me({ref:n,className:Oe(se.root,s),ownerState:G,role:"radiogroup","aria-labelledby":F,monthsPerRow:C},N,{children:h5(z,a??A??Q).map(he=>{const Me=z.getMonth(he),Se=z.format(he,"monthShort"),gt=z.format(he,"month"),Dt=y3(Me,ce,he,A,z),Wt=f||Mt(he);return $.jsx(hB,{selected:Dt,value:Me,onClick:je,onKeyDown:ue,autoFocus:He&&Me===we,disabled:Wt,tabIndex:Me===we&&!Wt?0:-1,onFocus:fe,onBlur:Fe,"aria-current":y3(Me,ae,he,j,z)?"date":void 0,"aria-label":gt,slots:L,slotProps:U,classes:o,children:Se},Se)})}))});function sC(t){return Ct("MuiYearCalendar",t)}const xf=St("MuiYearCalendar",["root","button","disabled","selected"]),bB=["autoFocus","classes","disabled","selected","value","onClick","onKeyDown","onFocus","onBlur","slots","slotProps"],vB=(t,e)=>{const n={button:["button",e.isYearDisabled&&"disabled",e.isYearSelected&&"selected"]};return wt(n,sC,t)},TB=ye("button",{name:"MuiYearCalendar",slot:"Button",overridesResolver:(t,e)=>[e.button,{[`&.${xf.disabled}`]:e.disabled},{[`&.${xf.selected}`]:e.selected}]})(({theme:t})=>me({color:"unset",backgroundColor:"transparent",border:0,outline:0},t.typography.subtitle1,{height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.focusOpacity})`:Bs(t.palette.action.active,t.palette.action.focusOpacity)},"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:Bs(t.palette.action.active,t.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${xf.disabled}`]:{color:(t.vars||t).palette.text.secondary},[`&.${xf.selected}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.main,"&:focus, &:hover":{backgroundColor:(t.vars||t).palette.primary.dark}}})),xB=I.memo(function(e){const{autoFocus:n,classes:i,disabled:r,selected:s,value:a,onClick:o,onKeyDown:l,onFocus:c,onBlur:u,slots:f,slotProps:d}=e,p=tn(e,bB),m=I.useRef(null),{ownerState:S}=qr(),v=me({},S,{isYearDisabled:r,isYearSelected:s}),y=vB(i,v);Ru(()=>{var b;n&&((b=m.current)==null||b.focus())},[n]);const _=(f==null?void 0:f.yearButton)??TB,T=or({elementType:_,externalSlotProps:d==null?void 0:d.yearButton,externalForwardedProps:p,additionalProps:{disabled:r,ref:m,type:"button",role:"radio","aria-checked":s,onClick:b=>o(b,a),onKeyDown:b=>l(b,a),onFocus:b=>c(b,a),onBlur:b=>u(b,a)},ownerState:v,className:y.button});return $.jsx(_,me({},T))}),SB=["autoFocus","className","classes","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","readOnly","shouldDisableYear","disableHighlightToday","onYearFocus","hasFocus","onFocusedViewChange","yearsOrder","yearsPerRow","timezone","gridLabelId","slots","slotProps"],wB=t=>wt({root:["root"]},sC,t);function AB(t,e){const n=gr({props:t,name:e}),i=U0(n);return me({},n,i,{yearsPerRow:n.yearsPerRow??3,yearsOrder:n.yearsOrder??"asc"})}const EB=ye("div",{name:"MuiYearCalendar",slot:"Root",shouldForwardProp:t=>Ac(t)&&t!=="yearsPerRow"})({display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",rowGap:12,padding:"6px 0",overflowY:"auto",height:"100%",width:B0,maxHeight:N5,boxSizing:"border-box",position:"relative",variants:[{props:{yearsPerRow:3},style:{columnGap:24}},{props:{yearsPerRow:4},style:{columnGap:0,padding:"0 2px"}}]}),CB=ye("div",{name:"MuiYearCalendar",slot:"ButtonFiller"})({height:36,width:72}),RB=I.forwardRef(function(e,n){const i=AB(e,"MuiYearCalendar"),{autoFocus:r,className:s,classes:a,value:o,defaultValue:l,referenceDate:c,disabled:u,disableFuture:f,disablePast:d,maxDate:p,minDate:m,onChange:S,readOnly:v,shouldDisableYear:y,onYearFocus:_,hasFocus:T,onFocusedViewChange:b,yearsOrder:M,yearsPerRow:C,timezone:D,gridLabelId:F,slots:L,slotProps:U}=i,N=tn(i,SB),{value:A,handleValueChange:Y,timezone:k}=L0({name:"YearCalendar",timezone:D,value:o,defaultValue:l,referenceDate:c,onChange:S,valueManager:Oa}),j=Zp(k),P=Yp(),z=Dn(),{ownerState:G}=qr(),Q=I.useMemo(()=>Oa.getInitialReferenceValue({value:A,adapter:z,props:i,timezone:k,referenceDate:c,granularity:Rr.year}),[]),se=wB(a),ae=I.useMemo(()=>z.getYear(j),[z,j]),ce=I.useMemo(()=>A!=null?z.getYear(A):null,[A,z]),[we,Pe]=I.useState(()=>ce||z.getYear(Q)),[He,Ht]=nu({name:"YearCalendar",state:"hasFocus",controlled:T,default:r??!1}),yt=et(Te=>{Ht(Te),b&&b(Te)}),Mt=I.useCallback(Te=>{if(d&&z.isBeforeYear(Te,j)||f&&z.isAfterYear(Te,j)||m&&z.isBeforeYear(Te,m)||p&&z.isAfterYear(Te,p))return!0;if(!y)return!1;const ze=z.startOfYear(Te);return y(ze)},[f,d,p,m,j,y,z]),je=et((Te,ze)=>{if(v)return;const _e=z.setYear(A??Q,ze);Y(_e)}),De=et(Te=>{Mt(z.setYear(A??Q,Te))||(Pe(Te),yt(!0),_==null||_(Te))});I.useEffect(()=>{Pe(Te=>ce!==null&&Te!==ce?ce:Te)},[ce]);const ue=M!=="desc"?C*1:C*-1,fe=P&&M==="asc"||!P&&M==="desc"?-1:1,Fe=et((Te,ze)=>{switch(Te.key){case"ArrowUp":De(ze-ue),Te.preventDefault();break;case"ArrowDown":De(ze+ue),Te.preventDefault();break;case"ArrowLeft":De(ze-fe),Te.preventDefault();break;case"ArrowRight":De(ze+fe),Te.preventDefault();break}}),he=et((Te,ze)=>{De(ze)}),Me=et((Te,ze)=>{we===ze&&yt(!1)}),Se=I.useRef(null),gt=Ls(n,Se);I.useEffect(()=>{if(r||Se.current===null)return;const Te=Se.current.querySelector('[tabindex="0"]');if(!Te)return;const ze=Te.offsetHeight,_e=Te.offsetTop,qi=Se.current.clientHeight,Rl=Se.current.scrollTop,Kr=_e+ze;ze>qi||_e<Rl||(Se.current.scrollTop=Kr-qi/2-ze/2)},[r]);const Dt=z.getYearRange([m,p]);M==="desc"&&Dt.reverse();let Wt=C-Dt.length%C;return Wt===C&&(Wt=0),$.jsxs(EB,me({ref:gt,className:Oe(se.root,s),ownerState:G,role:"radiogroup","aria-labelledby":F,yearsPerRow:C},N,{children:[Dt.map(Te=>{const ze=z.getYear(Te),_e=ze===ce,qi=u||Mt(Te);return $.jsx(xB,{selected:_e,value:ze,onClick:je,onKeyDown:Fe,autoFocus:He&&ze===we,disabled:qi,tabIndex:ze===we&&!qi?0:-1,onFocus:he,onBlur:Me,"aria-current":ae===ze?"date":void 0,slots:L,slotProps:U,classes:a,children:z.format(Te,"year")},z.format(Te,"year"))}),Array.from({length:Wt},(Te,ze)=>$.jsx(CB,{},ze))]}))}),MB={hasNextStep:!1,hasSeveralSteps:!1,goToNextStep:()=>{},areViewsInSameStep:()=>!0};function OB({onChange:t,onViewChange:e,openTo:n,view:i,views:r,autoFocus:s,focusedView:a,onFocusedViewChange:o,getStepNavigation:l}){const c=I.useRef(n),u=I.useRef(r),f=I.useRef(r.includes(n)?n:r[0]),[d,p]=nu({name:"useViews",state:"view",controlled:i,default:f.current}),m=I.useRef(s?d:null),[S,v]=nu({name:"useViews",state:"focusedView",controlled:a,default:m.current}),y=l?l({setView:p,view:d,defaultView:f.current,views:r}):MB;I.useEffect(()=>{(c.current&&c.current!==n||u.current&&u.current.some(L=>!r.includes(L)))&&(p(r.includes(n)?n:r[0]),u.current=r,c.current=n)},[n,p,d,r]);const _=r.indexOf(d),T=r[_-1]??null,b=r[_+1]??null,M=et((L,U)=>{v(U?L:N=>L===N?null:N),o==null||o(L,U)}),C=et(L=>{M(L,!0),L!==d&&(p(L),e&&e(L))}),D=et(()=>{b&&C(b)}),F=et((L,U,N)=>{const A=U==="finish",Y=N?r.indexOf(N)<r.length-1:!!b;t(L,A&&Y?"partial":U,N);let j=null;if(N!=null&&N!==d?j=N:A&&(j=d),j==null)return;const P=r[r.indexOf(j)+1];P==null||!y.areViewsInSameStep(j,P)||C(P)});return me({},y,{view:d,setView:C,focusedView:S,setFocusedView:M,nextView:b,previousView:T,defaultView:r.includes(n)?n:r[0],goToNextView:D,setValueAndGoToNextView:F})}const IB=t=>Ct("MuiPickersCalendarHeader",t),PB=St("MuiPickersCalendarHeader",["root","labelContainer","label","switchViewButton","switchViewIcon"]);function DB(t){return Ct("MuiIconButton",t)}const _3=St("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),kB=t=>{const{classes:e,disabled:n,color:i,edge:r,size:s,loading:a}=t,o={root:["root",a&&"loading",n&&"disabled",i!=="default"&&`color${Ke(i)}`,r&&`edge${Ke(r)}`,`size${Ke(s)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return wt(o,DB,e)},NB=ye(P0,{name:"MuiIconButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.loading&&e.loading,n.color!=="default"&&e[`color${Ke(n.color)}`],n.edge&&e[`edge${Ke(n.edge)}`],e[`size${Ke(n.size)}`]]}})(Ii(({theme:t})=>({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),variants:[{props:e=>!e.disableRipple,style:{"--IconButton-hoverBg":t.alpha((t.vars||t).palette.action.active,(t.vars||t).palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),Ii(({theme:t})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(t.palette).filter(iu()).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}})),...Object.entries(t.palette).filter(iu()).map(([e])=>({props:{color:e},style:{"--IconButton-hoverBg":t.alpha((t.vars||t).palette[e].main,(t.vars||t).palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:t.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:t.typography.pxToRem(28)}}],[`&.${_3.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled},[`&.${_3.loading}`]:{color:"transparent"}}))),BB=ye("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:t})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(t.vars||t).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),aC=I.forwardRef(function(e,n){const i=Pn({props:e,name:"MuiIconButton"}),{edge:r=!1,children:s,className:a,color:o="default",disabled:l=!1,disableFocusRipple:c=!1,size:u="medium",id:f,loading:d=null,loadingIndicator:p,...m}=i,S=A0(f),v=p??$.jsx(D0,{"aria-labelledby":S,color:"inherit",size:16}),y={...i,edge:r,color:o,disabled:l,disableFocusRipple:c,loading:d,loadingIndicator:v,size:u},_=kB(y);return $.jsxs(NB,{id:d?S:f,className:Oe(_.root,a),centerRipple:!0,focusRipple:!c,disabled:l||d,ref:n,...m,ownerState:y,children:[typeof d=="boolean"&&$.jsx("span",{className:_.loadingWrapper,style:{display:"contents"},children:$.jsx(BB,{className:_.loadingIndicator,ownerState:y,children:d&&v})}),s]})}),LB=Pt($.jsx("path",{d:"M7 10l5 5 5-5z"})),UB=Pt($.jsx("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"})),FB=Pt($.jsx("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}));Pt($.jsx("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}));Pt($.jsxs(I.Fragment,{children:[$.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),$.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}));Pt($.jsx("path",{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"}));Pt($.jsxs(I.Fragment,{children:[$.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),$.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}));Pt($.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}));function zB(t){return Ct("MuiPickersArrowSwitcher",t)}St("MuiPickersArrowSwitcher",["root","spacer","button","previousIconButton","nextIconButton","leftArrowIcon","rightArrowIcon"]);const VB=["children","className","slots","slotProps","isNextDisabled","isNextHidden","onGoToNext","nextLabel","isPreviousDisabled","isPreviousHidden","onGoToPrevious","previousLabel","labelId","classes"],$B=["ownerState"],jB=["ownerState"],HB=ye("div",{name:"MuiPickersArrowSwitcher",slot:"Root"})({display:"flex"}),WB=ye("div",{name:"MuiPickersArrowSwitcher",slot:"Spacer"})(({theme:t})=>({width:t.spacing(3)})),b3=ye(aC,{name:"MuiPickersArrowSwitcher",slot:"Button"})({variants:[{props:{isButtonHidden:!0},style:{visibility:"hidden"}}]}),YB=t=>wt({root:["root"],spacer:["spacer"],button:["button"],previousIconButton:["previousIconButton"],nextIconButton:["nextIconButton"],leftArrowIcon:["leftArrowIcon"],rightArrowIcon:["rightArrowIcon"]},zB,t),XB=I.forwardRef(function(e,n){const i=Yp(),r=gr({props:e,name:"MuiPickersArrowSwitcher"}),{children:s,className:a,slots:o,slotProps:l,isNextDisabled:c,isNextHidden:u,onGoToNext:f,nextLabel:d,isPreviousDisabled:p,isPreviousHidden:m,onGoToPrevious:S,previousLabel:v,labelId:y,classes:_}=r,T=tn(r,VB),{ownerState:b}=qr(),M=YB(_),C={isDisabled:c,isHidden:u,goTo:f,label:d},D={isDisabled:p,isHidden:m,goTo:S,label:v},F=(o==null?void 0:o.previousIconButton)??b3,L=or({elementType:F,externalSlotProps:l==null?void 0:l.previousIconButton,additionalProps:{size:"medium",title:D.label,"aria-label":D.label,disabled:D.isDisabled,edge:"end",onClick:D.goTo},ownerState:me({},b,{isButtonHidden:D.isHidden??!1}),className:Oe(M.button,M.previousIconButton)}),U=(o==null?void 0:o.nextIconButton)??b3,N=or({elementType:U,externalSlotProps:l==null?void 0:l.nextIconButton,additionalProps:{size:"medium",title:C.label,"aria-label":C.label,disabled:C.isDisabled,edge:"start",onClick:C.goTo},ownerState:me({},b,{isButtonHidden:C.isHidden??!1}),className:Oe(M.button,M.nextIconButton)}),A=(o==null?void 0:o.leftArrowIcon)??UB,Y=or({elementType:A,externalSlotProps:l==null?void 0:l.leftArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:b,className:M.leftArrowIcon}),k=tn(Y,$B),j=(o==null?void 0:o.rightArrowIcon)??FB,P=or({elementType:j,externalSlotProps:l==null?void 0:l.rightArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:b,className:M.rightArrowIcon}),z=tn(P,jB);return $.jsxs(HB,me({ref:n,className:Oe(M.root,a),ownerState:b},T,{children:[$.jsx(F,me({},L,{children:i?$.jsx(j,me({},z)):$.jsx(A,me({},k))})),s?$.jsx(xi,{variant:"subtitle1",component:"span",id:y,children:s}):$.jsx(WB,{className:M.spacer,ownerState:b}),$.jsx(U,me({},N,{children:i?$.jsx(A,me({},k)):$.jsx(j,me({},z))}))]}))});function qB(t,{disableFuture:e,maxDate:n,timezone:i}){const r=Dn();return I.useMemo(()=>{const s=r.date(void 0,i),a=r.startOfMonth(e&&r.isBefore(s,n)?s:n);return!r.isAfter(a,t)},[e,n,t,r,i])}function KB(t,{disablePast:e,minDate:n,timezone:i}){const r=Dn();return I.useMemo(()=>{const s=r.date(void 0,i),a=r.startOfMonth(e&&r.isAfter(s,n)?s:n);return!r.isBefore(a,t)},[e,n,t,r,i])}const ZB=["slots","slotProps","currentMonth","disabled","disableFuture","disablePast","maxDate","minDate","onMonthChange","onViewChange","view","reduceAnimations","views","labelId","className","classes","timezone","format"],GB=["ownerState"],QB=t=>wt({root:["root"],labelContainer:["labelContainer"],label:["label"],switchViewButton:["switchViewButton"],switchViewIcon:["switchViewIcon"]},IB,t),JB=ye("div",{name:"MuiPickersCalendarHeader",slot:"Root"})({display:"flex",alignItems:"center",marginTop:12,marginBottom:4,paddingLeft:24,paddingRight:12,maxHeight:40,minHeight:40}),e8=ye("div",{name:"MuiPickersCalendarHeader",slot:"LabelContainer"})(({theme:t})=>me({display:"flex",overflow:"hidden",alignItems:"center",cursor:"pointer",marginRight:"auto"},t.typography.body1,{fontWeight:t.typography.fontWeightMedium})),t8=ye("div",{name:"MuiPickersCalendarHeader",slot:"Label"})({marginRight:6}),n8=ye(aC,{name:"MuiPickersCalendarHeader",slot:"SwitchViewButton"})({marginRight:"auto",variants:[{props:{view:"year"},style:{[`.${PB.switchViewIcon}`]:{transform:"rotate(180deg)"}}}]}),i8=ye(LB,{name:"MuiPickersCalendarHeader",slot:"SwitchViewIcon"})(({theme:t})=>({willChange:"transform",transition:t.transitions.create("transform"),transform:"rotate(0deg)"})),r8=I.forwardRef(function(e,n){const i=ZE(),r=Dn(),s=gr({props:e,name:"MuiPickersCalendarHeader"}),{slots:a,slotProps:o,currentMonth:l,disabled:c,disableFuture:u,disablePast:f,maxDate:d,minDate:p,onMonthChange:m,onViewChange:S,view:v,reduceAnimations:y,views:_,labelId:T,className:b,classes:M,timezone:C,format:D=`${r.formats.month} ${r.formats.year}`}=s,F=tn(s,ZB),{ownerState:L}=qr(),U=QB(M),N=(a==null?void 0:a.switchViewButton)??n8,A=or({elementType:N,externalSlotProps:o==null?void 0:o.switchViewButton,additionalProps:{size:"small","aria-label":i.calendarViewSwitchingButtonAriaLabel(v)},ownerState:me({},L,{view:v}),className:U.switchViewButton}),Y=(a==null?void 0:a.switchViewIcon)??i8,k=or({elementType:Y,externalSlotProps:o==null?void 0:o.switchViewIcon,ownerState:L,className:U.switchViewIcon}),j=tn(k,GB),P=()=>m(r.addMonths(l,1)),z=()=>m(r.addMonths(l,-1)),G=qB(l,{disableFuture:u,maxDate:d,timezone:C}),Q=KB(l,{disablePast:f,minDate:p,timezone:C}),se=()=>{if(!(_.length===1||!S||c))if(_.length===2)S(_.find(ce=>ce!==v)||_[0]);else{const ce=_.indexOf(v)!==0?0:1;S(_[ce])}};if(_.length===1&&_[0]==="year")return null;const ae=r.formatByString(l,D);return $.jsxs(JB,me({},F,{ownerState:L,className:Oe(U.root,b),ref:n,children:[$.jsxs(e8,{role:"presentation",onClick:se,ownerState:L,"aria-live":"polite",className:U.labelContainer,children:[$.jsx(QE,{reduceAnimations:y,transKey:ae,children:$.jsx(t8,{id:T,ownerState:L,className:U.label,children:ae})}),_.length>1&&!c&&$.jsx(N,me({},A,{children:$.jsx(Y,me({},j))}))]}),$.jsx(N0,{in:v==="day",appear:!y,enter:!y,children:$.jsx(XB,{slots:a,slotProps:o,onGoToPrevious:z,isPreviousDisabled:Q,previousLabel:i.previousMonth,onGoToNext:P,isNextDisabled:G,nextLabel:i.nextMonth})})]}))}),s8=ye("div")({overflow:"hidden",width:B0,maxHeight:JE,display:"flex",flexDirection:"column",margin:"0 auto"}),a8=wE({themeId:Mu}),o8="@media (prefers-reduced-motion: reduce)",$o=typeof navigator<"u"&&navigator.userAgent.match(/android\s(\d+)|OS\s(\d+)/i),v3=$o&&$o[1]?parseInt($o[1],10):null,T3=$o&&$o[2]?parseInt($o[2],10):null,l8=v3&&v3<10||T3&&T3<13||!1;function c8(t){const e=a8(o8,{defaultMatches:!1});return t??(e||l8)}const u8=t=>Ct("MuiDateCalendar",t);St("MuiDateCalendar",["root","viewTransitionContainer"]);const f8=["autoFocus","onViewChange","value","defaultValue","referenceDate","disableFuture","disablePast","onChange","onYearChange","onMonthChange","reduceAnimations","shouldDisableDate","shouldDisableMonth","shouldDisableYear","view","views","openTo","className","classes","disabled","readOnly","minDate","maxDate","disableHighlightToday","focusedView","onFocusedViewChange","showDaysOutsideCurrentMonth","fixedWeekNumber","dayOfWeekFormatter","slots","slotProps","loading","renderLoading","displayWeekNumber","yearsOrder","yearsPerRow","monthsPerRow","timezone"],d8=t=>wt({root:["root"],viewTransitionContainer:["viewTransitionContainer"]},u8,t);function h8(t,e){const n=gr({props:t,name:e}),i=c8(n.reduceAnimations),r=U0(n);return me({},n,r,{loading:n.loading??!1,openTo:n.openTo??"day",views:n.views??["year","day"],reduceAnimations:i,renderLoading:n.renderLoading??(()=>$.jsx("span",{children:"..."}))})}const p8=ye(s8,{name:"MuiDateCalendar",slot:"Root"})({display:"flex",flexDirection:"column",height:JE}),g8=ye(QE,{name:"MuiDateCalendar",slot:"ViewTransitionContainer"})({}),m8=I.forwardRef(function(e,n){const i=Dn(),{ownerState:r}=qr(),s=A0(),a=h8(e,"MuiDateCalendar"),{autoFocus:o,onViewChange:l,value:c,defaultValue:u,referenceDate:f,disableFuture:d,disablePast:p,onChange:m,onMonthChange:S,reduceAnimations:v,shouldDisableDate:y,shouldDisableMonth:_,shouldDisableYear:T,view:b,views:M,openTo:C,className:D,classes:F,disabled:L,readOnly:U,minDate:N,maxDate:A,disableHighlightToday:Y,focusedView:k,onFocusedViewChange:j,showDaysOutsideCurrentMonth:P,fixedWeekNumber:z,dayOfWeekFormatter:G,slots:Q,slotProps:se,loading:ae,renderLoading:ce,displayWeekNumber:we,yearsOrder:Pe,yearsPerRow:He,monthsPerRow:Ht,timezone:yt}=a,Mt=tn(a,f8),{value:je,handleValueChange:De,timezone:ue}=L0({name:"DateCalendar",timezone:yt,value:c,defaultValue:u,referenceDate:f,onChange:m,valueManager:Oa}),{view:fe,setView:Fe,focusedView:he,setFocusedView:Me,goToNextView:Se,setValueAndGoToNextView:gt}=OB({view:b,views:M,openTo:C,onChange:De,onViewChange:l,autoFocus:o,focusedView:k,onFocusedViewChange:j}),{referenceDate:Dt,calendarState:Wt,setVisibleDate:Te,isDateDisabled:ze,onMonthSwitchingAnimationEnd:_e}=x5({value:je,referenceDate:f,reduceAnimations:v,onMonthChange:S,minDate:N,maxDate:A,shouldDisableDate:y,disablePast:p,disableFuture:d,timezone:ue,getCurrentMonthFromVisibleDate:(We,hn)=>i.isSameMonth(We,hn)?hn:i.startOfMonth(We)}),qi=L&&je||N,Rl=L&&je||A,Kr=`${s}-grid-label`,yr=he!==null,ci=(Q==null?void 0:Q.calendarHeader)??r8,zu=or({elementType:ci,externalSlotProps:se==null?void 0:se.calendarHeader,additionalProps:{views:M,view:fe,currentMonth:Wt.currentMonth,onViewChange:Fe,onMonthChange:We=>Te({target:We,reason:"header-navigation"}),minDate:qi,maxDate:Rl,disabled:L,disablePast:p,disableFuture:d,reduceAnimations:v,timezone:ue,labelId:Kr},ownerState:r}),Vu=et(We=>{const hn=i.startOfMonth(We),$s=i.endOfMonth(We),Tn=ze(We)?ru({adapter:i,date:We,minDate:i.isBefore(N,hn)?hn:N,maxDate:i.isAfter(A,$s)?$s:A,disablePast:p,disableFuture:d,isDateDisabled:ze,timezone:ue}):We;Tn?(gt(Tn,"finish"),Te({target:Tn,reason:"cell-interaction"})):(Se(),Te({target:hn,reason:"cell-interaction"}))}),$u=et(We=>{const hn=i.startOfYear(We),$s=i.endOfYear(We),Tn=ze(We)?ru({adapter:i,date:We,minDate:i.isBefore(N,hn)?hn:N,maxDate:i.isAfter(A,$s)?$s:A,disablePast:p,disableFuture:d,isDateDisabled:ze,timezone:ue}):We;Tn?(gt(Tn,"finish"),Te({target:Tn,reason:"cell-interaction"})):(Se(),Te({target:hn,reason:"cell-interaction"}))}),cg=et(We=>De(We&&Gd(i,We,je??Dt),"finish",fe));I.useEffect(()=>{i.isValid(je)&&Te({target:je,reason:"controlled-value-change"})},[je]);const ju=d8(F),Ml={disablePast:p,disableFuture:d,maxDate:A,minDate:N},Ae={disableHighlightToday:Y,readOnly:U,disabled:L,timezone:ue,gridLabelId:Kr,slots:Q,slotProps:se},Wa=I.useRef(fe);I.useEffect(()=>{Wa.current!==fe&&(he===Wa.current&&Me(fe,!0),Wa.current=fe)},[he,Me,fe]);const Ol=I.useMemo(()=>[je],[je]);return $.jsxs(p8,me({ref:n,className:Oe(ju.root,D),ownerState:r},Mt,{children:[$.jsx(ci,me({},zu,{slots:Q,slotProps:se})),$.jsx(g8,{reduceAnimations:v,className:ju.viewTransitionContainer,transKey:fe,ownerState:r,children:$.jsxs("div",{children:[fe==="year"&&$.jsx(RB,me({},Ml,Ae,{value:je,onChange:$u,shouldDisableYear:T,hasFocus:yr,onFocusedViewChange:We=>Me("year",We),yearsOrder:Pe,yearsPerRow:He,referenceDate:Dt})),fe==="month"&&$.jsx(_B,me({},Ml,Ae,{currentMonth:Wt.currentMonth,hasFocus:yr,className:D,value:je,onChange:Vu,shouldDisableMonth:_,onFocusedViewChange:We=>Me("month",We),monthsPerRow:Ht,referenceDate:Dt})),fe==="day"&&$.jsx(cB,me({},Wt,Ml,Ae,{onMonthSwitchingAnimationEnd:_e,hasFocus:yr,onFocusedDayChange:We=>Te({target:We,reason:"cell-interaction"}),reduceAnimations:v,selectedDays:Ol,onSelectedDaysChange:cg,shouldDisableDate:y,shouldDisableMonth:_,shouldDisableYear:T,onFocusedViewChange:We=>Me("day",We),showDaysOutsideCurrentMonth:P,fixedWeekNumber:z,dayOfWeekFormatter:G,displayWeekNumber:we,loading:ae,renderLoading:ce}))]})})]}))});function Qd(t,e){if(!t)throw new Error(e||"loader assertion failed.")}const F0=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser),x3=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);x3&&parseFloat(x3[1]);const Sf=globalThis,no=globalThis.process||{},y8=globalThis.navigator||{};function oC(t){var i,r;if(typeof window<"u"&&((i=window.process)==null?void 0:i.type)==="renderer"||typeof process<"u"&&((r=process.versions)!=null&&r.electron))return!0;const n=typeof navigator<"u"&&navigator.userAgent;return!!(n&&n.indexOf("Electron")>=0)}function Va(){return!(typeof process=="object"&&String(process)==="[object process]"&&!(process!=null&&process.browser))||oC()}function _8(t){return Va()?oC()?"Electron":(y8.userAgent||"").indexOf("Edge")>-1?"Edge":globalThis.chrome?"Chrome":globalThis.safari?"Safari":globalThis.mozInnerScreenX?"Firefox":"Unknown":"Node"}const lC="4.1.0";function b8(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}class v8{constructor(e,n,i="sessionStorage"){this.storage=b8(i),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}}function T8(t){let e;return t<10?e=`${t.toFixed(2)}ms`:t<100?e=`${t.toFixed(1)}ms`:t<1e3?e=`${t.toFixed(0)}ms`:e=`${(t/1e3).toFixed(2)}s`,e}function x8(t,e=8){const n=Math.max(e-t.length,0);return`${" ".repeat(n)}${t}`}var Jd;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(Jd||(Jd={}));const S8=10;function S3(t){return typeof t!="string"?t:(t=t.toUpperCase(),Jd[t]||Jd.WHITE)}function w8(t,e,n){return!Va&&typeof t=="string"&&(e&&(t=`\x1B[${S3(e)}m${t}\x1B[39m`),n&&(t=`\x1B[${S3(n)+S8}m${t}\x1B[49m`)),t}function A8(t,e=["constructor"]){const n=Object.getPrototypeOf(t),i=Object.getOwnPropertyNames(n),r=t;for(const s of i){const a=r[s];typeof a=="function"&&(e.find(o=>s===o)||(r[s]=a.bind(t)))}}function z0(t,e){if(!t)throw new Error("Assertion failed")}function io(){var e,n,i;let t;if(Va()&&Sf.performance)t=(n=(e=Sf==null?void 0:Sf.performance)==null?void 0:e.now)==null?void 0:n.call(e);else if("hrtime"in no){const r=(i=no==null?void 0:no.hrtime)==null?void 0:i.call(no);t=r[0]*1e3+r[1]/1e6}else t=Date.now();return t}const ro={debug:Va()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},E8={enabled:!0,level:0};function so(){}const w3={},A3={once:!0};class Iu{constructor({id:e}={id:""}){this.VERSION=lC,this._startTs=io(),this._deltaTs=io(),this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=e,this.userData={},this._storage=new v8(`__probe-${this.id}__`,E8),this.timeStamp(`${this.id} started`),A8(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((io()-this._startTs).toPrecision(10))}getDelta(){return Number((io()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(e=!0){return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){if(!e)throw new Error(n||"Assertion failed")}warn(e){return this._getLogFunction(0,e,ro.warn,arguments,A3)}error(e){return this._getLogFunction(0,e,ro.error,arguments)}deprecated(e,n){return this.warn(`\`${e}\` is deprecated and will be removed in a later version. Use \`${n}\` instead`)}removed(e,n){return this.error(`\`${e}\` has been removed. Use \`${n}\` instead`)}probe(e,n){return this._getLogFunction(e,n,ro.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,ro.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){return this._getLogFunction(e,n,ro.debug||ro.info,arguments,A3)}table(e,n,i){return n?this._getLogFunction(e,n,console.table||so,i&&[i],{tag:R8(n)}):so}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||so)}group(e,n,i={collapsed:!1}){const r=E3({logLevel:e,message:n,opts:i}),{collapsed:s}=i;return r.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(r)}groupCollapsed(e,n,i={}){return this.group(e,n,Object.assign({},i,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||so)}withGroup(e,n,i){this.group(e,n)();try{i()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=cC(e)}_getLogFunction(e,n,i,r,s){if(this._shouldLog(e)){s=E3({logLevel:e,message:n,args:r,opts:s}),i=i||s.method,z0(i),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=io();const a=s.tag||s.message;if(s.once&&a)if(!w3[a])w3[a]=io();else return so;return n=C8(this.id,s.message,s),i.bind(console,n,...s.args)}return so}}Iu.VERSION=lC;function cC(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return z0(Number.isFinite(e)&&e>=0),e}function E3(t){const{logLevel:e,message:n}=t;t.logLevel=cC(e);const i=t.args?Array.from(t.args):[];for(;i.length&&i.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&i.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break}typeof t.message=="function"&&(t.message=t.message());const r=typeof t.message;return z0(r==="string"||r==="object"),Object.assign(t,{args:i},t.opts)}function C8(t,e,n){if(typeof e=="string"){const i=n.time?x8(T8(n.total)):"";e=n.time?`${t}: ${i}  ${e}`:`${t}: ${e}`,e=w8(e,n.color,n.background)}return e}function R8(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}const pm="4.3.3",M8=pm[0]>="0"&&pm[0]<="9"?`v${pm}`:"";function O8(){const t=new Iu({id:"loaders.gl"});return globalThis.loaders=globalThis.loaders||{},globalThis.loaders.log=t,globalThis.loaders.version=M8,globalThis.probe=globalThis.probe||{},globalThis.probe.loaders=t,t}const I8=O8();function P8(t,e){return uC(t||{},e)}function uC(t,e,n=0){if(n>3)return e;const i={...t};for(const[r,s]of Object.entries(e))s&&typeof s=="object"&&!Array.isArray(s)?i[r]=uC(i[r]||{},e[r],n+1):i[r]=e[r];return i}const D8="latest";function k8(){var t;return(t=globalThis._loadersgl_)!=null&&t.version||(globalThis._loadersgl_=globalThis._loadersgl_||{},globalThis._loadersgl_.version="4.3.3"),globalThis._loadersgl_.version}const N8=k8();function Us(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const ya=typeof process!="object"||String(process)!=="[object process]"||process.browser,B8=typeof window<"u"&&typeof window.orientation<"u",C3=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);C3&&parseFloat(C3[1]);class L8{constructor(e,n){x(this,"name");x(this,"workerThread");x(this,"isRunning",!0);x(this,"result");x(this,"_resolve",()=>{});x(this,"_reject",()=>{});this.name=e,this.workerThread=n,this.result=new Promise((i,r)=>{this._resolve=i,this._reject=r})}postMessage(e,n){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:n})}done(e){Us(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){Us(this.isRunning),this.isRunning=!1,this._reject(e)}}class gm{terminate(){}}const mm=new Map;function U8(t){Us(t.source&&!t.url||!t.source&&t.url);let e=mm.get(t.source||t.url);return e||(t.url&&(e=F8(t.url),mm.set(t.url,e)),t.source&&(e=fC(t.source),mm.set(t.source,e))),Us(e),e}function F8(t){if(!t.startsWith("http"))return t;const e=z8(t);return fC(e)}function fC(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function z8(t){return`try {
  importScripts('${t}');
} catch (error) {
  console.error(error);
  throw error;
}`}function dC(t,e=!0,n){const i=n||new Set;if(t){if(R3(t))i.add(t);else if(R3(t.buffer))i.add(t.buffer);else if(!ArrayBuffer.isView(t)){if(e&&typeof t=="object")for(const r in t)dC(t[r],e,i)}}return n===void 0?Array.from(i):[]}function R3(t){return t?t instanceof ArrayBuffer||typeof MessagePort<"u"&&t instanceof MessagePort||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas:!1}const ym=()=>{};class u_{constructor(e){x(this,"name");x(this,"source");x(this,"url");x(this,"terminated",!1);x(this,"worker");x(this,"onMessage");x(this,"onError");x(this,"_loadableURL","");const{name:n,source:i,url:r}=e;Us(i||r),this.name=n,this.source=i,this.url=r,this.onMessage=ym,this.onError=s=>console.log(s),this.worker=ya?this._createBrowserWorker():this._createNodeWorker()}static isSupported(){return typeof Worker<"u"&&ya||typeof gm<"u"&&!ya}destroy(){this.onMessage=ym,this.onError=ym,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,n){n=n||dC(e),this.worker.postMessage(e,n)}_getErrorFromErrorEvent(e){let n="Failed to load ";return n+=`worker ${this.name} from ${this.url}. `,e.message&&(n+=`${e.message} in `),e.lineno&&(n+=`:${e.lineno}:${e.colno}`),new Error(n)}_createBrowserWorker(){this._loadableURL=U8({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},e.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},e.onmessageerror=n=>console.error(n),e}_createNodeWorker(){let e;if(this.url){const i=this.url.includes(":/")||this.url.startsWith("/")?this.url:`./${this.url}`;e=new gm(i,{eval:!1})}else if(this.source)e=new gm(this.source,{eval:!0});else throw new Error("no worker");return e.on("message",n=>{this.onMessage(n)}),e.on("error",n=>{this.onError(n)}),e.on("exit",n=>{}),e}}class V8{constructor(e){x(this,"name","unnamed");x(this,"source");x(this,"url");x(this,"maxConcurrency",1);x(this,"maxMobileConcurrency",1);x(this,"onDebug",()=>{});x(this,"reuseWorkers",!0);x(this,"props",{});x(this,"jobQueue",[]);x(this,"idleQueue",[]);x(this,"count",0);x(this,"isDestroyed",!1);this.source=e.source,this.url=e.url,this.setProps(e)}static isSupported(){return u_.isSupported()}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},e.name!==void 0&&(this.name=e.name),e.maxConcurrency!==void 0&&(this.maxConcurrency=e.maxConcurrency),e.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=e.maxMobileConcurrency),e.reuseWorkers!==void 0&&(this.reuseWorkers=e.reuseWorkers),e.onDebug!==void 0&&(this.onDebug=e.onDebug)}async startJob(e,n=(r,s,a)=>r.done(a),i=(r,s)=>r.error(s)){const r=new Promise(s=>(this.jobQueue.push({name:e,onMessage:n,onError:i,onStart:s}),this));return this._startQueuedJob(),await r}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const n=this.jobQueue.shift();if(n){this.onDebug({message:"Starting job",name:n.name,workerThread:e,backlog:this.jobQueue.length});const i=new L8(n.name,e);e.onMessage=r=>n.onMessage(i,r.type,r.payload),e.onError=r=>n.onError(i,r),n.onStart(i);try{await i.result}catch(r){console.error(`Worker exception: ${r}`)}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){!ya||this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e=`${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;return new u_({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return B8?this.maxMobileConcurrency:this.maxConcurrency}}const $8={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}},as=class as{constructor(e){x(this,"props");x(this,"workerPools",new Map);this.props={...$8},this.setProps(e),this.workerPools=new Map}static isSupported(){return u_.isSupported()}static getWorkerFarm(e={}){return as._workerFarm=as._workerFarm||new as({}),as._workerFarm.setProps(e),as._workerFarm}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:n,source:i,url:r}=e;let s=this.workerPools.get(n);return s||(s=new V8({name:n,source:i,url:r}),s.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,s)),s}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}};x(as,"_workerFarm");let eh=as;function j8(t,e={}){const n=e[t.id]||{},i=ya?`${t.id}-worker.js`:`${t.id}-worker-node.js`;let r=n.workerUrl;if(!r&&t.id==="compression"&&(r=e.workerUrl),e._workerType==="test"&&(ya?r=`modules/${t.module}/dist/${i}`:r=`modules/${t.module}/src/workers/${t.id}-worker-node.ts`),!r){let s=t.version;s==="latest"&&(s=D8);const a=s?`@${s}`:"";r=`https://unpkg.com/@loaders.gl/${t.module}${a}/dist/${i}`}return Us(r),r}function H8(t,e=N8){Us(t,"no worker provided");const n=t.version;return!(!e||!n)}const W8={},Y8=Object.freeze(Object.defineProperty({__proto__:null,default:W8},Symbol.toStringTag,{value:"Module"}));function X8(t,e){return!eh.isSupported()||!ya&&!(e!=null&&e._nodeWorkers)?!1:t.worker&&(e==null?void 0:e.worker)}async function q8(t,e,n,i,r){const s=t.id,a=j8(t,n),l=eh.getWorkerFarm(n).getWorkerPool({name:s,url:a});n=JSON.parse(JSON.stringify(n)),i=JSON.parse(JSON.stringify(i||{}));const c=await l.startJob("process-on-worker",K8.bind(null,r));return c.postMessage("process",{input:e,options:n,context:i}),await(await c.result).result}async function K8(t,e,n,i){switch(n){case"done":e.done(i);break;case"error":e.error(new Error(i.error));break;case"process":const{id:r,input:s,options:a}=i;try{const o=await t(s,a);e.postMessage("done",{id:r,result:o})}catch(o){const l=o instanceof Error?o.message:"unknown error";e.postMessage("error",{id:r,error:l})}break;default:console.warn(`parse-with-worker unknown message ${n}`)}}function Z8(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;const i=new Uint8Array(t),r=new Uint8Array(e);for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}function G8(...t){return Q8(t)}function Q8(t){const e=t.map(s=>s instanceof ArrayBuffer?new Uint8Array(s):s),n=e.reduce((s,a)=>s+a.byteLength,0),i=new Uint8Array(n);let r=0;for(const s of e)i.set(s,r),r+=s.byteLength;return i.buffer}async function J8(t){const e=[];for await(const n of t)e.push(n);return G8(...e)}function M3(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();t=e[0]*1e3+e[1]/1e6}else t=Date.now();return t}class O3{constructor(e,n){this.sampleSize=1,this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this.name=e,this.type=n,this.reset()}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=M3(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(M3()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class Gp{constructor(e){this.stats={},this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e,n="count"){return this._getOrCreate({name:e,type:n})}get size(){return Object.keys(this.stats).length}reset(){for(const e of Object.values(this.stats))e.reset();return this}forEach(e){for(const n of Object.values(this.stats))e(n)}getTable(){const e={};return this.forEach(n=>{e[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),e}_initializeStats(e=[]){e.forEach(n=>this._getOrCreate(n))}_getOrCreate(e){const{name:n,type:i}=e;let r=this.stats[n];return r||(e instanceof O3?r=e:r=new O3(n,i),this.stats[n]=r),r}}let eL="";const I3={};function tL(t){for(const e in I3)if(t.startsWith(e)){const n=I3[e];t=t.replace(e,n)}return!t.startsWith("http://")&&!t.startsWith("https://")&&(t=`${eL}${t}`),t}function nL(t){return t&&typeof t=="object"&&t.isBuffer}function hC(t){if(nL(t))return t;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t.byteOffset===0&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if(typeof t=="string"){const e=t;return new TextEncoder().encode(e).buffer}if(t&&typeof t=="object"&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function pC(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(e+1):""}function iL(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(0,e):""}const rL=t=>typeof t=="boolean",Ec=t=>typeof t=="function",Pu=t=>t!==null&&typeof t=="object",P3=t=>Pu(t)&&t.constructor==={}.constructor,sL=t=>!!t&&typeof t[Symbol.iterator]=="function",aL=t=>t&&typeof t[Symbol.asyncIterator]=="function",$a=t=>typeof Response<"u"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,ja=t=>typeof Blob<"u"&&t instanceof Blob,oL=t=>t&&typeof t=="object"&&t.isBuffer,lL=t=>typeof ReadableStream<"u"&&t instanceof ReadableStream||Pu(t)&&Ec(t.tee)&&Ec(t.cancel)&&Ec(t.getReader),cL=t=>Pu(t)&&Ec(t.read)&&Ec(t.pipe)&&rL(t.readable),gC=t=>lL(t)||cL(t);class uL extends Error{constructor(n,i){super(n);x(this,"reason");x(this,"url");x(this,"response");this.reason=i.reason,this.url=i.url,this.response=i.response}}const fL=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,dL=/^([-\w.]+\/[-\w.+]+)/;function D3(t,e){return t.toLowerCase()===e.toLowerCase()}function hL(t){const e=dL.exec(t);return e?e[1]:t}function k3(t){const e=fL.exec(t);return e?e[1]:""}const mC=/\?.*/;function pL(t){const e=t.match(mC);return e&&e[0]}function V0(t){return t.replace(mC,"")}function gL(t){if(t.length<50)return t;const e=t.slice(t.length-15);return`${t.substr(0,32)}...${e}`}function Qp(t){return $a(t)?t.url:ja(t)?t.name||"":typeof t=="string"?t:""}function $0(t){if($a(t)){const e=t,n=e.headers.get("content-type")||"",i=V0(e.url);return hL(n)||k3(i)}return ja(t)?t.type||"":typeof t=="string"?k3(t):""}function mL(t){return $a(t)?t.headers["content-length"]||-1:ja(t)?t.size:typeof t=="string"?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}async function yC(t){if($a(t))return t;const e={},n=mL(t);n>=0&&(e["content-length"]=String(n));const i=Qp(t),r=$0(t);r&&(e["content-type"]=r);const s=await bL(t);s&&(e["x-first-bytes"]=s),typeof t=="string"&&(t=new TextEncoder().encode(t));const a=new Response(t,{headers:e});return Object.defineProperty(a,"url",{value:i}),a}async function yL(t){if(!t.ok)throw await _L(t)}async function _L(t){const e=gL(t.url);let n=`Failed to fetch resource (${t.status}) ${t.statusText}: ${e}`;n=n.length>100?`${n.slice(0,100)}...`:n;const i={reason:t.statusText,url:t.url,response:t};try{const r=t.headers.get("Content-Type");i.reason=!t.bodyUsed&&(r!=null&&r.includes("application/json"))?await t.json():await t.text()}catch{}return new uL(n,i)}async function bL(t){if(typeof t=="string")return`data:,${t.slice(0,5)}`;if(t instanceof Blob){const n=t.slice(0,5);return await new Promise(i=>{const r=new FileReader;r.onload=s=>{var a;return i((a=s==null?void 0:s.target)==null?void 0:a.result)},r.readAsDataURL(n)})}if(t instanceof ArrayBuffer){const n=t.slice(0,5);return`data:base64,${vL(n)}`}return null}function vL(t){let e="";const n=new Uint8Array(t);for(let i=0;i<n.byteLength;i++)e+=String.fromCharCode(n[i]);return btoa(e)}function TL(t){return!xL(t)&&!SL(t)}function xL(t){return t.startsWith("http:")||t.startsWith("https:")}function SL(t){return t.startsWith("data:")}async function N3(t,e){var n,i;if(typeof t=="string"){const r=tL(t);return TL(r)&&(n=globalThis.loaders)!=null&&n.fetchNode?(i=globalThis.loaders)==null?void 0:i.fetchNode(r,e):await fetch(r,e)}return await yC(t)}const B3=new Iu({id:"loaders.gl"});class wL{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class AL{constructor(){x(this,"console");this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}}const _C={fetch:null,mimeType:void 0,nothrow:!1,log:new AL,useLocalLibraries:!1,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:F0,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},EL={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function bC(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state||(t._state={}),t._state}function vC(){const t=bC();return t.globalOptions=t.globalOptions||{..._C},t.globalOptions}function CL(t,e,n,i){return n=n||[],n=Array.isArray(n)?n:[n],RL(t,n),OL(e,t,i)}function RL(t,e){L3(t,null,_C,EL,e);for(const n of e){const i=t&&t[n.id]||{},r=n.options&&n.options[n.id]||{},s=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};L3(i,n.id,r,s,e)}}function L3(t,e,n,i,r){const s=e||"Top level",a=e?`${e}.`:"";for(const o in t){const l=!e&&Pu(t[o]),c=o==="baseUri"&&!e,u=o==="workerUrl"&&e;if(!(o in n)&&!c&&!u){if(o in i)B3.warn(`${s} loader option '${a}${o}' no longer supported, use '${i[o]}'`)();else if(!l){const f=ML(o,r);B3.warn(`${s} loader option '${a}${o}' not recognized. ${f}`)()}}}}function ML(t,e){const n=t.toLowerCase();let i="";for(const r of e)for(const s in r.options){if(t===s)return`Did you mean '${r.id}.${s}'?`;const a=s.toLowerCase();(n.startsWith(a)||a.startsWith(n))&&(i=i||`Did you mean '${r.id}.${s}'?`)}return i}function OL(t,e,n){const r={...t.options||{}};return IL(r,n),r.log===null&&(r.log=new wL),U3(r,vC()),U3(r,e),r}function U3(t,e){for(const n in e)if(n in e){const i=e[n];P3(i)&&P3(t[n])?t[n]={...t[n],...e[n]}:t[n]=e[n]}}function IL(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}function j0(t){return t?(Array.isArray(t)&&(t=t[0]),Array.isArray(t==null?void 0:t.extensions)):!1}function H0(t){Qd(t,"null loader"),Qd(j0(t),"invalid loader");let e;return Array.isArray(t)&&(e=t[1],t=t[0],t={...t,options:{...t.options,...e}}),(t!=null&&t.parseTextSync||t!=null&&t.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}const TC=()=>{const t=bC();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function PL(t){const e=TC();t=Array.isArray(t)?t:[t];for(const n of t){const i=H0(n);e.find(r=>i===r)||e.unshift(i)}}function DL(){return TC()}const kL=/\.([^.]+)$/;async function NL(t,e=[],n,i){if(!xC(t))return null;let r=F3(t,e,{...n,nothrow:!0},i);if(r)return r;if(ja(t)&&(t=await t.slice(0,10).arrayBuffer(),r=F3(t,e,n,i)),!r&&!(n!=null&&n.nothrow))throw new Error(SC(t));return r}function F3(t,e=[],n,i){if(!xC(t))return null;if(e&&!Array.isArray(e))return H0(e);let r=[];e&&(r=r.concat(e)),n!=null&&n.ignoreRegisteredLoaders||r.push(...DL()),LL(r);const s=BL(t,r,n,i);if(!s&&!(n!=null&&n.nothrow))throw new Error(SC(t));return s}function BL(t,e,n,i){const r=Qp(t),s=$0(t),a=V0(r)||(i==null?void 0:i.url);let o=null,l="";return n!=null&&n.mimeType&&(o=_m(e,n==null?void 0:n.mimeType),l=`match forced by supplied MIME type ${n==null?void 0:n.mimeType}`),o=o||UL(e,a),l=l||(o?`matched url ${a}`:""),o=o||_m(e,s),l=l||(o?`matched MIME type ${s}`:""),o=o||zL(e,t),l=l||(o?`matched initial data ${wC(t)}`:""),n!=null&&n.fallbackMimeType&&(o=o||_m(e,n==null?void 0:n.fallbackMimeType),l=l||(o?`matched fallback MIME type ${s}`:"")),l&&I8.log(1,`selectLoader selected ${o==null?void 0:o.name}: ${l}.`),o}function xC(t){return!(t instanceof Response&&t.status===204)}function SC(t){const e=Qp(t),n=$0(t);let i="No valid loader found (";i+=e?`${pC(e)}, `:"no url provided, ",i+=`MIME type: ${n?`"${n}"`:"not provided"}, `;const r=t?wC(t):"";return i+=r?` first bytes: "${r}"`:"first bytes: not available",i+=")",i}function LL(t){for(const e of t)H0(e)}function UL(t,e){const n=e&&kL.exec(e),i=n&&n[1];return i?FL(t,i):null}function FL(t,e){e=e.toLowerCase();for(const n of t)for(const i of n.extensions)if(i.toLowerCase()===e)return n;return null}function _m(t,e){var n;for(const i of t)if((n=i.mimeTypes)!=null&&n.some(r=>D3(e,r))||D3(e,`application/x.${i.id}`))return i;return null}function zL(t,e){if(!e)return null;for(const n of t)if(typeof e=="string"){if(VL(e,n))return n}else if(ArrayBuffer.isView(e)){if(z3(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer&&z3(e,0,n))return n;return null}function VL(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(i=>t.startsWith(i))}function z3(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(r=>$L(t,e,n,r))}function $L(t,e,n,i){if(i instanceof ArrayBuffer)return Z8(i,t,i.byteLength);switch(typeof i){case"function":return i(t);case"string":const r=f_(t,e,i.length);return i===r;default:return!1}}function wC(t,e=5){return typeof t=="string"?t.slice(0,e):ArrayBuffer.isView(t)?f_(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?f_(t,0,e):""}function f_(t,e,n){if(t.byteLength<e+n)return"";const i=new DataView(t);let r="";for(let s=0;s<n;s++)r+=String.fromCharCode(i.getUint8(e+s));return r}const jL=256*1024;function*HL(t,e){const n=(e==null?void 0:e.chunkSize)||jL;let i=0;const r=new TextEncoder;for(;i<t.length;){const s=Math.min(t.length-i,n),a=t.slice(i,i+s);i+=s,yield r.encode(a)}}const WL=256*1024;function*YL(t,e={}){const{chunkSize:n=WL}=e;let i=0;for(;i<t.byteLength;){const r=Math.min(t.byteLength-i,n),s=new ArrayBuffer(r),a=new Uint8Array(t,i,r);new Uint8Array(s).set(a),i+=r,yield s}}const XL=1024*1024;async function*qL(t,e){const n=(e==null?void 0:e.chunkSize)||XL;let i=0;for(;i<t.size;){const r=i+n,s=await t.slice(i,r).arrayBuffer();i=r,yield s}}function V3(t,e){return F0?KL(t,e):ZL(t)}async function*KL(t,e){const n=t.getReader();let i;try{for(;;){const r=i||n.read();e!=null&&e._streamReadAhead&&(i=n.read());const{done:s,value:a}=await r;if(s)return;yield hC(a)}}catch{n.releaseLock()}}async function*ZL(t,e){for await(const n of t)yield hC(n)}function GL(t,e){if(typeof t=="string")return HL(t,e);if(t instanceof ArrayBuffer)return YL(t,e);if(ja(t))return qL(t,e);if(gC(t))return V3(t,e);if($a(t))return V3(t.body,e);throw new Error("makeIterator")}const AC="Cannot convert supplied data type";function QL(t,e,n){if(e.text&&typeof t=="string")return t;if(oL(t)&&(t=t.buffer),t instanceof ArrayBuffer){const i=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(i):i}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let i=t.buffer;const r=t.byteLength||t.length;return(t.byteOffset!==0||r!==i.byteLength)&&(i=i.slice(t.byteOffset,t.byteOffset+r)),i}throw new Error(AC)}async function JL(t,e,n){const i=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if(typeof t=="string"||i)return QL(t,e);if(ja(t)&&(t=await yC(t)),$a(t)){const r=t;return await yL(r),e.binary?await r.arrayBuffer():await r.text()}if(gC(t)&&(t=GL(t,n)),sL(t)||aL(t))return J8(t);throw new Error(AC)}function EC(t,e){const n=vC(),i=t||n;return typeof i.fetch=="function"?i.fetch:Pu(i.fetch)?r=>N3(r,i.fetch):e!=null&&e.fetch?e==null?void 0:e.fetch:N3}function eU(t,e,n){if(n)return n;const i={fetch:EC(e,t),...t};if(i.url){const r=V0(i.url);i.baseUrl=r,i.queryString=pL(i.url),i.filename=pC(r),i.baseUrl=iL(r)}return Array.isArray(i.loaders)||(i.loaders=null),i}function tU(t,e){if(t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const i=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...i]:i}return n&&n.length?n:void 0}async function th(t,e,n,i){e&&!Array.isArray(e)&&!j0(e)&&(i=void 0,n=e,e=void 0),t=await t,n=n||{};const r=Qp(t),a=tU(e,i),o=await NL(t,a,n);return o?(n=CL(n,o,a,r),i=eU({url:r,_parse:th,loaders:a},n,i||null),await nU(o,t,n,i)):null}async function nU(t,e,n,i){if(H8(t),n=P8(t.options,n),$a(e)){const s=e,{ok:a,redirected:o,status:l,statusText:c,type:u,url:f}=s,d=Object.fromEntries(s.headers.entries());i.response={headers:d,ok:a,redirected:o,status:l,statusText:c,type:u,url:f}}e=await JL(e,t,n);const r=t;if(r.parseTextSync&&typeof e=="string")return r.parseTextSync(e,n,i);if(X8(t,n))return await q8(t,e,n,i,th);if(r.parseText&&typeof e=="string")return await r.parseText(e,n,i);if(r.parse)return await r.parse(e,n,i);throw Us(!r.parseSync),new Error(`${t.id} loader - no parser found and worker is disabled`)}async function nh(t,e,n,i){let r,s;!Array.isArray(e)&&!j0(e)?(r=[],s=e):(r=e,s=n);const a=EC(s);let o=t;return typeof t=="string"&&(o=await a(t)),ja(t)&&(o=await a(t)),Array.isArray(r)?await th(o,r,s):await th(o,r,s)}const iU="4.3.3";var $x;const rU=($x=globalThis.loaders)==null?void 0:$x.parseImageNode,d_=typeof Image<"u",h_=typeof ImageBitmap<"u",sU=!!rU,p_=F0?!0:sU;function aU(t){switch(t){case"auto":return h_||d_||p_;case"imagebitmap":return h_;case"image":return d_;case"data":return p_;default:throw new Error(`@loaders.gl/images: image ${t} not supported in this environment`)}}function oU(){if(h_)return"imagebitmap";if(d_)return"image";if(p_)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function lU(t){const e=uU(t);if(!e)throw new Error("Not an image");return e}function cU(t){switch(lU(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function uU(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&typeof t=="object"&&t.data&&t.width&&t.height?"data":null}const fU=/^data:image\/svg\+xml/,dU=/\.svg((\?|#).*)?$/;function W0(t){return t&&(fU.test(t)||dU.test(t))}function hU(t,e){if(W0(e)){let i=new TextDecoder().decode(t);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(i=unescape(encodeURIComponent(i)))}catch(s){throw new Error(s.message)}return`data:image/svg+xml;base64,${btoa(i)}`}return CC(t,e)}function CC(t,e){if(W0(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function RC(t,e,n){const i=hU(t,n),r=self.URL||self.webkitURL,s=typeof i!="string"&&r.createObjectURL(i);try{return await pU(s||i,e)}finally{s&&r.revokeObjectURL(s)}}async function pU(t,e){const n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(await n.decode(),n):await new Promise((i,r)=>{try{n.onload=()=>i(n),n.onerror=s=>{const a=s instanceof Error?s.message:"error";r(new Error(a))}}catch(s){r(s)}})}const gU={};let $3=!0;async function mU(t,e,n){let i;W0(n)?i=await RC(t,e,n):i=CC(t,n);const r=e&&e.imagebitmap;return await yU(i,r)}async function yU(t,e=null){if((_U(e)||!$3)&&(e=null),e)try{return await createImageBitmap(t,e)}catch(n){console.warn(n),$3=!1}return await createImageBitmap(t)}function _U(t){for(const e in t||gU)return!1;return!0}function bU(t){return!SU(t,"ftyp",4)||!(t[8]&96)?null:vU(t)}function vU(t){switch(TU(t,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}function TU(t,e,n){return String.fromCharCode(...t.slice(e,n))}function xU(t){return[...t].map(e=>e.charCodeAt(0))}function SU(t,e,n=0){const i=xU(e);for(let r=0;r<i.length;++r)if(i[r]!==t[r+n])return!1;return!0}const ir=!1,Cc=!0;function MC(t){const e=Du(t);return AU(e)||RU(e)||EU(e)||CU(e)||wU(e)}function wU(t){const e=new Uint8Array(t instanceof DataView?t.buffer:t),n=bU(e);return n?{mimeType:n.mimeType,width:0,height:0}:null}function AU(t){const e=Du(t);return e.byteLength>=24&&e.getUint32(0,ir)===2303741511?{mimeType:"image/png",width:e.getUint32(16,ir),height:e.getUint32(20,ir)}:null}function EU(t){const e=Du(t);return e.byteLength>=10&&e.getUint32(0,ir)===1195984440?{mimeType:"image/gif",width:e.getUint16(6,Cc),height:e.getUint16(8,Cc)}:null}function CU(t){const e=Du(t);return e.byteLength>=14&&e.getUint16(0,ir)===16973&&e.getUint32(2,Cc)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,Cc),height:e.getUint32(22,Cc)}:null}function RU(t){const e=Du(t);if(!(e.byteLength>=3&&e.getUint16(0,ir)===65496&&e.getUint8(2)===255))return null;const{tableMarkers:i,sofMarkers:r}=MU();let s=2;for(;s+9<e.byteLength;){const a=e.getUint16(s,ir);if(r.has(a))return{mimeType:"image/jpeg",height:e.getUint16(s+5,ir),width:e.getUint16(s+7,ir)};if(!i.has(a))return null;s+=2,s+=e.getUint16(s,ir)}return null}function MU(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function Du(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}async function OU(t,e){var r;const{mimeType:n}=MC(t)||{},i=(r=globalThis.loaders)==null?void 0:r.parseImageNode;return Qd(i),await i(t,n)}async function IU(t,e,n){e=e||{};const r=(e.image||{}).type||"auto",{url:s}=n||{},a=PU(r);let o;switch(a){case"imagebitmap":o=await mU(t,e,s);break;case"image":o=await RC(t,e,s);break;case"data":o=await OU(t);break;default:Qd(!1)}return r==="data"&&(o=cU(o)),o}function PU(t){switch(t){case"auto":case"data":return oU();default:return aU(t),t}}const DU=["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],kU=["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],NU={image:{type:"auto",decode:!0}},BU={dataType:null,batchType:null,id:"image",module:"images",name:"Images",version:iU,mimeTypes:kU,extensions:DU,parse:IU,tests:[t=>!!MC(new DataView(t))],options:NU},ut=new Iu({id:"deck"});let g_={};function LU(t){g_=t}function En(t,e,n,i){ut.level>0&&g_[t]&&g_[t].call(null,e,n,i)}function UU(t){const e=t[0],n=t[t.length-1];return e==="{"&&n==="}"||e==="["&&n==="]"}const FU={dataType:null,batchType:null,id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:UU,parseTextSync:JSON.parse};function zU(){const t="9.2.5",e=globalThis.deck&&globalThis.deck.VERSION;if(e&&e!==t)throw new Error(`deck.gl - multiple versions detected: ${e} vs ${t}`);return e||(ut.log(1,`deck.gl ${t}`)(),globalThis.deck={...globalThis.deck,VERSION:t,version:t,log:ut,_registerLoggers:LU},PL([FU,[BU,{imagebitmap:{premultiplyAlpha:"none"}}]])),t}const VU=zU();function Y0(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const bm={number:{type:"number",validate(t,e){return Number.isFinite(t)&&typeof e=="object"&&(e.max===void 0||t<=e.max)&&(e.min===void 0||t>=e.min)}},array:{type:"array",validate(t,e){return Array.isArray(t)||ArrayBuffer.isView(t)}}};function $U(t){const e={};for(const[n,i]of Object.entries(t))e[n]=jU(i);return e}function jU(t){let e=j3(t);if(e!=="object")return{value:t,...bm[e],type:e};if(typeof t=="object")return t?t.type!==void 0?{...t,...bm[t.type],type:t.type}:t.value===void 0?{type:"object",value:t}:(e=j3(t.value),{...t,...bm[e],type:e}):{type:"object",value:null};throw new Error("props")}function j3(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}const HU=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,WU=`#ifdef MODULE_MATERIAL
  fragColor = material_filterColor(fragColor);
#endif

#ifdef MODULE_LIGHTING
  fragColor = lighting_filterColor(fragColor);
#endif

#ifdef MODULE_FOG
  fragColor = fog_filterColor(fragColor);
#endif

#ifdef MODULE_PICKING
  fragColor = picking_filterHighlightColor(fragColor);
  fragColor = picking_filterPickingColor(fragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`,YU={vertex:HU,fragment:WU},H3=/void\s+main\s*\([^)]*\)\s*\{\n?/,W3=/}\n?[^{}]*$/,vm=[],ld="__LUMA_INJECT_DECLARATIONS__";function XU(t){const e={vertex:{},fragment:{}};for(const n in t){let i=t[n];const r=qU(n);typeof i=="string"&&(i={order:0,injection:i}),e[r][n]=i}return e}function qU(t){const e=t.slice(0,2);switch(e){case"vs":return"vertex";case"fs":return"fragment";default:throw new Error(e)}}function ih(t,e,n,i=!1){const r=e==="vertex";for(const s in n){const a=n[s];a.sort((l,c)=>l.order-c.order),vm.length=a.length;for(let l=0,c=a.length;l<c;++l)vm[l]=a[l].injection;const o=`${vm.join(`
`)}
`;switch(s){case"vs:#decl":r&&(t=t.replace(ld,o));break;case"vs:#main-start":r&&(t=t.replace(H3,l=>l+o));break;case"vs:#main-end":r&&(t=t.replace(W3,l=>o+l));break;case"fs:#decl":r||(t=t.replace(ld,o));break;case"fs:#main-start":r||(t=t.replace(H3,l=>l+o));break;case"fs:#main-end":r||(t=t.replace(W3,l=>o+l));break;default:t=t.replace(s,l=>l+o)}}return t=t.replace(ld,""),i&&(t=t.replace(/\}\s*$/,s=>s+YU[e])),t}function rh(t){t.map(e=>KU(e))}function KU(t){if(t.instance)return;rh(t.dependencies||[]);const{propTypes:e={},deprecations:n=[],inject:i={}}=t,r={normalizedInjections:XU(i),parsedDeprecations:ZU(n)};e&&(r.propValidators=$U(e)),t.instance=r;let s={};e&&(s=Object.entries(e).reduce((a,[o,l])=>{const c=l==null?void 0:l.value;return c&&(a[o]=c),a},{})),t.defaultUniforms={...t.defaultUniforms,...s}}function OC(t,e,n){var i;(i=t.deprecations)==null||i.forEach(r=>{var s;(s=r.regex)!=null&&s.test(e)&&(r.deprecated?n.deprecated(r.old,r.new)():n.removed(r.old,r.new)())})}function ZU(t){return t.forEach(e=>{switch(e.type){case"function":e.regex=new RegExp(`\\b${e.old}\\(`);break;default:e.regex=new RegExp(`${e.type} ${e.old};`)}}),t}function X0(t){rh(t);const e={},n={};IC({modules:t,level:0,moduleMap:e,moduleDepth:n});const i=Object.keys(n).sort((r,s)=>n[s]-n[r]).map(r=>e[r]);return rh(i),i}function IC(t){const{modules:e,level:n,moduleMap:i,moduleDepth:r}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const s of e)i[s.name]=s,(r[s.name]===void 0||r[s.name]<n)&&(r[s.name]=n);for(const s of e)s.dependencies&&IC({modules:s.dependencies,level:n+1,moduleMap:i,moduleDepth:r})}function GU(t){switch(t==null?void 0:t.gpu.toLowerCase()){case"apple":return`#define APPLE_GPU
// Apple optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Headless Chrome's software shader 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// If the GPU doesn't have full 32 bits precision, will causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function QU(t,e){var i;if(Number(((i=t.match(/^#version[ \t]+(\d+)/m))==null?void 0:i[1])||100)!==300)throw new Error("luma.gl v9 only supports GLSL 3.00 shader sources");switch(e){case"vertex":return t=Y3(t,JU),t;case"fragment":return t=Y3(t,eF),t;default:throw new Error(e)}}const PC=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],JU=[...PC,[m_("attribute"),"in $1"],[m_("varying"),"out $1"]],eF=[...PC,[m_("varying"),"in $1"]];function Y3(t,e){for(const[n,i]of e)t=t.replace(n,i);return t}function m_(t){return new RegExp(`\\b${t}[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)`,"g")}function DC(t,e){let n="";for(const i in t){const r=t[i];if(n+=`void ${r.signature} {
`,r.header&&(n+=`  ${r.header}`),e[i]){const s=e[i];s.sort((a,o)=>a.order-o.order);for(const a of s)n+=`  ${a.injection}
`}r.footer&&(n+=`  ${r.footer}`),n+=`}
`}return n}function kC(t){const e={vertex:{},fragment:{}};for(const n of t){let i,r;typeof n!="string"?(i=n,r=i.hook):(i={},r=n),r=r.trim();const[s,a]=r.split(":"),o=r.replace(/\(.+/,""),l=Object.assign(i,{signature:a});switch(s){case"vs":e.vertex[o]=l;break;case"fs":e.fragment[o]=l;break;default:throw new Error(s)}}return e}function tF(t,e){return{name:nF(t,e),language:"glsl",version:iF(t)}}function nF(t,e="unnamed"){const i=/#define[^\S\r\n]*SHADER_NAME[^\S\r\n]*([A-Za-z0-9_-]+)\s*/.exec(t);return i?i[1]:e}function iF(t){let e=100;const n=t.match(/[^\s]+/g);if(n&&n.length>=2&&n[0]==="#version"){const i=parseInt(n[1],10);Number.isFinite(i)&&(e=i)}if(e!==100&&e!==300)throw new Error(`Invalid GLSL version ${e}`);return e}const NC=`

${ld}
`,rF=`precision highp float;
`;function sF(t){const e=X0(t.modules||[]);return{source:oF(t.platformInfo,{...t,source:t.source,stage:"vertex",modules:e}),getUniforms:BC(e)}}function aF(t){const{vs:e,fs:n}=t,i=X0(t.modules||[]);return{vs:X3(t.platformInfo,{...t,source:e,stage:"vertex",modules:i}),fs:X3(t.platformInfo,{...t,source:n,stage:"fragment",modules:i}),getUniforms:BC(i)}}function oF(t,e){var S;const{source:n,stage:i,modules:r,hookFunctions:s=[],inject:a={},log:o}=e;Y0(typeof n=="string","shader source must be a string");const l=n;let c="";const u=kC(s),f={},d={},p={};for(const v in a){const y=typeof a[v]=="string"?{injection:a[v],order:0}:a[v],_=/^(v|f)s:(#)?([\w-]+)$/.exec(v);if(_){const T=_[2],b=_[3];T?b==="decl"?d[v]=[y]:p[v]=[y]:f[v]=[y]}else p[v]=[y]}const m=r;for(const v of m){o&&OC(v,l,o);const y=LC(v,"wgsl");c+=y;const _=((S=v.injections)==null?void 0:S[i])||{};for(const T in _){const b=/^(v|f)s:#([\w-]+)$/.exec(T);if(b){const C=b[2]==="decl"?d:p;C[T]=C[T]||[],C[T].push(_[T])}else f[T]=f[T]||[],f[T].push(_[T])}}return c+=NC,c=ih(c,i,d),c+=DC(u[i],f),c+=l,c=ih(c,i,p),c}function X3(t,e){var C;const{source:n,stage:i,language:r="glsl",modules:s,defines:a={},hookFunctions:o=[],inject:l={},prologue:c=!0,log:u}=e;Y0(typeof n=="string","shader source must be a string");const f=r==="glsl"?tF(n).version:-1,d=t.shaderLanguageVersion,p=f===100?"#version 100":"#version 300 es",S=n.split(`
`).slice(1).join(`
`),v={};s.forEach(D=>{Object.assign(v,D.defines)}),Object.assign(v,a);let y="";switch(r){case"wgsl":break;case"glsl":y=c?`${p}

// ----- PROLOGUE -------------------------
${`#define SHADER_TYPE_${i.toUpperCase()}`}

${GU(t)}
${i==="fragment"?rF:""}

// ----- APPLICATION DEFINES -------------------------

${lF(v)}

`:`${p}
`;break}const _=kC(o),T={},b={},M={};for(const D in l){const F=typeof l[D]=="string"?{injection:l[D],order:0}:l[D],L=/^(v|f)s:(#)?([\w-]+)$/.exec(D);if(L){const U=L[2],N=L[3];U?N==="decl"?b[D]=[F]:M[D]=[F]:T[D]=[F]}else M[D]=[F]}for(const D of s){u&&OC(D,S,u);const F=LC(D,i);y+=F;const L=((C=D.instance)==null?void 0:C.normalizedInjections[i])||{};for(const U in L){const N=/^(v|f)s:#([\w-]+)$/.exec(U);if(N){const Y=N[2]==="decl"?b:M;Y[U]=Y[U]||[],Y[U].push(L[U])}else T[U]=T[U]||[],T[U].push(L[U])}}return y+="// ----- MAIN SHADER SOURCE -------------------------",y+=NC,y=ih(y,i,b),y+=DC(_[i],T),y+=S,y=ih(y,i,M),r==="glsl"&&f!==d&&(y=QU(y,i)),y.trim()}function BC(t){return function(n){var r;const i={};for(const s of t){const a=(r=s.getUniforms)==null?void 0:r.call(s,n,i);Object.assign(i,a)}return i}}function lF(t={}){let e="";for(const n in t){const i=t[n];(i||Number.isFinite(i))&&(e+=`#define ${n.toUpperCase()} ${t[n]}
`)}return e}function LC(t,e){let n;switch(e){case"vertex":n=t.vs||"";break;case"fragment":n=t.fs||"";break;case"wgsl":n=t.source||"";break;default:Y0(!1)}if(!t.name)throw new Error("Shader module must have a name");const i=t.name.toUpperCase().replace(/[^0-9a-z]/gi,"_");let r=`// ----- MODULE ${t.name} ---------------

`;return e!=="wgsl"&&(r+=`#define MODULE_${i}
`),r+=`${n}
`,r}const cF=/^\s*\#\s*ifdef\s*([a-zA-Z_]+)\s*$/,uF=/^\s*\#\s*endif\s*$/;function fF(t,e){var a;const n=t.split(`
`),i=[];let r=!0,s=null;for(const o of n){const l=o.match(cF),c=o.match(uF);l?(s=l[1],r=!!((a=e==null?void 0:e.defines)!=null&&a[s])):c?r=!0:r&&i.push(o)}return i.join(`
`)}const aa=class aa{constructor(){x(this,"_hookFunctions",[]);x(this,"_defaultModules",[])}static getDefaultShaderAssembler(){return aa.defaultShaderAssembler=aa.defaultShaderAssembler||new aa,aa.defaultShaderAssembler}addDefaultModule(e){this._defaultModules.find(n=>n.name===(typeof e=="string"?e:e.name))||this._defaultModules.push(e)}removeDefaultModule(e){const n=typeof e=="string"?e:e.name;this._defaultModules=this._defaultModules.filter(i=>i.name!==n)}addShaderHook(e,n){n&&(e=Object.assign(n,{hook:e})),this._hookFunctions.push(e)}assembleWGSLShader(e){const n=this._getModuleList(e.modules),i=this._hookFunctions,{source:r,getUniforms:s}=sF({...e,source:e.source,modules:n,hookFunctions:i});return{source:e.platformInfo.shaderLanguage==="wgsl"?fF(r):r,getUniforms:s,modules:n}}assembleGLSLShaderPair(e){const n=this._getModuleList(e.modules),i=this._hookFunctions;return{...aF({...e,vs:e.vs,fs:e.fs,modules:n,hookFunctions:i}),modules:n}}_getModuleList(e=[]){const n=new Array(this._defaultModules.length+e.length),i={};let r=0;for(let s=0,a=this._defaultModules.length;s<a;++s){const o=this._defaultModules[s],l=o.name;n[r++]=o,i[l]=!0}for(let s=0,a=e.length;s<a;++s){const o=e[s],l=o.name;i[l]||(n[r++]=o,i[l]=!0)}return n.length=r,rh(n),n}};x(aa,"defaultShaderAssembler");let sh=aa;const dF=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,hF=`#version 300 es
${dF}`;function pF(t){const{input:e,inputChannels:n,output:i}={};if(!e)return hF;if(!n)throw new Error("inputChannels");const r=gF(n),s=mF(e,n);return`#version 300 es
in ${r} ${e};
out vec4 ${i};
void main() {
  ${i} = ${s};
}`}function gF(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error(`invalid channels: ${t}`)}}function mF(t,e){switch(e){case 1:return`vec4(${t}, 0.0, 0.0, 1.0)`;case 2:return`vec4(${t}, 0.0, 1.0)`;case 3:return`vec4(${t}, 1.0)`;case 4:return t;default:throw new Error(`invalid channels: ${e}`)}}class yF{constructor(){x(this,"stats",new Map)}getStats(e){return this.get(e)}get(e){return this.stats.has(e)||this.stats.set(e,new Gp({id:e})),this.stats.get(e)}}const UC=new yF,ie=new Iu({id:"luma.gl"}),Tm={};function Jp(t="id"){Tm[t]=Tm[t]||1;const e=Tm[t]++;return`${t}-${e}`}var Qm;let ft=(Qm=class{constructor(e,n,i){x(this,"id");x(this,"props");x(this,"userData",{});x(this,"_device");x(this,"destroyed",!1);x(this,"allocatedBytes",0);x(this,"_attachedResources",new Set);if(!e)throw new Error("no device");this._device=e,this.props=_F(n,i);const r=this.props.id!=="undefined"?this.props.id:Jp(this[Symbol.toStringTag]);this.props.id=r,this.id=r,this.userData=this.props.userData||{},this.addStats()}toString(){return`${this[Symbol.toStringTag]||this.constructor.name}:"${this.id}"`}destroy(){this.destroyResource()}delete(){return this.destroy(),this}getProps(){return this.props}attachResource(e){this._attachedResources.add(e)}detachResource(e){this._attachedResources.delete(e)}destroyAttachedResource(e){this._attachedResources.delete(e)&&e.destroy()}destroyAttachedResources(){for(const e of Object.values(this._attachedResources))e.destroy();this._attachedResources=new Set}destroyResource(){this.destroyAttachedResources(),this.removeStats(),this.destroyed=!0}removeStats(){const e=this._device.statsManager.getStats("Resource Counts"),n=this[Symbol.toStringTag];e.get(`${n}s Active`).decrementCount()}trackAllocatedMemory(e,n=this[Symbol.toStringTag]){const i=this._device.statsManager.getStats("Resource Counts");i.get("GPU Memory").addCount(e),i.get(`${n} Memory`).addCount(e),this.allocatedBytes=e}trackDeallocatedMemory(e=this[Symbol.toStringTag]){const n=this._device.statsManager.getStats("Resource Counts");n.get("GPU Memory").subtractCount(this.allocatedBytes),n.get(`${e} Memory`).subtractCount(this.allocatedBytes),this.allocatedBytes=0}addStats(){const e=this._device.statsManager.getStats("Resource Counts"),n=this[Symbol.toStringTag];e.get("Resources Created").incrementCount(),e.get(`${n}s Created`).incrementCount(),e.get(`${n}s Active`).incrementCount()}},x(Qm,"defaultProps",{id:"undefined",handle:void 0,userData:void 0}),Qm);function _F(t,e){const n={...e};for(const i in t)t[i]!==void 0&&(n[i]=t[i]);return n}var Xt;let It=(Xt=class extends ft{constructor(n,i){const r={...i};(i.usage||0)&Xt.INDEX&&!i.indexType&&(i.data instanceof Uint32Array?r.indexType="uint32":i.data instanceof Uint16Array&&(r.indexType="uint16")),delete r.data;super(n,r,Xt.defaultProps);x(this,"usage");x(this,"indexType");x(this,"updateTimestamp");x(this,"debugData",new ArrayBuffer(0));this.usage=r.usage||0,this.indexType=r.indexType,this.updateTimestamp=n.incrementTimestamp()}get[Symbol.toStringTag](){return"Buffer"}clone(n){return this.device.createBuffer({...this.props,...n})}_setDebugData(n,i,r){const s=ArrayBuffer.isView(n)?n.buffer:n,a=Math.min(n?n.byteLength:r,Xt.DEBUG_DATA_MAX_LENGTH);s===null?this.debugData=new ArrayBuffer(a):i===0&&r===s.byteLength?this.debugData=s.slice(0,a):this.debugData=s.slice(i,i+a)}},x(Xt,"INDEX",16),x(Xt,"VERTEX",32),x(Xt,"UNIFORM",64),x(Xt,"STORAGE",128),x(Xt,"INDIRECT",256),x(Xt,"QUERY_RESOLVE",512),x(Xt,"MAP_READ",1),x(Xt,"MAP_WRITE",2),x(Xt,"COPY_SRC",4),x(Xt,"COPY_DST",8),x(Xt,"DEBUG_DATA_MAX_LENGTH",32),x(Xt,"defaultProps",{...ft.defaultProps,usage:0,byteLength:0,byteOffset:0,data:null,indexType:"uint16",onMapped:void 0}),Xt);function FC(t){const[e,n,i]=Z0[t],r=t.includes("norm"),s=!r&&!t.startsWith("float"),a=t.startsWith("s");return{signedType:e,primitiveType:n,byteLength:i,normalized:r,integer:s,signed:a}}function bF(t){const e=t;switch(e){case"uint8":return"unorm8";case"sint8":return"snorm8";case"uint16":return"unorm16";case"sint16":return"snorm16";default:return e}}function vF(t,e){switch(e){case 1:return t;case 2:return t+t%2;default:return t+(4-t%4)%4}}function q0(t){const e=ArrayBuffer.isView(t)?t.constructor:t;if(e===Uint8ClampedArray)return"uint8";const n=Object.values(Z0).find(i=>e===i[4]);if(!n)throw new Error(e.name);return n[0]}function K0(t){const[,,,,e]=Z0[t];return e}const Z0={uint8:["uint8","u32",1,!1,Uint8Array],sint8:["sint8","i32",1,!1,Int8Array],unorm8:["uint8","f32",1,!0,Uint8Array],snorm8:["sint8","f32",1,!0,Int8Array],uint16:["uint16","u32",2,!1,Uint16Array],sint16:["sint16","i32",2,!1,Int16Array],unorm16:["uint16","u32",2,!0,Uint16Array],snorm16:["sint16","i32",2,!0,Int16Array],float16:["float16","f16",2,!1,Uint16Array],float32:["float32","f32",4,!1,Float32Array],uint32:["uint32","u32",4,!1,Uint32Array],sint32:["sint32","i32",4,!1,Int32Array]};function G0(t){let e;t.endsWith("-webgl")&&(t.replace("-webgl",""),e=!0);const[n,i]=t.split("x"),r=n,s=i?parseInt(i):1,a=FC(r),o={type:r,components:s,byteLength:a.byteLength*s,integer:a.integer,signed:a.signed,normalized:a.normalized};return e&&(o.webglOnly=!0),o}function TF(t,e,n){const i=n?bF(t):t;switch(i){case"unorm8":return e===1?"unorm8":e===3?"unorm8x3-webgl":`${i}x${e}`;case"snorm8":case"uint8":case"sint8":case"uint16":case"sint16":case"unorm16":case"snorm16":case"float16":if(e===1||e===3)throw new Error(`size: ${e}`);return`${i}x${e}`;default:return e===1?i:`${i}x${e}`}}function xF(t,e,n){if(!e||e>4)throw new Error(`size ${e}`);const i=e,r=q0(t);return TF(r,i,n)}function SF(t){let e;switch(t.primitiveType){case"f32":e="float32";break;case"i32":e="sint32";break;case"u32":e="uint32";break;case"f16":return t.components<=2?"float16x2":"float16x4"}return t.components===1?e:`${e}x${t.components}`}const xn="texture-compression-bc",ot="texture-compression-astc",Gi="texture-compression-etc2",wF="texture-compression-etc1-webgl",wf="texture-compression-pvrtc-webgl",xm="texture-compression-atc-webgl",Af="float32-renderable-webgl",Sm="float16-renderable-webgl",AF="rgb9e5ufloat-renderable-webgl",wm="snorm8-renderable-webgl",Xl="norm16-renderable-webgl",Am="snorm16-renderable-webgl",Ef="float32-filterable",q3="float16-filterable-webgl";function zC(t){const e=RF[t];if(!e)throw new Error(`Unsupported texture format ${t}`);return e}const EF={r8unorm:{},rg8unorm:{},"rgb8unorm-webgl":{},rgba8unorm:{},"rgba8unorm-srgb":{},r8snorm:{render:wm},rg8snorm:{render:wm},"rgb8snorm-webgl":{},rgba8snorm:{render:wm},r8uint:{},rg8uint:{},rgba8uint:{},r8sint:{},rg8sint:{},rgba8sint:{},bgra8unorm:{},"bgra8unorm-srgb":{},r16unorm:{f:Xl},rg16unorm:{render:Xl},"rgb16unorm-webgl":{f:Xl},rgba16unorm:{render:Xl},r16snorm:{f:Am},rg16snorm:{render:Am},"rgb16snorm-webgl":{f:Xl},rgba16snorm:{render:Am},r16uint:{},rg16uint:{},rgba16uint:{},r16sint:{},rg16sint:{},rgba16sint:{},r16float:{render:Sm,filter:"float16-filterable-webgl"},rg16float:{render:Sm,filter:q3},rgba16float:{render:Sm,filter:q3},r32uint:{},rg32uint:{},rgba32uint:{},r32sint:{},rg32sint:{},rgba32sint:{},r32float:{render:Af,filter:Ef},rg32float:{render:!1,filter:Ef},"rgb32float-webgl":{render:Af,filter:Ef},rgba32float:{render:Af,filter:Ef},"rgba4unorm-webgl":{channels:"rgba",bitsPerChannel:[4,4,4,4],packed:!0},"rgb565unorm-webgl":{channels:"rgb",bitsPerChannel:[5,6,5,0],packed:!0},"rgb5a1unorm-webgl":{channels:"rgba",bitsPerChannel:[5,5,5,1],packed:!0},rgb9e5ufloat:{channels:"rgb",packed:!0,render:AF},rg11b10ufloat:{channels:"rgb",bitsPerChannel:[11,11,10,0],packed:!0,p:1,render:Af},rgb10a2unorm:{channels:"rgba",bitsPerChannel:[10,10,10,2],packed:!0,p:1},rgb10a2uint:{channels:"rgba",bitsPerChannel:[10,10,10,2],packed:!0,p:1},stencil8:{attachment:"stencil",bitsPerChannel:[8,0,0,0],dataType:"uint8"},depth16unorm:{attachment:"depth",bitsPerChannel:[16,0,0,0],dataType:"uint16"},depth24plus:{attachment:"depth",bitsPerChannel:[24,0,0,0],dataType:"uint32"},depth32float:{attachment:"depth",bitsPerChannel:[32,0,0,0],dataType:"float32"},"depth24plus-stencil8":{attachment:"depth-stencil",bitsPerChannel:[24,8,0,0],packed:!0},"depth32float-stencil8":{attachment:"depth-stencil",bitsPerChannel:[32,8,0,0],packed:!0}},CF={"bc1-rgb-unorm-webgl":{f:xn},"bc1-rgb-unorm-srgb-webgl":{f:xn},"bc1-rgba-unorm":{f:xn},"bc1-rgba-unorm-srgb":{f:xn},"bc2-rgba-unorm":{f:xn},"bc2-rgba-unorm-srgb":{f:xn},"bc3-rgba-unorm":{f:xn},"bc3-rgba-unorm-srgb":{f:xn},"bc4-r-unorm":{f:xn},"bc4-r-snorm":{f:xn},"bc5-rg-unorm":{f:xn},"bc5-rg-snorm":{f:xn},"bc6h-rgb-ufloat":{f:xn},"bc6h-rgb-float":{f:xn},"bc7-rgba-unorm":{f:xn},"bc7-rgba-unorm-srgb":{f:xn},"etc2-rgb8unorm":{f:Gi},"etc2-rgb8unorm-srgb":{f:Gi},"etc2-rgb8a1unorm":{f:Gi},"etc2-rgb8a1unorm-srgb":{f:Gi},"etc2-rgba8unorm":{f:Gi},"etc2-rgba8unorm-srgb":{f:Gi},"eac-r11unorm":{f:Gi},"eac-r11snorm":{f:Gi},"eac-rg11unorm":{f:Gi},"eac-rg11snorm":{f:Gi},"astc-4x4-unorm":{f:ot},"astc-4x4-unorm-srgb":{f:ot},"astc-5x4-unorm":{f:ot},"astc-5x4-unorm-srgb":{f:ot},"astc-5x5-unorm":{f:ot},"astc-5x5-unorm-srgb":{f:ot},"astc-6x5-unorm":{f:ot},"astc-6x5-unorm-srgb":{f:ot},"astc-6x6-unorm":{f:ot},"astc-6x6-unorm-srgb":{f:ot},"astc-8x5-unorm":{f:ot},"astc-8x5-unorm-srgb":{f:ot},"astc-8x6-unorm":{f:ot},"astc-8x6-unorm-srgb":{f:ot},"astc-8x8-unorm":{f:ot},"astc-8x8-unorm-srgb":{f:ot},"astc-10x5-unorm":{f:ot},"astc-10x5-unorm-srgb":{f:ot},"astc-10x6-unorm":{f:ot},"astc-10x6-unorm-srgb":{f:ot},"astc-10x8-unorm":{f:ot},"astc-10x8-unorm-srgb":{f:ot},"astc-10x10-unorm":{f:ot},"astc-10x10-unorm-srgb":{f:ot},"astc-12x10-unorm":{f:ot},"astc-12x10-unorm-srgb":{f:ot},"astc-12x12-unorm":{f:ot},"astc-12x12-unorm-srgb":{f:ot},"pvrtc-rgb4unorm-webgl":{f:wf},"pvrtc-rgba4unorm-webgl":{f:wf},"pvrtc-rbg2unorm-webgl":{f:wf},"pvrtc-rgba2unorm-webgl":{f:wf},"etc1-rbg-unorm-webgl":{f:wF},"atc-rgb-unorm-webgl":{f:xm},"atc-rgba-unorm-webgl":{f:xm},"atc-rgbai-unorm-webgl":{f:xm}},RF={...EF,...CF},MF=["bc1","bc2","bc3","bc4","bc5","bc6","bc7","etc1","etc2","eac","atc","astc","pvrtc"],OF=/^(r|rg|rgb|rgba|bgra)([0-9]*)([a-z]*)(-srgb)?(-webgl)?$/;class IF{getInfo(e){return K3(e)}isColor(e){return e.startsWith("rgba")||e.startsWith("bgra")||e.startsWith("rgb")}isDepthStencil(e){return e.startsWith("depth")||e.startsWith("stencil")}isCompressed(e){return MF.some(n=>e.startsWith(n))}getCapabilities(e){const n=zC(e),i={format:e,create:n.f??!0,render:n.render??!0,filter:n.filter??!0,blend:n.blend??!0,store:n.store??!0},r=K3(e),s=e.startsWith("depth")||e.startsWith("stencil"),a=r==null?void 0:r.signed,o=r==null?void 0:r.integer,l=r==null?void 0:r.webgl;return i.render&&(i.render=!a),i.filter&&(i.filter=!s&&!a&&!o&&!l),i}}const jo=new IF;function K3(t){let e=PF(t);if(jo.isCompressed(t)){e.channels="rgb",e.components=3,e.bytesPerPixel=1,e.srgb=!1,e.compressed=!0;const i=DF(t);i&&(e.blockWidth=i.blockWidth,e.blockHeight=i.blockHeight)}const n=OF.exec(t);if(n){const[,i,r,s,a,o]=n,l=`${s}${r}`,c=FC(l),u=c.byteLength*8,f=i.length,d=[u,f>=2?u:0,f>=3?u:0,f>=4?u:0];e={format:t,attachment:e.attachment,dataType:c.signedType,components:f,channels:i,integer:c.integer,signed:c.signed,normalized:c.normalized,bitsPerChannel:d,bytesPerPixel:c.byteLength*i.length,packed:e.packed,srgb:e.srgb},o==="-webgl"&&(e.webgl=!0),a==="-srgb"&&(e.srgb=!0)}return t.endsWith("-webgl")&&(e.webgl=!0),t.endsWith("-srgb")&&(e.srgb=!0),e}function PF(t){var s;const e=zC(t),n=e.bytesPerPixel||1,i=e.bitsPerChannel||[8,8,8,8];return delete e.bitsPerChannel,delete e.bytesPerPixel,delete e.f,delete e.render,delete e.filter,delete e.blend,delete e.store,{...e,format:t,attachment:e.attachment||"color",channels:e.channels||"r",components:e.components||((s=e.channels)==null?void 0:s.length)||1,bytesPerPixel:n,bitsPerChannel:i,dataType:e.dataType||"uint8",srgb:e.srgb??!1,packed:e.packed??!1,webgl:e.webgl??!1,integer:e.integer??!1,signed:e.signed??!1,normalized:e.normalized??!1,compressed:e.compressed??!1}}function DF(t){const n=/.*-(\d+)x(\d+)-.*/.exec(t);if(n){const[,i,r]=n;return{blockWidth:Number(i),blockHeight:Number(r)}}return null}function kF(t){return typeof ImageData<"u"&&t instanceof ImageData||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement||typeof VideoFrame<"u"&&t instanceof VideoFrame||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas}function NF(t){if(typeof ImageData<"u"&&t instanceof ImageData||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height};if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)return{width:t.naturalWidth,height:t.naturalHeight};if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)return{width:t.videoWidth,height:t.videoHeight};if(typeof VideoFrame<"u"&&t instanceof VideoFrame)return{width:t.displayWidth,height:t.displayHeight};throw new Error("Unknown image type")}class BF{}class LF{constructor(e=[],n){x(this,"features");x(this,"disabledFeatures");this.features=new Set(e),this.disabledFeatures=n||{}}*[Symbol.iterator](){yield*this.features}has(e){var n;return!((n=this.disabledFeatures)!=null&&n[e])&&this.features.has(e)}}const Mh=class Mh{constructor(e){x(this,"id");x(this,"props");x(this,"userData",{});x(this,"statsManager",UC);x(this,"timestamp",0);x(this,"_reused",!1);x(this,"_lumaData",{});x(this,"_textureCaps",{});this.props={...Mh.defaultProps,...e},this.id=this.props.id||Jp(this[Symbol.toStringTag].toLowerCase())}get[Symbol.toStringTag](){return"Device"}toString(){return`Device(${this.id})`}getVertexFormatInfo(e){return G0(e)}isVertexFormatSupported(e){return!0}getTextureFormatInfo(e){return jo.getInfo(e)}getTextureFormatCapabilities(e){let n=this._textureCaps[e];if(!n){const i=this._getDeviceTextureFormatCapabilities(e);n=this._getDeviceSpecificTextureFormatCapabilities(i),this._textureCaps[e]=n}return n}getMipLevelCount(e,n,i=1){const r=Math.max(e,n,i);return 1+Math.floor(Math.log2(r))}isExternalImage(e){return kF(e)}getExternalImageSize(e){return NF(e)}isTextureFormatSupported(e){return this.getTextureFormatCapabilities(e).create}isTextureFormatFilterable(e){return this.getTextureFormatCapabilities(e).filter}isTextureFormatRenderable(e){return this.getTextureFormatCapabilities(e).render}isTextureFormatCompressed(e){return jo.isCompressed(e)}pushDebugGroup(e){this.commandEncoder.pushDebugGroup(e)}popDebugGroup(){var e;(e=this.commandEncoder)==null||e.popDebugGroup()}insertDebugMarker(e){var n;(n=this.commandEncoder)==null||n.insertDebugMarker(e)}loseDevice(){return!1}incrementTimestamp(){return this.timestamp++}reportError(e,n,...i){return this.props.onError(e,n)?()=>{}:ie.error(e.message,n,...i)}debug(){if(this.props.debug)debugger;else ie.once(0,`'Type luma.log.set({debug: true}) in console to enable debug breakpoints',
or create a device with the 'debug: true' prop.`)()}getDefaultCanvasContext(){if(!this.canvasContext)throw new Error("Device has no default CanvasContext. See props.createCanvasContext");return this.canvasContext}beginRenderPass(e){return this.commandEncoder.beginRenderPass(e)}beginComputePass(e){return this.commandEncoder.beginComputePass(e)}getCanvasContext(){return this.getDefaultCanvasContext()}readPixelsToArrayWebGL(e,n){throw new Error("not implemented")}readPixelsToBufferWebGL(e,n){throw new Error("not implemented")}setParametersWebGL(e){throw new Error("not implemented")}getParametersWebGL(e){throw new Error("not implemented")}withParametersWebGL(e,n){throw new Error("not implemented")}clearWebGL(e){throw new Error("not implemented")}resetWebGL(){throw new Error("not implemented")}static _getCanvasContextProps(e){return e.createCanvasContext===!0?{}:e.createCanvasContext}_getDeviceTextureFormatCapabilities(e){const n=jo.getCapabilities(e),i=s=>(typeof s=="string"?this.features.has(s):s)??!0,r=i(n.create);return{format:e,create:r,render:r&&i(n.render),filter:r&&i(n.filter),blend:r&&i(n.blend),store:r&&i(n.store)}}_normalizeBufferProps(e){(e instanceof ArrayBuffer||ArrayBuffer.isView(e))&&(e={data:e});const n={...e};if((e.usage||0)&It.INDEX&&(e.indexType||(e.data instanceof Uint32Array?n.indexType="uint32":e.data instanceof Uint16Array&&(n.indexType="uint16")),!n.indexType))throw new Error("indices buffer content must be of type uint16 or uint32");return n}};x(Mh,"defaultProps",{id:null,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,createCanvasContext:void 0,webgl:{},onError:(e,n)=>{},onResize:(e,n)=>{const[i,r]=e.getDevicePixelSize();ie.log(1,`${e} resized => ${i}x${r}px`)()},onPositionChange:(e,n)=>{const[i,r]=e.getPosition();ie.log(1,`${e} repositioned => ${i},${r}`)()},onVisibilityChange:e=>ie.log(1,`${e} Visibility changed ${e.isVisible}`)(),onDevicePixelRatioChange:(e,n)=>ie.log(1,`${e} DPR changed ${n.oldRatio} => ${e.devicePixelRatio}`)(),debug:ie.get("debug")||void 0,debugShaders:ie.get("debug-shaders")||void 0,debugFramebuffers:!!ie.get("debug-framebuffers"),debugFactories:!!ie.get("debug-factories"),debugWebGL:!!ie.get("debug-webgl"),debugSpectorJS:void 0,debugSpectorJSUrl:void 0,_reuseDevices:!1,_requestMaxLimits:!0,_cacheShaders:!1,_cachePipelines:!1,_cacheDestroyPolicy:"unused",_initializeFeatures:!0,_disabledFeatures:{"compilation-status-async-webgl":!0},_handle:void 0});let Ia=Mh;const UF="set luma.log.level=1 (or higher) to trace rendering",Z3="No matching device found. Ensure `@luma.gl/webgl` and/or `@luma.gl/webgpu` modules are imported.",kc=class kc{constructor(){x(this,"stats",UC);x(this,"log",ie);x(this,"VERSION","9.2.5");x(this,"spector");x(this,"preregisteredAdapters",new Map);if(globalThis.luma){if(globalThis.luma.VERSION!==this.VERSION)throw ie.error(`Found luma.gl ${globalThis.luma.VERSION} while initialzing ${this.VERSION}`)(),ie.error("'yarn why @luma.gl/core' can help identify the source of the conflict")(),new Error("luma.gl - multiple versions detected: see console log");ie.error("This version of luma.gl has already been initialized")()}ie.log(1,`${this.VERSION} - ${UF}`)(),globalThis.luma=this}async createDevice(e={}){const n={...kc.defaultProps,...e},i=this.selectAdapter(n.type,n.adapters);if(!i)throw new Error(Z3);return n.waitForPageLoad&&await i.pageLoaded,await i.create(n)}async attachDevice(e,n){var s;const i=this._getTypeFromHandle(e,n.adapters),r=i&&this.selectAdapter(i,n.adapters);if(!r)throw new Error(Z3);return await((s=r==null?void 0:r.attach)==null?void 0:s.call(r,e,n))}registerAdapters(e){for(const n of e)this.preregisteredAdapters.set(n.type,n)}getSupportedAdapters(e=[]){const n=this._getAdapterMap(e);return Array.from(n).map(([,i])=>i).filter(i=>{var r;return(r=i.isSupported)==null?void 0:r.call(i)}).map(i=>i.type)}getBestAvailableAdapterType(e=[]){var r,s;const n=["webgpu","webgl","null"],i=this._getAdapterMap(e);for(const a of n)if((s=(r=i.get(a))==null?void 0:r.isSupported)!=null&&s.call(r))return a;return null}selectAdapter(e,n=[]){let i=e;e==="best-available"&&(i=this.getBestAvailableAdapterType(n));const r=this._getAdapterMap(n);return i&&r.get(i)||null}enforceWebGL2(e=!0,n=[]){var s;const r=this._getAdapterMap(n).get("webgl");r||ie.warn("enforceWebGL2: webgl adapter not found")(),(s=r==null?void 0:r.enforceWebGL2)==null||s.call(r,e)}setDefaultDeviceProps(e){Object.assign(kc.defaultProps,e)}_getAdapterMap(e=[]){const n=new Map(this.preregisteredAdapters);for(const i of e)n.set(i.type,i);return n}_getTypeFromHandle(e,n=[]){return e instanceof WebGL2RenderingContext?"webgl":typeof GPUDevice<"u"&&e instanceof GPUDevice||e!=null&&e.queue?"webgpu":e===null?"null":(e instanceof WebGLRenderingContext?ie.warn("WebGL1 is not supported",e)():ie.warn("Unknown handle type",e)(),null)}};x(kc,"defaultProps",{...Ia.defaultProps,type:"best-available",adapters:void 0,waitForPageLoad:!0});let y_=kc;const __=new y_;class FF{get pageLoaded(){return $F()}}const zF=Va()&&typeof document<"u",VF=()=>zF&&document.readyState==="complete";let Cf=null;function $F(){return Cf||(VF()||typeof window>"u"?Cf=Promise.resolve():Cf=new Promise(t=>window.addEventListener("load",()=>t()))),Cf}function jF(){let t,e;return{promise:new Promise((i,r)=>{t=i,e=r}),resolve:t,reject:e}}const oa=class oa{constructor(e){x(this,"id");x(this,"props");x(this,"canvas");x(this,"htmlCanvas");x(this,"offscreenCanvas");x(this,"type");x(this,"initialized");x(this,"isInitialized",!1);x(this,"isVisible",!0);x(this,"cssWidth");x(this,"cssHeight");x(this,"devicePixelRatio");x(this,"devicePixelWidth");x(this,"devicePixelHeight");x(this,"drawingBufferWidth");x(this,"drawingBufferHeight");x(this,"_initializedResolvers",jF());x(this,"_resizeObserver");x(this,"_intersectionObserver");x(this,"_position");x(this,"destroyed",!1);var n,i;if(this.props={...oa.defaultProps,...e},e=this.props,this.initialized=this._initializedResolvers.promise,Va()?e.canvas?typeof e.canvas=="string"?this.canvas=WF(e.canvas):this.canvas=e.canvas:this.canvas=YF(e):this.canvas={width:e.width||1,height:e.height||1},oa.isHTMLCanvas(this.canvas)?(this.id=e.id||this.canvas.id,this.type="html-canvas",this.htmlCanvas=this.canvas):oa.isOffscreenCanvas(this.canvas)?(this.id=e.id||"offscreen-canvas",this.type="offscreen-canvas",this.offscreenCanvas=this.canvas):(this.id=e.id||"node-canvas-context",this.type="node"),this.cssWidth=((n=this.htmlCanvas)==null?void 0:n.clientWidth)||this.canvas.width,this.cssHeight=((i=this.htmlCanvas)==null?void 0:i.clientHeight)||this.canvas.height,this.devicePixelWidth=this.canvas.width,this.devicePixelHeight=this.canvas.height,this.drawingBufferWidth=this.canvas.width,this.drawingBufferHeight=this.canvas.height,this.devicePixelRatio=globalThis.devicePixelRatio||1,this._position=[0,0],oa.isHTMLCanvas(this.canvas)){this._intersectionObserver=new IntersectionObserver(r=>this._handleIntersection(r)),this._intersectionObserver.observe(this.canvas),this._resizeObserver=new ResizeObserver(r=>this._handleResize(r));try{this._resizeObserver.observe(this.canvas,{box:"device-pixel-content-box"})}catch{this._resizeObserver.observe(this.canvas,{box:"content-box"})}setTimeout(()=>this._observeDevicePixelRatio(),0),this.props.trackPosition&&this._trackPosition()}}static isHTMLCanvas(e){return typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement}static isOffscreenCanvas(e){return typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas}toString(){return`${this[Symbol.toStringTag]}(${this.id})`}destroy(){this.destroyed=!0}setProps(e){return"useDevicePixels"in e&&(this.props.useDevicePixels=e.useDevicePixels||!1,this._updateDrawingBufferSize()),this}getCSSSize(){return[this.cssWidth,this.cssHeight]}getPosition(){return this._position}getDevicePixelSize(){return[this.devicePixelWidth,this.devicePixelHeight]}getDrawingBufferSize(){return[this.drawingBufferWidth,this.drawingBufferHeight]}getMaxDrawingBufferSize(){const e=this.device.limits.maxTextureDimension2D;return[e,e]}setDrawingBufferSize(e,n){this.canvas.width=e,this.canvas.height=n,this.drawingBufferWidth=e,this.drawingBufferHeight=n}getDevicePixelRatio(){return typeof window<"u"&&window.devicePixelRatio||1}cssToDevicePixels(e,n=!0){const i=this.cssToDeviceRatio(),[r,s]=this.getDrawingBufferSize();return XF(e,i,r,s,n)}getPixelSize(){return this.getDevicePixelSize()}getAspect(){const[e,n]=this.getDevicePixelSize();return e/n}cssToDeviceRatio(){try{const[e]=this.getDrawingBufferSize(),[n]=this.getCSSSize();return n?e/n:1}catch{return 1}}resize(e){this.setDrawingBufferSize(e.width,e.height)}_setAutoCreatedCanvasId(e){var n;((n=this.htmlCanvas)==null?void 0:n.id)==="lumagl-auto-created-canvas"&&(this.htmlCanvas.id=e)}_handleIntersection(e){const n=e.find(r=>r.target===this.canvas);if(!n)return;const i=n.isIntersecting;this.isVisible!==i&&(this.isVisible=i,this.device.props.onVisibilityChange(this))}_handleResize(e){var l,c;const n=e.find(u=>u.target===this.canvas);if(!n)return;this.cssWidth=n.contentBoxSize[0].inlineSize,this.cssHeight=n.contentBoxSize[0].blockSize;const i=this.getDevicePixelSize(),r=((l=n.devicePixelContentBoxSize)==null?void 0:l[0].inlineSize)||n.contentBoxSize[0].inlineSize*devicePixelRatio,s=((c=n.devicePixelContentBoxSize)==null?void 0:c[0].blockSize)||n.contentBoxSize[0].blockSize*devicePixelRatio,[a,o]=this.getMaxDrawingBufferSize();this.devicePixelWidth=Math.max(1,Math.min(r,a)),this.devicePixelHeight=Math.max(1,Math.min(s,o)),this._updateDrawingBufferSize(),this.device.props.onResize(this,{oldPixelSize:i})}_updateDrawingBufferSize(){if(this.props.autoResize){if(typeof this.props.useDevicePixels=="number"){const e=this.props.useDevicePixels;this.setDrawingBufferSize(this.cssWidth*e,this.cssHeight*e)}else this.props.useDevicePixels?this.setDrawingBufferSize(this.devicePixelWidth,this.devicePixelHeight):this.setDrawingBufferSize(this.cssWidth,this.cssHeight);this._updateDevice()}this._initializedResolvers.resolve(),this.isInitialized=!0,this.updatePosition()}_observeDevicePixelRatio(){const e=this.devicePixelRatio;this.devicePixelRatio=window.devicePixelRatio,this.updatePosition(),this.device.props.onDevicePixelRatioChange(this,{oldRatio:e}),matchMedia(`(resolution: ${this.devicePixelRatio}dppx)`).addEventListener("change",()=>this._observeDevicePixelRatio(),{once:!0})}_trackPosition(e=100){const n=setInterval(()=>{this.destroyed?clearInterval(n):this.updatePosition()},e)}updatePosition(){var n,i,r;const e=(n=this.htmlCanvas)==null?void 0:n.getBoundingClientRect();if(e){const s=[e.left,e.top];if(this._position??(this._position=s),s[0]!==this._position[0]||s[1]!==this._position[1]){const o=this._position;this._position=s,(r=(i=this.device.props).onPositionChange)==null||r.call(i,this,{oldPosition:o})}}}};x(oa,"defaultProps",{id:void 0,canvas:null,width:800,height:600,useDevicePixels:!0,autoResize:!0,container:null,visible:!0,alphaMode:"opaque",colorSpace:"srgb",trackPosition:!1});let ah=oa;function HF(t){if(typeof t=="string"){const e=document.getElementById(t);if(!e)throw new Error(`${t} is not an HTML element`);return e}return t||document.body}function WF(t){const e=document.getElementById(t);if(!ah.isHTMLCanvas(e))throw new Error("Object is not a canvas element");return e}function YF(t){const{width:e,height:n}=t,i=document.createElement("canvas");i.id=Jp("lumagl-auto-created-canvas"),i.width=e||1,i.height=n||1,i.style.width=Number.isFinite(e)?`${e}px`:"100%",i.style.height=Number.isFinite(n)?`${n}px`:"100%",t!=null&&t.visible||(i.style.visibility="hidden");const r=HF((t==null?void 0:t.container)||null);return r.insertBefore(i,r.firstChild),i}function XF(t,e,n,i,r){const s=t,a=G3(s[0],e,n);let o=Q3(s[1],e,i,r),l=G3(s[0]+1,e,n);const c=l===n-1?l:l-1;l=Q3(s[1]+1,e,i,r);let u;return r?(l=l===0?l:l+1,u=o,o=l):u=l===i-1?l:l-1,{x:a,y:o,width:Math.max(c-a+1,1),height:Math.max(u-o+1,1)}}function G3(t,e,n){return Math.min(Math.round(t*e),n-1)}function Q3(t,e,n,i){return i?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}const Nc=class Nc extends ft{get[Symbol.toStringTag](){return"Sampler"}constructor(e,n){n=Nc.normalizeProps(e,n),super(e,n,Nc.defaultProps)}static normalizeProps(e,n){return n}};x(Nc,"defaultProps",{...ft.defaultProps,type:"color-sampler",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge",addressModeW:"clamp-to-edge",magFilter:"nearest",minFilter:"nearest",mipmapFilter:"none",lodMinClamp:0,lodMaxClamp:32,compare:"less-equal",maxAnisotropy:1});let sl=Nc;const qF={"1d":"1d","2d":"2d","2d-array":"2d",cube:"2d","cube-array":"2d","3d":"3d"},nn=class nn extends ft{constructor(n,i){i=nn.normalizeProps(n,i);super(n,i,nn.defaultProps);x(this,"dimension");x(this,"baseDimension");x(this,"format");x(this,"width");x(this,"height");x(this,"depth");x(this,"mipLevels");x(this,"updateTimestamp");if(this.dimension=this.props.dimension,this.baseDimension=qF[this.dimension],this.format=this.props.format,this.width=this.props.width,this.height=this.props.height,this.depth=this.props.depth,this.mipLevels=this.props.mipLevels,this.props.width===void 0||this.props.height===void 0)if(n.isExternalImage(i.data)){const r=n.getExternalImageSize(i.data);this.width=(r==null?void 0:r.width)||1,this.height=(r==null?void 0:r.height)||1}else this.width=1,this.height=1,(this.props.width===void 0||this.props.height===void 0)&&ie.warn(`${this} created with undefined width or height. This is deprecated. Use AsyncTexture instead.`)();this.updateTimestamp=n.incrementTimestamp()}get[Symbol.toStringTag](){return"Texture"}toString(){return`Texture(${this.id},${this.format},${this.width}x${this.height})`}setSampler(n){this.sampler=n instanceof sl?n:this.device.createSampler(n)}clone(n){return this.device.createTexture({...this.props,...n})}static normalizeProps(n,i){const r={...i},{width:s,height:a}=r;return typeof s=="number"&&(r.width=Math.max(1,Math.ceil(s))),typeof a=="number"&&(r.height=Math.max(1,Math.ceil(a))),r}_initializeData(n){this.device.isExternalImage(n)?this.copyExternalImage({image:n,width:this.width,height:this.height,depth:this.depth,mipLevel:0,x:0,y:0,z:0,aspect:"all",colorSpace:"srgb",premultipliedAlpha:!1,flipY:!1}):n&&this.copyImageData({data:n,mipLevel:0,x:0,y:0,z:0,aspect:"all"})}_normalizeCopyImageDataOptions(n){const{width:i,height:r,depth:s}=this,a={...nn.defaultCopyDataOptions,width:i,height:r,depth:s,...n},o=this.device.getTextureFormatInfo(this.format);if(!n.bytesPerRow&&!o.bytesPerPixel)throw new Error(`bytesPerRow must be provided for texture format ${this.format}`);return a.bytesPerRow=n.bytesPerRow||i*(o.bytesPerPixel||4),a.rowsPerImage=n.rowsPerImage||r,a}_normalizeCopyExternalImageOptions(n){const i=this.device.getExternalImageSize(n.image),r={...nn.defaultCopyExternalImageOptions,...i,...n};return r.width=Math.min(r.width,this.width-r.x),r.height=Math.min(r.height,this.height-r.y),r}};x(nn,"SAMPLE",4),x(nn,"STORAGE",8),x(nn,"RENDER",16),x(nn,"COPY_SRC",1),x(nn,"COPY_DST",2),x(nn,"TEXTURE",4),x(nn,"RENDER_ATTACHMENT",16),x(nn,"defaultProps",{...ft.defaultProps,data:null,dimension:"2d",format:"rgba8unorm",usage:nn.TEXTURE|nn.RENDER_ATTACHMENT|nn.COPY_DST,width:void 0,height:void 0,depth:1,mipLevels:1,samples:void 0,sampler:{},view:void 0}),x(nn,"defaultCopyDataOptions",{data:void 0,byteOffset:0,bytesPerRow:void 0,rowsPerImage:void 0,mipLevel:0,x:0,y:0,z:0,aspect:"all"}),x(nn,"defaultCopyExternalImageOptions",{image:void 0,sourceX:0,sourceY:0,width:void 0,height:void 0,depth:1,mipLevel:0,x:0,y:0,z:0,aspect:"all",colorSpace:"srgb",premultipliedAlpha:!1,flipY:!1});let Jn=nn;const Oh=class Oh extends ft{get[Symbol.toStringTag](){return"TextureView"}constructor(e,n){super(e,n,Oh.defaultProps)}};x(Oh,"defaultProps",{...ft.defaultProps,format:void 0,dimension:void 0,aspect:"all",baseMipLevel:0,mipLevelCount:void 0,baseArrayLayer:0,arrayLayerCount:void 0});let oh=Oh;function KF(t,e,n){let i="";const r=e.split(/\r?\n/),s=t.slice().sort((a,o)=>a.lineNum-o.lineNum);switch((n==null?void 0:n.showSourceCode)||"no"){case"all":let a=0;for(let o=1;o<=r.length;o++)for(i+=VC(r[o-1],o,n);s.length>a&&s[a].lineNum===o;){const l=s[a++];i+=Em(l,r,l.lineNum,{...n,inlineSource:!1})}for(;s.length>a;){const o=s[a++];i+=Em(o,[],0,{...n,inlineSource:!1})}return i;case"issues":case"no":for(const o of t)i+=Em(o,r,o.lineNum,{inlineSource:(n==null?void 0:n.showSourceCode)!=="no"});return i}}function Em(t,e,n,i){if(i!=null&&i.inlineSource){const s=ZF(e,n),a=t.linePos>0?`${" ".repeat(t.linePos+5)}^^^
`:"";return`
${s}${a}${t.type.toUpperCase()}: ${t.message}

`}const r=t.type==="error"?"red":"#8B4000";return i!=null&&i.html?`<div class='luma-compiler-log-error' style="color:${r};"><b> ${t.type.toUpperCase()}: ${t.message}</b></div>`:`${t.type.toUpperCase()}: ${t.message}`}function ZF(t,e,n){let i="";for(let r=e-2;r<=e;r++){const s=t[r-1];s!==void 0&&(i+=VC(s,e,n))}return i}function VC(t,e,n){const i=n!=null&&n.html?QF(t):t;return`${GF(String(e),4)}: ${i}${n!=null&&n.html?"<br/>":`
`}`}function GF(t,e){let n="";for(let i=t.length;i<e;++i)n+=" ";return n+t}function QF(t){return t.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}const Ih=class Ih extends ft{constructor(n,i){i={...i,debugShaders:i.debugShaders||n.props.debugShaders||"errors"};super(n,{id:JF(i),...i},Ih.defaultProps);x(this,"stage");x(this,"source");x(this,"compilationStatus","pending");this.stage=this.props.stage,this.source=this.props.source}get[Symbol.toStringTag](){return"Shader"}getCompilationInfoSync(){return null}getTranslatedSource(){return null}async debugShader(){const n=this.props.debugShaders;switch(n){case"never":return;case"errors":if(this.compilationStatus==="success")return;break}const i=await this.getCompilationInfo();n==="warnings"&&(i==null?void 0:i.length)===0||this._displayShaderLog(i,this.id)}_displayShaderLog(n,i){var u;if(typeof document>"u"||!(document!=null&&document.createElement))return;const r=i,s=`${this.stage} shader "${r}"`;let a=KF(n,this.source,{showSourceCode:"all",html:!0});const o=this.getTranslatedSource();o&&(a+=`<br /><br /><h1>Translated Source</h1><br /><br /><code style="user-select:text;"><pre>${o}</pre></code>`);const l=document.createElement("Button");l.innerHTML=`
<h1>Compilation error in ${s}</h1><br /><br />
<code style="user-select:text;"><pre>
${a}
</pre></code>`,l.style.top="10px",l.style.left="10px",l.style.position="absolute",l.style.zIndex="9999",l.style.width="100%",l.style.textAlign="left",document.body.appendChild(l),(u=document.getElementsByClassName("luma-compiler-log-error")[0])==null||u.scrollIntoView(),l.onclick=()=>{const f=`data:text/plain,${encodeURIComponent(this.source)}`;navigator.clipboard.writeText(f)}}};x(Ih,"defaultProps",{...ft.defaultProps,language:"auto",stage:void 0,source:"",sourceMap:null,entryPoint:"main",debugShaders:void 0});let lh=Ih;function JF(t){return ez(t.source)||t.id||Jp(`unnamed ${t.stage}-shader`)}function ez(t,e="unnamed"){const i=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/.exec(t);return i?i[1]:e}const Ph=class Ph extends ft{constructor(n,i={}){super(n,i,Ph.defaultProps);x(this,"width");x(this,"height");this.width=this.props.width,this.height=this.props.height}get[Symbol.toStringTag](){return"Framebuffer"}clone(n){const i=this.colorAttachments.map(s=>s.texture.clone(n)),r=this.depthStencilAttachment&&this.depthStencilAttachment.texture.clone(n);return this.device.createFramebuffer({...this.props,colorAttachments:i,depthStencilAttachment:r})}resize(n){let i=!n;if(n){const[r,s]=Array.isArray(n)?n:[n.width,n.height];i=i||s!==this.height||r!==this.width,this.width=r,this.height=s}i&&(ie.log(2,`Resizing framebuffer ${this.id} to ${this.width}x${this.height}`)(),this.resizeAttachments(this.width,this.height))}autoCreateAttachmentTextures(){if(this.props.colorAttachments.length===0&&!this.props.depthStencilAttachment)throw new Error("Framebuffer has noattachments");this.colorAttachments=this.props.colorAttachments.map((i,r)=>{if(typeof i=="string"){const s=this.createColorTexture(i,r);return this.attachResource(s),s.view}return i instanceof Jn?i.view:i});const n=this.props.depthStencilAttachment;if(n)if(typeof n=="string"){const i=this.createDepthStencilTexture(n);this.attachResource(i),this.depthStencilAttachment=i.view}else n instanceof Jn?this.depthStencilAttachment=n.view:this.depthStencilAttachment=n}createColorTexture(n,i){return this.device.createTexture({id:`${this.id}-color-attachment-${i}`,usage:Jn.RENDER_ATTACHMENT,format:n,width:this.width,height:this.height,sampler:{magFilter:"linear",minFilter:"linear"}})}createDepthStencilTexture(n){return this.device.createTexture({id:`${this.id}-depth-stencil-attachment`,usage:Jn.RENDER_ATTACHMENT,format:n,width:this.width,height:this.height})}resizeAttachments(n,i){for(let r=0;r<this.colorAttachments.length;++r)if(this.colorAttachments[r]){const s=this.colorAttachments[r].texture.clone({width:n,height:i});this.destroyAttachedResource(this.colorAttachments[r]),this.colorAttachments[r]=s.view,this.attachResource(s.view)}if(this.depthStencilAttachment){const r=this.depthStencilAttachment.texture.clone({width:n,height:i});this.destroyAttachedResource(this.depthStencilAttachment),this.depthStencilAttachment=r.view,this.attachResource(r)}this.updateAttachments()}};x(Ph,"defaultProps",{...ft.defaultProps,width:1,height:1,colorAttachments:[],depthStencilAttachment:null});let ch=Ph;const Dh=class Dh extends ft{constructor(n,i){super(n,i,Dh.defaultProps);x(this,"shaderLayout");x(this,"bufferLayout");x(this,"linkStatus","pending");x(this,"hash","");this.shaderLayout=this.props.shaderLayout,this.bufferLayout=this.props.bufferLayout||[]}get[Symbol.toStringTag](){return"RenderPipeline"}};x(Dh,"defaultProps",{...ft.defaultProps,vs:null,vertexEntryPoint:"vertexMain",vsConstants:{},fs:null,fragmentEntryPoint:"fragmentMain",fsConstants:{},shaderLayout:null,bufferLayout:[],topology:"triangle-list",colorAttachmentFormats:void 0,depthStencilAttachmentFormat:void 0,parameters:{},bindings:{},uniforms:{}});let _a=Dh;const $i=class $i extends ft{get[Symbol.toStringTag](){return"RenderPass"}constructor(e,n){n=$i.normalizeProps(e,n),super(e,n,$i.defaultProps)}static normalizeProps(e,n){return n}};x($i,"defaultClearColor",[0,0,0,1]),x($i,"defaultClearDepth",1),x($i,"defaultClearStencil",0),x($i,"defaultProps",{...ft.defaultProps,framebuffer:null,parameters:void 0,clearColor:$i.defaultClearColor,clearColors:void 0,clearDepth:$i.defaultClearDepth,clearStencil:$i.defaultClearStencil,depthReadOnly:!1,stencilReadOnly:!1,discard:!1,occlusionQuerySet:void 0,timestampQuerySet:void 0,beginTimestampIndex:void 0,endTimestampIndex:void 0});let b_=$i;const kh=class kh extends ft{constructor(n,i){super(n,i,kh.defaultProps);x(this,"hash","");x(this,"shaderLayout");this.shaderLayout=i.shaderLayout}get[Symbol.toStringTag](){return"ComputePipeline"}};x(kh,"defaultProps",{...ft.defaultProps,shader:void 0,entryPoint:void 0,constants:{},shaderLayout:void 0});let uh=kh;const Nh=class Nh extends ft{get[Symbol.toStringTag](){return"CommandEncoder"}constructor(e,n){super(e,n,Nh.defaultProps)}};x(Nh,"defaultProps",{...ft.defaultProps,measureExecutionTime:void 0});let v_=Nh;const Bh=class Bh extends ft{get[Symbol.toStringTag](){return"CommandBuffer"}constructor(e,n){super(e,n,Bh.defaultProps)}};x(Bh,"defaultProps",{...ft.defaultProps});let T_=Bh;function $C(t){return rz[t]}function tz(t){const[e,n]=iz[t],i=e==="i32"||e==="u32",r=e!=="u32",s=nz[e]*n;return{primitiveType:e,components:n,byteLength:s,integer:i,signed:r}}const nz={f32:4,f16:2,i32:4,u32:4},iz={f32:["f32",1],"vec2<f32>":["f32",2],"vec3<f32>":["f32",3],"vec4<f32>":["f32",4],f16:["f16",1],"vec2<f16>":["f16",2],"vec3<f16>":["f16",3],"vec4<f16>":["f16",4],i32:["i32",1],"vec2<i32>":["i32",2],"vec3<i32>":["i32",3],"vec4<i32>":["i32",4],u32:["u32",1],"vec2<u32>":["u32",2],"vec3<u32>":["u32",3],"vec4<u32>":["u32",4]},rz={f32:{type:"f32",components:1},f16:{type:"f16",components:1},i32:{type:"i32",components:1},u32:{type:"u32",components:1},"vec2<f32>":{type:"f32",components:2},"vec3<f32>":{type:"f32",components:3},"vec4<f32>":{type:"f32",components:4},"vec2<f16>":{type:"f16",components:2},"vec3<f16>":{type:"f16",components:3},"vec4<f16>":{type:"f16",components:4},"vec2<i32>":{type:"i32",components:2},"vec3<i32>":{type:"i32",components:3},"vec4<i32>":{type:"i32",components:4},"vec2<u32>":{type:"u32",components:2},"vec3<u32>":{type:"u32",components:3},"vec4<u32>":{type:"u32",components:4},"mat2x2<f32>":{type:"f32",components:4},"mat2x3<f32>":{type:"f32",components:6},"mat2x4<f32>":{type:"f32",components:8},"mat3x2<f32>":{type:"f32",components:6},"mat3x3<f32>":{type:"f32",components:9},"mat3x4<f32>":{type:"f32",components:12},"mat4x2<f32>":{type:"f32",components:8},"mat4x3<f32>":{type:"f32",components:12},"mat4x4<f32>":{type:"f32",components:16},"mat2x2<f16>":{type:"f16",components:4},"mat2x3<f16>":{type:"f16",components:6},"mat2x4<f16>":{type:"f16",components:8},"mat3x2<f16>":{type:"f16",components:6},"mat3x3<f16>":{type:"f16",components:9},"mat3x4<f16>":{type:"f16",components:12},"mat4x2<f16>":{type:"f16",components:8},"mat4x3<f16>":{type:"f16",components:12},"mat4x4<f16>":{type:"f16",components:16},"mat2x2<i32>":{type:"i32",components:4},"mat2x3<i32>":{type:"i32",components:6},"mat2x4<i32>":{type:"i32",components:8},"mat3x2<i32>":{type:"i32",components:6},"mat3x3<i32>":{type:"i32",components:9},"mat3x4<i32>":{type:"i32",components:12},"mat4x2<i32>":{type:"i32",components:8},"mat4x3<i32>":{type:"i32",components:12},"mat4x4<i32>":{type:"i32",components:16},"mat2x2<u32>":{type:"u32",components:4},"mat2x3<u32>":{type:"u32",components:6},"mat2x4<u32>":{type:"u32",components:8},"mat3x2<u32>":{type:"u32",components:6},"mat3x3<u32>":{type:"u32",components:9},"mat3x4<u32>":{type:"u32",components:12},"mat4x2<u32>":{type:"u32",components:8},"mat4x3<u32>":{type:"u32",components:12},"mat4x4<u32>":{type:"u32",components:16}};function jC(t,e){const n={};for(const i of t.attributes){const r=az(t,e,i.name);r&&(n[i.name]=r)}return n}function sz(t,e,n=16){const i=jC(t,e),r=new Array(n).fill(null);for(const s of Object.values(i))r[s.location]=s;return r}function az(t,e,n){const i=oz(t,n),r=lz(e,n);if(!i)return null;const s=tz(i.type),a=SF(s),o=(r==null?void 0:r.vertexFormat)||a,l=G0(o);return{attributeName:(r==null?void 0:r.attributeName)||i.name,bufferName:(r==null?void 0:r.bufferName)||i.name,location:i.location,shaderType:i.type,primitiveType:s.primitiveType,shaderComponents:s.components,vertexFormat:o,bufferDataType:l.type,bufferComponents:l.components,normalized:l.normalized,integer:s.integer,stepMode:(r==null?void 0:r.stepMode)||i.stepMode||"vertex",byteOffset:(r==null?void 0:r.byteOffset)||0,byteStride:(r==null?void 0:r.byteStride)||0}}function oz(t,e){const n=t.attributes.find(i=>i.name===e);return n||ie.warn(`shader layout attribute "${e}" not present in shader`),n||null}function lz(t,e){cz(t);let n=uz(t,e);return n||(n=fz(t,e),n)?n:(ie.warn(`layout for attribute "${e}" not present in buffer layout`),null)}function cz(t){for(const e of t)(e.attributes&&e.format||!e.attributes&&!e.format)&&ie.warn(`BufferLayout ${name} must have either 'attributes' or 'format' field`)}function uz(t,e){for(const n of t)if(n.format&&n.name===e)return{attributeName:n.name,bufferName:e,stepMode:n.stepMode,vertexFormat:n.format,byteOffset:0,byteStride:n.byteStride||0};return null}function fz(t,e){var n;for(const i of t){let r=i.byteStride;if(typeof i.byteStride!="number")for(const a of i.attributes||[]){const o=G0(a.format);r+=o.byteLength}const s=(n=i.attributes)==null?void 0:n.find(a=>a.attribute===e);if(s)return{attributeName:s.attribute,bufferName:i.name,stepMode:i.stepMode,vertexFormat:s.format,byteOffset:s.byteOffset,byteStride:r}}return null}const Lh=class Lh extends ft{constructor(n,i){super(n,i,Lh.defaultProps);x(this,"maxVertexAttributes");x(this,"attributeInfos");x(this,"indexBuffer",null);x(this,"attributes");this.maxVertexAttributes=n.limits.maxVertexAttributes,this.attributes=new Array(this.maxVertexAttributes).fill(null),this.attributeInfos=sz(i.shaderLayout,i.bufferLayout,this.maxVertexAttributes)}get[Symbol.toStringTag](){return"VertexArray"}setConstantWebGL(n,i){this.device.reportError(new Error("constant attributes not supported"),this)()}};x(Lh,"defaultProps",{...ft.defaultProps,shaderLayout:void 0,bufferLayout:[]});let x_=Lh;const Uh=class Uh extends ft{get[Symbol.toStringTag](){return"TransformFeedback"}constructor(e,n){super(e,n,Uh.defaultProps)}};x(Uh,"defaultProps",{...ft.defaultProps,layout:void 0,buffers:{}});let S_=Uh;const Fh=class Fh extends ft{get[Symbol.toStringTag](){return"QuerySet"}constructor(e,n){super(e,n,Fh.defaultProps)}};x(Fh,"defaultProps",{...ft.defaultProps,type:void 0,count:void 0});let w_=Fh,Rf;function HC(t){return(!Rf||Rf.byteLength<t)&&(Rf=new ArrayBuffer(t)),Rf}function dz(t,e){const n=HC(t.BYTES_PER_ELEMENT*e);return new t(n,0,e)}function hz(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function fh(t){return Array.isArray(t)?t.length===0||typeof t[0]=="number":hz(t)}const pz=1024;class gz{constructor(e,n={}){x(this,"layout",{});x(this,"byteLength");let i=0;for(const[s,a]of Object.entries(e)){const o=$C(a),{type:l,components:c}=o,u=c*((n==null?void 0:n[s])??1);i=vF(i,u);const f=i;i+=u,this.layout[s]={type:l,size:u,offset:f}}i+=(4-i%4)%4;const r=i*4;this.byteLength=Math.max(r,pz)}getData(e){const n=HC(this.byteLength),i={i32:new Int32Array(n),u32:new Uint32Array(n),f32:new Float32Array(n),f16:new Uint16Array(n)};for(const[r,s]of Object.entries(e)){const a=this.layout[r];if(!a){ie.warn(`Supplied uniform value ${r} not present in uniform block layout`)();continue}const{type:o,size:l,offset:c}=a,u=i[o];if(l===1){if(typeof s!="number"&&typeof s!="boolean"){ie.warn(`Supplied value for single component uniform ${r} is not a number: ${s}`)();continue}u[c]=Number(s)}else{if(!fh(s)){ie.warn(`Supplied value for multi component / array uniform ${r} is not a numeric array: ${s}`)();continue}u.set(s,c)}}return new Uint8Array(n,0,this.byteLength)}has(e){return!!this.layout[e]}get(e){return this.layout[e]}}function mz(t,e,n=16){if(t!==e)return!1;const i=t,r=e;if(!fh(i))return!1;if(fh(r)&&i.length===r.length){for(let s=0;s<i.length;++s)if(r[s]!==i[s])return!1}return!0}function yz(t){return fh(t)?t.slice():t}class _z{constructor(e){x(this,"name");x(this,"uniforms",{});x(this,"modifiedUniforms",{});x(this,"modified",!0);x(this,"bindingLayout",{});x(this,"needsRedraw","initialized");var n;if(this.name=(e==null?void 0:e.name)||"unnamed",e!=null&&e.name&&(e!=null&&e.shaderLayout)){const i=(n=e==null?void 0:e.shaderLayout.bindings)==null?void 0:n.find(s=>s.type==="uniform"&&s.name===(e==null?void 0:e.name));if(!i)throw new Error(e==null?void 0:e.name);const r=i;for(const s of r.uniforms||[])this.bindingLayout[s.name]=s}}setUniforms(e){for(const[n,i]of Object.entries(e))this._setUniform(n,i),this.needsRedraw||this.setNeedsRedraw(`${this.name}.${n}=${i}`)}setNeedsRedraw(e){this.needsRedraw=this.needsRedraw||e}getAllUniforms(){return this.modifiedUniforms={},this.needsRedraw=!1,this.uniforms||{}}_setUniform(e,n){mz(this.uniforms[e],n)||(this.uniforms[e]=yz(n),this.modifiedUniforms[e]=!0,this.modified=!0)}}class bz{constructor(e){x(this,"uniformBlocks",new Map);x(this,"uniformBufferLayouts",new Map);x(this,"uniformBuffers",new Map);for(const[n,i]of Object.entries(e)){const r=n,s=new gz(i.uniformTypes??{},i.uniformSizes??{});this.uniformBufferLayouts.set(r,s);const a=new _z({name:n});a.setUniforms(i.defaultUniforms||{}),this.uniformBlocks.set(r,a)}}destroy(){for(const e of this.uniformBuffers.values())e.destroy()}setUniforms(e){var n;for(const[i,r]of Object.entries(e))(n=this.uniformBlocks.get(i))==null||n.setUniforms(r);this.updateUniformBuffers()}getUniformBufferByteLength(e){var n;return((n=this.uniformBufferLayouts.get(e))==null?void 0:n.byteLength)||0}getUniformBufferData(e){var i,r;const n=((i=this.uniformBlocks.get(e))==null?void 0:i.getAllUniforms())||{};return(r=this.uniformBufferLayouts.get(e))==null?void 0:r.getData(n)}createUniformBuffer(e,n,i){i&&this.setUniforms(i);const r=this.getUniformBufferByteLength(n),s=e.createBuffer({usage:It.UNIFORM|It.COPY_DST,byteLength:r}),a=this.getUniformBufferData(n);return s.write(a),s}getManagedUniformBuffer(e,n){if(!this.uniformBuffers.get(n)){const i=this.getUniformBufferByteLength(n),r=e.createBuffer({usage:It.UNIFORM|It.COPY_DST,byteLength:i});this.uniformBuffers.set(n,r)}return this.uniformBuffers.get(n)}updateUniformBuffers(){let e=!1;for(const n of this.uniformBlocks.keys()){const i=this.updateUniformBuffer(n);e||(e=i)}return e&&ie.log(3,`UniformStore.updateUniformBuffers(): ${e}`)(),e}updateUniformBuffer(e){var s;const n=this.uniformBlocks.get(e);let i=this.uniformBuffers.get(e),r=!1;if(i&&(n!=null&&n.needsRedraw)){r||(r=n.needsRedraw);const a=this.getUniformBufferData(e);i=this.uniformBuffers.get(e),i==null||i.write(a);const o=(s=this.uniformBlocks.get(e))==null?void 0:s.getAllUniforms();ie.log(4,`Writing to uniform buffer ${String(e)}`,a,o)()}return r}}class Ci{constructor(e,n){this.name=e,this.attributes=n,this.size=0}get isArray(){return!1}get isStruct(){return!1}get isTemplate(){return!1}get isPointer(){return!1}getTypeName(){return this.name}}class J3{constructor(e,n,i){this.name=e,this.type=n,this.attributes=i,this.offset=0,this.size=0}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray||this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class ys extends Ci{constructor(e,n){super(e,n),this.members=[],this.align=0,this.startLine=-1,this.endLine=-1,this.inUse=!1}get isStruct(){return!0}}class Ms extends Ci{constructor(e,n){super(e,n),this.count=0,this.stride=0}get isArray(){return!0}getTypeName(){return`array<${this.format.getTypeName()}, ${this.count}>`}}class A_ extends Ci{constructor(e,n,i){super(e,i),this.format=n}get isPointer(){return!0}getTypeName(){return`&${this.format.getTypeName()}`}}class Pa extends Ci{constructor(e,n,i,r){super(e,i),this.format=n,this.access=r}get isTemplate(){return!0}getTypeName(){let e=this.name;if(this.format!==null){if(e==="vec2"||e==="vec3"||e==="vec4"||e==="mat2x2"||e==="mat2x3"||e==="mat2x4"||e==="mat3x2"||e==="mat3x3"||e==="mat3x4"||e==="mat4x2"||e==="mat4x3"||e==="mat4x4"){if(this.format.name==="f32")return e+="f",e;if(this.format.name==="i32")return e+="i",e;if(this.format.name==="u32")return e+="u",e;if(this.format.name==="bool")return e+="b",e;if(this.format.name==="f16")return e+="h",e}e+=`<${this.format.name}>`}else if(e==="vec2"||e==="vec3"||e==="vec4")return e;return e}}var ss;(t=>{t[t.Uniform=0]="Uniform",t[t.Storage=1]="Storage",t[t.Texture=2]="Texture",t[t.Sampler=3]="Sampler",t[t.StorageTexture=4]="StorageTexture"})(ss||(ss={}));class Mf{constructor(e,n,i,r,s,a,o){this.name=e,this.type=n,this.group=i,this.binding=r,this.attributes=s,this.resourceType=a,this.access=o}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get size(){return this.type.size}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray||this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class vz{constructor(e,n){this.name=e,this.type=n}}class Tz{constructor(e,n,i,r){this.name=e,this.type=n,this.locationType=i,this.location=r,this.interpolation=null}}class eT{constructor(e,n,i,r){this.name=e,this.type=n,this.locationType=i,this.location=r}}class xz{constructor(e,n,i,r){this.name=e,this.type=n,this.attributes=i,this.id=r}}class Sz{constructor(e,n,i){this.name=e,this.type=n,this.attributes=i}}class wz{constructor(e,n=null,i){this.stage=null,this.inputs=[],this.outputs=[],this.arguments=[],this.returnType=null,this.resources=[],this.overrides=[],this.startLine=-1,this.endLine=-1,this.inUse=!1,this.calls=new Set,this.name=e,this.stage=n,this.attributes=i}}class Az{constructor(){this.vertex=[],this.fragment=[],this.compute=[]}}function Ez(t){var e=(32768&t)>>15,n=(31744&t)>>10,i=1023&t;return n==0?(e?-1:1)*Math.pow(2,-14)*(i/Math.pow(2,10)):n==31?i?NaN:1/0*(e?-1:1):(e?-1:1)*Math.pow(2,n-15)*(1+i/Math.pow(2,10))}const WC=new Float32Array(1),Cz=new Int32Array(WC.buffer),Sn=new Uint16Array(1);function Rz(t){WC[0]=t;const e=Cz[0],n=e>>31&1;let i=e>>23&255,r=8388607&e;if(i===255)return Sn[0]=n<<15|31744|(r!==0?512:0),Sn[0];if(i===0){if(r===0)return Sn[0]=n<<15,Sn[0];r|=8388608;let s=113;for(;!(8388608&r);)r<<=1,s--;return i=127-s,r&=8388607,i>0?(r=(r>>126-i)+(r>>127-i&1),Sn[0]=n<<15|i<<10|r>>13,Sn[0]):(Sn[0]=n<<15,Sn[0])}return i=i-127+15,i>=31?(Sn[0]=n<<15|31744,Sn[0]):i<=0?i<-10?(Sn[0]=n<<15,Sn[0]):(r=(8388608|r)>>1-i,Sn[0]=n<<15|r>>13,Sn[0]):(r>>=13,Sn[0]=n<<15|i<<10|r,Sn[0])}const Q0=new Uint32Array(1),YC=new Float32Array(Q0.buffer,0,1);function tT(t){const e=112+(t>>6&31)<<23|(63&t)<<17;return Q0[0]=e,YC[0]}function Mz(t,e,n,i,r,s,a,o,l){const c=i*(a>>=r)*(s>>=r)+n*a+e*o;switch(l){case"r8unorm":return[Ye(t,c,"8unorm",1)[0]];case"r8snorm":return[Ye(t,c,"8snorm",1)[0]];case"r8uint":return[Ye(t,c,"8uint",1)[0]];case"r8sint":return[Ye(t,c,"8sint",1)[0]];case"rg8unorm":{const u=Ye(t,c,"8unorm",2);return[u[0],u[1]]}case"rg8snorm":{const u=Ye(t,c,"8snorm",2);return[u[0],u[1]]}case"rg8uint":{const u=Ye(t,c,"8uint",2);return[u[0],u[1]]}case"rg8sint":{const u=Ye(t,c,"8sint",2);return[u[0],u[1]]}case"rgba8unorm-srgb":case"rgba8unorm":{const u=Ye(t,c,"8unorm",4);return[u[0],u[1],u[2],u[3]]}case"rgba8snorm":{const u=Ye(t,c,"8snorm",4);return[u[0],u[1],u[2],u[3]]}case"rgba8uint":{const u=Ye(t,c,"8uint",4);return[u[0],u[1],u[2],u[3]]}case"rgba8sint":{const u=Ye(t,c,"8sint",4);return[u[0],u[1],u[2],u[3]]}case"bgra8unorm-srgb":case"bgra8unorm":{const u=Ye(t,c,"8unorm",4);return[u[2],u[1],u[0],u[3]]}case"r16uint":return[Ye(t,c,"16uint",1)[0]];case"r16sint":return[Ye(t,c,"16sint",1)[0]];case"r16float":return[Ye(t,c,"16float",1)[0]];case"rg16uint":{const u=Ye(t,c,"16uint",2);return[u[0],u[1]]}case"rg16sint":{const u=Ye(t,c,"16sint",2);return[u[0],u[1]]}case"rg16float":{const u=Ye(t,c,"16float",2);return[u[0],u[1]]}case"rgba16uint":{const u=Ye(t,c,"16uint",4);return[u[0],u[1],u[2],u[3]]}case"rgba16sint":{const u=Ye(t,c,"16sint",4);return[u[0],u[1],u[2],u[3]]}case"rgba16float":{const u=Ye(t,c,"16float",4);return[u[0],u[1],u[2],u[3]]}case"r32uint":return[Ye(t,c,"32uint",1)[0]];case"r32sint":return[Ye(t,c,"32sint",1)[0]];case"depth16unorm":case"depth24plus":case"depth24plus-stencil8":case"depth32float":case"depth32float-stencil8":case"r32float":return[Ye(t,c,"32float",1)[0]];case"rg32uint":{const u=Ye(t,c,"32uint",2);return[u[0],u[1]]}case"rg32sint":{const u=Ye(t,c,"32sint",2);return[u[0],u[1]]}case"rg32float":{const u=Ye(t,c,"32float",2);return[u[0],u[1]]}case"rgba32uint":{const u=Ye(t,c,"32uint",4);return[u[0],u[1],u[2],u[3]]}case"rgba32sint":{const u=Ye(t,c,"32sint",4);return[u[0],u[1],u[2],u[3]]}case"rgba32float":{const u=Ye(t,c,"32float",4);return[u[0],u[1],u[2],u[3]]}case"rg11b10ufloat":{const u=new Uint32Array(t.buffer,c,1)[0],f=(4192256&u)>>11,d=(4290772992&u)>>22;return[tT(2047&u),tT(f),function(p){const m=112+(p>>5&31)<<23|(31&p)<<18;return Q0[0]=m,YC[0]}(d),1]}}return null}function Ye(t,e,n,i){const r=[0,0,0,0];for(let s=0;s<i;++s)switch(n){case"8unorm":r[s]=t[e]/255,e++;break;case"8snorm":r[s]=t[e]/255*2-1,e++;break;case"8uint":r[s]=t[e],e++;break;case"8sint":r[s]=t[e]-127,e++;break;case"16uint":r[s]=t[e]|t[e+1]<<8,e+=2;break;case"16sint":r[s]=(t[e]|t[e+1]<<8)-32768,e+=2;break;case"16float":r[s]=Ez(t[e]|t[e+1]<<8),e+=2;break;case"32uint":case"32sint":r[s]=t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24,e+=4;break;case"32float":r[s]=new Float32Array(t.buffer,e,1)[0],e+=4}return r}function Je(t,e,n,i,r){for(let s=0;s<i;++s)switch(n){case"8unorm":t[e]=255*r[s],e++;break;case"8snorm":t[e]=.5*(r[s]+1)*255,e++;break;case"8uint":t[e]=r[s],e++;break;case"8sint":t[e]=r[s]+127,e++;break;case"16uint":new Uint16Array(t.buffer,e,1)[0]=r[s],e+=2;break;case"16sint":new Int16Array(t.buffer,e,1)[0]=r[s],e+=2;break;case"16float":{const a=Rz(r[s]);new Uint16Array(t.buffer,e,1)[0]=a,e+=2;break}case"32uint":new Uint32Array(t.buffer,e,1)[0]=r[s],e+=4;break;case"32sint":new Int32Array(t.buffer,e,1)[0]=r[s],e+=4;break;case"32float":new Float32Array(t.buffer,e,1)[0]=r[s],e+=4}return r}const Cm={r8unorm:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r8snorm:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r8uint:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r8sint:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},rg8unorm:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg8snorm:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg8uint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg8sint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rgba8unorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},"rgba8unorm-srgb":{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba8snorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba8uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba8sint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},bgra8unorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},"bgra8unorm-srgb":{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},r16uint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r16sint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r16float:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},rg16uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg16sint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg16float:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rgba16uint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba16sint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba16float:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},r32uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r32sint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r32float:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},rg32uint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg32sint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg32float:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rgba32uint:{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba32sint:{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba32float:{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgb10a2uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgb10a2unorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rg11b10ufloat:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},stencil8:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!1,hasStencil:!0,channels:1},depth16unorm:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!1,channels:1},depth24plus:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!1,depthOnlyFormat:"depth32float",channels:1},"depth24plus-stencil8":{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!0,depthOnlyFormat:"depth32float",channels:1},depth32float:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!1,channels:1},"depth32float-stencil8":{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!0,stencilOnlyFormat:"depth32float",channels:1},rgb9e5ufloat:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},"bc1-rgba-unorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc1-rgba-unorm-srgb":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc2-rgba-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc2-rgba-unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc3-rgba-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc3-rgba-unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc4-r-unorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:1},"bc4-r-snorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:1},"bc5-rg-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:2},"bc5-rg-snorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:2},"bc6h-rgb-ufloat":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc6h-rgb-float":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc7-rgba-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc7-rgba-unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgb8unorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgb8unorm-srgb":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgb8a1unorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgb8a1unorm-srgb":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgba8unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgba8unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"eac-r11unorm":{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!0,channels:1},"eac-r11snorm":{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!0,channels:1},"eac-rg11unorm":{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!0,channels:2},"eac-rg11snorm":{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!0,channels:2},"astc-4x4-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"astc-4x4-unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"astc-5x4-unorm":{bytesPerBlock:16,blockWidth:5,blockHeight:4,isCompressed:!0,channels:4},"astc-5x4-unorm-srgb":{bytesPerBlock:16,blockWidth:5,blockHeight:4,isCompressed:!0,channels:4},"astc-5x5-unorm":{bytesPerBlock:16,blockWidth:5,blockHeight:5,isCompressed:!0,channels:4},"astc-5x5-unorm-srgb":{bytesPerBlock:16,blockWidth:5,blockHeight:5,isCompressed:!0,channels:4},"astc-6x5-unorm":{bytesPerBlock:16,blockWidth:6,blockHeight:5,isCompressed:!0,channels:4},"astc-6x5-unorm-srgb":{bytesPerBlock:16,blockWidth:6,blockHeight:5,isCompressed:!0,channels:4},"astc-6x6-unorm":{bytesPerBlock:16,blockWidth:6,blockHeight:6,isCompressed:!0,channels:4},"astc-6x6-unorm-srgb":{bytesPerBlock:16,blockWidth:6,blockHeight:6,isCompressed:!0,channels:4},"astc-8x5-unorm":{bytesPerBlock:16,blockWidth:8,blockHeight:5,isCompressed:!0,channels:4},"astc-8x5-unorm-srgb":{bytesPerBlock:16,blockWidth:8,blockHeight:5,isCompressed:!0,channels:4},"astc-8x6-unorm":{bytesPerBlock:16,blockWidth:8,blockHeight:6,isCompressed:!0,channels:4},"astc-8x6-unorm-srgb":{bytesPerBlock:16,blockWidth:8,blockHeight:6,isCompressed:!0,channels:4},"astc-8x8-unorm":{bytesPerBlock:16,blockWidth:8,blockHeight:8,isCompressed:!0,channels:4},"astc-8x8-unorm-srgb":{bytesPerBlock:16,blockWidth:8,blockHeight:8,isCompressed:!0,channels:4},"astc-10x5-unorm":{bytesPerBlock:16,blockWidth:10,blockHeight:5,isCompressed:!0,channels:4},"astc-10x5-unorm-srgb":{bytesPerBlock:16,blockWidth:10,blockHeight:5,isCompressed:!0,channels:4},"astc-10x6-unorm":{bytesPerBlock:16,blockWidth:10,blockHeight:6,isCompressed:!0,channels:4},"astc-10x6-unorm-srgb":{bytesPerBlock:16,blockWidth:10,blockHeight:6,isCompressed:!0,channels:4},"astc-10x8-unorm":{bytesPerBlock:16,blockWidth:10,blockHeight:8,isCompressed:!0,channels:4},"astc-10x8-unorm-srgb":{bytesPerBlock:16,blockWidth:10,blockHeight:8,isCompressed:!0,channels:4},"astc-10x10-unorm":{bytesPerBlock:16,blockWidth:10,blockHeight:10,isCompressed:!0,channels:4},"astc-10x10-unorm-srgb":{bytesPerBlock:16,blockWidth:10,blockHeight:10,isCompressed:!0,channels:4},"astc-12x10-unorm":{bytesPerBlock:16,blockWidth:12,blockHeight:10,isCompressed:!0,channels:4},"astc-12x10-unorm-srgb":{bytesPerBlock:16,blockWidth:12,blockHeight:10,isCompressed:!0,channels:4},"astc-12x12-unorm":{bytesPerBlock:16,blockWidth:12,blockHeight:12,isCompressed:!0,channels:4},"astc-12x12-unorm-srgb":{bytesPerBlock:16,blockWidth:12,blockHeight:12,isCompressed:!0,channels:4}};class Ni{constructor(){this.id=Ni._id++,this.line=0}get isAstNode(){return!0}get astNodeType(){return""}search(e){e(this)}searchBlock(e,n){if(e){n(dh.instance);for(const i of e)i instanceof Array?this.searchBlock(i,n):i.search(n);n(hh.instance)}}constEvaluate(e,n){throw new Error("Cannot evaluate node")}constEvaluateString(e){return this.constEvaluate(e).toString()}}Ni._id=0;class dh extends Ni{}dh.instance=new dh;class hh extends Ni{}hh.instance=new hh;const XC=new Set(["all","all","any","select","arrayLength","abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","clamp","cos","cosh","countLeadingZeros","countOneBits","countTrailingZeros","cross","degrees","determinant","distance","dot","dot4U8Packed","dot4I8Packed","exp","exp2","extractBits","faceForward","firstLeadingBit","firstTrailingBit","floor","fma","fract","frexp","insertBits","inverseSqrt","ldexp","length","log","log2","max","min","mix","modf","normalize","pow","quantizeToF16","radians","reflect","refract","reverseBits","round","saturate","sign","sin","sinh","smoothStep","sqrt","step","tan","tanh","transpose","trunc","dpdx","dpdxCoarse","dpdxFine","dpdy","dpdyCoarse","dpdyFine","fwidth","fwidthCoarse","fwidthFine","textureDimensions","textureGather","textureGatherCompare","textureLoad","textureNumLayers","textureNumLevels","textureNumSamples","textureSample","textureSampleBias","textureSampleCompare","textureSampleCompareLevel","textureSampleGrad","textureSampleLevel","textureSampleBaseClampToEdge","textureStore","atomicLoad","atomicStore","atomicAdd","atomicSub","atomicMax","atomicMin","atomicAnd","atomicOr","atomicXor","atomicExchange","atomicCompareExchangeWeak","pack4x8snorm","pack4x8unorm","pack4xI8","pack4xU8","pack4x8Clamp","pack4xU8Clamp","pack2x16snorm","pack2x16unorm","pack2x16float","unpack4x8snorm","unpack4x8unorm","unpack4xI8","unpack4xU8","unpack2x16snorm","unpack2x16unorm","unpack2x16float","storageBarrier","textureBarrier","workgroupBarrier","workgroupUniformLoad","subgroupAdd","subgroupExclusiveAdd","subgroupInclusiveAdd","subgroupAll","subgroupAnd","subgroupAny","subgroupBallot","subgroupBroadcast","subgroupBroadcastFirst","subgroupElect","subgroupMax","subgroupMin","subgroupMul","subgroupExclusiveMul","subgroupInclusiveMul","subgroupOr","subgroupShuffle","subgroupShuffleDown","subgroupShuffleUp","subgroupShuffleXor","subgroupXor","quadBroadcast","quadSwapDiagonal","quadSwapX","quadSwapY"]);class Rt extends Ni{constructor(){super()}}class au extends Rt{constructor(e,n,i,r,s,a){super(),this.calls=new Set,this.name=e,this.args=n,this.returnType=i,this.body=r,this.startLine=s,this.endLine=a}get astNodeType(){return"function"}search(e){if(this.attributes)for(const n of this.attributes)e(n);e(this);for(const n of this.args)e(n);this.searchBlock(this.body,e)}}class Oz extends Rt{constructor(e){super(),this.expression=e}get astNodeType(){return"staticAssert"}search(e){this.expression.search(e)}}class qC extends Rt{constructor(e,n){super(),this.condition=e,this.body=n}get astNodeType(){return"while"}search(e){this.condition.search(e),this.searchBlock(this.body,e)}}class E_ extends Rt{constructor(e,n){super(),this.body=e,this.loopId=n}get astNodeType(){return"continuing"}search(e){this.searchBlock(this.body,e)}}class KC extends Rt{constructor(e,n,i,r){super(),this.init=e,this.condition=n,this.increment=i,this.body=r}get astNodeType(){return"for"}search(e){var n,i,r;(n=this.init)===null||n===void 0||n.search(e),(i=this.condition)===null||i===void 0||i.search(e),(r=this.increment)===null||r===void 0||r.search(e),this.searchBlock(this.body,e)}}class Pr extends Rt{constructor(e,n,i,r,s){super(),this.attributes=null,this.name=e,this.type=n,this.storage=i,this.access=r,this.value=s}get astNodeType(){return"var"}search(e){var n;e(this),(n=this.value)===null||n===void 0||n.search(e)}}class J0 extends Rt{constructor(e,n,i){super(),this.attributes=null,this.name=e,this.type=n,this.value=i}get astNodeType(){return"override"}search(e){var n;(n=this.value)===null||n===void 0||n.search(e)}}class Rc extends Rt{constructor(e,n,i,r,s){super(),this.attributes=null,this.name=e,this.type=n,this.storage=i,this.access=r,this.value=s}get astNodeType(){return"let"}search(e){var n;e(this),(n=this.value)===null||n===void 0||n.search(e)}}class cd extends Rt{constructor(e,n,i,r,s){super(),this.attributes=null,this.name=e,this.type=n,this.storage=i,this.access=r,this.value=s}get astNodeType(){return"const"}constEvaluate(e,n){return this.value.constEvaluate(e,n)}search(e){var n;e(this),(n=this.value)===null||n===void 0||n.search(e)}}var Co,sc,q,H;(t=>{t.increment="++",t.decrement="--"})(Co||(Co={})),(t=>{t.parse=function(e){const n=e;if(n=="parse")throw new Error("Invalid value for IncrementOperator");return t[n]}})(Co||(Co={}));class ZC extends Rt{constructor(e,n){super(),this.operator=e,this.variable=n}get astNodeType(){return"increment"}search(e){this.variable.search(e)}}(t=>{t.assign="=",t.addAssign="+=",t.subtractAssin="-=",t.multiplyAssign="*=",t.divideAssign="/=",t.moduloAssign="%=",t.andAssign="&=",t.orAssign="|=",t.xorAssign="^=",t.shiftLeftAssign="<<=",t.shiftRightAssign=">>="})(sc||(sc={})),(t=>{t.parse=function(e){const n=e;if(n=="parse")throw new Error("Invalid value for AssignOperator");return n}})(sc||(sc={}));class GC extends Rt{constructor(e,n,i){super(),this.operator=e,this.variable=n,this.value=i}get astNodeType(){return"assign"}search(e){this.variable.search(e),this.value.search(e)}}class ev extends Rt{constructor(e,n){super(),this.name=e,this.args=n}get astNodeType(){return"call"}isBuiltin(){return XC.has(this.name)}search(e){for(const n of this.args)n.search(e);e(this)}}class QC extends Rt{constructor(e,n){super(),this.body=e,this.continuing=n}get astNodeType(){return"loop"}search(e){var n;this.searchBlock(this.body,e),(n=this.continuing)===null||n===void 0||n.search(e)}}class JC extends Rt{constructor(e,n){super(),this.condition=e,this.cases=n}get astNodeType(){return"switch"}search(e){e(this);for(const n of this.cases)n.search(e)}}class eR extends Rt{constructor(e,n,i,r){super(),this.condition=e,this.body=n,this.elseif=i,this.else=r}get astNodeType(){return"if"}search(e){this.condition.search(e),this.searchBlock(this.body,e),this.searchBlock(this.elseif,e),this.searchBlock(this.else,e)}}class tR extends Rt{constructor(e){super(),this.value=e}get astNodeType(){return"return"}search(e){var n;(n=this.value)===null||n===void 0||n.search(e)}}class Iz extends Rt{constructor(e){super(),this.name=e}get astNodeType(){return"enable"}}class Pz extends Rt{constructor(e){super(),this.extensions=e}get astNodeType(){return"requires"}}class nR extends Rt{constructor(e,n){super(),this.severity=e,this.rule=n}get astNodeType(){return"diagnostic"}}class tv extends Rt{constructor(e,n){super(),this.name=e,this.type=n}get astNodeType(){return"alias"}}class Dz extends Rt{constructor(){super()}get astNodeType(){return"discard"}}class iR extends Rt{constructor(){super(),this.condition=null,this.loopId=-1}get astNodeType(){return"break"}}class rR extends Rt{constructor(){super(),this.loopId=-1}get astNodeType(){return"continue"}}class te extends Rt{constructor(e){super(),this.attributes=null,this.name=e}get astNodeType(){return"type"}get isStruct(){return!1}get isArray(){return!1}static maxFormatType(e){let n=e[0];if(n.name==="f32")return n;for(let i=1;i<e.length;++i){const r=te._priority.get(n.name);te._priority.get(e[i].name)<r&&(n=e[i])}return n.name==="x32"?te.i32:n}getTypeName(){return this.name}}te.x32=new te("x32"),te.f32=new te("f32"),te.i32=new te("i32"),te.u32=new te("u32"),te.f16=new te("f16"),te.bool=new te("bool"),te.void=new te("void"),te._priority=new Map([["f32",0],["f16",1],["u32",2],["i32",3],["x32",3]]);class nT extends te{constructor(e){super(e)}}class Mr extends te{constructor(e,n,i,r){super(e),this.members=n,this.startLine=i,this.endLine=r}get astNodeType(){return"struct"}get isStruct(){return!0}getMemberIndex(e){for(let n=0;n<this.members.length;n++)if(this.members[n].name==e)return n;return-1}search(e){for(const n of this.members)e(n)}}class X extends te{constructor(e,n,i){super(e),this.format=n,this.access=i}get astNodeType(){return"template"}getTypeName(){let e=this.name;if(this.format!==null){if(e==="vec2"||e==="vec3"||e==="vec4"||e==="mat2x2"||e==="mat2x3"||e==="mat2x4"||e==="mat3x2"||e==="mat3x3"||e==="mat3x4"||e==="mat4x2"||e==="mat4x3"||e==="mat4x4"){if(this.format.name==="f32")return e+="f",e;if(this.format.name==="i32")return e+="i",e;if(this.format.name==="u32")return e+="u",e;if(this.format.name==="bool")return e+="b",e;if(this.format.name==="f16")return e+="h",e}e+=`<${this.format.name}>`}else if(e==="vec2"||e==="vec3"||e==="vec4")return e;return e}}X.vec2f=new X("vec2",te.f32,null),X.vec3f=new X("vec3",te.f32,null),X.vec4f=new X("vec4",te.f32,null),X.vec2i=new X("vec2",te.i32,null),X.vec3i=new X("vec3",te.i32,null),X.vec4i=new X("vec4",te.i32,null),X.vec2u=new X("vec2",te.u32,null),X.vec3u=new X("vec3",te.u32,null),X.vec4u=new X("vec4",te.u32,null),X.vec2h=new X("vec2",te.f16,null),X.vec3h=new X("vec3",te.f16,null),X.vec4h=new X("vec4",te.f16,null),X.vec2b=new X("vec2",te.bool,null),X.vec3b=new X("vec3",te.bool,null),X.vec4b=new X("vec4",te.bool,null),X.mat2x2f=new X("mat2x2",te.f32,null),X.mat2x3f=new X("mat2x3",te.f32,null),X.mat2x4f=new X("mat2x4",te.f32,null),X.mat3x2f=new X("mat3x2",te.f32,null),X.mat3x3f=new X("mat3x3",te.f32,null),X.mat3x4f=new X("mat3x4",te.f32,null),X.mat4x2f=new X("mat4x2",te.f32,null),X.mat4x3f=new X("mat4x3",te.f32,null),X.mat4x4f=new X("mat4x4",te.f32,null),X.mat2x2h=new X("mat2x2",te.f16,null),X.mat2x3h=new X("mat2x3",te.f16,null),X.mat2x4h=new X("mat2x4",te.f16,null),X.mat3x2h=new X("mat3x2",te.f16,null),X.mat3x3h=new X("mat3x3",te.f16,null),X.mat3x4h=new X("mat3x4",te.f16,null),X.mat4x2h=new X("mat4x2",te.f16,null),X.mat4x3h=new X("mat4x3",te.f16,null),X.mat4x4h=new X("mat4x4",te.f16,null),X.mat2x2i=new X("mat2x2",te.i32,null),X.mat2x3i=new X("mat2x3",te.i32,null),X.mat2x4i=new X("mat2x4",te.i32,null),X.mat3x2i=new X("mat3x2",te.i32,null),X.mat3x3i=new X("mat3x3",te.i32,null),X.mat3x4i=new X("mat3x4",te.i32,null),X.mat4x2i=new X("mat4x2",te.i32,null),X.mat4x3i=new X("mat4x3",te.i32,null),X.mat4x4i=new X("mat4x4",te.i32,null),X.mat2x2u=new X("mat2x2",te.u32,null),X.mat2x3u=new X("mat2x3",te.u32,null),X.mat2x4u=new X("mat2x4",te.u32,null),X.mat3x2u=new X("mat3x2",te.u32,null),X.mat3x3u=new X("mat3x3",te.u32,null),X.mat3x4u=new X("mat3x4",te.u32,null),X.mat4x2u=new X("mat4x2",te.u32,null),X.mat4x3u=new X("mat4x3",te.u32,null),X.mat4x4u=new X("mat4x4",te.u32,null);class ud extends te{constructor(e,n,i,r){super(e),this.storage=n,this.type=i,this.access=r}get astNodeType(){return"pointer"}}class Mc extends te{constructor(e,n,i,r){super(e),this.attributes=n,this.format=i,this.count=r}get astNodeType(){return"array"}get isArray(){return!0}}class ac extends te{constructor(e,n,i){super(e),this.format=n,this.access=i}get astNodeType(){return"sampler"}}class Xi extends Ni{constructor(){super(),this.postfix=null}}class Da extends Xi{constructor(e){super(),this.value=e}get astNodeType(){return"stringExpr"}toString(){return this.value}constEvaluateString(){return this.value}}class Ji extends Xi{constructor(e,n){super(),this.type=e,this.args=n}get astNodeType(){return"createExpr"}search(e){if(e(this),this.args)for(const n of this.args)n.search(e)}constEvaluate(e,n){return n&&(n[0]=this.type),e.evalExpression(this,e.context)}}class nv extends Xi{constructor(e,n){super(),this.cachedReturnValue=null,this.name=e,this.args=n}get astNodeType(){return"callExpr"}setCachedReturnValue(e){this.cachedReturnValue=e}get isBuiltin(){return XC.has(this.name)}constEvaluate(e,n){return e.evalExpression(this,e.context)}search(e){for(const n of this.args)n.search(e);e(this)}}class Kn extends Xi{constructor(e){super(),this.name=e}get astNodeType(){return"varExpr"}search(e){e(this),this.postfix&&this.postfix.search(e)}constEvaluate(e,n){return e.evalExpression(this,e.context)}}class sR extends Xi{constructor(e,n){super(),this.name=e,this.initializer=n}get astNodeType(){return"constExpr"}constEvaluate(e,n){if(this.initializer){const i=e.evalExpression(this.initializer,e.context);return i!==null&&this.postfix?i.getSubData(e,this.postfix,e.context):i}return null}search(e){this.initializer.search(e)}}class rn extends Xi{constructor(e,n){super(),this.value=e,this.type=n}get astNodeType(){return"literalExpr"}constEvaluate(e,n){return n!==void 0&&(n[0]=this.type),this.value}get isScalar(){return this.value instanceof V}get isVector(){return this.value instanceof O||this.value instanceof ve}get scalarValue(){return this.value instanceof V?this.value.value:(console.error("Value is not scalar."),0)}get vectorValue(){return this.value instanceof O||this.value instanceof ve?this.value.data:(console.error("Value is not a vector or matrix."),new Float32Array(0))}}class aR extends Xi{constructor(e,n){super(),this.type=e,this.value=n}get astNodeType(){return"bitcastExpr"}search(e){this.value.search(e)}}class al extends Xi{constructor(e){super(),this.index=e}search(e){this.index.search(e)}}class oR extends Xi{constructor(){super()}}class qt extends oR{constructor(e,n){super(),this.operator=e,this.right=n}get astNodeType(){return"unaryOp"}constEvaluate(e,n){return e.evalExpression(this,e.context)}search(e){this.right.search(e)}}class Vi extends oR{constructor(e,n,i){super(),this.operator=e,this.left=n,this.right=i}get astNodeType(){return"binaryOp"}_getPromotedType(e,n){return e.name===n.name?e:e.name==="f32"||n.name==="f32"?te.f32:e.name==="u32"||n.name==="u32"?te.u32:te.i32}constEvaluate(e,n){return e.evalExpression(this,e.context)}search(e){this.left.search(e),this.right.search(e)}}class lR extends Ni{constructor(e){super(),this.body=e}search(e){e(this),this.searchBlock(this.body,e)}}class fd extends Xi{constructor(){super()}get astNodeType(){return"default"}}class cR extends lR{constructor(e,n){super(n),this.selectors=e}get astNodeType(){return"case"}search(e){this.searchBlock(this.body,e)}}class uR extends lR{constructor(e){super(e)}get astNodeType(){return"default"}search(e){this.searchBlock(this.body,e)}}class iT extends Ni{constructor(e,n,i){super(),this.name=e,this.type=n,this.attributes=i}get astNodeType(){return"argument"}}class kz extends Ni{constructor(e,n){super(),this.condition=e,this.body=n}get astNodeType(){return"elseif"}search(e){this.condition.search(e),this.searchBlock(this.body,e)}}class rT extends Ni{constructor(e,n,i){super(),this.name=e,this.type=n,this.attributes=i}get astNodeType(){return"member"}}class fR extends Ni{constructor(e,n){super(),this.name=e,this.value=n}get astNodeType(){return"attribute"}}class Pi{constructor(e,n){this.parent=null,this.typeInfo=e,this.parent=n,this.id=Pi._id++}clone(){throw`Clone: Not implemented for ${this.constructor.name}`}setDataValue(e,n,i,r){console.error(`SetDataValue: Not implemented for ${this.constructor.name}`)}getSubData(e,n,i){return console.error(`GetDataValue: Not implemented for ${this.constructor.name}`),null}toString(){return`<${this.typeInfo.getTypeName()}>`}}Pi._id=0;class C_ extends Pi{constructor(){super(new Ci("void",null),null)}toString(){return"void"}}C_.void=new C_;class ao extends Pi{constructor(e){super(new A_("pointer",e.typeInfo,null),null),this.reference=e}clone(){return this}setDataValue(e,n,i,r){this.reference.setDataValue(e,n,i,r)}getSubData(e,n,i){return n?this.reference.getSubData(e,n,i):this}toString(){return`&${this.reference.toString()}`}}class V extends Pi{constructor(e,n,i=null){super(n,i),e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array?this.data=e:this.typeInfo.name==="x32"?e-Math.floor(e)!==0?this.data=new Float32Array([e]):this.data=e>=0?new Uint32Array([e]):new Int32Array([e]):this.typeInfo.name==="i32"||this.typeInfo.name==="bool"?this.data=new Int32Array([e]):this.typeInfo.name==="u32"?this.data=new Uint32Array([e]):this.typeInfo.name==="f32"||this.typeInfo.name==="f16"?this.data=new Float32Array([e]):console.error("ScalarData2: Invalid type",n)}clone(){if(this.data instanceof Float32Array)return new V(new Float32Array(this.data),this.typeInfo,null);if(this.data instanceof Int32Array)return new V(new Int32Array(this.data),this.typeInfo,null);if(this.data instanceof Uint32Array)return new V(new Uint32Array(this.data),this.typeInfo,null);throw"ScalarData: Invalid data type"}get value(){return this.data[0]}set value(e){this.data[0]=e}setDataValue(e,n,i,r){if(i)return void console.error("SetDataValue: Scalar data does not support postfix",i);if(!(n instanceof V))return void console.error("SetDataValue: Invalid value",n);let s=n.data[0];this.typeInfo.name==="i32"||this.typeInfo.name==="u32"?s=Math.floor(s):this.typeInfo.name==="bool"&&(s=s?1:0),this.data[0]=s}getSubData(e,n,i){return n?(console.error("getSubData: Scalar data does not support postfix",n),null):this}toString(){return`${this.value}`}}function Nz(t,e,n){const i=e.length;return i===2?n==="f32"?new O(new Float32Array(e),t.getTypeInfo("vec2f")):n==="i32"||n==="bool"?new O(new Int32Array(e),t.getTypeInfo("vec2i")):n==="u32"?new O(new Uint32Array(e),t.getTypeInfo("vec2u")):n==="f16"?new O(new Float32Array(e),t.getTypeInfo("vec2h")):(console.error(`getSubData: Unknown format ${n}`),null):i===3?n==="f32"?new O(new Float32Array(e),t.getTypeInfo("vec3f")):n==="i32"||n==="bool"?new O(new Int32Array(e),t.getTypeInfo("vec3i")):n==="u32"?new O(new Uint32Array(e),t.getTypeInfo("vec3u")):n==="f16"?new O(new Float32Array(e),t.getTypeInfo("vec3h")):(console.error(`getSubData: Unknown format ${n}`),null):i===4?n==="f32"?new O(new Float32Array(e),t.getTypeInfo("vec4f")):n==="i32"||n==="bool"?new O(new Int32Array(e),t.getTypeInfo("vec4i")):n==="u32"?new O(new Uint32Array(e),t.getTypeInfo("vec4u")):n==="f16"?new O(new Float32Array(e),t.getTypeInfo("vec4h")):(console.error(`getSubData: Unknown format ${n}`),null):(console.error(`getSubData: Invalid vector size ${e.length}`),null)}class O extends Pi{constructor(e,n,i=null){if(super(n,i),e instanceof Float32Array||e instanceof Uint32Array||e instanceof Int32Array)this.data=e;else{const r=this.typeInfo.name;r==="vec2f"||r==="vec3f"||r==="vec4f"?this.data=new Float32Array(e):r==="vec2i"||r==="vec3i"||r==="vec4i"?this.data=new Int32Array(e):r==="vec2u"||r==="vec3u"||r==="vec4u"?this.data=new Uint32Array(e):r==="vec2h"||r==="vec3h"||r==="vec4h"?this.data=new Float32Array(e):r==="vec2b"||r==="vec3b"||r==="vec4b"?this.data=new Int32Array(e):r==="vec2"||r==="vec3"||r==="vec4"?this.data=new Float32Array(e):console.error(`VectorData: Invalid type ${r}`)}}clone(){if(this.data instanceof Float32Array)return new O(new Float32Array(this.data),this.typeInfo,null);if(this.data instanceof Int32Array)return new O(new Int32Array(this.data),this.typeInfo,null);if(this.data instanceof Uint32Array)return new O(new Uint32Array(this.data),this.typeInfo,null);throw"VectorData: Invalid data type"}setDataValue(e,n,i,r){i instanceof Da?console.error("TODO: Set vector postfix"):n instanceof O?this.data=n.data:console.error("SetDataValue: Invalid value",n)}getSubData(e,n,i){if(n===null)return this;let r=e.getTypeInfo("f32");if(this.typeInfo instanceof Pa)r=this.typeInfo.format||r;else{const a=this.typeInfo.name;a==="vec2f"||a==="vec3f"||a==="vec4f"?r=e.getTypeInfo("f32"):a==="vec2i"||a==="vec3i"||a==="vec4i"?r=e.getTypeInfo("i32"):a==="vec2b"||a==="vec3b"||a==="vec4b"?r=e.getTypeInfo("bool"):a==="vec2u"||a==="vec3u"||a==="vec4u"?r=e.getTypeInfo("u32"):a==="vec2h"||a==="vec3h"||a==="vec4h"?r=e.getTypeInfo("f16"):console.error(`GetSubData: Unknown type ${a}`)}let s=this;for(;n!==null&&s!==null;){if(n instanceof al){const a=n.index;let o=-1;if(a instanceof rn){if(!(a.value instanceof V))return console.error(`GetSubData: Invalid array index ${a.value}`),null;o=a.value.value}else{const l=e.evalExpression(a,i);if(!(l instanceof V))return console.error("GetSubData: Unknown index type",a),null;o=l.value}if(o<0||o>=s.data.length)return console.error("GetSubData: Index out of range",o),null;if(s.data instanceof Float32Array){const l=new Float32Array(s.data.buffer,s.data.byteOffset+4*o,1);return new V(l,r)}if(s.data instanceof Int32Array){const l=new Int32Array(s.data.buffer,s.data.byteOffset+4*o,1);return new V(l,r)}if(s.data instanceof Uint32Array){const l=new Uint32Array(s.data.buffer,s.data.byteOffset+4*o,1);return new V(l,r)}throw"GetSubData: Invalid data type"}if(!(n instanceof Da))return console.error("GetSubData: Unknown postfix",n),null;{const a=n.value.toLowerCase();if(a.length===1){let l=0;if(a==="x"||a==="r")l=0;else if(a==="y"||a==="g")l=1;else if(a==="z"||a==="b")l=2;else{if(a!=="w"&&a!=="a")return console.error(`GetSubData: Unknown member ${a}`),null;l=3}if(this.data instanceof Float32Array){let c=new Float32Array(this.data.buffer,this.data.byteOffset+4*l,1);return new V(c,r,this)}if(this.data instanceof Int32Array){let c=new Int32Array(this.data.buffer,this.data.byteOffset+4*l,1);return new V(c,r,this)}if(this.data instanceof Uint32Array){let c=new Uint32Array(this.data.buffer,this.data.byteOffset+4*l,1);return new V(c,r,this)}}const o=[];for(const l of a)l==="x"||l==="r"?o.push(this.data[0]):l==="y"||l==="g"?o.push(this.data[1]):l==="z"||l==="b"?o.push(this.data[2]):l==="w"||l==="a"?o.push(this.data[3]):console.error(`GetDataValue: Unknown member ${l}`);s=Nz(e,o,r.name)}n=n.postfix}return s}toString(){let e=`${this.data[0]}`;for(let n=1;n<this.data.length;++n)e+=`, ${this.data[n]}`;return e}}class ve extends Pi{constructor(e,n,i=null){super(n,i),e instanceof Float32Array?this.data=e:this.data=new Float32Array(e)}clone(){return new ve(new Float32Array(this.data),this.typeInfo,null)}setDataValue(e,n,i,r){i instanceof Da?console.error("TODO: Set matrix postfix"):n instanceof ve?this.data=n.data:console.error("SetDataValue: Invalid value",n)}getSubData(e,n,i){if(n===null)return this;const r=this.typeInfo.name;if(e.getTypeInfo("f32"),this.typeInfo instanceof Pa)this.typeInfo.format;else if(r.endsWith("f"))e.getTypeInfo("f32");else if(r.endsWith("i"))e.getTypeInfo("i32");else if(r.endsWith("u"))e.getTypeInfo("u32");else{if(!r.endsWith("h"))return console.error(`GetDataValue: Unknown type ${r}`),null;e.getTypeInfo("f16")}if(n instanceof al){const s=n.index;let a=-1;if(s instanceof rn){if(!(s.value instanceof V))return console.error(`GetDataValue: Invalid array index ${s.value}`),null;a=s.value.value}else{const c=e.evalExpression(s,i);if(!(c instanceof V))return console.error("GetDataValue: Unknown index type",s),null;a=c.value}if(a<0||a>=this.data.length)return console.error("GetDataValue: Index out of range",a),null;const o=r.endsWith("h")?"h":"f";let l;if(r==="mat2x2"||r==="mat2x2f"||r==="mat2x2h"||r==="mat3x2"||r==="mat3x2f"||r==="mat3x2h"||r==="mat4x2"||r==="mat4x2f"||r==="mat4x2h")l=new O(new Float32Array(this.data.buffer,this.data.byteOffset+2*a*4,2),e.getTypeInfo(`vec2${o}`));else if(r==="mat2x3"||r==="mat2x3f"||r==="mat2x3h"||r==="mat3x3"||r==="mat3x3f"||r==="mat3x3h"||r==="mat4x3"||r==="mat4x3f"||r==="mat4x3h")l=new O(new Float32Array(this.data.buffer,this.data.byteOffset+3*a*4,3),e.getTypeInfo(`vec3${o}`));else{if(r!=="mat2x4"&&r!=="mat2x4f"&&r!=="mat2x4h"&&r!=="mat3x4"&&r!=="mat3x4f"&&r!=="mat3x4h"&&r!=="mat4x4"&&r!=="mat4x4f"&&r!=="mat4x4h")return console.error(`GetDataValue: Unknown type ${r}`),null;l=new O(new Float32Array(this.data.buffer,this.data.byteOffset+4*a*4,4),e.getTypeInfo(`vec4${o}`))}return n.postfix?l.getSubData(e,n.postfix,i):l}return console.error("GetDataValue: Invalid postfix",n),null}toString(){let e=`${this.data[0]}`;for(let n=1;n<this.data.length;++n)e+=`, ${this.data[n]}`;return e}}class Ft extends Pi{constructor(e,n,i=0,r=null){super(n,r),this.buffer=e instanceof ArrayBuffer?e:e.buffer,this.offset=i}clone(){const e=new Uint8Array(new Uint8Array(this.buffer,this.offset,this.typeInfo.size));return new Ft(e.buffer,this.typeInfo,0,null)}setDataValue(e,n,i,r){if(n===null)return void console.log("setDataValue: NULL data.");let s=this.offset,a=this.typeInfo;for(;i;){if(i instanceof al)if(a instanceof Ms){const o=i.index;if(o instanceof rn){if(!(o.value instanceof V))return void console.error(`SetDataValue: Invalid index type ${o.value}`);s+=o.value.value*a.stride}else{const l=e.evalExpression(o,r);if(!(l instanceof V))return void console.error("SetDataValue: Unknown index type",o);s+=l.value*a.stride}a=a.format}else console.error(`SetDataValue: Type ${a.getTypeName()} is not an array`);else{if(!(i instanceof Da))return void console.error("SetDataValue: Unknown postfix type",i);{const o=i.value;if(a instanceof ys){let l=!1;for(const c of a.members)if(c.name===o){s+=c.offset,a=c.type,l=!0;break}if(!l)return void console.error(`SetDataValue: Member ${o} not found`)}else if(a instanceof Ci){const l=a.getTypeName();let c=0;if(o==="x"||o==="r")c=0;else if(o==="y"||o==="g")c=1;else if(o==="z"||o==="b")c=2;else{if(o!=="w"&&o!=="a")return void console.error(`SetDataValue: Unknown member ${o}`);c=3}if(!(n instanceof V))return void console.error("SetDataValue: Invalid value",n);const u=n.value;return l==="vec2f"?void(new Float32Array(this.buffer,s,2)[c]=u):l==="vec3f"?void(new Float32Array(this.buffer,s,3)[c]=u):l==="vec4f"?void(new Float32Array(this.buffer,s,4)[c]=u):l==="vec2i"?void(new Int32Array(this.buffer,s,2)[c]=u):l==="vec3i"?void(new Int32Array(this.buffer,s,3)[c]=u):l==="vec4i"?void(new Int32Array(this.buffer,s,4)[c]=u):l==="vec2u"?void(new Uint32Array(this.buffer,s,2)[c]=u):l==="vec3u"?void(new Uint32Array(this.buffer,s,3)[c]=u):l==="vec4u"?void(new Uint32Array(this.buffer,s,4)[c]=u):void console.error(`SetDataValue: Type ${l} is not a struct`)}}}i=i.postfix}this.setData(e,n,a,s,r)}setData(e,n,i,r,s){const a=i.getTypeName();if(a!=="f32"&&a!=="f16")if(a!=="i32"&&a!=="atomic<i32>"&&a!=="x32")if(a!=="u32"&&a!=="atomic<u32>")if(a!=="bool"){if(a==="vec2f"||a==="vec2h"){const o=new Float32Array(this.buffer,r,2);return void(n instanceof O?(o[0]=n.data[0],o[1]=n.data[1]):(o[0]=n[0],o[1]=n[1]))}if(a==="vec3f"||a==="vec3h"){const o=new Float32Array(this.buffer,r,3);return void(n instanceof O?(o[0]=n.data[0],o[1]=n.data[1],o[2]=n.data[2]):(o[0]=n[0],o[1]=n[1],o[2]=n[2]))}if(a==="vec4f"||a==="vec4h"){const o=new Float32Array(this.buffer,r,4);return void(n instanceof O?(o[0]=n.data[0],o[1]=n.data[1],o[2]=n.data[2],o[3]=n.data[3]):(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3]))}if(a==="vec2i"){const o=new Int32Array(this.buffer,r,2);return void(n instanceof O?(o[0]=n.data[0],o[1]=n.data[1]):(o[0]=n[0],o[1]=n[1]))}if(a==="vec3i"){const o=new Int32Array(this.buffer,r,3);return void(n instanceof O?(o[0]=n.data[0],o[1]=n.data[1],o[2]=n.data[2]):(o[0]=n[0],o[1]=n[1],o[2]=n[2]))}if(a==="vec4i"){const o=new Int32Array(this.buffer,r,4);return void(n instanceof O?(o[0]=n.data[0],o[1]=n.data[1],o[2]=n.data[2],o[3]=n.data[3]):(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3]))}if(a==="vec2u"){const o=new Uint32Array(this.buffer,r,2);return void(n instanceof O?(o[0]=n.data[0],o[1]=n.data[1]):(o[0]=n[0],o[1]=n[1]))}if(a==="vec3u"){const o=new Uint32Array(this.buffer,r,3);return void(n instanceof O?(o[0]=n.data[0],o[1]=n.data[1],o[2]=n.data[2]):(o[0]=n[0],o[1]=n[1],o[2]=n[2]))}if(a==="vec4u"){const o=new Uint32Array(this.buffer,r,4);return void(n instanceof O?(o[0]=n.data[0],o[1]=n.data[1],o[2]=n.data[2],o[3]=n.data[3]):(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3]))}if(a==="vec2b"){const o=new Uint32Array(this.buffer,r,2);return void(n instanceof O?(o[0]=n.data[0],o[1]=n.data[1]):(o[0]=n[0],o[1]=n[1]))}if(a==="vec3b"){const o=new Uint32Array(this.buffer,r,3);return void(n instanceof O?(o[0]=n.data[0],o[1]=n.data[1],o[2]=n.data[2]):(o[0]=n[0],o[1]=n[1],o[2]=n[2]))}if(a==="vec4b"){const o=new Uint32Array(this.buffer,r,4);return void(n instanceof O?(o[0]=n.data[0],o[1]=n.data[1],o[2]=n.data[2],o[3]=n.data[3]):(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3]))}if(a==="mat2x2f"||a==="mat2x2h"){const o=new Float32Array(this.buffer,r,4);return void(n instanceof ve?(o[0]=n.data[0],o[1]=n.data[1],o[2]=n.data[2],o[3]=n.data[3]):(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3]))}if(a==="mat2x3f"||a==="mat2x3h"){const o=new Float32Array(this.buffer,r,6);return void(n instanceof ve?(o[0]=n.data[0],o[1]=n.data[1],o[2]=n.data[2],o[3]=n.data[3],o[4]=n.data[4],o[5]=n.data[5]):(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5]))}if(a==="mat2x4f"||a==="mat2x4h"){const o=new Float32Array(this.buffer,r,8);return void(n instanceof ve?(o[0]=n.data[0],o[1]=n.data[1],o[2]=n.data[2],o[3]=n.data[3],o[4]=n.data[4],o[5]=n.data[5],o[6]=n.data[6],o[7]=n.data[7]):(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7]))}if(a==="mat3x2f"||a==="mat3x2h"){const o=new Float32Array(this.buffer,r,6);return void(n instanceof ve?(o[0]=n.data[0],o[1]=n.data[1],o[2]=n.data[2],o[3]=n.data[3],o[4]=n.data[4],o[5]=n.data[5]):(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5]))}if(a==="mat3x3f"||a==="mat3x3h"){const o=new Float32Array(this.buffer,r,9);return void(n instanceof ve?(o[0]=n.data[0],o[1]=n.data[1],o[2]=n.data[2],o[3]=n.data[3],o[4]=n.data[4],o[5]=n.data[5],o[6]=n.data[6],o[7]=n.data[7],o[8]=n.data[8]):(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7],o[8]=n[8]))}if(a==="mat3x4f"||a==="mat3x4h"){const o=new Float32Array(this.buffer,r,12);return void(n instanceof ve?(o[0]=n.data[0],o[1]=n.data[1],o[2]=n.data[2],o[3]=n.data[3],o[4]=n.data[4],o[5]=n.data[5],o[6]=n.data[6],o[7]=n.data[7],o[8]=n.data[8],o[9]=n.data[9],o[10]=n.data[10],o[11]=n.data[11]):(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7],o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11]))}if(a==="mat4x2f"||a==="mat4x2h"){const o=new Float32Array(this.buffer,r,8);return void(n instanceof ve?(o[0]=n.data[0],o[1]=n.data[1],o[2]=n.data[2],o[3]=n.data[3],o[4]=n.data[4],o[5]=n.data[5],o[6]=n.data[6],o[7]=n.data[7]):(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7]))}if(a==="mat4x3f"||a==="mat4x3h"){const o=new Float32Array(this.buffer,r,12);return void(n instanceof ve?(o[0]=n.data[0],o[1]=n.data[1],o[2]=n.data[2],o[3]=n.data[3],o[4]=n.data[4],o[5]=n.data[5],o[6]=n.data[6],o[7]=n.data[7],o[8]=n.data[8],o[9]=n.data[9],o[10]=n.data[10],o[11]=n.data[11]):(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7],o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11]))}if(a==="mat4x4f"||a==="mat4x4h"){const o=new Float32Array(this.buffer,r,16);return void(n instanceof ve?(o[0]=n.data[0],o[1]=n.data[1],o[2]=n.data[2],o[3]=n.data[3],o[4]=n.data[4],o[5]=n.data[5],o[6]=n.data[6],o[7]=n.data[7],o[8]=n.data[8],o[9]=n.data[9],o[10]=n.data[10],o[11]=n.data[11],o[12]=n.data[12],o[13]=n.data[13],o[14]=n.data[14],o[15]=n.data[15]):(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7],o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]))}if(n instanceof Ft){if(i===n.typeInfo)return void new Uint8Array(this.buffer,r,n.buffer.byteLength).set(new Uint8Array(n.buffer));console.error("SetDataValue: Type mismatch",a,n.typeInfo.getTypeName())}else console.error(`SetData: Unknown type ${a}`)}else n instanceof V&&(new Int32Array(this.buffer,r,1)[0]=n.value);else n instanceof V&&(new Uint32Array(this.buffer,r,1)[0]=n.value);else n instanceof V&&(new Int32Array(this.buffer,r,1)[0]=n.value);else n instanceof V&&(new Float32Array(this.buffer,r,1)[0]=n.value)}getSubData(e,n,i){var r,s,a;if(n===null)return this;let o=this.offset,l=this.typeInfo;for(;n;){if(n instanceof al){const u=n.index,f=u instanceof Xi?e.evalExpression(u,i):u;let d=0;if(f instanceof V?d=f.value:typeof f=="number"?d=f:console.error("GetDataValue: Invalid index type",u),l instanceof Ms)o+=d*l.stride,l=l.format;else{const p=l.getTypeName();p==="mat4x4"||p==="mat4x4f"||p==="mat4x4h"?(o+=16*d,l=e.getTypeInfo("vec4f")):console.error(`getDataValue: Type ${l.getTypeName()} is not an array`)}}else{if(!(n instanceof Da))return console.error("GetDataValue: Unknown postfix type",n),null;{const u=n.value;if(l instanceof ys){let f=!1;for(const d of l.members)if(d.name===u){o+=d.offset,l=d.type,f=!0;break}if(!f)return console.error(`GetDataValue: Member ${u} not found`),null}else if(l instanceof Ci){const f=l.getTypeName();if(f==="vec2f"||f==="vec3f"||f==="vec4f"||f==="vec2i"||f==="vec3i"||f==="vec4i"||f==="vec2u"||f==="vec3u"||f==="vec4u"||f==="vec2b"||f==="vec3b"||f==="vec4b"||f==="vec2h"||f==="vec3h"||f==="vec4h"||f==="vec2"||f==="vec3"||f==="vec4"){if(u.length>0&&u.length<5){let d="f";const p=[];for(let m=0;m<u.length;++m){const S=u[m].toLowerCase();let v=0;if(S==="x"||S==="r")v=0;else if(S==="y"||S==="g")v=1;else if(S==="z"||S==="b")v=2;else{if(S!=="w"&&S!=="a")return console.error(`Unknown member ${u}`),null;v=3}if(u.length===1){if(f.endsWith("f"))return this.buffer.byteLength<o+4*v+4?(console.log("Insufficient buffer data"),null):new V(new Float32Array(this.buffer,o+4*v,1),e.getTypeInfo("f32"),this);if(f.endsWith("h"))return new V(new Float32Array(this.buffer,o+4*v,1),e.getTypeInfo("f16"),this);if(f.endsWith("i"))return new V(new Int32Array(this.buffer,o+4*v,1),e.getTypeInfo("i32"),this);if(f.endsWith("b"))return new V(new Int32Array(this.buffer,o+4*v,1),e.getTypeInfo("bool"),this);if(f.endsWith("u"))return new V(new Uint32Array(this.buffer,o+4*v,1),e.getTypeInfo("i32"),this)}if(f==="vec2f")p.push(new Float32Array(this.buffer,o,2)[v]);else if(f==="vec3f"){if(o+12>=this.buffer.byteLength)return console.log("Insufficient buffer data"),null;const y=new Float32Array(this.buffer,o,3);p.push(y[v])}else if(f==="vec4f")p.push(new Float32Array(this.buffer,o,4)[v]);else if(f==="vec2i")d="i",p.push(new Int32Array(this.buffer,o,2)[v]);else if(f==="vec3i")d="i",p.push(new Int32Array(this.buffer,o,3)[v]);else if(f==="vec4i")d="i",p.push(new Int32Array(this.buffer,o,4)[v]);else if(f==="vec2u"){d="u";const y=new Uint32Array(this.buffer,o,2);p.push(y[v])}else f==="vec3u"?(d="u",p.push(new Uint32Array(this.buffer,o,3)[v])):f==="vec4u"&&(d="u",p.push(new Uint32Array(this.buffer,o,4)[v]))}return p.length===2?l=e.getTypeInfo(`vec2${d}`):p.length===3?l=e.getTypeInfo(`vec3${d}`):p.length===4?l=e.getTypeInfo(`vec4${d}`):console.error(`GetDataValue: Invalid vector length ${p.length}`),new O(p,l,null)}return console.error(`GetDataValue: Unknown member ${u}`),null}return console.error(`GetDataValue: Type ${f} is not a struct`),null}}}n=n.postfix}const c=l.getTypeName();return c==="f32"?new V(new Float32Array(this.buffer,o,1),l,this):c==="i32"?new V(new Int32Array(this.buffer,o,1),l,this):c==="u32"?new V(new Uint32Array(this.buffer,o,1),l,this):c==="vec2f"?new O(new Float32Array(this.buffer,o,2),l,this):c==="vec3f"?new O(new Float32Array(this.buffer,o,3),l,this):c==="vec4f"?new O(new Float32Array(this.buffer,o,4),l,this):c==="vec2i"?new O(new Int32Array(this.buffer,o,2),l,this):c==="vec3i"?new O(new Int32Array(this.buffer,o,3),l,this):c==="vec4i"?new O(new Int32Array(this.buffer,o,4),l,this):c==="vec2u"?new O(new Uint32Array(this.buffer,o,2),l,this):c==="vec3u"?new O(new Uint32Array(this.buffer,o,3),l,this):c==="vec4u"?new O(new Uint32Array(this.buffer,o,4),l,this):l instanceof Pa&&l.name==="atomic"?((r=l.format)===null||r===void 0?void 0:r.name)==="u32"?new V(new Uint32Array(this.buffer,o,1)[0],l.format,this):((s=l.format)===null||s===void 0?void 0:s.name)==="i32"?new V(new Int32Array(this.buffer,o,1)[0],l.format,this):(console.error(`GetDataValue: Invalid atomic format ${(a=l.format)===null||a===void 0?void 0:a.name}`),null):new Ft(this.buffer,l,o,this)}toString(){let e="";if(this.typeInfo instanceof Ms)if(this.typeInfo.format.name==="f32"){const n=new Float32Array(this.buffer,this.offset);e=`[${n[0]}`;for(let i=1;i<n.length;++i)e+=`, ${n[i]}`}else if(this.typeInfo.format.name==="i32"){const n=new Int32Array(this.buffer,this.offset);e=`[${n[0]}`;for(let i=1;i<n.length;++i)e+=`, ${n[i]}`}else if(this.typeInfo.format.name==="u32"){const n=new Uint32Array(this.buffer,this.offset);e=`[${n[0]}`;for(let i=1;i<n.length;++i)e+=`, ${n[i]}`}else if(this.typeInfo.format.name==="vec2f"){const n=new Float32Array(this.buffer,this.offset);e=`[${n[0]}, ${n[1]}]`;for(let i=1;i<n.length/2;++i)e+=`, [${n[2*i]}, ${n[2*i+1]}]`}else if(this.typeInfo.format.name==="vec3f"){const n=new Float32Array(this.buffer,this.offset);e=`[${n[0]}, ${n[1]}, ${n[2]}]`;for(let i=4;i<n.length;i+=4)e+=`, [${n[i]}, ${n[i+1]}, ${n[i+2]}]`}else if(this.typeInfo.format.name==="vec4f"){const n=new Float32Array(this.buffer,this.offset);e=`[${n[0]}, ${n[1]}, ${n[2]}, ${n[3]}]`;for(let i=4;i<n.length;i+=4)e+=`, [${n[i]}, ${n[i+1]}, ${n[i+2]}, ${n[i+3]}]`}else e="[...]";else this.typeInfo instanceof ys?e+="{...}":e="[...]";return e}}class Or extends Pi{constructor(e,n,i,r){super(n,null),this.data=e,this.descriptor=i,this.view=r}clone(){return new Or(this.data,this.typeInfo,this.descriptor,this.view)}get width(){var e,n;const i=this.descriptor.size;return i instanceof Array&&i.length>0?(e=i[0])!==null&&e!==void 0?e:0:i instanceof Object&&(n=i.width)!==null&&n!==void 0?n:0}get height(){var e,n;const i=this.descriptor.size;return i instanceof Array&&i.length>1?(e=i[1])!==null&&e!==void 0?e:0:i instanceof Object&&(n=i.height)!==null&&n!==void 0?n:0}get depthOrArrayLayers(){var e,n;const i=this.descriptor.size;return i instanceof Array&&i.length>2?(e=i[2])!==null&&e!==void 0?e:0:i instanceof Object&&(n=i.depthOrArrayLayers)!==null&&n!==void 0?n:0}get format(){var e;return this.descriptor&&(e=this.descriptor.format)!==null&&e!==void 0?e:"rgba8unorm"}get sampleCount(){var e;return this.descriptor&&(e=this.descriptor.sampleCount)!==null&&e!==void 0?e:1}get mipLevelCount(){var e;return this.descriptor&&(e=this.descriptor.mipLevelCount)!==null&&e!==void 0?e:1}get dimension(){var e;return this.descriptor&&(e=this.descriptor.dimension)!==null&&e!==void 0?e:"2d"}getMipLevelSize(e){if(e>=this.mipLevelCount)return[0,0,0];const n=[this.width,this.height,this.depthOrArrayLayers];for(let i=0;i<n.length;++i)n[i]=Math.max(1,n[i]>>e);return n}get texelByteSize(){const e=this.format,n=Cm[e];return n?n.isDepthStencil?4:n.bytesPerBlock:0}get bytesPerRow(){return this.width*this.texelByteSize}get isDepthStencil(){const e=this.format,n=Cm[e];return!!n&&n.isDepthStencil}getGpuSize(){const e=this.format,n=Cm[e],i=this.width;if(!e||i<=0||!n)return-1;const r=this.height,s=this.depthOrArrayLayers,a=this.dimension;return i/n.blockWidth*(a==="1d"?1:r/n.blockHeight)*n.bytesPerBlock*s}getPixel(e,n,i=0,r=0){const s=this.texelByteSize,a=this.bytesPerRow,o=this.height,l=this.data[r];return Mz(new Uint8Array(l),e,n,i,r,o,a,s,this.format)}setPixel(e,n,i,r,s){const a=this.texelByteSize,o=this.bytesPerRow,l=this.height,c=this.data[r];(function(u,f,d,p,m,S,v,y,_,T){const b=p*(v>>=m)*(S>>=m)+d*v+f*y;switch(_){case"r8unorm":return void Je(u,b,"8unorm",1,T);case"r8snorm":return void Je(u,b,"8snorm",1,T);case"r8uint":return void Je(u,b,"8uint",1,T);case"r8sint":return void Je(u,b,"8sint",1,T);case"rg8unorm":return void Je(u,b,"8unorm",2,T);case"rg8snorm":return void Je(u,b,"8snorm",2,T);case"rg8uint":return void Je(u,b,"8uint",2,T);case"rg8sint":return void Je(u,b,"8sint",2,T);case"rgba8unorm-srgb":case"rgba8unorm":case"bgra8unorm-srgb":case"bgra8unorm":return void Je(u,b,"8unorm",4,T);case"rgba8snorm":return void Je(u,b,"8snorm",4,T);case"rgba8uint":return void Je(u,b,"8uint",4,T);case"rgba8sint":return void Je(u,b,"8sint",4,T);case"r16uint":return void Je(u,b,"16uint",1,T);case"r16sint":return void Je(u,b,"16sint",1,T);case"r16float":return void Je(u,b,"16float",1,T);case"rg16uint":return void Je(u,b,"16uint",2,T);case"rg16sint":return void Je(u,b,"16sint",2,T);case"rg16float":return void Je(u,b,"16float",2,T);case"rgba16uint":return void Je(u,b,"16uint",4,T);case"rgba16sint":return void Je(u,b,"16sint",4,T);case"rgba16float":return void Je(u,b,"16float",4,T);case"r32uint":return void Je(u,b,"32uint",1,T);case"r32sint":return void Je(u,b,"32sint",1,T);case"depth16unorm":case"depth24plus":case"depth24plus-stencil8":case"depth32float":case"depth32float-stencil8":case"r32float":return void Je(u,b,"32float",1,T);case"rg32uint":return void Je(u,b,"32uint",2,T);case"rg32sint":return void Je(u,b,"32sint",2,T);case"rg32float":return void Je(u,b,"32float",2,T);case"rgba32uint":return void Je(u,b,"32uint",4,T);case"rgba32sint":return void Je(u,b,"32sint",4,T);case"rgba32float":return void Je(u,b,"32float",4,T);case"rg11b10ufloat":console.error("TODO: rg11b10ufloat not supported for writing")}})(new Uint8Array(c),e,n,i,r,l,o,a,this.format,s)}}(t=>{t[t.token=0]="token",t[t.keyword=1]="keyword",t[t.reserved=2]="reserved"})(H||(H={}));class W{constructor(e,n,i){this.name=e,this.type=n,this.rule=i}toString(){return this.name}}class R{}q=R,R.none=new W("",H.reserved,""),R.eof=new W("EOF",H.token,""),R.reserved={asm:new W("asm",H.reserved,"asm"),bf16:new W("bf16",H.reserved,"bf16"),do:new W("do",H.reserved,"do"),enum:new W("enum",H.reserved,"enum"),f16:new W("f16",H.reserved,"f16"),f64:new W("f64",H.reserved,"f64"),handle:new W("handle",H.reserved,"handle"),i8:new W("i8",H.reserved,"i8"),i16:new W("i16",H.reserved,"i16"),i64:new W("i64",H.reserved,"i64"),mat:new W("mat",H.reserved,"mat"),premerge:new W("premerge",H.reserved,"premerge"),regardless:new W("regardless",H.reserved,"regardless"),typedef:new W("typedef",H.reserved,"typedef"),u8:new W("u8",H.reserved,"u8"),u16:new W("u16",H.reserved,"u16"),u64:new W("u64",H.reserved,"u64"),unless:new W("unless",H.reserved,"unless"),using:new W("using",H.reserved,"using"),vec:new W("vec",H.reserved,"vec"),void:new W("void",H.reserved,"void")},R.keywords={array:new W("array",H.keyword,"array"),atomic:new W("atomic",H.keyword,"atomic"),bool:new W("bool",H.keyword,"bool"),f32:new W("f32",H.keyword,"f32"),i32:new W("i32",H.keyword,"i32"),mat2x2:new W("mat2x2",H.keyword,"mat2x2"),mat2x3:new W("mat2x3",H.keyword,"mat2x3"),mat2x4:new W("mat2x4",H.keyword,"mat2x4"),mat3x2:new W("mat3x2",H.keyword,"mat3x2"),mat3x3:new W("mat3x3",H.keyword,"mat3x3"),mat3x4:new W("mat3x4",H.keyword,"mat3x4"),mat4x2:new W("mat4x2",H.keyword,"mat4x2"),mat4x3:new W("mat4x3",H.keyword,"mat4x3"),mat4x4:new W("mat4x4",H.keyword,"mat4x4"),ptr:new W("ptr",H.keyword,"ptr"),sampler:new W("sampler",H.keyword,"sampler"),sampler_comparison:new W("sampler_comparison",H.keyword,"sampler_comparison"),struct:new W("struct",H.keyword,"struct"),texture_1d:new W("texture_1d",H.keyword,"texture_1d"),texture_2d:new W("texture_2d",H.keyword,"texture_2d"),texture_2d_array:new W("texture_2d_array",H.keyword,"texture_2d_array"),texture_3d:new W("texture_3d",H.keyword,"texture_3d"),texture_cube:new W("texture_cube",H.keyword,"texture_cube"),texture_cube_array:new W("texture_cube_array",H.keyword,"texture_cube_array"),texture_multisampled_2d:new W("texture_multisampled_2d",H.keyword,"texture_multisampled_2d"),texture_storage_1d:new W("texture_storage_1d",H.keyword,"texture_storage_1d"),texture_storage_2d:new W("texture_storage_2d",H.keyword,"texture_storage_2d"),texture_storage_2d_array:new W("texture_storage_2d_array",H.keyword,"texture_storage_2d_array"),texture_storage_3d:new W("texture_storage_3d",H.keyword,"texture_storage_3d"),texture_depth_2d:new W("texture_depth_2d",H.keyword,"texture_depth_2d"),texture_depth_2d_array:new W("texture_depth_2d_array",H.keyword,"texture_depth_2d_array"),texture_depth_cube:new W("texture_depth_cube",H.keyword,"texture_depth_cube"),texture_depth_cube_array:new W("texture_depth_cube_array",H.keyword,"texture_depth_cube_array"),texture_depth_multisampled_2d:new W("texture_depth_multisampled_2d",H.keyword,"texture_depth_multisampled_2d"),texture_external:new W("texture_external",H.keyword,"texture_external"),u32:new W("u32",H.keyword,"u32"),vec2:new W("vec2",H.keyword,"vec2"),vec3:new W("vec3",H.keyword,"vec3"),vec4:new W("vec4",H.keyword,"vec4"),bitcast:new W("bitcast",H.keyword,"bitcast"),block:new W("block",H.keyword,"block"),break:new W("break",H.keyword,"break"),case:new W("case",H.keyword,"case"),continue:new W("continue",H.keyword,"continue"),continuing:new W("continuing",H.keyword,"continuing"),default:new W("default",H.keyword,"default"),diagnostic:new W("diagnostic",H.keyword,"diagnostic"),discard:new W("discard",H.keyword,"discard"),else:new W("else",H.keyword,"else"),enable:new W("enable",H.keyword,"enable"),fallthrough:new W("fallthrough",H.keyword,"fallthrough"),false:new W("false",H.keyword,"false"),fn:new W("fn",H.keyword,"fn"),for:new W("for",H.keyword,"for"),function:new W("function",H.keyword,"function"),if:new W("if",H.keyword,"if"),let:new W("let",H.keyword,"let"),const:new W("const",H.keyword,"const"),loop:new W("loop",H.keyword,"loop"),while:new W("while",H.keyword,"while"),private:new W("private",H.keyword,"private"),read:new W("read",H.keyword,"read"),read_write:new W("read_write",H.keyword,"read_write"),return:new W("return",H.keyword,"return"),requires:new W("requires",H.keyword,"requires"),storage:new W("storage",H.keyword,"storage"),switch:new W("switch",H.keyword,"switch"),true:new W("true",H.keyword,"true"),alias:new W("alias",H.keyword,"alias"),type:new W("type",H.keyword,"type"),uniform:new W("uniform",H.keyword,"uniform"),var:new W("var",H.keyword,"var"),override:new W("override",H.keyword,"override"),workgroup:new W("workgroup",H.keyword,"workgroup"),write:new W("write",H.keyword,"write"),r8unorm:new W("r8unorm",H.keyword,"r8unorm"),r8snorm:new W("r8snorm",H.keyword,"r8snorm"),r8uint:new W("r8uint",H.keyword,"r8uint"),r8sint:new W("r8sint",H.keyword,"r8sint"),r16uint:new W("r16uint",H.keyword,"r16uint"),r16sint:new W("r16sint",H.keyword,"r16sint"),r16float:new W("r16float",H.keyword,"r16float"),rg8unorm:new W("rg8unorm",H.keyword,"rg8unorm"),rg8snorm:new W("rg8snorm",H.keyword,"rg8snorm"),rg8uint:new W("rg8uint",H.keyword,"rg8uint"),rg8sint:new W("rg8sint",H.keyword,"rg8sint"),r32uint:new W("r32uint",H.keyword,"r32uint"),r32sint:new W("r32sint",H.keyword,"r32sint"),r32float:new W("r32float",H.keyword,"r32float"),rg16uint:new W("rg16uint",H.keyword,"rg16uint"),rg16sint:new W("rg16sint",H.keyword,"rg16sint"),rg16float:new W("rg16float",H.keyword,"rg16float"),rgba8unorm:new W("rgba8unorm",H.keyword,"rgba8unorm"),rgba8unorm_srgb:new W("rgba8unorm_srgb",H.keyword,"rgba8unorm_srgb"),rgba8snorm:new W("rgba8snorm",H.keyword,"rgba8snorm"),rgba8uint:new W("rgba8uint",H.keyword,"rgba8uint"),rgba8sint:new W("rgba8sint",H.keyword,"rgba8sint"),bgra8unorm:new W("bgra8unorm",H.keyword,"bgra8unorm"),bgra8unorm_srgb:new W("bgra8unorm_srgb",H.keyword,"bgra8unorm_srgb"),rgb10a2unorm:new W("rgb10a2unorm",H.keyword,"rgb10a2unorm"),rg11b10float:new W("rg11b10float",H.keyword,"rg11b10float"),rg32uint:new W("rg32uint",H.keyword,"rg32uint"),rg32sint:new W("rg32sint",H.keyword,"rg32sint"),rg32float:new W("rg32float",H.keyword,"rg32float"),rgba16uint:new W("rgba16uint",H.keyword,"rgba16uint"),rgba16sint:new W("rgba16sint",H.keyword,"rgba16sint"),rgba16float:new W("rgba16float",H.keyword,"rgba16float"),rgba32uint:new W("rgba32uint",H.keyword,"rgba32uint"),rgba32sint:new W("rgba32sint",H.keyword,"rgba32sint"),rgba32float:new W("rgba32float",H.keyword,"rgba32float"),static_assert:new W("static_assert",H.keyword,"static_assert")},R.tokens={decimal_float_literal:new W("decimal_float_literal",H.token,/((-?[0-9]*\.[0-9]+|-?[0-9]+\.[0-9]*)((e|E)(\+|-)?[0-9]+)?[fh]?)|(-?[0-9]+(e|E)(\+|-)?[0-9]+[fh]?)|(-?[0-9]+[fh])/),hex_float_literal:new W("hex_float_literal",H.token,/-?0x((([0-9a-fA-F]*\.[0-9a-fA-F]+|[0-9a-fA-F]+\.[0-9a-fA-F]*)((p|P)(\+|-)?[0-9]+[fh]?)?)|([0-9a-fA-F]+(p|P)(\+|-)?[0-9]+[fh]?))/),int_literal:new W("int_literal",H.token,/-?0x[0-9a-fA-F]+|0i?|-?[1-9][0-9]*i?/),uint_literal:new W("uint_literal",H.token,/0x[0-9a-fA-F]+u|0u|[1-9][0-9]*u/),name:new W("name",H.token,/([_\p{XID_Start}][\p{XID_Continue}]+)|([\p{XID_Start}])/u),ident:new W("ident",H.token,/[_a-zA-Z][0-9a-zA-Z_]*/),and:new W("and",H.token,"&"),and_and:new W("and_and",H.token,"&&"),arrow:new W("arrow ",H.token,"->"),attr:new W("attr",H.token,"@"),forward_slash:new W("forward_slash",H.token,"/"),bang:new W("bang",H.token,"!"),bracket_left:new W("bracket_left",H.token,"["),bracket_right:new W("bracket_right",H.token,"]"),brace_left:new W("brace_left",H.token,"{"),brace_right:new W("brace_right",H.token,"}"),colon:new W("colon",H.token,":"),comma:new W("comma",H.token,","),equal:new W("equal",H.token,"="),equal_equal:new W("equal_equal",H.token,"=="),not_equal:new W("not_equal",H.token,"!="),greater_than:new W("greater_than",H.token,">"),greater_than_equal:new W("greater_than_equal",H.token,">="),shift_right:new W("shift_right",H.token,">>"),less_than:new W("less_than",H.token,"<"),less_than_equal:new W("less_than_equal",H.token,"<="),shift_left:new W("shift_left",H.token,"<<"),modulo:new W("modulo",H.token,"%"),minus:new W("minus",H.token,"-"),minus_minus:new W("minus_minus",H.token,"--"),period:new W("period",H.token,"."),plus:new W("plus",H.token,"+"),plus_plus:new W("plus_plus",H.token,"++"),or:new W("or",H.token,"|"),or_or:new W("or_or",H.token,"||"),paren_left:new W("paren_left",H.token,"("),paren_right:new W("paren_right",H.token,")"),semicolon:new W("semicolon",H.token,";"),star:new W("star",H.token,"*"),tilde:new W("tilde",H.token,"~"),underscore:new W("underscore",H.token,"_"),xor:new W("xor",H.token,"^"),plus_equal:new W("plus_equal",H.token,"+="),minus_equal:new W("minus_equal",H.token,"-="),times_equal:new W("times_equal",H.token,"*="),division_equal:new W("division_equal",H.token,"/="),modulo_equal:new W("modulo_equal",H.token,"%="),and_equal:new W("and_equal",H.token,"&="),or_equal:new W("or_equal",H.token,"|="),xor_equal:new W("xor_equal",H.token,"^="),shift_right_equal:new W("shift_right_equal",H.token,">>="),shift_left_equal:new W("shift_left_equal",H.token,"<<=")},R.simpleTokens={"@":q.tokens.attr,"{":q.tokens.brace_left,"}":q.tokens.brace_right,":":q.tokens.colon,",":q.tokens.comma,"(":q.tokens.paren_left,")":q.tokens.paren_right,";":q.tokens.semicolon},R.literalTokens={"&":q.tokens.and,"&&":q.tokens.and_and,"->":q.tokens.arrow,"/":q.tokens.forward_slash,"!":q.tokens.bang,"[":q.tokens.bracket_left,"]":q.tokens.bracket_right,"=":q.tokens.equal,"==":q.tokens.equal_equal,"!=":q.tokens.not_equal,">":q.tokens.greater_than,">=":q.tokens.greater_than_equal,">>":q.tokens.shift_right,"<":q.tokens.less_than,"<=":q.tokens.less_than_equal,"<<":q.tokens.shift_left,"%":q.tokens.modulo,"-":q.tokens.minus,"--":q.tokens.minus_minus,".":q.tokens.period,"+":q.tokens.plus,"++":q.tokens.plus_plus,"|":q.tokens.or,"||":q.tokens.or_or,"*":q.tokens.star,"~":q.tokens.tilde,_:q.tokens.underscore,"^":q.tokens.xor,"+=":q.tokens.plus_equal,"-=":q.tokens.minus_equal,"*=":q.tokens.times_equal,"/=":q.tokens.division_equal,"%=":q.tokens.modulo_equal,"&=":q.tokens.and_equal,"|=":q.tokens.or_equal,"^=":q.tokens.xor_equal,">>=":q.tokens.shift_right_equal,"<<=":q.tokens.shift_left_equal},R.regexTokens={decimal_float_literal:q.tokens.decimal_float_literal,hex_float_literal:q.tokens.hex_float_literal,int_literal:q.tokens.int_literal,uint_literal:q.tokens.uint_literal,ident:q.tokens.ident},R.storage_class=[q.keywords.function,q.keywords.private,q.keywords.workgroup,q.keywords.uniform,q.keywords.storage],R.access_mode=[q.keywords.read,q.keywords.write,q.keywords.read_write],R.sampler_type=[q.keywords.sampler,q.keywords.sampler_comparison],R.sampled_texture_type=[q.keywords.texture_1d,q.keywords.texture_2d,q.keywords.texture_2d_array,q.keywords.texture_3d,q.keywords.texture_cube,q.keywords.texture_cube_array],R.multisampled_texture_type=[q.keywords.texture_multisampled_2d],R.storage_texture_type=[q.keywords.texture_storage_1d,q.keywords.texture_storage_2d,q.keywords.texture_storage_2d_array,q.keywords.texture_storage_3d],R.depth_texture_type=[q.keywords.texture_depth_2d,q.keywords.texture_depth_2d_array,q.keywords.texture_depth_cube,q.keywords.texture_depth_cube_array,q.keywords.texture_depth_multisampled_2d],R.texture_external_type=[q.keywords.texture_external],R.any_texture_type=[...q.sampled_texture_type,...q.multisampled_texture_type,...q.storage_texture_type,...q.depth_texture_type,...q.texture_external_type],R.texel_format=[q.keywords.r8unorm,q.keywords.r8snorm,q.keywords.r8uint,q.keywords.r8sint,q.keywords.r16uint,q.keywords.r16sint,q.keywords.r16float,q.keywords.rg8unorm,q.keywords.rg8snorm,q.keywords.rg8uint,q.keywords.rg8sint,q.keywords.r32uint,q.keywords.r32sint,q.keywords.r32float,q.keywords.rg16uint,q.keywords.rg16sint,q.keywords.rg16float,q.keywords.rgba8unorm,q.keywords.rgba8unorm_srgb,q.keywords.rgba8snorm,q.keywords.rgba8uint,q.keywords.rgba8sint,q.keywords.bgra8unorm,q.keywords.bgra8unorm_srgb,q.keywords.rgb10a2unorm,q.keywords.rg11b10float,q.keywords.rg32uint,q.keywords.rg32sint,q.keywords.rg32float,q.keywords.rgba16uint,q.keywords.rgba16sint,q.keywords.rgba16float,q.keywords.rgba32uint,q.keywords.rgba32sint,q.keywords.rgba32float],R.const_literal=[q.tokens.int_literal,q.tokens.uint_literal,q.tokens.decimal_float_literal,q.tokens.hex_float_literal,q.keywords.true,q.keywords.false],R.literal_or_ident=[q.tokens.ident,q.tokens.int_literal,q.tokens.uint_literal,q.tokens.decimal_float_literal,q.tokens.hex_float_literal,q.tokens.name],R.element_count_expression=[q.tokens.int_literal,q.tokens.uint_literal,q.tokens.ident],R.template_types=[q.keywords.vec2,q.keywords.vec3,q.keywords.vec4,q.keywords.mat2x2,q.keywords.mat2x3,q.keywords.mat2x4,q.keywords.mat3x2,q.keywords.mat3x3,q.keywords.mat3x4,q.keywords.mat4x2,q.keywords.mat4x3,q.keywords.mat4x4,q.keywords.atomic,q.keywords.bitcast,...q.any_texture_type],R.attribute_name=[q.tokens.ident,q.keywords.block,q.keywords.diagnostic],R.assignment_operators=[q.tokens.equal,q.tokens.plus_equal,q.tokens.minus_equal,q.tokens.times_equal,q.tokens.division_equal,q.tokens.modulo_equal,q.tokens.and_equal,q.tokens.or_equal,q.tokens.xor_equal,q.tokens.shift_right_equal,q.tokens.shift_left_equal],R.increment_operators=[q.tokens.plus_plus,q.tokens.minus_minus];class sT{constructor(e,n,i,r,s){this.type=e,this.lexeme=n,this.line=i,this.start=r,this.end=s}toString(){return this.lexeme}isTemplateType(){return R.template_types.indexOf(this.type)!=-1}isArrayType(){return this.type==R.keywords.array}isArrayOrTemplateType(){return this.isArrayType()||this.isTemplateType()}}class Bz{constructor(e){this._tokens=[],this._start=0,this._current=0,this._line=1,this._source=e??""}scanTokens(){for(;!this._isAtEnd();)if(this._start=this._current,!this.scanToken())throw`Invalid syntax at line ${this._line}`;return this._tokens.push(new sT(R.eof,"",this._line,this._current,this._current)),this._tokens}scanToken(){let e=this._advance();if(e==`
`)return this._line++,!0;if(this._isWhitespace(e))return!0;if(e=="/"){if(this._peekAhead()=="/"){for(;e!=`
`;){if(this._isAtEnd())return!0;e=this._advance()}return this._line++,!0}if(this._peekAhead()=="*"){this._advance();let a=1;for(;a>0;){if(this._isAtEnd())return!0;if(e=this._advance(),e==`
`)this._line++;else if(e=="*"){if(this._peekAhead()=="/"&&(this._advance(),a--,a==0))return!0}else e=="/"&&this._peekAhead()=="*"&&(this._advance(),a++)}return!0}}const n=R.simpleTokens[e];if(n)return this._addToken(n),!0;let i=R.none;const r=this._isAlpha(e),s=e==="_";if(this._isAlphaNumeric(e)){let a=this._peekAhead();for(;this._isAlphaNumeric(a);)e+=this._advance(),a=this._peekAhead()}if(r){const a=R.keywords[e];if(a)return this._addToken(a),!0}if(r||s)return this._addToken(R.tokens.ident),!0;for(;;){let a=this._findType(e);const o=this._peekAhead();if(e=="-"&&this._tokens.length>0){if(o=="=")return this._current++,e+=o,this._addToken(R.tokens.minus_equal),!0;if(o=="-")return this._current++,e+=o,this._addToken(R.tokens.minus_minus),!0;const l=this._tokens.length-1;if((R.literal_or_ident.indexOf(this._tokens[l].type)!=-1||this._tokens[l].type==R.tokens.paren_right)&&o!=">")return this._addToken(a),!0}if(e==">"&&(o==">"||o=="=")){let l=!1,c=this._tokens.length-1;for(let u=0;u<5&&c>=0&&R.assignment_operators.indexOf(this._tokens[c].type)===-1;++u,--c)if(this._tokens[c].type===R.tokens.less_than){c>0&&this._tokens[c-1].isArrayOrTemplateType()&&(l=!0);break}if(l)return this._addToken(a),!0}if(a===R.none){let l=e,c=0;const u=2;for(let f=0;f<u;++f)if(l+=this._peekAhead(f),a=this._findType(l),a!==R.none){c=f;break}if(a===R.none)return i!==R.none&&(this._current--,this._addToken(i),!0);e=l,this._current+=c+1}if(i=a,this._isAtEnd())break;e+=this._advance()}return i!==R.none&&(this._addToken(i),!0)}_findType(e){for(const i in R.regexTokens){const r=R.regexTokens[i];if(this._match(e,r.rule))return r}return R.literalTokens[e]||R.none}_match(e,n){const i=n.exec(e);return i&&i.index==0&&i[0]==e}_isAtEnd(){return this._current>=this._source.length}_isAlpha(e){return!this._isNumeric(e)&&!this._isWhitespace(e)&&e!=="_"&&e!=="."&&e!=="("&&e!==")"&&e!=="["&&e!=="]"&&e!=="{"&&e!=="}"&&e!==","&&e!==";"&&e!==":"&&e!=="="&&e!=="!"&&e!=="<"&&e!==">"&&e!=="+"&&e!=="-"&&e!=="*"&&e!=="/"&&e!=="%"&&e!=="&"&&e!=="|"&&e!=="^"&&e!=="~"&&e!=="@"&&e!=="#"&&e!=="?"&&e!=="'"&&e!=="`"&&e!=='"'&&e!=="\\"&&e!==`
`&&e!=="\r"&&e!=="	"&&e!=="\0"}_isNumeric(e){return e>="0"&&e<="9"}_isAlphaNumeric(e){return this._isAlpha(e)||this._isNumeric(e)||e==="_"}_isWhitespace(e){return e==" "||e=="	"||e=="\r"}_advance(e=0){let n=this._source[this._current];return e=e||0,e++,this._current+=e,n}_peekAhead(e=0){return e=e||0,this._current+e>=this._source.length?"\0":this._source[this._current+e]}_addToken(e){const n=this._source.substring(this._start,this._current);this._tokens.push(new sT(e,n,this._line,this._start,this._current))}}function le(t){return Array.isArray(t)||(t==null?void 0:t.buffer)instanceof ArrayBuffer}const ph=new Float32Array(1),Lz=new Uint32Array(ph.buffer),Uz=new Uint32Array(ph.buffer),gh=new Int32Array(1),Fz=new Float32Array(gh.buffer),zz=new Uint32Array(gh.buffer),mh=new Uint32Array(1),Vz=new Float32Array(mh.buffer),$z=new Int32Array(mh.buffer);function aT(t,e,n){if(e===n)return t;if(e==="f32"){if(n==="i32"||n==="x32")return ph[0]=t,Lz[0];if(n==="u32")return ph[0]=t,Uz[0]}else if(e==="i32"||e==="x32"){if(n==="f32")return gh[0]=t,Fz[0];if(n==="u32")return gh[0]=t,zz[0]}else if(e==="u32"){if(n==="f32")return mh[0]=t,Vz[0];if(n==="i32"||n==="x32")return mh[0]=t,$z[0]}return console.error(`Unsupported cast from ${e} to ${n}`),t}class jz{constructor(e){this.resources=null,this.inUse=!1,this.info=null,this.node=e}}class Of{constructor(e,n){this.align=e,this.size=n}}class lr{constructor(){this.uniforms=[],this.storage=[],this.textures=[],this.samplers=[],this.aliases=[],this.overrides=[],this.structs=[],this.entry=new Az,this.functions=[],this._types=new Map,this._functions=new Map}_isStorageTexture(e){return e.name=="texture_storage_1d"||e.name=="texture_storage_2d"||e.name=="texture_storage_2d_array"||e.name=="texture_storage_3d"}updateAST(e){for(const n of e)n instanceof au&&this._functions.set(n.name,new jz(n));for(const n of e)if(n instanceof Mr){const i=this.getTypeInfo(n,null);i instanceof ys&&this.structs.push(i)}for(const n of e)if(n instanceof tv)this.aliases.push(this._getAliasInfo(n));else{if(n instanceof J0){const i=n,r=this._getAttributeNum(i.attributes,"id",0),s=i.type!=null?this.getTypeInfo(i.type,i.attributes):null;this.overrides.push(new xz(i.name,s,i.attributes,r));continue}if(this._isUniformVar(n)){const i=n,r=this._getAttributeNum(i.attributes,"group",0),s=this._getAttributeNum(i.attributes,"binding",0),a=this.getTypeInfo(i.type,i.attributes),o=new Mf(i.name,a,r,s,i.attributes,ss.Uniform,i.access);o.access||(o.access="read"),this.uniforms.push(o);continue}if(this._isStorageVar(n)){const i=n,r=this._getAttributeNum(i.attributes,"group",0),s=this._getAttributeNum(i.attributes,"binding",0),a=this.getTypeInfo(i.type,i.attributes),o=this._isStorageTexture(a),l=new Mf(i.name,a,r,s,i.attributes,o?ss.StorageTexture:ss.Storage,i.access);l.access||(l.access="read"),this.storage.push(l);continue}if(this._isTextureVar(n)){const i=n,r=this._getAttributeNum(i.attributes,"group",0),s=this._getAttributeNum(i.attributes,"binding",0),a=this.getTypeInfo(i.type,i.attributes),o=this._isStorageTexture(a),l=new Mf(i.name,a,r,s,i.attributes,o?ss.StorageTexture:ss.Texture,i.access);l.access||(l.access="read"),o?this.storage.push(l):this.textures.push(l);continue}if(this._isSamplerVar(n)){const i=n,r=this._getAttributeNum(i.attributes,"group",0),s=this._getAttributeNum(i.attributes,"binding",0),a=this.getTypeInfo(i.type,i.attributes),o=new Mf(i.name,a,r,s,i.attributes,ss.Sampler,i.access);this.samplers.push(o);continue}}for(const n of e)if(n instanceof au){const i=this._getAttribute(n,"vertex"),r=this._getAttribute(n,"fragment"),s=this._getAttribute(n,"compute"),a=i||r||s,o=new wz(n.name,a==null?void 0:a.name,n.attributes);o.attributes=n.attributes,o.startLine=n.startLine,o.endLine=n.endLine,this.functions.push(o),this._functions.get(n.name).info=o,a&&(this._functions.get(n.name).inUse=!0,o.inUse=!0,o.resources=this._findResources(n,!!a),o.inputs=this._getInputs(n.args),o.outputs=this._getOutputs(n.returnType),this.entry[a.name].push(o)),o.arguments=n.args.map(l=>new Sz(l.name,this.getTypeInfo(l.type,l.attributes),l.attributes)),o.returnType=n.returnType?this.getTypeInfo(n.returnType,n.attributes):null;continue}for(const n of this._functions.values())n.info&&(n.info.inUse=n.inUse,this._addCalls(n.node,n.info.calls));for(const n of this._functions.values())n.node.search(i=>{var r,s,a;if(i instanceof fR){if(i.value)if(le(i.value))for(const o of i.value)for(const l of this.overrides)o===l.name&&((r=n.info)===null||r===void 0||r.overrides.push(l));else for(const o of this.overrides)i.value===o.name&&((s=n.info)===null||s===void 0||s.overrides.push(o))}else if(i instanceof Kn)for(const o of this.overrides)i.name===o.name&&((a=n.info)===null||a===void 0||a.overrides.push(o))});for(const n of this.uniforms)this._markStructsInUse(n.type);for(const n of this.storage)this._markStructsInUse(n.type)}getFunctionInfo(e){for(const n of this.functions)if(n.name==e)return n;return null}getStructInfo(e){for(const n of this.structs)if(n.name==e)return n;return null}getOverrideInfo(e){for(const n of this.overrides)if(n.name==e)return n;return null}_markStructsInUse(e){if(e)if(e.isStruct){if(e.inUse=!0,e.members)for(const n of e.members)this._markStructsInUse(n.type)}else if(e.isArray)this._markStructsInUse(e.format);else if(e.isTemplate)e.format&&this._markStructsInUse(e.format);else{const n=this._getAlias(e.name);n&&this._markStructsInUse(n)}}_addCalls(e,n){var i;for(const r of e.calls){const s=(i=this._functions.get(r.name))===null||i===void 0?void 0:i.info;s&&n.add(s)}}findResource(e,n,i){if(i){for(const r of this.entry.compute)if(r.name===i){for(const s of r.resources)if(s.group==e&&s.binding==n)return s}for(const r of this.entry.vertex)if(r.name===i){for(const s of r.resources)if(s.group==e&&s.binding==n)return s}for(const r of this.entry.fragment)if(r.name===i){for(const s of r.resources)if(s.group==e&&s.binding==n)return s}}for(const r of this.uniforms)if(r.group==e&&r.binding==n)return r;for(const r of this.storage)if(r.group==e&&r.binding==n)return r;for(const r of this.textures)if(r.group==e&&r.binding==n)return r;for(const r of this.samplers)if(r.group==e&&r.binding==n)return r;return null}_findResource(e){for(const n of this.uniforms)if(n.name==e)return n;for(const n of this.storage)if(n.name==e)return n;for(const n of this.textures)if(n.name==e)return n;for(const n of this.samplers)if(n.name==e)return n;return null}_markStructsFromAST(e){const n=this.getTypeInfo(e,null);this._markStructsInUse(n)}_findResources(e,n){const i=[],r=this,s=[];return e.search(a=>{if(a instanceof dh)s.push({});else if(a instanceof hh)s.pop();else if(a instanceof Pr){const o=a;n&&o.type!==null&&this._markStructsFromAST(o.type),s.length>0&&(s[s.length-1][o.name]=o)}else if(a instanceof Ji){const o=a;n&&o.type!==null&&this._markStructsFromAST(o.type)}else if(a instanceof Rc){const o=a;n&&o.type!==null&&this._markStructsFromAST(o.type),s.length>0&&(s[s.length-1][o.name]=o)}else if(a instanceof Kn){const o=a;if(s.length>0&&s[s.length-1][o.name])return;const l=r._findResource(o.name);l&&i.push(l)}else if(a instanceof nv){const o=a,l=r._functions.get(o.name);l&&(n&&(l.inUse=!0),e.calls.add(l.node),l.resources===null&&(l.resources=r._findResources(l.node,n)),i.push(...l.resources))}else if(a instanceof ev){const o=a,l=r._functions.get(o.name);l&&(n&&(l.inUse=!0),e.calls.add(l.node),l.resources===null&&(l.resources=r._findResources(l.node,n)),i.push(...l.resources))}}),[...new Map(i.map(a=>[a.name,a])).values()]}getBindGroups(){const e=[];function n(i,r){i>=e.length&&(e.length=i+1),e[i]===void 0&&(e[i]=[]),r>=e[i].length&&(e[i].length=r+1)}for(const i of this.uniforms)n(i.group,i.binding),e[i.group][i.binding]=i;for(const i of this.storage)n(i.group,i.binding),e[i.group][i.binding]=i;for(const i of this.textures)n(i.group,i.binding),e[i.group][i.binding]=i;for(const i of this.samplers)n(i.group,i.binding),e[i.group][i.binding]=i;return e}_getOutputs(e,n=void 0){if(n===void 0&&(n=[]),e instanceof Mr)this._getStructOutputs(e,n);else{const i=this._getOutputInfo(e);i!==null&&n.push(i)}return n}_getStructOutputs(e,n){for(const i of e.members)if(i.type instanceof Mr)this._getStructOutputs(i.type,n);else{const r=this._getAttribute(i,"location")||this._getAttribute(i,"builtin");if(r!==null){const s=this.getTypeInfo(i.type,i.type.attributes),a=this._parseInt(r.value),o=new eT(i.name,s,r.name,a);n.push(o)}}}_getOutputInfo(e){const n=this._getAttribute(e,"location")||this._getAttribute(e,"builtin");if(n!==null){const i=this.getTypeInfo(e,e.attributes),r=this._parseInt(n.value);return new eT("",i,n.name,r)}return null}_getInputs(e,n=void 0){n===void 0&&(n=[]);for(const i of e)if(i.type instanceof Mr)this._getStructInputs(i.type,n);else{const r=this._getInputInfo(i);r!==null&&n.push(r)}return n}_getStructInputs(e,n){for(const i of e.members)if(i.type instanceof Mr)this._getStructInputs(i.type,n);else{const r=this._getInputInfo(i);r!==null&&n.push(r)}}_getInputInfo(e){const n=this._getAttribute(e,"location")||this._getAttribute(e,"builtin");if(n!==null){const i=this._getAttribute(e,"interpolation"),r=this.getTypeInfo(e.type,e.attributes),s=this._parseInt(n.value),a=new Tz(e.name,r,n.name,s);return i!==null&&(a.interpolation=this._parseString(i.value)),a}return null}_parseString(e){return e instanceof Array&&(e=e[0]),e}_parseInt(e){e instanceof Array&&(e=e[0]);const n=parseInt(e);return isNaN(n)?e:n}_getAlias(e){for(const n of this.aliases)if(n.name==e)return n.type;return null}_getAliasInfo(e){return new vz(e.name,this.getTypeInfo(e.type,null))}getTypeInfoByName(e){for(const n of this.structs)if(n.name==e)return n;for(const n of this.aliases)if(n.name==e)return n.type;return null}getTypeInfo(e,n=null){if(this._types.has(e))return this._types.get(e);if(e instanceof ud){const r=e.type?this.getTypeInfo(e.type,e.attributes):null,s=new A_(e.name,r,n);return this._types.set(e,s),this._updateTypeInfo(s),s}if(e instanceof Mc){const r=e,s=r.format?this.getTypeInfo(r.format,r.attributes):null,a=new Ms(r.name,n);return a.format=s,a.count=r.count,this._types.set(e,a),this._updateTypeInfo(a),a}if(e instanceof Mr){const r=e,s=new ys(r.name,n);s.startLine=r.startLine,s.endLine=r.endLine;for(const a of r.members){const o=this.getTypeInfo(a.type,a.attributes);s.members.push(new J3(a.name,o,a.attributes))}return this._types.set(e,s),this._updateTypeInfo(s),s}if(e instanceof ac){const r=e,s=r.format instanceof te,a=r.format?s?this.getTypeInfo(r.format,null):new Ci(r.format,null):null,o=new Pa(r.name,a,n,r.access);return this._types.set(e,o),this._updateTypeInfo(o),o}if(e instanceof X){const r=e,s=r.format?this.getTypeInfo(r.format,null):null,a=new Pa(r.name,s,n,r.access);return this._types.set(e,a),this._updateTypeInfo(a),a}const i=new Ci(e.name,n);return this._types.set(e,i),this._updateTypeInfo(i),i}_updateTypeInfo(e){var n,i,r;const s=this._getTypeSize(e);if(e.size=(n=s==null?void 0:s.size)!==null&&n!==void 0?n:0,e instanceof Ms&&e.format){const a=this._getTypeSize(e.format);e.stride=Math.max((i=a==null?void 0:a.size)!==null&&i!==void 0?i:0,(r=a==null?void 0:a.align)!==null&&r!==void 0?r:0),this._updateTypeInfo(e.format)}e instanceof A_&&this._updateTypeInfo(e.format),e instanceof ys&&this._updateStructInfo(e)}_updateStructInfo(e){var n;let i=0,r=0,s=0,a=0;for(let o=0,l=e.members.length;o<l;++o){const c=e.members[o],u=this._getTypeSize(c);if(!u)continue;(n=this._getAlias(c.type.name))!==null&&n!==void 0||c.type;const f=u.align,d=u.size;i=this._roundUp(f,i+r),r=d,s=i,a=Math.max(a,f),c.offset=i,c.size=d,this._updateTypeInfo(c.type)}e.size=this._roundUp(a,s+r),e.align=a}_getTypeSize(e){var n,i;if(e==null)return null;const r=this._getAttributeNum(e.attributes,"size",0),s=this._getAttributeNum(e.attributes,"align",0);if(e instanceof J3&&(e=e.type),e instanceof Ci){const a=this._getAlias(e.name);a!==null&&(e=a)}{const a=lr._typeInfo[e.name];if(a!==void 0){const o=((n=e.format)===null||n===void 0?void 0:n.name)==="f16"?2:1;return new Of(Math.max(s,a.align/o),Math.max(r,a.size/o))}}{const a=lr._typeInfo[e.name.substring(0,e.name.length-1)];if(a){const o=e.name[e.name.length-1]==="h"?2:1;return new Of(Math.max(s,a.align/o),Math.max(r,a.size/o))}}if(e instanceof Ms){let a=e,o=8,l=8;const c=this._getTypeSize(a.format);return c!==null&&(l=c.size,o=c.align),l=a.count*this._getAttributeNum((i=e==null?void 0:e.attributes)!==null&&i!==void 0?i:null,"stride",this._roundUp(o,l)),r&&(l=r),new Of(Math.max(s,o),Math.max(r,l))}if(e instanceof ys){let a=0,o=0,l=0,c=0,u=0;for(const f of e.members){const d=this._getTypeSize(f.type);d!==null&&(a=Math.max(d.align,a),l=this._roundUp(d.align,l+c),c=d.size,u=l)}return o=this._roundUp(a,u+c),new Of(Math.max(s,a),Math.max(r,o))}return null}_isUniformVar(e){return e instanceof Pr&&e.storage=="uniform"}_isStorageVar(e){return e instanceof Pr&&e.storage=="storage"}_isTextureVar(e){return e instanceof Pr&&e.type!==null&&lr._textureTypes.indexOf(e.type.name)!=-1}_isSamplerVar(e){return e instanceof Pr&&e.type!==null&&lr._samplerTypes.indexOf(e.type.name)!=-1}_getAttribute(e,n){const i=e;if(!i||!i.attributes)return null;const r=i.attributes;for(let s of r)if(s.name==n)return s;return null}_getAttributeNum(e,n,i){if(e===null)return i;for(let r of e)if(r.name==n){let s=r!==null&&r.value!==null?r.value:i;return s instanceof Array&&(s=s[0]),typeof s=="number"?s:typeof s=="string"?parseInt(s):i}return i}_roundUp(e,n){return Math.ceil(n/e)*e}}lr._typeInfo={f16:{align:2,size:2},i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},atomic:{align:4,size:4},vec2:{align:8,size:8},vec3:{align:16,size:12},vec4:{align:16,size:16},mat2x2:{align:8,size:16},mat3x2:{align:8,size:24},mat4x2:{align:8,size:32},mat2x3:{align:16,size:32},mat3x3:{align:16,size:48},mat4x3:{align:16,size:64},mat2x4:{align:16,size:32},mat3x4:{align:16,size:48},mat4x4:{align:16,size:64}},lr._textureTypes=R.any_texture_type.map(t=>t.name),lr._samplerTypes=R.sampler_type.map(t=>t.name);let iv=0;class rv{constructor(e,n,i){this.id=iv++,this.name=e,this.value=n,this.node=i}clone(){return new rv(this.name,this.value,this.node)}}class sv{constructor(e){this.id=iv++,this.name=e.name,this.node=e}clone(){return new sv(this.node)}}class av{constructor(e){this.parent=null,this.variables=new Map,this.functions=new Map,this.currentFunctionName="",this.id=iv++,e&&(this.parent=e,this.currentFunctionName=e.currentFunctionName)}getVariable(e){var n;return this.variables.has(e)?(n=this.variables.get(e))!==null&&n!==void 0?n:null:this.parent?this.parent.getVariable(e):null}getFunction(e){var n;return this.functions.has(e)?(n=this.functions.get(e))!==null&&n!==void 0?n:null:this.parent?this.parent.getFunction(e):null}createVariable(e,n,i){this.variables.set(e,new rv(e,n,i??null))}setVariable(e,n,i){const r=this.getVariable(e);r!==null?r.value=n:this.createVariable(e,n,i)}getVariableValue(e){var n;const i=this.getVariable(e);return(n=i==null?void 0:i.value)!==null&&n!==void 0?n:null}clone(){return new av(this)}}class Hz{evalExpression(e,n){return null}getTypeInfo(e){return null}getVariableName(e,n){return""}}class Wz{constructor(e){this.exec=e}getTypeInfo(e){return this.exec.getTypeInfo(e)}All(e,n){const i=this.exec.evalExpression(e.args[0],n);let r=!0;if(i instanceof O)return i.data.forEach(s=>{s||(r=!1)}),new V(r?1:0,this.getTypeInfo("bool"));throw new Error(`All() expects a vector argument. Line ${e.line}`)}Any(e,n){const i=this.exec.evalExpression(e.args[0],n);if(i instanceof O){const r=i.data.some(s=>s);return new V(r?1:0,this.getTypeInfo("bool"))}throw new Error(`Any() expects a vector argument. Line ${e.line}`)}Select(e,n){const i=this.exec.evalExpression(e.args[2],n);if(!(i instanceof V))throw new Error(`Select() expects a bool condition. Line ${e.line}`);return i.value?this.exec.evalExpression(e.args[1],n):this.exec.evalExpression(e.args[0],n)}ArrayLength(e,n){let i=e.args[0];i instanceof qt&&(i=i.right);const r=this.exec.evalExpression(i,n);if(r instanceof Ft&&r.typeInfo.size===0){const s=r.typeInfo,a=r.buffer.byteLength/s.stride;return new V(a,this.getTypeInfo("u32"))}return new V(r.typeInfo.size,this.getTypeInfo("u32"))}Abs(e,n){const i=this.exec.evalExpression(e.args[0],n);if(i instanceof O)return new O(i.data.map(s=>Math.abs(s)),i.typeInfo);const r=i;return new V(Math.abs(r.value),r.typeInfo)}Acos(e,n){const i=this.exec.evalExpression(e.args[0],n);if(i instanceof O)return new O(i.data.map(s=>Math.acos(s)),i.typeInfo);const r=i;return new V(Math.acos(r.value),i.typeInfo)}Acosh(e,n){const i=this.exec.evalExpression(e.args[0],n);if(i instanceof O)return new O(i.data.map(s=>Math.acosh(s)),i.typeInfo);const r=i;return new V(Math.acosh(r.value),i.typeInfo)}Asin(e,n){const i=this.exec.evalExpression(e.args[0],n);if(i instanceof O)return new O(i.data.map(s=>Math.asin(s)),i.typeInfo);const r=i;return new V(Math.asin(r.value),i.typeInfo)}Asinh(e,n){const i=this.exec.evalExpression(e.args[0],n);if(i instanceof O)return new O(i.data.map(s=>Math.asinh(s)),i.typeInfo);const r=i;return new V(Math.asinh(r.value),i.typeInfo)}Atan(e,n){const i=this.exec.evalExpression(e.args[0],n);if(i instanceof O)return new O(i.data.map(s=>Math.atan(s)),i.typeInfo);const r=i;return new V(Math.atan(r.value),i.typeInfo)}Atanh(e,n){const i=this.exec.evalExpression(e.args[0],n);if(i instanceof O)return new O(i.data.map(s=>Math.atanh(s)),i.typeInfo);const r=i;return new V(Math.atanh(r.value),i.typeInfo)}Atan2(e,n){const i=this.exec.evalExpression(e.args[0],n),r=this.exec.evalExpression(e.args[1],n);if(i instanceof O&&r instanceof O)return new O(i.data.map((o,l)=>Math.atan2(o,r.data[l])),i.typeInfo);const s=i,a=r;return new V(Math.atan2(s.value,a.value),i.typeInfo)}Ceil(e,n){const i=this.exec.evalExpression(e.args[0],n);if(i instanceof O)return new O(i.data.map(s=>Math.ceil(s)),i.typeInfo);const r=i;return new V(Math.ceil(r.value),i.typeInfo)}_clamp(e,n,i){return Math.min(Math.max(e,n),i)}Clamp(e,n){const i=this.exec.evalExpression(e.args[0],n),r=this.exec.evalExpression(e.args[1],n),s=this.exec.evalExpression(e.args[2],n);if(i instanceof O&&r instanceof O&&s instanceof O)return new O(i.data.map((c,u)=>this._clamp(c,r.data[u],s.data[u])),i.typeInfo);const a=i,o=r,l=s;return new V(this._clamp(a.value,o.value,l.value),i.typeInfo)}Cos(e,n){const i=this.exec.evalExpression(e.args[0],n);if(i instanceof O)return new O(i.data.map(s=>Math.cos(s)),i.typeInfo);const r=i;return new V(Math.cos(r.value),i.typeInfo)}Cosh(e,n){const i=this.exec.evalExpression(e.args[0],n);if(i instanceof O)return new O(i.data.map(s=>Math.cosh(s)),i.typeInfo);const r=i;return new V(Math.cos(r.value),i.typeInfo)}CountLeadingZeros(e,n){const i=this.exec.evalExpression(e.args[0],n);if(i instanceof O)return new O(i.data.map(s=>Math.clz32(s)),i.typeInfo);const r=i;return new V(Math.clz32(r.value),i.typeInfo)}_countOneBits(e){let n=0;for(;e!==0;)1&e&&n++,e>>=1;return n}CountOneBits(e,n){const i=this.exec.evalExpression(e.args[0],n);if(i instanceof O)return new O(i.data.map(s=>this._countOneBits(s)),i.typeInfo);const r=i;return new V(this._countOneBits(r.value),i.typeInfo)}_countTrailingZeros(e){if(e===0)return 32;let n=0;for(;!(1&e);)e>>=1,n++;return n}CountTrailingZeros(e,n){const i=this.exec.evalExpression(e.args[0],n);if(i instanceof O)return new O(i.data.map(s=>this._countTrailingZeros(s)),i.typeInfo);const r=i;return new V(this._countTrailingZeros(r.value),i.typeInfo)}Cross(e,n){const i=this.exec.evalExpression(e.args[0],n),r=this.exec.evalExpression(e.args[1],n);if(i instanceof O&&r instanceof O){if(i.data.length!==3||r.data.length!==3)return console.error(`Cross() expects 3D vectors. Line ${e.line}`),null;const s=i.data,a=r.data;return new O([s[1]*a[2]-a[1]*s[2],s[2]*a[0]-a[2]*s[0],s[0]*a[1]-a[0]*s[1]],i.typeInfo)}return console.error(`Cross() expects vector arguments. Line ${e.line}`),null}Degrees(e,n){const i=this.exec.evalExpression(e.args[0],n),r=180/Math.PI;return i instanceof O?new O(i.data.map(s=>s*r),i.typeInfo):new V(i.value*r,this.getTypeInfo("f32"))}Determinant(e,n){const i=this.exec.evalExpression(e.args[0],n);if(i instanceof ve){const r=i.data,s=i.typeInfo.getTypeName(),a=s.endsWith("h")?this.getTypeInfo("f16"):this.getTypeInfo("f32");if(s==="mat2x2"||s==="mat2x2f"||s==="mat2x2h")return new V(r[0]*r[3]-r[1]*r[2],a);if(s==="mat2x3"||s==="mat2x3f"||s==="mat2x3h")return new V(r[0]*(r[4]*r[8]-r[5]*r[7])-r[1]*(r[3]*r[8]-r[5]*r[6])+r[2]*(r[3]*r[7]-r[4]*r[6]),a);if(s==="mat2x4"||s==="mat2x4f"||s==="mat2x4h")console.error(`TODO: Determinant for ${s}`);else if(s==="mat3x2"||s==="mat3x2f"||s==="mat3x2h")console.error(`TODO: Determinant for ${s}`);else{if(s==="mat3x3"||s==="mat3x3f"||s==="mat3x3h")return new V(r[0]*(r[4]*r[8]-r[5]*r[7])-r[1]*(r[3]*r[8]-r[5]*r[6])+r[2]*(r[3]*r[7]-r[4]*r[6]),a);s==="mat3x4"||s==="mat3x4f"||s==="mat3x4h"||s==="mat4x2"||s==="mat4x2f"||s==="mat4x2h"||s==="mat4x3"||s==="mat4x3f"||s==="mat4x3h"?console.error(`TODO: Determinant for ${s}`):s!=="mat4x4"&&s!=="mat4x4f"&&s!=="mat4x4h"||console.error(`TODO: Determinant for ${s}`)}}return console.error(`Determinant expects a matrix argument. Line ${e.line}`),null}Distance(e,n){const i=this.exec.evalExpression(e.args[0],n),r=this.exec.evalExpression(e.args[1],n);if(i instanceof O&&r instanceof O){let o=0;for(let l=0;l<i.data.length;++l)o+=(i.data[l]-r.data[l])*(i.data[l]-r.data[l]);return new V(Math.sqrt(o),this.getTypeInfo("f32"))}const s=i,a=r;return new V(Math.abs(s.value-a.value),i.typeInfo)}_dot(e,n){let i=0;for(let r=0;r<e.length;++r)i+=n[r]*e[r];return i}Dot(e,n){const i=this.exec.evalExpression(e.args[0],n),r=this.exec.evalExpression(e.args[1],n);return i instanceof O&&r instanceof O?new V(this._dot(i.data,r.data),this.getTypeInfo("f32")):(console.error(`Dot() expects vector arguments. Line ${e.line}`),null)}Dot4U8Packed(e,n){return console.error(`TODO: dot4U8Packed. Line ${e.line}`),null}Dot4I8Packed(e,n){return console.error(`TODO: dot4I8Packed. Line ${e.line}`),null}Exp(e,n){const i=this.exec.evalExpression(e.args[0],n);if(i instanceof O)return new O(i.data.map(s=>Math.exp(s)),i.typeInfo);const r=i;return new V(Math.exp(r.value),i.typeInfo)}Exp2(e,n){const i=this.exec.evalExpression(e.args[0],n);if(i instanceof O)return new O(i.data.map(s=>Math.pow(2,s)),i.typeInfo);const r=i;return new V(Math.pow(2,r.value),i.typeInfo)}ExtractBits(e,n){const i=this.exec.evalExpression(e.args[0],n),r=this.exec.evalExpression(e.args[1],n),s=this.exec.evalExpression(e.args[2],n);if(r.typeInfo.name!=="u32"&&r.typeInfo.name!=="x32")return console.error(`ExtractBits() expects an i32 offset argument. Line ${e.line}`),null;if(s.typeInfo.name!=="u32"&&s.typeInfo.name!=="x32")return console.error(`ExtractBits() expects an i32 count argument. Line ${e.line}`),null;const a=r.value,o=s.value;if(i instanceof O)return new O(i.data.map(c=>c>>a&(1<<o)-1),i.typeInfo);if(i.typeInfo.name!=="i32"&&i.typeInfo.name!=="x32")return console.error(`ExtractBits() expects an i32 argument. Line ${e.line}`),null;const l=i.value;return new V(l>>a&(1<<o)-1,this.getTypeInfo("i32"))}FaceForward(e,n){const i=this.exec.evalExpression(e.args[0],n),r=this.exec.evalExpression(e.args[1],n),s=this.exec.evalExpression(e.args[2],n);if(i instanceof O&&r instanceof O&&s instanceof O){const a=this._dot(r.data,s.data);return new O(a<0?Array.from(i.data):i.data.map(o=>-o),i.typeInfo)}return console.error(`FaceForward() expects vector arguments. Line ${e.line}`),null}_firstLeadingBit(e){return e===0?-1:31-Math.clz32(e)}FirstLeadingBit(e,n){const i=this.exec.evalExpression(e.args[0],n);if(i instanceof O)return new O(i.data.map(s=>this._firstLeadingBit(s)),i.typeInfo);const r=i;return new V(this._firstLeadingBit(r.value),i.typeInfo)}_firstTrailingBit(e){return e===0?-1:Math.log2(e&-e)}FirstTrailingBit(e,n){const i=this.exec.evalExpression(e.args[0],n);if(i instanceof O)return new O(i.data.map(s=>this._firstTrailingBit(s)),i.typeInfo);const r=i;return new V(this._firstTrailingBit(r.value),i.typeInfo)}Floor(e,n){const i=this.exec.evalExpression(e.args[0],n);if(i instanceof O)return new O(i.data.map(s=>Math.floor(s)),i.typeInfo);const r=i;return new V(Math.floor(r.value),i.typeInfo)}Fma(e,n){const i=this.exec.evalExpression(e.args[0],n),r=this.exec.evalExpression(e.args[1],n),s=this.exec.evalExpression(e.args[2],n);if(i instanceof O&&r instanceof O&&s instanceof O)return i.data.length!==r.data.length||i.data.length!==s.data.length?(console.error(`Fma() expects vectors of the same length. Line ${e.line}`),null):new O(i.data.map((c,u)=>c*r.data[u]+s.data[u]),i.typeInfo);const a=i,o=r,l=s;return new V(a.value*o.value+l.value,a.typeInfo)}Fract(e,n){const i=this.exec.evalExpression(e.args[0],n);if(i instanceof O)return new O(i.data.map(s=>s-Math.floor(s)),i.typeInfo);const r=i;return new V(r.value-Math.floor(r.value),i.typeInfo)}Frexp(e,n){return console.error(`TODO: frexp. Line ${e.line}`),null}InsertBits(e,n){const i=this.exec.evalExpression(e.args[0],n),r=this.exec.evalExpression(e.args[1],n),s=this.exec.evalExpression(e.args[2],n),a=this.exec.evalExpression(e.args[3],n);if(s.typeInfo.name!=="u32"&&s.typeInfo.name!=="x32")return console.error(`InsertBits() expects an i32 offset argument. Line ${e.line}`),null;const o=s.value,l=(1<<a.value)-1<<o,c=~l;if(i instanceof O&&r instanceof O)return new O(i.data.map((d,p)=>d&c|r.data[p]<<o&l),i.typeInfo);const u=i.value,f=r.value;return new V(u&c|f<<o&l,i.typeInfo)}InverseSqrt(e,n){const i=this.exec.evalExpression(e.args[0],n);if(i instanceof O)return new O(i.data.map(s=>1/Math.sqrt(s)),i.typeInfo);const r=i;return new V(1/Math.sqrt(r.value),i.typeInfo)}Ldexp(e,n){return console.error(`TODO: ldexp. Line ${e.line}`),null}Length(e,n){const i=this.exec.evalExpression(e.args[0],n);if(i instanceof O){let s=0;return i.data.forEach(a=>{s+=a*a}),new V(Math.sqrt(s),this.getTypeInfo("f32"))}const r=i;return new V(Math.abs(r.value),i.typeInfo)}Log(e,n){const i=this.exec.evalExpression(e.args[0],n);if(i instanceof O)return new O(i.data.map(s=>Math.log(s)),i.typeInfo);const r=i;return new V(Math.log(r.value),i.typeInfo)}Log2(e,n){const i=this.exec.evalExpression(e.args[0],n);if(i instanceof O)return new O(i.data.map(s=>Math.log2(s)),i.typeInfo);const r=i;return new V(Math.log2(r.value),i.typeInfo)}Max(e,n){const i=this.exec.evalExpression(e.args[0],n),r=this.exec.evalExpression(e.args[1],n);if(i instanceof O&&r instanceof O)return new O(i.data.map((o,l)=>Math.max(o,r.data[l])),i.typeInfo);const s=i,a=r;return new V(Math.max(s.value,a.value),i.typeInfo)}Min(e,n){const i=this.exec.evalExpression(e.args[0],n),r=this.exec.evalExpression(e.args[1],n);if(i instanceof O&&r instanceof O)return new O(i.data.map((o,l)=>Math.min(o,r.data[l])),i.typeInfo);const s=i,a=r;return new V(Math.min(s.value,a.value),i.typeInfo)}Mix(e,n){const i=this.exec.evalExpression(e.args[0],n),r=this.exec.evalExpression(e.args[1],n),s=this.exec.evalExpression(e.args[2],n);if(i instanceof O&&r instanceof O&&s instanceof O)return new O(i.data.map((l,c)=>i.data[c]*(1-s.data[c])+r.data[c]*s.data[c]),i.typeInfo);const a=r,o=s;return new V(i.value*(1-o.value)+a.value*o.value,i.typeInfo)}Modf(e,n){const i=this.exec.evalExpression(e.args[0],n),r=this.exec.evalExpression(e.args[1],n);if(i instanceof O&&r instanceof O)return new O(i.data.map((a,o)=>a%r.data[o]),i.typeInfo);const s=r;return new V(i.value%s.value,i.typeInfo)}Normalize(e,n){const i=this.exec.evalExpression(e.args[0],n);if(i instanceof O){const r=this.Length(e,n).value;return new O(i.data.map(s=>s/r),i.typeInfo)}return console.error(`Normalize() expects a vector argument. Line ${e.line}`),null}Pow(e,n){const i=this.exec.evalExpression(e.args[0],n),r=this.exec.evalExpression(e.args[1],n);if(i instanceof O&&r instanceof O)return new O(i.data.map((o,l)=>Math.pow(o,r.data[l])),i.typeInfo);const s=i,a=r;return new V(Math.pow(s.value,a.value),i.typeInfo)}QuantizeToF16(e,n){const i=this.exec.evalExpression(e.args[0],n);return i instanceof O?new O(i.data.map(r=>r),i.typeInfo):new V(i.value,i.typeInfo)}Radians(e,n){const i=this.exec.evalExpression(e.args[0],n);return i instanceof O?new O(i.data.map(r=>r*Math.PI/180),i.typeInfo):new V(i.value*Math.PI/180,this.getTypeInfo("f32"))}Reflect(e,n){let i=this.exec.evalExpression(e.args[0],n),r=this.exec.evalExpression(e.args[1],n);if(i instanceof O&&r instanceof O){const s=this._dot(i.data,r.data);return new O(i.data.map((a,o)=>a-2*s*r.data[o]),i.typeInfo)}return console.error(`Reflect() expects vector arguments. Line ${e.line}`),null}Refract(e,n){let i=this.exec.evalExpression(e.args[0],n),r=this.exec.evalExpression(e.args[1],n),s=this.exec.evalExpression(e.args[2],n);if(i instanceof O&&r instanceof O&&s instanceof V){const a=this._dot(r.data,i.data);return new O(i.data.map((o,l)=>{const c=1-s.value*s.value*(1-a*a);if(c<0)return 0;const u=Math.sqrt(c);return s.value*o-(s.value*a+u)*r.data[l]}),i.typeInfo)}return console.error(`Refract() expects vector arguments and a scalar argument. Line ${e.line}`),null}ReverseBits(e,n){return console.error(`TODO: reverseBits. Line ${e.line}`),null}Round(e,n){const i=this.exec.evalExpression(e.args[0],n);if(i instanceof O)return new O(i.data.map(s=>Math.round(s)),i.typeInfo);const r=i;return new V(Math.round(r.value),i.typeInfo)}Saturate(e,n){const i=this.exec.evalExpression(e.args[0],n);if(i instanceof O)return new O(i.data.map(s=>Math.min(Math.max(s,0),1)),i.typeInfo);const r=i;return new V(Math.min(Math.max(r.value,0),1),i.typeInfo)}Sign(e,n){const i=this.exec.evalExpression(e.args[0],n);if(i instanceof O)return new O(i.data.map(s=>Math.sign(s)),i.typeInfo);const r=i;return new V(Math.sign(r.value),i.typeInfo)}Sin(e,n){const i=this.exec.evalExpression(e.args[0],n);if(i instanceof O)return new O(i.data.map(s=>Math.sin(s)),i.typeInfo);const r=i;return new V(Math.sin(r.value),i.typeInfo)}Sinh(e,n){const i=this.exec.evalExpression(e.args[0],n);if(i instanceof O)return new O(i.data.map(s=>Math.sinh(s)),i.typeInfo);const r=i;return new V(Math.sinh(r.value),i.typeInfo)}_smoothstep(e,n,i){const r=Math.min(Math.max((i-e)/(n-e),0),1);return r*r*(3-2*r)}SmoothStep(e,n){const i=this.exec.evalExpression(e.args[0],n),r=this.exec.evalExpression(e.args[1],n),s=this.exec.evalExpression(e.args[2],n);if(s instanceof O&&i instanceof O&&r instanceof O)return new O(s.data.map((c,u)=>this._smoothstep(i.data[u],r.data[u],c)),s.typeInfo);const a=i,o=r,l=s;return new V(this._smoothstep(a.value,o.value,l.value),s.typeInfo)}Sqrt(e,n){const i=this.exec.evalExpression(e.args[0],n);if(i instanceof O)return new O(i.data.map(s=>Math.sqrt(s)),i.typeInfo);const r=i;return new V(Math.sqrt(r.value),i.typeInfo)}Step(e,n){const i=this.exec.evalExpression(e.args[0],n),r=this.exec.evalExpression(e.args[1],n);if(r instanceof O&&i instanceof O)return new O(r.data.map((a,o)=>a<i.data[o]?0:1),r.typeInfo);const s=i;return new V(r.value<s.value?0:1,s.typeInfo)}Tan(e,n){const i=this.exec.evalExpression(e.args[0],n);if(i instanceof O)return new O(i.data.map(s=>Math.tan(s)),i.typeInfo);const r=i;return new V(Math.tan(r.value),i.typeInfo)}Tanh(e,n){const i=this.exec.evalExpression(e.args[0],n);if(i instanceof O)return new O(i.data.map(s=>Math.tanh(s)),i.typeInfo);const r=i;return new V(Math.tanh(r.value),i.typeInfo)}_getTransposeType(e){const n=e.getTypeName();return n==="mat2x2f"||n==="mat2x2h"?e:n==="mat2x3f"?this.getTypeInfo("mat3x2f"):n==="mat2x3h"?this.getTypeInfo("mat3x2h"):n==="mat2x4f"?this.getTypeInfo("mat4x2f"):n==="mat2x4h"?this.getTypeInfo("mat4x2h"):n==="mat3x2f"?this.getTypeInfo("mat2x3f"):n==="mat3x2h"?this.getTypeInfo("mat2x3h"):n==="mat3x3f"||n==="mat3x3h"?e:n==="mat3x4f"?this.getTypeInfo("mat4x3f"):n==="mat3x4h"?this.getTypeInfo("mat4x3h"):n==="mat4x2f"?this.getTypeInfo("mat2x4f"):n==="mat4x2h"?this.getTypeInfo("mat2x4h"):n==="mat4x3f"?this.getTypeInfo("mat3x4f"):n==="mat4x3h"?this.getTypeInfo("mat3x4h"):(n==="mat4x4f"||n==="mat4x4h"||console.error(`Invalid matrix type ${n}`),e)}Transpose(e,n){const i=this.exec.evalExpression(e.args[0],n);if(!(i instanceof ve))return console.error(`Transpose() expects a matrix argument. Line ${e.line}`),null;const r=this._getTransposeType(i.typeInfo);if(i.typeInfo.name==="mat2x2"||i.typeInfo.name==="mat2x2f"||i.typeInfo.name==="mat2x2h"){const s=i.data;return new ve([s[0],s[2],s[1],s[3]],r)}if(i.typeInfo.name==="mat2x3"||i.typeInfo.name==="mat2x3f"||i.typeInfo.name==="mat2x3h"){const s=i.data;return new ve([s[0],s[3],s[6],s[1],s[4],s[7]],r)}if(i.typeInfo.name==="mat2x4"||i.typeInfo.name==="mat2x4f"||i.typeInfo.name==="mat2x4h"){const s=i.data;return new ve([s[0],s[4],s[8],s[12],s[1],s[5],s[9],s[13]],r)}if(i.typeInfo.name==="mat3x2"||i.typeInfo.name==="mat3x2f"||i.typeInfo.name==="mat3x2h"){const s=i.data;return new ve([s[0],s[3],s[1],s[4],s[2],s[5]],r)}if(i.typeInfo.name==="mat3x3"||i.typeInfo.name==="mat3x3f"||i.typeInfo.name==="mat3x3h"){const s=i.data;return new ve([s[0],s[3],s[6],s[1],s[4],s[7],s[2],s[5],s[8]],r)}if(i.typeInfo.name==="mat3x4"||i.typeInfo.name==="mat3x4f"||i.typeInfo.name==="mat3x4h"){const s=i.data;return new ve([s[0],s[4],s[8],s[12],s[1],s[5],s[9],s[13],s[2],s[6],s[10],s[14]],r)}if(i.typeInfo.name==="mat4x2"||i.typeInfo.name==="mat4x2f"||i.typeInfo.name==="mat4x2h"){const s=i.data;return new ve([s[0],s[4],s[1],s[5],s[2],s[6]],r)}if(i.typeInfo.name==="mat4x3"||i.typeInfo.name==="mat4x3f"||i.typeInfo.name==="mat4x3h"){const s=i.data;return new ve([s[0],s[4],s[8],s[1],s[5],s[9],s[2],s[6],s[10]],r)}if(i.typeInfo.name==="mat4x4"||i.typeInfo.name==="mat4x4f"||i.typeInfo.name==="mat4x4h"){const s=i.data;return new ve([s[0],s[4],s[8],s[12],s[1],s[5],s[9],s[13],s[2],s[6],s[10],s[14],s[3],s[7],s[11],s[15]],r)}return console.error(`Invalid matrix type ${i.typeInfo.name}`),null}Trunc(e,n){const i=this.exec.evalExpression(e.args[0],n);if(i instanceof O)return new O(i.data.map(s=>Math.trunc(s)),i.typeInfo);const r=i;return new V(Math.trunc(r.value),i.typeInfo)}Dpdx(e,n){return console.error(`TODO: dpdx. Line ${e.line}`),null}DpdxCoarse(e,n){return console.error(`TODO: dpdxCoarse. Line ${e.line}`),null}DpdxFine(e,n){return console.error("TODO: dpdxFine"),null}Dpdy(e,n){return console.error("TODO: dpdy"),null}DpdyCoarse(e,n){return console.error("TODO: dpdyCoarse"),null}DpdyFine(e,n){return console.error("TODO: dpdyFine"),null}Fwidth(e,n){return console.error("TODO: fwidth"),null}FwidthCoarse(e,n){return console.error("TODO: fwidthCoarse"),null}FwidthFine(e,n){return console.error("TODO: fwidthFine"),null}TextureDimensions(e,n){const i=e.args[0],r=e.args.length>1?this.exec.evalExpression(e.args[1],n).value:0;if(i instanceof Kn){const s=i.name,a=n.getVariableValue(s);if(a instanceof Or){if(r<0||r>=a.mipLevelCount)return console.error(`Invalid mip level for textureDimensions. Line ${e.line}`),null;const o=a.getMipLevelSize(r),l=a.dimension;return l==="1d"?new V(o[0],this.getTypeInfo("u32")):l==="3d"?new O(o,this.getTypeInfo("vec3u")):l==="2d"?new O(o.slice(0,2),this.getTypeInfo("vec2u")):(console.error(`Invalid texture dimension ${l} not found. Line ${e.line}`),null)}return console.error(`Texture ${s} not found. Line ${e.line}`),null}return console.error(`Invalid texture argument for textureDimensions. Line ${e.line}`),null}TextureGather(e,n){return console.error("TODO: textureGather"),null}TextureGatherCompare(e,n){return console.error("TODO: textureGatherCompare"),null}TextureLoad(e,n){const i=e.args[0],r=this.exec.evalExpression(e.args[1],n),s=e.args.length>2?this.exec.evalExpression(e.args[2],n).value:0;if(!(r instanceof O)||r.data.length!==2)return console.error(`Invalid UV argument for textureLoad. Line ${e.line}`),null;if(i instanceof Kn){const a=i.name,o=n.getVariableValue(a);if(o instanceof Or){const l=Math.floor(r.data[0]),c=Math.floor(r.data[1]);if(l<0||l>=o.width||c<0||c>=o.height)return console.error(`Texture ${a} out of bounds. Line ${e.line}`),null;const u=o.getPixel(l,c,0,s);return u===null?(console.error(`Invalid texture format for textureLoad. Line ${e.line}`),null):new O(u,this.getTypeInfo("vec4f"))}return console.error(`Texture ${a} not found. Line ${e.line}`),null}return console.error(`Invalid texture argument for textureLoad. Line ${e.line}`),null}TextureNumLayers(e,n){const i=e.args[0];if(i instanceof Kn){const r=i.name,s=n.getVariableValue(r);return s instanceof Or?new V(s.depthOrArrayLayers,this.getTypeInfo("u32")):(console.error(`Texture ${r} not found. Line ${e.line}`),null)}return console.error(`Invalid texture argument for textureNumLayers. Line ${e.line}`),null}TextureNumLevels(e,n){const i=e.args[0];if(i instanceof Kn){const r=i.name,s=n.getVariableValue(r);return s instanceof Or?new V(s.mipLevelCount,this.getTypeInfo("u32")):(console.error(`Texture ${r} not found. Line ${e.line}`),null)}return console.error(`Invalid texture argument for textureNumLevels. Line ${e.line}`),null}TextureNumSamples(e,n){const i=e.args[0];if(i instanceof Kn){const r=i.name,s=n.getVariableValue(r);return s instanceof Or?new V(s.sampleCount,this.getTypeInfo("u32")):(console.error(`Texture ${r} not found. Line ${e.line}`),null)}return console.error(`Invalid texture argument for textureNumSamples. Line ${e.line}`),null}TextureSample(e,n){return console.error("TODO: textureSample"),null}TextureSampleBias(e,n){return console.error("TODO: textureSampleBias"),null}TextureSampleCompare(e,n){return console.error("TODO: textureSampleCompare"),null}TextureSampleCompareLevel(e,n){return console.error("TODO: textureSampleCompareLevel"),null}TextureSampleGrad(e,n){return console.error("TODO: textureSampleGrad"),null}TextureSampleLevel(e,n){return console.error("TODO: textureSampleLevel"),null}TextureSampleBaseClampToEdge(e,n){return console.error("TODO: textureSampleBaseClampToEdge"),null}TextureStore(e,n){const i=e.args[0],r=this.exec.evalExpression(e.args[1],n),s=e.args.length===4?this.exec.evalExpression(e.args[2],n).value:0,a=e.args.length===4?this.exec.evalExpression(e.args[3],n).data:this.exec.evalExpression(e.args[2],n).data;if(a.length!==4)return console.error(`Invalid value argument for textureStore. Line ${e.line}`),null;if(!(r instanceof O)||r.data.length!==2)return console.error(`Invalid UV argument for textureStore. Line ${e.line}`),null;if(i instanceof Kn){const o=i.name,l=n.getVariableValue(o);if(l instanceof Or){const c=l.getMipLevelSize(0),u=Math.floor(r.data[0]),f=Math.floor(r.data[1]);return u<0||u>=c[0]||f<0||f>=c[1]?(console.error(`Texture ${o} out of bounds. Line ${e.line}`),null):(l.setPixel(u,f,0,s,Array.from(a)),null)}return console.error(`Texture ${o} not found. Line ${e.line}`),null}return console.error(`Invalid texture argument for textureStore. Line ${e.line}`),null}AtomicLoad(e,n){let i=e.args[0];i instanceof qt&&(i=i.right);const r=this.exec.getVariableName(i,n);return n.getVariable(r).value.getSubData(this.exec,i.postfix,n)}AtomicStore(e,n){let i=e.args[0];i instanceof qt&&(i=i.right);const r=this.exec.getVariableName(i,n),s=n.getVariable(r);let a=e.args[1];const o=this.exec.evalExpression(a,n),l=s.value.getSubData(this.exec,i.postfix,n);return l instanceof V&&o instanceof V&&(l.value=o.value),s.value instanceof Ft&&s.value.setDataValue(this.exec,l,i.postfix,n),null}AtomicAdd(e,n){let i=e.args[0];i instanceof qt&&(i=i.right);const r=this.exec.getVariableName(i,n),s=n.getVariable(r);let a=e.args[1];const o=this.exec.evalExpression(a,n),l=s.value.getSubData(this.exec,i.postfix,n),c=new V(l.value,l.typeInfo);return l instanceof V&&o instanceof V&&(l.value+=o.value),s.value instanceof Ft&&s.value.setDataValue(this.exec,l,i.postfix,n),c}AtomicSub(e,n){let i=e.args[0];i instanceof qt&&(i=i.right);const r=this.exec.getVariableName(i,n),s=n.getVariable(r);let a=e.args[1];const o=this.exec.evalExpression(a,n),l=s.value.getSubData(this.exec,i.postfix,n),c=new V(l.value,l.typeInfo);return l instanceof V&&o instanceof V&&(l.value-=o.value),s.value instanceof Ft&&s.value.setDataValue(this.exec,l,i.postfix,n),c}AtomicMax(e,n){let i=e.args[0];i instanceof qt&&(i=i.right);const r=this.exec.getVariableName(i,n),s=n.getVariable(r);let a=e.args[1];const o=this.exec.evalExpression(a,n),l=s.value.getSubData(this.exec,i.postfix,n),c=new V(l.value,l.typeInfo);return l instanceof V&&o instanceof V&&(l.value=Math.max(l.value,o.value)),s.value instanceof Ft&&s.value.setDataValue(this.exec,l,i.postfix,n),c}AtomicMin(e,n){let i=e.args[0];i instanceof qt&&(i=i.right);const r=this.exec.getVariableName(i,n),s=n.getVariable(r);let a=e.args[1];const o=this.exec.evalExpression(a,n),l=s.value.getSubData(this.exec,i.postfix,n),c=new V(l.value,l.typeInfo);return l instanceof V&&o instanceof V&&(l.value=Math.min(l.value,o.value)),s.value instanceof Ft&&s.value.setDataValue(this.exec,l,i.postfix,n),c}AtomicAnd(e,n){let i=e.args[0];i instanceof qt&&(i=i.right);const r=this.exec.getVariableName(i,n),s=n.getVariable(r);let a=e.args[1];const o=this.exec.evalExpression(a,n),l=s.value.getSubData(this.exec,i.postfix,n),c=new V(l.value,l.typeInfo);return l instanceof V&&o instanceof V&&(l.value=l.value&o.value),s.value instanceof Ft&&s.value.setDataValue(this.exec,l,i.postfix,n),c}AtomicOr(e,n){let i=e.args[0];i instanceof qt&&(i=i.right);const r=this.exec.getVariableName(i,n),s=n.getVariable(r);let a=e.args[1];const o=this.exec.evalExpression(a,n),l=s.value.getSubData(this.exec,i.postfix,n),c=new V(l.value,l.typeInfo);return l instanceof V&&o instanceof V&&(l.value=l.value|o.value),s.value instanceof Ft&&s.value.setDataValue(this.exec,l,i.postfix,n),c}AtomicXor(e,n){let i=e.args[0];i instanceof qt&&(i=i.right);const r=this.exec.getVariableName(i,n),s=n.getVariable(r);let a=e.args[1];const o=this.exec.evalExpression(a,n),l=s.value.getSubData(this.exec,i.postfix,n),c=new V(l.value,l.typeInfo);return l instanceof V&&o instanceof V&&(l.value=l.value^o.value),s.value instanceof Ft&&s.value.setDataValue(this.exec,l,i.postfix,n),c}AtomicExchange(e,n){let i=e.args[0];i instanceof qt&&(i=i.right);const r=this.exec.getVariableName(i,n),s=n.getVariable(r);let a=e.args[1];const o=this.exec.evalExpression(a,n),l=s.value.getSubData(this.exec,i.postfix,n),c=new V(l.value,l.typeInfo);return l instanceof V&&o instanceof V&&(l.value=o.value),s.value instanceof Ft&&s.value.setDataValue(this.exec,l,i.postfix,n),c}AtomicCompareExchangeWeak(e,n){return console.error("TODO: atomicCompareExchangeWeak"),null}Pack4x8snorm(e,n){return console.error("TODO: pack4x8snorm"),null}Pack4x8unorm(e,n){return console.error("TODO: pack4x8unorm"),null}Pack4xI8(e,n){return console.error("TODO: pack4xI8"),null}Pack4xU8(e,n){return console.error("TODO: pack4xU8"),null}Pack4x8Clamp(e,n){return console.error("TODO: pack4x8Clamp"),null}Pack4xU8Clamp(e,n){return console.error("TODO: pack4xU8Clamp"),null}Pack2x16snorm(e,n){return console.error("TODO: pack2x16snorm"),null}Pack2x16unorm(e,n){return console.error("TODO: pack2x16unorm"),null}Pack2x16float(e,n){return console.error("TODO: pack2x16float"),null}Unpack4x8snorm(e,n){return console.error("TODO: unpack4x8snorm"),null}Unpack4x8unorm(e,n){return console.error("TODO: unpack4x8unorm"),null}Unpack4xI8(e,n){return console.error("TODO: unpack4xI8"),null}Unpack4xU8(e,n){return console.error("TODO: unpack4xU8"),null}Unpack2x16snorm(e,n){return console.error("TODO: unpack2x16snorm"),null}Unpack2x16unorm(e,n){return console.error("TODO: unpack2x16unorm"),null}Unpack2x16float(e,n){return console.error("TODO: unpack2x16float"),null}StorageBarrier(e,n){return null}TextureBarrier(e,n){return null}WorkgroupBarrier(e,n){return null}WorkgroupUniformLoad(e,n){return null}SubgroupAdd(e,n){return console.error("TODO: subgroupAdd"),null}SubgroupExclusiveAdd(e,n){return console.error("TODO: subgroupExclusiveAdd"),null}SubgroupInclusiveAdd(e,n){return console.error("TODO: subgroupInclusiveAdd"),null}SubgroupAll(e,n){return console.error("TODO: subgroupAll"),null}SubgroupAnd(e,n){return console.error("TODO: subgroupAnd"),null}SubgroupAny(e,n){return console.error("TODO: subgroupAny"),null}SubgroupBallot(e,n){return console.error("TODO: subgroupBallot"),null}SubgroupBroadcast(e,n){return console.error("TODO: subgroupBroadcast"),null}SubgroupBroadcastFirst(e,n){return console.error("TODO: subgroupBroadcastFirst"),null}SubgroupElect(e,n){return console.error("TODO: subgroupElect"),null}SubgroupMax(e,n){return console.error("TODO: subgroupMax"),null}SubgroupMin(e,n){return console.error("TODO: subgroupMin"),null}SubgroupMul(e,n){return console.error("TODO: subgroupMul"),null}SubgroupExclusiveMul(e,n){return console.error("TODO: subgroupExclusiveMul"),null}SubgroupInclusiveMul(e,n){return console.error("TODO: subgroupInclusiveMul"),null}SubgroupOr(e,n){return console.error("TODO: subgroupOr"),null}SubgroupShuffle(e,n){return console.error("TODO: subgroupShuffle"),null}SubgroupShuffleDown(e,n){return console.error("TODO: subgroupShuffleDown"),null}SubgroupShuffleUp(e,n){return console.error("TODO: subgroupShuffleUp"),null}SubgroupShuffleXor(e,n){return console.error("TODO: subgroupShuffleXor"),null}SubgroupXor(e,n){return console.error("TODO: subgroupXor"),null}QuadBroadcast(e,n){return console.error("TODO: quadBroadcast"),null}QuadSwapDiagonal(e,n){return console.error("TODO: quadSwapDiagonal"),null}QuadSwapX(e,n){return console.error("TODO: quadSwapX"),null}QuadSwapY(e,n){return console.error("TODO: quadSwapY"),null}}const Rm={vec2:2,vec2f:2,vec2i:2,vec2u:2,vec2b:2,vec2h:2,vec3:3,vec3f:3,vec3i:3,vec3u:3,vec3b:3,vec3h:3,vec4:4,vec4f:4,vec4i:4,vec4u:4,vec4b:4,vec4h:4},Rn={mat2x2:[2,2,4],mat2x2f:[2,2,4],mat2x2h:[2,2,4],mat2x3:[2,3,6],mat2x3f:[2,3,6],mat2x3h:[2,3,6],mat2x4:[2,4,8],mat2x4f:[2,4,8],mat2x4h:[2,4,8],mat3x2:[3,2,6],mat3x2f:[3,2,6],mat3x2h:[3,2,6],mat3x3:[3,3,9],mat3x3f:[3,3,9],mat3x3h:[3,3,9],mat3x4:[3,4,12],mat3x4f:[3,4,12],mat3x4h:[3,4,12],mat4x2:[4,2,8],mat4x2f:[4,2,8],mat4x2h:[4,2,8],mat4x3:[4,3,12],mat4x3f:[4,3,12],mat4x3h:[4,3,12],mat4x4:[4,4,16],mat4x4f:[4,4,16],mat4x4h:[4,4,16]};class An extends Hz{constructor(e,n){var i;super(),this.ast=e??[],this.reflection=new lr,this.reflection.updateAST(this.ast),this.context=(i=n==null?void 0:n.clone())!==null&&i!==void 0?i:new av,this.builtins=new Wz(this),this.typeInfo={bool:this.getTypeInfo(te.bool),i32:this.getTypeInfo(te.i32),u32:this.getTypeInfo(te.u32),f32:this.getTypeInfo(te.f32),f16:this.getTypeInfo(te.f16),vec2f:this.getTypeInfo(X.vec2f),vec2u:this.getTypeInfo(X.vec2u),vec2i:this.getTypeInfo(X.vec2i),vec2h:this.getTypeInfo(X.vec2h),vec3f:this.getTypeInfo(X.vec3f),vec3u:this.getTypeInfo(X.vec3u),vec3i:this.getTypeInfo(X.vec3i),vec3h:this.getTypeInfo(X.vec3h),vec4f:this.getTypeInfo(X.vec4f),vec4u:this.getTypeInfo(X.vec4u),vec4i:this.getTypeInfo(X.vec4i),vec4h:this.getTypeInfo(X.vec4h),mat2x2f:this.getTypeInfo(X.mat2x2f),mat2x3f:this.getTypeInfo(X.mat2x3f),mat2x4f:this.getTypeInfo(X.mat2x4f),mat3x2f:this.getTypeInfo(X.mat3x2f),mat3x3f:this.getTypeInfo(X.mat3x3f),mat3x4f:this.getTypeInfo(X.mat3x4f),mat4x2f:this.getTypeInfo(X.mat4x2f),mat4x3f:this.getTypeInfo(X.mat4x3f),mat4x4f:this.getTypeInfo(X.mat4x4f)}}getVariableValue(e){var n,i;const r=(i=(n=this.context.getVariable(e))===null||n===void 0?void 0:n.value)!==null&&i!==void 0?i:null;if(r===null)return null;if(r instanceof V)return r.value;if(r instanceof O||r instanceof ve)return Array.from(r.data);if(r instanceof Ft&&r.typeInfo instanceof Ms){if(r.typeInfo.format.name==="u32")return Array.from(new Uint32Array(r.buffer,r.offset,r.typeInfo.count));if(r.typeInfo.format.name==="i32")return Array.from(new Int32Array(r.buffer,r.offset,r.typeInfo.count));if(r.typeInfo.format.name==="f32")return Array.from(new Float32Array(r.buffer,r.offset,r.typeInfo.count))}return console.error(`Unsupported return variable type ${r.typeInfo.name}`),null}execute(e){(e=e??{}).constants&&this._setOverrides(e.constants,this.context),this._execStatements(this.ast,this.context)}dispatchWorkgroups(e,n,i,r){const s=this.context.clone();(r=r??{}).constants&&this._setOverrides(r.constants,s),this._execStatements(this.ast,s);const a=s.getFunction(e);if(!a)return void console.error(`Function ${e} not found`);if(typeof n=="number")n=[n,1,1];else{if(n.length===0)return void console.error("Invalid dispatch count");n.length===1?n=[n[0],1,1]:n.length===2?n=[n[0],n[1],1]:n.length>3&&(n=[n[0],n[1],n[2]])}const o=n[0],l=n[1],c=n[2],u=this.getTypeInfo("vec3u");s.setVariable("@num_workgroups",new O(n,u));const f=this.reflection.getFunctionInfo(e);f===null&&console.error(`Function ${e} not found in reflection data`);for(const d in i)for(const p in i[d]){const m=i[d][p];s.variables.forEach(S=>{var v;const y=S.node;if(y!=null&&y.attributes){let _=null,T=null;for(const b of y.attributes)b.name==="binding"?_=b.value:b.name==="group"&&(T=b.value);if(p==_&&d==T){let b=!1;for(const M of f.resources)if(M.name===S.name&&M.group===parseInt(d)&&M.binding===parseInt(p)){b=!0;break}if(b)if(m.texture!==void 0&&m.descriptor!==void 0){const M=new Or(m.texture,this.getTypeInfo(y.type),m.descriptor,(v=m.texture.view)!==null&&v!==void 0?v:null);S.value=M}else m.uniform!==void 0?S.value=new Ft(m.uniform,this.getTypeInfo(y.type)):S.value=new Ft(m,this.getTypeInfo(y.type))}}})}for(let d=0;d<c;++d)for(let p=0;p<l;++p)for(let m=0;m<o;++m)s.setVariable("@workgroup_id",new O([m,p,d],this.getTypeInfo("vec3u"))),this._dispatchWorkgroup(a,[m,p,d],s)}execStatement(e,n){if(e instanceof tR)return this.evalExpression(e.value,n);if(e instanceof iR){if(e.condition){const i=this.evalExpression(e.condition,n);if(!(i instanceof V))throw new Error("Invalid break-if condition");if(!i.value)return null}return An._breakObj}if(e instanceof rR)return An._continueObj;if(e instanceof Rc)this._let(e,n);else if(e instanceof Pr)this._var(e,n);else if(e instanceof cd)this._const(e,n);else if(e instanceof au)this._function(e,n);else{if(e instanceof eR)return this._if(e,n);if(e instanceof JC)return this._switch(e,n);if(e instanceof KC)return this._for(e,n);if(e instanceof qC)return this._while(e,n);if(e instanceof QC)return this._loop(e,n);if(e instanceof E_){const i=n.clone();return i.currentFunctionName=n.currentFunctionName,this._execStatements(e.body,i)}if(e instanceof GC)this._assign(e,n);else if(e instanceof ZC)this._increment(e,n);else{if(e instanceof Mr)return null;if(e instanceof J0){const i=e.name;n.getVariable(i)===null&&n.setVariable(i,new V(0,this.getTypeInfo("u32")))}else if(e instanceof ev)this._call(e,n);else{if(e instanceof nR||e instanceof tv)return null;console.error("Invalid statement type.",e,`Line ${e.line}`)}}}return null}evalExpression(e,n){return e instanceof Vi?this._evalBinaryOp(e,n):e instanceof rn?this._evalLiteral(e,n):e instanceof Kn?this._evalVariable(e,n):e instanceof nv?this._evalCall(e,n):e instanceof Ji?this._evalCreate(e,n):e instanceof sR?this._evalConst(e,n):e instanceof aR?this._evalBitcast(e,n):e instanceof qt?this._evalUnaryOp(e,n):(console.error("Invalid expression type",e,`Line ${e.line}`),null)}getTypeInfo(e){var n;if(e instanceof te){const r=this.reflection.getTypeInfo(e);if(r!==null)return r}let i=(n=this.typeInfo[e])!==null&&n!==void 0?n:null;return i!==null||(i=this.reflection.getTypeInfoByName(e)),i}_setOverrides(e,n){for(const i in e){const r=e[i],s=this.reflection.getOverrideInfo(i);s!==null?(s.type===null&&(s.type=this.getTypeInfo("u32")),s.type.name==="u32"||s.type.name==="i32"||s.type.name==="f32"||s.type.name==="f16"?n.setVariable(i,new V(r,s.type)):s.type.name==="bool"?n.setVariable(i,new V(r?1:0,s.type)):s.type.name==="vec2"||s.type.name==="vec3"||s.type.name==="vec4"||s.type.name==="vec2f"||s.type.name==="vec3f"||s.type.name==="vec4f"||s.type.name==="vec2i"||s.type.name==="vec3i"||s.type.name==="vec4i"||s.type.name==="vec2u"||s.type.name==="vec3u"||s.type.name==="vec4u"||s.type.name==="vec2h"||s.type.name==="vec3h"||s.type.name==="vec4h"?n.setVariable(i,new O(r,s.type)):console.error(`Invalid constant type for ${i}`)):console.error(`Override ${i} does not exist in the shader.`)}}_dispatchWorkgroup(e,n,i){const r=[1,1,1];for(const u of e.node.attributes)if(u.name==="workgroup_size"){if(u.value.length>0){const f=i.getVariableValue(u.value[0]);r[0]=f instanceof V?f.value:parseInt(u.value[0])}if(u.value.length>1){const f=i.getVariableValue(u.value[1]);r[1]=f instanceof V?f.value:parseInt(u.value[1])}if(u.value.length>2){const f=i.getVariableValue(u.value[2]);r[2]=f instanceof V?f.value:parseInt(u.value[2])}}const s=this.getTypeInfo("vec3u"),a=this.getTypeInfo("u32");i.setVariable("@workgroup_size",new O(r,s));const o=r[0],l=r[1],c=r[2];for(let u=0,f=0;u<c;++u)for(let d=0;d<l;++d)for(let p=0;p<o;++p,++f){const m=[p,d,u],S=[p+n[0]*r[0],d+n[1]*r[1],u+n[2]*r[2]];i.setVariable("@local_invocation_id",new O(m,s)),i.setVariable("@global_invocation_id",new O(S,s)),i.setVariable("@local_invocation_index",new V(f,a)),this._dispatchExec(e,i)}}_dispatchExec(e,n){for(const i of e.node.args)for(const r of i.attributes)if(r.name==="builtin"){const s=`@${r.value}`,a=n.getVariable(s);a!==void 0&&n.variables.set(i.name,a)}this._execStatements(e.node.body,n)}getVariableName(e,n){for(;e instanceof qt;)e=e.right;return e instanceof Kn?e.name:(console.error("Unknown variable type",e,"Line",e.line),null)}_execStatements(e,n){for(const i of e){if(i instanceof Array){const s=n.clone(),a=this._execStatements(i,s);if(a)return a;continue}const r=this.execStatement(i,n);if(r)return r}return null}_call(e,n){const i=n.clone();i.currentFunctionName=e.name;const r=n.getFunction(e.name);if(r){for(let s=0;s<r.node.args.length;++s){const a=r.node.args[s],o=this.evalExpression(e.args[s],i);i.setVariable(a.name,o,a)}this._execStatements(r.node.body,i)}else e.isBuiltin?this._callBuiltinFunction(e,i):this.getTypeInfo(e.name)&&this._evalCreate(e,n)}_increment(e,n){const i=this.getVariableName(e.variable,n),r=n.getVariable(i);r?e.operator==="++"?r.value instanceof V?r.value.value++:console.error(`Variable ${i} is not a scalar. Line ${e.line}`):e.operator==="--"?r.value instanceof V?r.value.value--:console.error(`Variable ${i} is not a scalar. Line ${e.line}`):console.error(`Unknown increment operator ${e.operator}. Line ${e.line}`):console.error(`Variable ${i} not found. Line ${e.line}`)}_getVariableData(e,n){if(e instanceof Kn){const i=this.getVariableName(e,n),r=n.getVariable(i);return r===null?(console.error(`Variable ${i} not found. Line ${e.line}`),null):r.value.getSubData(this,e.postfix,n)}if(e instanceof qt){if(e.operator==="*"){const i=this._getVariableData(e.right,n);return i instanceof ao?i.reference.getSubData(this,e.postfix,n):(console.error(`Variable ${e.right} is not a pointer. Line ${e.line}`),null)}if(e.operator==="&"){const i=this._getVariableData(e.right,n);return new ao(i)}}return null}_assign(e,n){let i=null,r="<var>",s=null;if(e.variable instanceof qt){const l=this._getVariableData(e.variable,n),c=this.evalExpression(e.value,n),u=e.operator;if(u==="="){if(l instanceof V||l instanceof O||l instanceof ve){if(c instanceof V||c instanceof O||c instanceof ve&&l.data.length===c.data.length)return void l.data.set(c.data);console.error(`Invalid assignment. Line ${e.line}`)}else if(l instanceof Ft&&c instanceof Ft&&l.buffer.byteLength-l.offset>=c.buffer.byteLength-c.offset)return void(l.buffer.byteLength%4==0?new Uint32Array(l.buffer,l.offset,l.typeInfo.size/4).set(new Uint32Array(c.buffer,c.offset,c.typeInfo.size/4)):new Uint8Array(l.buffer,l.offset,l.typeInfo.size).set(new Uint8Array(c.buffer,c.offset,c.typeInfo.size)));return console.error(`Invalid assignment. Line ${e.line}`),null}if(u==="+=")return l instanceof V||l instanceof O||l instanceof ve?c instanceof V||c instanceof O||c instanceof ve?void l.data.set(c.data.map((f,d)=>l.data[d]+f)):void console.error(`Invalid assignment . Line ${e.line}`):void console.error(`Invalid assignment. Line ${e.line}`);if(u==="-=")return(l instanceof V||l instanceof O||l instanceof ve)&&(c instanceof V||c instanceof O||c instanceof ve)?void l.data.set(c.data.map((f,d)=>l.data[d]-f)):void console.error(`Invalid assignment. Line ${e.line}`)}if(e.variable instanceof qt){if(e.variable.operator==="*"){r=this.getVariableName(e.variable.right,n);const l=n.getVariable(r);if(!(l&&l.value instanceof ao))return void console.error(`Variable ${r} is not a pointer. Line ${e.line}`);i=l.value.reference;let c=e.variable.postfix;if(!c){let u=e.variable.right;for(;u instanceof qt;){if(u.postfix){c=u.postfix;break}u=u.right}}c&&(i=i.getSubData(this,c,n))}}else{s=e.variable.postfix,r=this.getVariableName(e.variable,n);const l=n.getVariable(r);if(l===null)return void console.error(`Variable ${r} not found. Line ${e.line}`);i=l.value}if(i instanceof ao&&(i=i.reference),i===null)return void console.error(`Variable ${r} not found. Line ${e.line}`);const a=this.evalExpression(e.value,n),o=e.operator;if(o!=="="){const l=i.getSubData(this,s,n);if(l instanceof O&&a instanceof V){const c=l.data,u=a.value;if(o==="+=")for(let f=0;f<c.length;++f)c[f]+=u;else if(o==="-=")for(let f=0;f<c.length;++f)c[f]-=u;else if(o==="*=")for(let f=0;f<c.length;++f)c[f]*=u;else if(o==="/=")for(let f=0;f<c.length;++f)c[f]/=u;else if(o==="%=")for(let f=0;f<c.length;++f)c[f]%=u;else if(o==="&=")for(let f=0;f<c.length;++f)c[f]&=u;else if(o==="|=")for(let f=0;f<c.length;++f)c[f]|=u;else if(o==="^=")for(let f=0;f<c.length;++f)c[f]^=u;else if(o==="<<=")for(let f=0;f<c.length;++f)c[f]<<=u;else if(o===">>=")for(let f=0;f<c.length;++f)c[f]>>=u;else console.error(`Invalid operator ${o}. Line ${e.line}`)}else if(l instanceof O&&a instanceof O){const c=l.data,u=a.data;if(c.length!==u.length)return void console.error(`Vector length mismatch. Line ${e.line}`);if(o==="+=")for(let f=0;f<c.length;++f)c[f]+=u[f];else if(o==="-=")for(let f=0;f<c.length;++f)c[f]-=u[f];else if(o==="*=")for(let f=0;f<c.length;++f)c[f]*=u[f];else if(o==="/=")for(let f=0;f<c.length;++f)c[f]/=u[f];else if(o==="%=")for(let f=0;f<c.length;++f)c[f]%=u[f];else if(o==="&=")for(let f=0;f<c.length;++f)c[f]&=u[f];else if(o==="|=")for(let f=0;f<c.length;++f)c[f]|=u[f];else if(o==="^=")for(let f=0;f<c.length;++f)c[f]^=u[f];else if(o==="<<=")for(let f=0;f<c.length;++f)c[f]<<=u[f];else if(o===">>=")for(let f=0;f<c.length;++f)c[f]>>=u[f];else console.error(`Invalid operator ${o}. Line ${e.line}`)}else{if(!(l instanceof V&&a instanceof V))return void console.error(`Invalid type for ${e.operator} operator. Line ${e.line}`);o==="+="?l.value+=a.value:o==="-="?l.value-=a.value:o==="*="?l.value*=a.value:o==="/="?l.value/=a.value:o==="%="?l.value%=a.value:o==="&="?l.value&=a.value:o==="|="?l.value|=a.value:o==="^="?l.value^=a.value:o==="<<="?l.value<<=a.value:o===">>="?l.value>>=a.value:console.error(`Invalid operator ${o}. Line ${e.line}`)}return void(i instanceof Ft&&i.setDataValue(this,l,s,n))}if(i instanceof Ft)i.setDataValue(this,a,s,n);else if(s){if(!(i instanceof O||i instanceof ve))return void console.error(`Variable ${r} is not a vector or matrix. Line ${e.line}`);if(s instanceof al){const l=this.evalExpression(s.index,n).value;if(i instanceof O){if(!(a instanceof V))return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);i.data[l]=a.value}else{if(!(i instanceof ve))return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);{const c=this.evalExpression(s.index,n).value;if(c<0)return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);if(!(a instanceof O))return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);{const u=i.typeInfo.getTypeName();if(u==="mat2x2"||u==="mat2x2f"||u==="mat2x2h"){if(!(c<2&&a.data.length===2))return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);i.data[2*c]=a.data[0],i.data[2*c+1]=a.data[1]}else if(u==="mat2x3"||u==="mat2x3f"||u==="mat2x3h"){if(!(c<2&&a.data.length===3))return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);i.data[3*c]=a.data[0],i.data[3*c+1]=a.data[1],i.data[3*c+2]=a.data[2]}else if(u==="mat2x4"||u==="mat2x4f"||u==="mat2x4h"){if(!(c<2&&a.data.length===4))return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);i.data[4*c]=a.data[0],i.data[4*c+1]=a.data[1],i.data[4*c+2]=a.data[2],i.data[4*c+3]=a.data[3]}else if(u==="mat3x2"||u==="mat3x2f"||u==="mat3x2h"){if(!(c<3&&a.data.length===2))return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);i.data[2*c]=a.data[0],i.data[2*c+1]=a.data[1]}else if(u==="mat3x3"||u==="mat3x3f"||u==="mat3x3h"){if(!(c<3&&a.data.length===3))return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);i.data[3*c]=a.data[0],i.data[3*c+1]=a.data[1],i.data[3*c+2]=a.data[2]}else if(u==="mat3x4"||u==="mat3x4f"||u==="mat3x4h"){if(!(c<3&&a.data.length===4))return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);i.data[4*c]=a.data[0],i.data[4*c+1]=a.data[1],i.data[4*c+2]=a.data[2],i.data[4*c+3]=a.data[3]}else if(u==="mat4x2"||u==="mat4x2f"||u==="mat4x2h"){if(!(c<4&&a.data.length===2))return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);i.data[2*c]=a.data[0],i.data[2*c+1]=a.data[1]}else if(u==="mat4x3"||u==="mat4x3f"||u==="mat4x3h"){if(!(c<4&&a.data.length===3))return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);i.data[3*c]=a.data[0],i.data[3*c+1]=a.data[1],i.data[3*c+2]=a.data[2]}else{if(u!=="mat4x4"&&u!=="mat4x4f"&&u!=="mat4x4h")return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);if(!(c<4&&a.data.length===4))return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);i.data[4*c]=a.data[0],i.data[4*c+1]=a.data[1],i.data[4*c+2]=a.data[2],i.data[4*c+3]=a.data[3]}}}}}else if(s instanceof Da){const l=s.value;if(!(i instanceof O))return void console.error(`Invalid assignment to ${l}. Variable ${r} is not a vector. Line ${e.line}`);if(a instanceof V){if(l.length>1)return void console.error(`Invalid assignment to ${l} for variable ${r}. Line ${e.line}`);if(l==="x")i.data[0]=a.value;else if(l==="y"){if(i.data.length<2)return void console.error(`Invalid assignment to ${l} for variable ${r}. Line ${e.line}`);i.data[1]=a.value}else if(l==="z"){if(i.data.length<3)return void console.error(`Invalid assignment to ${l} for variable ${r}. Line ${e.line}`);i.data[2]=a.value}else if(l==="w"){if(i.data.length<4)return void console.error(`Invalid assignment to ${l} for variable ${r}. Line ${e.line}`);i.data[3]=a.value}}else{if(!(a instanceof O))return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);if(l.length!==a.data.length)return void console.error(`Invalid assignment to ${l} for variable ${r}. Line ${e.line}`);for(let c=0;c<l.length;++c){const u=l[c];if(u==="x"||u==="r")i.data[0]=a.data[c];else if(u==="y"||u==="g"){if(a.data.length<2)return void console.error(`Invalid assignment to ${u} for variable ${r}. Line ${e.line}`);i.data[1]=a.data[c]}else if(u==="z"||u==="b"){if(a.data.length<3)return void console.error(`Invalid assignment to ${u} for variable ${r}. Line ${e.line}`);i.data[2]=a.data[c]}else{if(u!=="w"&&u!=="a")return void console.error(`Invalid assignment to ${u} for variable ${r}. Line ${e.line}`);if(a.data.length<4)return void console.error(`Invalid assignment to ${u} for variable ${r}. Line ${e.line}`);i.data[3]=a.data[c]}}}}}else i instanceof V&&a instanceof V?i.value=a.value:i instanceof O&&a instanceof O||i instanceof ve&&a instanceof ve?i.data.set(a.data):console.error(`Invalid assignment to ${r}. Line ${e.line}`)}_function(e,n){const i=new sv(e);n.functions.set(e.name,i)}_const(e,n){let i=null;e.value!==null&&(i=this.evalExpression(e.value,n)),n.createVariable(e.name,i,e)}_let(e,n){let i=null;if(e.value!==null){if(i=this.evalExpression(e.value,n),i===null)return void console.error(`Invalid value for variable ${e.name}. Line ${e.line}`);e.value instanceof qt||(i=i.clone())}else{const r=e.type.name;if(r==="f32"||r==="i32"||r==="u32"||r==="bool"||r==="f16"||r==="vec2"||r==="vec3"||r==="vec4"||r==="vec2f"||r==="vec3f"||r==="vec4f"||r==="vec2i"||r==="vec3i"||r==="vec4i"||r==="vec2u"||r==="vec3u"||r==="vec4u"||r==="vec2h"||r==="vec3h"||r==="vec4h"||r==="vec2b"||r==="vec3b"||r==="vec4b"||r==="mat2x2"||r==="mat2x3"||r==="mat2x4"||r==="mat3x2"||r==="mat3x3"||r==="mat3x4"||r==="mat4x2"||r==="mat4x3"||r==="mat4x4"||r==="mat2x2f"||r==="mat2x3f"||r==="mat2x4f"||r==="mat3x2f"||r==="mat3x3f"||r==="mat3x4f"||r==="mat4x2f"||r==="mat4x3f"||r==="mat4x4f"||r==="mat2x2h"||r==="mat2x3h"||r==="mat2x4h"||r==="mat3x2h"||r==="mat3x3h"||r==="mat3x4h"||r==="mat4x2h"||r==="mat4x3h"||r==="mat4x4h"||r==="array"){const s=new Ji(e.type,[]);i=this._evalCreate(s,n)}}n.createVariable(e.name,i,e)}_var(e,n){let i=null;if(e.value!==null){if(i=this.evalExpression(e.value,n),i===null)return void console.error(`Invalid value for variable ${e.name}. Line ${e.line}`);e.value instanceof qt||(i=i.clone())}else{if(e.type===null)return void console.error(`Variable ${e.name} has no type. Line ${e.line}`);const r=e.type.name;if(r==="f32"||r==="i32"||r==="u32"||r==="bool"||r==="f16"||r==="vec2"||r==="vec3"||r==="vec4"||r==="vec2f"||r==="vec3f"||r==="vec4f"||r==="vec2i"||r==="vec3i"||r==="vec4i"||r==="vec2u"||r==="vec3u"||r==="vec4u"||r==="vec2h"||r==="vec3h"||r==="vec4h"||r==="vec2b"||r==="vec3b"||r==="vec4b"||r==="mat2x2"||r==="mat2x3"||r==="mat2x4"||r==="mat3x2"||r==="mat3x3"||r==="mat3x4"||r==="mat4x2"||r==="mat4x3"||r==="mat4x4"||r==="mat2x2f"||r==="mat2x3f"||r==="mat2x4f"||r==="mat3x2f"||r==="mat3x3f"||r==="mat3x4f"||r==="mat4x2f"||r==="mat4x3f"||r==="mat4x4f"||r==="mat2x2h"||r==="mat2x3h"||r==="mat2x4h"||r==="mat3x2h"||r==="mat3x3h"||r==="mat3x4h"||r==="mat4x2h"||r==="mat4x3h"||r==="mat4x4h"||e.type instanceof Mc||e.type instanceof Mr||e.type instanceof X){const s=new Ji(e.type,[]);i=this._evalCreate(s,n)}}n.createVariable(e.name,i,e)}_switch(e,n){n=n.clone();const i=this.evalExpression(e.condition,n);if(!(i instanceof V))return console.error(`Invalid if condition. Line ${e.line}`),null;let r=null;for(const s of e.cases)if(s instanceof cR)for(const a of s.selectors){if(a instanceof fd){r=s;continue}const o=this.evalExpression(a,n);if(!(o instanceof V))return console.error(`Invalid case selector. Line ${e.line}`),null;if(o.value===i.value)return this._execStatements(s.body,n)}else s instanceof uR&&(r=s);return r?this._execStatements(r.body,n):null}_if(e,n){n=n.clone();const i=this.evalExpression(e.condition,n);if(!(i instanceof V))return console.error(`Invalid if condition. Line ${e.line}`),null;if(i.value)return this._execStatements(e.body,n);for(const r of e.elseif){const s=this.evalExpression(r.condition,n);if(!(s instanceof V))return console.error(`Invalid if condition. Line ${e.line}`),null;if(s.value)return this._execStatements(r.body,n)}return e.else?this._execStatements(e.else,n):null}_getScalarValue(e){return e instanceof V?e.value:(console.error("Expected scalar value.",e),0)}_for(e,n){for(n=n.clone(),this.execStatement(e.init,n);this._getScalarValue(this.evalExpression(e.condition,n));){const i=this._execStatements(e.body,n);if(i===An._breakObj)break;if(i!==null&&i!==An._continueObj)return i;this.execStatement(e.increment,n)}return null}_loop(e,n){for(n=n.clone();;){const i=this._execStatements(e.body,n);if(i===An._breakObj)break;if(i===An._continueObj){if(e.continuing&&this._execStatements(e.continuing.body,n)===An._breakObj)break}else if(i!==null)return i}return null}_while(e,n){for(n=n.clone();this._getScalarValue(this.evalExpression(e.condition,n));){const i=this._execStatements(e.body,n);if(i===An._breakObj)break;if(i!==An._continueObj&&i!==null)return i}return null}_evalBitcast(e,n){const i=this.evalExpression(e.value,n),r=e.type;if(i instanceof V){const s=aT(i.value,i.typeInfo.name,r.name);return new V(s,this.getTypeInfo(r))}if(i instanceof O){const s=i.typeInfo.getTypeName();let a="";if(s.endsWith("f"))a="f32";else if(s.endsWith("i"))a="i32";else if(s.endsWith("u"))a="u32";else if(s.endsWith("b"))a="bool";else{if(!s.endsWith("h"))return console.error(`Unknown vector type ${s}. Line ${e.line}`),null;a="f16"}const o=r.getTypeName();let l="";if(o.endsWith("f"))l="f32";else if(o.endsWith("i"))l="i32";else if(o.endsWith("u"))l="u32";else if(o.endsWith("b"))l="bool";else{if(!o.endsWith("h"))return console.error(`Unknown vector type ${l}. Line ${e.line}`),null;l="f16"}const c=function(u,f,d){if(f===d)return u;const p=new Array(u.length);for(let m=0;m<u.length;m++)p[m]=aT(u[m],f,d);return p}(Array.from(i.data),a,l);return new O(c,this.getTypeInfo(r))}return console.error(`TODO: bitcast for ${i.typeInfo.name}. Line ${e.line}`),null}_evalConst(e,n){return n.getVariableValue(e.name).clone().getSubData(this,e.postfix,n)}_evalCreate(e,n){var i;if(e instanceof Ji){if(e.type===null)return C_.void;switch(e.type.getTypeName()){case"bool":case"i32":case"u32":case"f32":case"f16":return this._callConstructorValue(e,n);case"vec2":case"vec3":case"vec4":case"vec2f":case"vec3f":case"vec4f":case"vec2h":case"vec3h":case"vec4h":case"vec2i":case"vec3i":case"vec4i":case"vec2u":case"vec3u":case"vec4u":case"vec2b":case"vec3b":case"vec4b":return this._callConstructorVec(e,n);case"mat2x2":case"mat2x2f":case"mat2x2h":case"mat2x3":case"mat2x3f":case"mat2x3h":case"mat2x4":case"mat2x4f":case"mat2x4h":case"mat3x2":case"mat3x2f":case"mat3x2h":case"mat3x3":case"mat3x3f":case"mat3x3h":case"mat3x4":case"mat3x4f":case"mat3x4h":case"mat4x2":case"mat4x2f":case"mat4x2h":case"mat4x3":case"mat4x3f":case"mat4x3h":case"mat4x4":case"mat4x4f":case"mat4x4h":return this._callConstructorMatrix(e,n)}}const r=e instanceof Ji?e.type.name:e.name,s=e instanceof Ji?this.getTypeInfo(e.type):this.getTypeInfo(e.name);if(s===null)return console.error(`Unknown type ${r}. Line ${e.line}`),null;if(s.size===0)return null;const a=new Ft(new ArrayBuffer(s.size),s,0);if(s instanceof ys){if(e.args)for(let o=0;o<e.args.length;++o){const l=s.members[o],c=e.args[o],u=this.evalExpression(c,n);a.setData(this,u,l.type,l.offset,n)}}else if(s instanceof Ms){let o=0;if(e.args)for(let l=0;l<e.args.length;++l){const c=e.args[l],u=this.evalExpression(c,n);s.format===null&&(((i=u.typeInfo)===null||i===void 0?void 0:i.name)==="x32"?s.format=this.getTypeInfo("i32"):s.format=u.typeInfo),a.setData(this,u,s.format,o,n),o+=s.stride}}else console.error(`Unknown type "${r}". Line ${e.line}`);return e instanceof Ji?a.getSubData(this,e.postfix,n):a}_evalLiteral(e,n){const i=this.getTypeInfo(e.type),r=i.name;return r==="x32"||r==="u32"||r==="f32"||r==="f16"||r==="i32"||r==="bool"?new V(e.scalarValue,i):r==="vec2"||r==="vec3"||r==="vec4"||r==="vec2f"||r==="vec3f"||r==="vec4f"||r==="vec2h"||r==="vec3h"||r==="vec4h"||r==="vec2i"||r==="vec3i"||r==="vec4i"||r==="vec2u"||r==="vec3u"||r==="vec4u"?this._callConstructorVec(e,n):r==="mat2x2"||r==="mat2x3"||r==="mat2x4"||r==="mat3x2"||r==="mat3x3"||r==="mat3x4"||r==="mat4x2"||r==="mat4x3"||r==="mat4x4"||r==="mat2x2f"||r==="mat2x3f"||r==="mat2x4f"||r==="mat3x2f"||r==="mat3x3f"||r==="mat3x4f"||r==="mat4x2f"||r==="mat4x3f"||r==="mat4x4f"||r==="mat2x2h"||r==="mat2x3h"||r==="mat2x4h"||r==="mat3x2h"||r==="mat3x3h"||r==="mat3x4h"||r==="mat4x2h"||r==="mat4x3h"||r==="mat4x4h"?this._callConstructorMatrix(e,n):e.value}_evalVariable(e,n){const i=n.getVariableValue(e.name);return i===null?i:i.getSubData(this,e.postfix,n)}_maxFormatTypeInfo(e){let n=e[0];if(n.name==="f32")return n;for(let i=1;i<e.length;++i){const r=An._priority.get(n.name);An._priority.get(e[i].name)<r&&(n=e[i])}return n.name==="x32"?this.getTypeInfo("i32"):n}_evalUnaryOp(e,n){const i=this.evalExpression(e.right,n);if(e.operator==="&")return new ao(i);if(e.operator==="*")return i instanceof ao?i.reference.getSubData(this,e.postfix,n):(console.error(`Invalid dereference. Line ${e.line}`),null);const r=i instanceof V?i.value:i instanceof O?Array.from(i.data):null;switch(e.operator){case"+":{if(le(r)){const o=r.map((l,c)=>+l);return new O(o,i.typeInfo)}const s=r,a=this._maxFormatTypeInfo([i.typeInfo,i.typeInfo]);return new V(+s,a)}case"-":{if(le(r)){const o=r.map((l,c)=>-l);return new O(o,i.typeInfo)}const s=r,a=this._maxFormatTypeInfo([i.typeInfo,i.typeInfo]);return new V(-s,a)}case"!":{if(le(r)){const o=r.map((l,c)=>l?0:1);return new O(o,i.typeInfo)}const s=r,a=this._maxFormatTypeInfo([i.typeInfo,i.typeInfo]);return new V(s?0:1,a)}case"~":{if(le(r)){const o=r.map((l,c)=>~l);return new O(o,i.typeInfo)}const s=r,a=this._maxFormatTypeInfo([i.typeInfo,i.typeInfo]);return new V(~s,a)}}return console.error(`Invalid unary operator ${e.operator}. Line ${e.line}`),null}_evalBinaryOp(e,n){const i=this.evalExpression(e.left,n),r=this.evalExpression(e.right,n),s=i instanceof V?i.value:i instanceof O||i instanceof ve?Array.from(i.data):null,a=r instanceof V?r.value:r instanceof O||r instanceof ve?Array.from(r.data):null;switch(e.operator){case"+":{if(le(s)&&le(a)){const u=s,f=a;if(u.length!==f.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const d=u.map((p,m)=>p+f[m]);return new O(d,i.typeInfo)}if(le(s)){const u=a,f=s.map((d,p)=>d+u);return new O(f,i.typeInfo)}if(le(a)){const u=s,f=a.map((d,p)=>u+d);return new O(f,r.typeInfo)}const o=s,l=a,c=this._maxFormatTypeInfo([i.typeInfo,r.typeInfo]);return new V(o+l,c)}case"-":{if(le(s)&&le(a)){const u=s,f=a;if(u.length!==f.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const d=u.map((p,m)=>p-f[m]);return new O(d,i.typeInfo)}if(le(s)){const u=a,f=s.map((d,p)=>d-u);return new O(f,i.typeInfo)}if(le(a)){const u=s,f=a.map((d,p)=>u-d);return new O(f,r.typeInfo)}const o=s,l=a,c=this._maxFormatTypeInfo([i.typeInfo,r.typeInfo]);return new V(o-l,c)}case"*":{if(le(s)&&le(a)){const u=s,f=a;if(i instanceof ve&&r instanceof ve){const d=function(v,y,_,T){if(Rn[y.name]===void 0||Rn[T.name]===void 0)return null;const b=Rn[y.name][0],M=Rn[y.name][1],C=Rn[T.name][0];if(b!==Rn[T.name][1])return null;const D=new Array(C*M);for(let F=0;F<M;F++)for(let L=0;L<C;L++){let U=0;for(let N=0;N<b;N++)U+=v[N*M+F]*_[L*b+N];D[F*C+L]=U}return D}(u,i.typeInfo,f,r.typeInfo);if(d===null)return console.error(`Matrix multiplication failed. Line ${e.line}.`),null;const p=Rn[r.typeInfo.name][0],m=Rn[i.typeInfo.name][1],S=this.getTypeInfo(`mat${p}x${m}f`);return new ve(d,S)}if(i instanceof ve&&r instanceof O){const d=function(p,m,S,v){if(Rn[m.name]===void 0||Rm[v.name]===void 0)return null;const y=Rn[m.name][0],_=Rn[m.name][1];if(y!==S.length)return null;const T=new Array(_);for(let b=0;b<_;b++){let M=0;for(let C=0;C<y;C++)M+=p[C*_+b]*S[C];T[b]=M}return T}(u,i.typeInfo,f,r.typeInfo);return d===null?(console.error(`Matrix vector multiplication failed. Line ${e.line}.`),null):new O(d,r.typeInfo)}if(i instanceof O&&r instanceof ve){const d=function(p,m,S,v){if(Rm[m.name]===void 0||Rn[v.name]===void 0)return null;const y=Rn[v.name][0],_=Rn[v.name][1];if(_!==p.length)return null;const T=[];for(let b=0;b<y;b++){let M=0;for(let C=0;C<_;C++)M+=p[C]*S[C*y+b];T[b]=M}return T}(u,i.typeInfo,f,r.typeInfo);return d===null?(console.error(`Matrix vector multiplication failed. Line ${e.line}.`),null):new O(d,i.typeInfo)}{if(u.length!==f.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const d=u.map((p,m)=>p*f[m]);return new O(d,i.typeInfo)}}if(le(s)){const u=a,f=s.map((d,p)=>d*u);return i instanceof ve?new ve(f,i.typeInfo):new O(f,i.typeInfo)}if(le(a)){const u=s,f=a.map((d,p)=>u*d);return r instanceof ve?new ve(f,r.typeInfo):new O(f,r.typeInfo)}const o=s,l=a,c=this._maxFormatTypeInfo([i.typeInfo,r.typeInfo]);return new V(o*l,c)}case"%":{if(le(s)&&le(a)){const u=s,f=a;if(u.length!==f.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const d=u.map((p,m)=>p%f[m]);return new O(d,i.typeInfo)}if(le(s)){const u=a,f=s.map((d,p)=>d%u);return new O(f,i.typeInfo)}if(le(a)){const u=s,f=a.map((d,p)=>u%d);return new O(f,r.typeInfo)}const o=s,l=a,c=this._maxFormatTypeInfo([i.typeInfo,r.typeInfo]);return new V(o%l,c)}case"/":{if(le(s)&&le(a)){const u=s,f=a;if(u.length!==f.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const d=u.map((p,m)=>p/f[m]);return new O(d,i.typeInfo)}if(le(s)){const u=a,f=s.map((d,p)=>d/u);return new O(f,i.typeInfo)}if(le(a)){const u=s,f=a.map((d,p)=>u/d);return new O(f,r.typeInfo)}const o=s,l=a,c=this._maxFormatTypeInfo([i.typeInfo,r.typeInfo]);return new V(o/l,c)}case"&":{if(le(s)&&le(a)){const u=s,f=a;if(u.length!==f.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const d=u.map((p,m)=>p&f[m]);return new O(d,i.typeInfo)}if(le(s)){const u=a,f=s.map((d,p)=>d&u);return new O(f,i.typeInfo)}if(le(a)){const u=s,f=a.map((d,p)=>u&d);return new O(f,r.typeInfo)}const o=s,l=a,c=this._maxFormatTypeInfo([i.typeInfo,r.typeInfo]);return new V(o&l,c)}case"|":{if(le(s)&&le(a)){const u=s,f=a;if(u.length!==f.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const d=u.map((p,m)=>p|f[m]);return new O(d,i.typeInfo)}if(le(s)){const u=a,f=s.map((d,p)=>d|u);return new O(f,i.typeInfo)}if(le(a)){const u=s,f=a.map((d,p)=>u|d);return new O(f,r.typeInfo)}const o=s,l=a,c=this._maxFormatTypeInfo([i.typeInfo,r.typeInfo]);return new V(o|l,c)}case"^":{if(le(s)&&le(a)){const u=s,f=a;if(u.length!==f.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const d=u.map((p,m)=>p^f[m]);return new O(d,i.typeInfo)}if(le(s)){const u=a,f=s.map((d,p)=>d^u);return new O(f,i.typeInfo)}if(le(a)){const u=s,f=a.map((d,p)=>u^d);return new O(f,r.typeInfo)}const o=s,l=a,c=this._maxFormatTypeInfo([i.typeInfo,r.typeInfo]);return new V(o^l,c)}case"<<":{if(le(s)&&le(a)){const u=s,f=a;if(u.length!==f.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const d=u.map((p,m)=>p<<f[m]);return new O(d,i.typeInfo)}if(le(s)){const u=a,f=s.map((d,p)=>d<<u);return new O(f,i.typeInfo)}if(le(a)){const u=s,f=a.map((d,p)=>u<<d);return new O(f,r.typeInfo)}const o=s,l=a,c=this._maxFormatTypeInfo([i.typeInfo,r.typeInfo]);return new V(o<<l,c)}case">>":{if(le(s)&&le(a)){const u=s,f=a;if(u.length!==f.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const d=u.map((p,m)=>p>>f[m]);return new O(d,i.typeInfo)}if(le(s)){const u=a,f=s.map((d,p)=>d>>u);return new O(f,i.typeInfo)}if(le(a)){const u=s,f=a.map((d,p)=>u>>d);return new O(f,r.typeInfo)}const o=s,l=a,c=this._maxFormatTypeInfo([i.typeInfo,r.typeInfo]);return new V(o>>l,c)}case">":if(le(s)&&le(a)){const o=s,l=a;if(o.length!==l.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const c=o.map((u,f)=>u>l[f]?1:0);return new O(c,i.typeInfo)}if(le(s)){const o=a,l=s.map((c,u)=>c>o?1:0);return new O(l,i.typeInfo)}if(le(a)){const o=s,l=a.map((c,u)=>o>c?1:0);return new O(l,r.typeInfo)}return new V(s>a?1:0,this.getTypeInfo("bool"));case"<":if(le(s)&&le(a)){const o=s,l=a;if(o.length!==l.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const c=o.map((u,f)=>u<l[f]?1:0);return new O(c,i.typeInfo)}if(le(s)){const o=a,l=s.map((c,u)=>c<o?1:0);return new O(l,i.typeInfo)}if(le(a)){const o=s,l=a.map((c,u)=>o<c?1:0);return new O(l,r.typeInfo)}return new V(s<a?1:0,this.getTypeInfo("bool"));case"==":if(le(s)&&le(a)){const o=s,l=a;if(o.length!==l.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const c=o.map((u,f)=>u===l[f]?1:0);return new O(c,i.typeInfo)}if(le(s)){const o=a,l=s.map((c,u)=>c==o?1:0);return new O(l,i.typeInfo)}if(le(a)){const o=s,l=a.map((c,u)=>o==c?1:0);return new O(l,r.typeInfo)}return new V(s===a?1:0,this.getTypeInfo("bool"));case"!=":if(le(s)&&le(a)){const o=s,l=a;if(o.length!==l.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const c=o.map((u,f)=>u!==l[f]?1:0);return new O(c,i.typeInfo)}if(le(s)){const o=a,l=s.map((c,u)=>c!==o?1:0);return new O(l,i.typeInfo)}if(le(a)){const o=s,l=a.map((c,u)=>o!==c?1:0);return new O(l,r.typeInfo)}return new V(s!==a?1:0,this.getTypeInfo("bool"));case">=":if(le(s)&&le(a)){const o=s,l=a;if(o.length!==l.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const c=o.map((u,f)=>u>=l[f]?1:0);return new O(c,i.typeInfo)}if(le(s)){const o=a,l=s.map((c,u)=>c>=o?1:0);return new O(l,i.typeInfo)}if(le(a)){const o=s,l=a.map((c,u)=>o>=c?1:0);return new O(l,r.typeInfo)}return new V(s>=a?1:0,this.getTypeInfo("bool"));case"<=":if(le(s)&&le(a)){const o=s,l=a;if(o.length!==l.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const c=o.map((u,f)=>u<=l[f]?1:0);return new O(c,i.typeInfo)}if(le(s)){const o=a,l=s.map((c,u)=>c<=o?1:0);return new O(l,i.typeInfo)}if(le(a)){const o=s,l=a.map((c,u)=>o<=c?1:0);return new O(l,r.typeInfo)}return new V(s<=a?1:0,this.getTypeInfo("bool"));case"&&":if(le(s)&&le(a)){const o=s,l=a;if(o.length!==l.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const c=o.map((u,f)=>u&&l[f]?1:0);return new O(c,i.typeInfo)}if(le(s)){const o=a,l=s.map((c,u)=>c&&o?1:0);return new O(l,i.typeInfo)}if(le(a)){const o=s,l=a.map((c,u)=>o&&c?1:0);return new O(l,r.typeInfo)}return new V(s&&a?1:0,this.getTypeInfo("bool"));case"||":if(le(s)&&le(a)){const o=s,l=a;if(o.length!==l.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const c=o.map((u,f)=>u||l[f]?1:0);return new O(c,i.typeInfo)}if(le(s)){const o=a,l=s.map((c,u)=>c||o?1:0);return new O(l,i.typeInfo)}if(le(a)){const o=s,l=a.map((c,u)=>o||c?1:0);return new O(l,r.typeInfo)}return new V(s||a?1:0,this.getTypeInfo("bool"))}return console.error(`Unknown operator ${e.operator}. Line ${e.line}`),null}_evalCall(e,n){if(e.cachedReturnValue!==null)return e.cachedReturnValue;const i=n.clone();i.currentFunctionName=e.name;const r=n.getFunction(e.name);if(!r)return e.isBuiltin?this._callBuiltinFunction(e,i):this.getTypeInfo(e.name)?this._evalCreate(e,n):(console.error(`Unknown function "${e.name}". Line ${e.line}`),null);for(let s=0;s<r.node.args.length;++s){const a=r.node.args[s],o=this.evalExpression(e.args[s],i);i.createVariable(a.name,o,a)}return this._execStatements(r.node.body,i)}_callBuiltinFunction(e,n){switch(e.name){case"all":return this.builtins.All(e,n);case"any":return this.builtins.Any(e,n);case"select":return this.builtins.Select(e,n);case"arrayLength":return this.builtins.ArrayLength(e,n);case"abs":return this.builtins.Abs(e,n);case"acos":return this.builtins.Acos(e,n);case"acosh":return this.builtins.Acosh(e,n);case"asin":return this.builtins.Asin(e,n);case"asinh":return this.builtins.Asinh(e,n);case"atan":return this.builtins.Atan(e,n);case"atanh":return this.builtins.Atanh(e,n);case"atan2":return this.builtins.Atan2(e,n);case"ceil":return this.builtins.Ceil(e,n);case"clamp":return this.builtins.Clamp(e,n);case"cos":return this.builtins.Cos(e,n);case"cosh":return this.builtins.Cosh(e,n);case"countLeadingZeros":return this.builtins.CountLeadingZeros(e,n);case"countOneBits":return this.builtins.CountOneBits(e,n);case"countTrailingZeros":return this.builtins.CountTrailingZeros(e,n);case"cross":return this.builtins.Cross(e,n);case"degrees":return this.builtins.Degrees(e,n);case"determinant":return this.builtins.Determinant(e,n);case"distance":return this.builtins.Distance(e,n);case"dot":return this.builtins.Dot(e,n);case"dot4U8Packed":return this.builtins.Dot4U8Packed(e,n);case"dot4I8Packed":return this.builtins.Dot4I8Packed(e,n);case"exp":return this.builtins.Exp(e,n);case"exp2":return this.builtins.Exp2(e,n);case"extractBits":return this.builtins.ExtractBits(e,n);case"faceForward":return this.builtins.FaceForward(e,n);case"firstLeadingBit":return this.builtins.FirstLeadingBit(e,n);case"firstTrailingBit":return this.builtins.FirstTrailingBit(e,n);case"floor":return this.builtins.Floor(e,n);case"fma":return this.builtins.Fma(e,n);case"fract":return this.builtins.Fract(e,n);case"frexp":return this.builtins.Frexp(e,n);case"insertBits":return this.builtins.InsertBits(e,n);case"inverseSqrt":return this.builtins.InverseSqrt(e,n);case"ldexp":return this.builtins.Ldexp(e,n);case"length":return this.builtins.Length(e,n);case"log":return this.builtins.Log(e,n);case"log2":return this.builtins.Log2(e,n);case"max":return this.builtins.Max(e,n);case"min":return this.builtins.Min(e,n);case"mix":return this.builtins.Mix(e,n);case"modf":return this.builtins.Modf(e,n);case"normalize":return this.builtins.Normalize(e,n);case"pow":return this.builtins.Pow(e,n);case"quantizeToF16":return this.builtins.QuantizeToF16(e,n);case"radians":return this.builtins.Radians(e,n);case"reflect":return this.builtins.Reflect(e,n);case"refract":return this.builtins.Refract(e,n);case"reverseBits":return this.builtins.ReverseBits(e,n);case"round":return this.builtins.Round(e,n);case"saturate":return this.builtins.Saturate(e,n);case"sign":return this.builtins.Sign(e,n);case"sin":return this.builtins.Sin(e,n);case"sinh":return this.builtins.Sinh(e,n);case"smoothstep":return this.builtins.SmoothStep(e,n);case"sqrt":return this.builtins.Sqrt(e,n);case"step":return this.builtins.Step(e,n);case"tan":return this.builtins.Tan(e,n);case"tanh":return this.builtins.Tanh(e,n);case"transpose":return this.builtins.Transpose(e,n);case"trunc":return this.builtins.Trunc(e,n);case"dpdx":return this.builtins.Dpdx(e,n);case"dpdxCoarse":return this.builtins.DpdxCoarse(e,n);case"dpdxFine":return this.builtins.DpdxFine(e,n);case"dpdy":return this.builtins.Dpdy(e,n);case"dpdyCoarse":return this.builtins.DpdyCoarse(e,n);case"dpdyFine":return this.builtins.DpdyFine(e,n);case"fwidth":return this.builtins.Fwidth(e,n);case"fwidthCoarse":return this.builtins.FwidthCoarse(e,n);case"fwidthFine":return this.builtins.FwidthFine(e,n);case"textureDimensions":return this.builtins.TextureDimensions(e,n);case"textureGather":return this.builtins.TextureGather(e,n);case"textureGatherCompare":return this.builtins.TextureGatherCompare(e,n);case"textureLoad":return this.builtins.TextureLoad(e,n);case"textureNumLayers":return this.builtins.TextureNumLayers(e,n);case"textureNumLevels":return this.builtins.TextureNumLevels(e,n);case"textureNumSamples":return this.builtins.TextureNumSamples(e,n);case"textureSample":return this.builtins.TextureSample(e,n);case"textureSampleBias":return this.builtins.TextureSampleBias(e,n);case"textureSampleCompare":return this.builtins.TextureSampleCompare(e,n);case"textureSampleCompareLevel":return this.builtins.TextureSampleCompareLevel(e,n);case"textureSampleGrad":return this.builtins.TextureSampleGrad(e,n);case"textureSampleLevel":return this.builtins.TextureSampleLevel(e,n);case"textureSampleBaseClampToEdge":return this.builtins.TextureSampleBaseClampToEdge(e,n);case"textureStore":return this.builtins.TextureStore(e,n);case"atomicLoad":return this.builtins.AtomicLoad(e,n);case"atomicStore":return this.builtins.AtomicStore(e,n);case"atomicAdd":return this.builtins.AtomicAdd(e,n);case"atomicSub":return this.builtins.AtomicSub(e,n);case"atomicMax":return this.builtins.AtomicMax(e,n);case"atomicMin":return this.builtins.AtomicMin(e,n);case"atomicAnd":return this.builtins.AtomicAnd(e,n);case"atomicOr":return this.builtins.AtomicOr(e,n);case"atomicXor":return this.builtins.AtomicXor(e,n);case"atomicExchange":return this.builtins.AtomicExchange(e,n);case"atomicCompareExchangeWeak":return this.builtins.AtomicCompareExchangeWeak(e,n);case"pack4x8snorm":return this.builtins.Pack4x8snorm(e,n);case"pack4x8unorm":return this.builtins.Pack4x8unorm(e,n);case"pack4xI8":return this.builtins.Pack4xI8(e,n);case"pack4xU8":return this.builtins.Pack4xU8(e,n);case"pack4x8Clamp":return this.builtins.Pack4x8Clamp(e,n);case"pack4xU8Clamp":return this.builtins.Pack4xU8Clamp(e,n);case"pack2x16snorm":return this.builtins.Pack2x16snorm(e,n);case"pack2x16unorm":return this.builtins.Pack2x16unorm(e,n);case"pack2x16float":return this.builtins.Pack2x16float(e,n);case"unpack4x8snorm":return this.builtins.Unpack4x8snorm(e,n);case"unpack4x8unorm":return this.builtins.Unpack4x8unorm(e,n);case"unpack4xI8":return this.builtins.Unpack4xI8(e,n);case"unpack4xU8":return this.builtins.Unpack4xU8(e,n);case"unpack2x16snorm":return this.builtins.Unpack2x16snorm(e,n);case"unpack2x16unorm":return this.builtins.Unpack2x16unorm(e,n);case"unpack2x16float":return this.builtins.Unpack2x16float(e,n);case"storageBarrier":return this.builtins.StorageBarrier(e,n);case"textureBarrier":return this.builtins.TextureBarrier(e,n);case"workgroupBarrier":return this.builtins.WorkgroupBarrier(e,n);case"workgroupUniformLoad":return this.builtins.WorkgroupUniformLoad(e,n);case"subgroupAdd":return this.builtins.SubgroupAdd(e,n);case"subgroupExclusiveAdd":return this.builtins.SubgroupExclusiveAdd(e,n);case"subgroupInclusiveAdd":return this.builtins.SubgroupInclusiveAdd(e,n);case"subgroupAll":return this.builtins.SubgroupAll(e,n);case"subgroupAnd":return this.builtins.SubgroupAnd(e,n);case"subgroupAny":return this.builtins.SubgroupAny(e,n);case"subgroupBallot":return this.builtins.SubgroupBallot(e,n);case"subgroupBroadcast":return this.builtins.SubgroupBroadcast(e,n);case"subgroupBroadcastFirst":return this.builtins.SubgroupBroadcastFirst(e,n);case"subgroupElect":return this.builtins.SubgroupElect(e,n);case"subgroupMax":return this.builtins.SubgroupMax(e,n);case"subgroupMin":return this.builtins.SubgroupMin(e,n);case"subgroupMul":return this.builtins.SubgroupMul(e,n);case"subgroupExclusiveMul":return this.builtins.SubgroupExclusiveMul(e,n);case"subgroupInclusiveMul":return this.builtins.SubgroupInclusiveMul(e,n);case"subgroupOr":return this.builtins.SubgroupOr(e,n);case"subgroupShuffle":return this.builtins.SubgroupShuffle(e,n);case"subgroupShuffleDown":return this.builtins.SubgroupShuffleDown(e,n);case"subgroupShuffleUp":return this.builtins.SubgroupShuffleUp(e,n);case"subgroupShuffleXor":return this.builtins.SubgroupShuffleXor(e,n);case"subgroupXor":return this.builtins.SubgroupXor(e,n);case"quadBroadcast":return this.builtins.QuadBroadcast(e,n);case"quadSwapDiagonal":return this.builtins.QuadSwapDiagonal(e,n);case"quadSwapX":return this.builtins.QuadSwapX(e,n);case"quadSwapY":return this.builtins.QuadSwapY(e,n)}const i=n.getFunction(e.name);if(i){const r=n.clone();for(let s=0;s<i.node.args.length;++s){const a=i.node.args[s],o=this.evalExpression(e.args[s],r);r.setVariable(a.name,o,a)}return this._execStatements(i.node.body,r)}return null}_callConstructorValue(e,n){if(!e.args||e.args.length===0)return new V(0,this.getTypeInfo(e.type));const i=this.evalExpression(e.args[0],n);return i.typeInfo=this.getTypeInfo(e.type),i.getSubData(this,e.postfix,n).clone()}_callConstructorVec(e,n){const i=this.getTypeInfo(e.type),r=e.type.getTypeName(),s=Rm[r];if(s===void 0)return console.error(`Invalid vec constructor ${r}. Line ${e.line}`),null;const a=[];if(e instanceof rn)if(e.isVector){const o=e.vectorValue;for(const l of o)a.push(l)}else a.push(e.scalarValue);else if(e.args)for(const o of e.args){const l=this.evalExpression(o,n);if(l instanceof O){const c=l.data;for(let u=0;u<c.length;++u){let f=c[u];a.push(f)}}else if(l instanceof V){let c=l.value;a.push(c)}}if(e.type instanceof X&&e.type.format===null&&(e.type.format=X.f32),a.length===0){const o=new Array(s).fill(0);return new O(o,i).getSubData(this,e.postfix,n)}if(a.length===1)for(;a.length<s;)a.push(a[0]);return a.length<s?(console.error(`Invalid vec constructor. Line ${e.line}`),null):new O(a.length>s?a.slice(0,s):a,i).getSubData(this,e.postfix,n)}_callConstructorMatrix(e,n){const i=this.getTypeInfo(e.type),r=e.type.getTypeName(),s=Rn[r];if(s===void 0)return console.error(`Invalid matrix constructor ${r}. Line ${e.line}`),null;const a=[];if(e instanceof rn)if(e.isVector){const o=e.vectorValue;for(const l of o)a.push(l)}else a.push(e.scalarValue);else if(e.args)for(const o of e.args){const l=this.evalExpression(o,n);l instanceof O?a.push(...l.data):l instanceof V?a.push(l.value):l instanceof ve&&a.push(...l.data)}if(i instanceof Pa&&i.format===null&&(i.format=this.getTypeInfo("f32")),a.length===0){const o=new Array(s[2]).fill(0);return new ve(o,i).getSubData(this,e.postfix,n)}return a.length!==s[2]?(console.error(`Invalid matrix constructor. Line ${e.line}`),null):new ve(a,i).getSubData(this,e.postfix,n)}}An._breakObj=new Pi(new Ci("BREAK",null),null),An._continueObj=new Pi(new Ci("CONTINUE",null),null),An._priority=new Map([["f32",0],["f16",1],["u32",2],["i32",3],["x32",3]]);class Yz{constructor(){this.constants=new Map,this.aliases=new Map,this.structs=new Map}}class Xz{constructor(){this._tokens=[],this._current=0,this._currentLine=1,this._deferArrayCountEval=[],this._currentLoop=[],this._context=new Yz,this._exec=new An,this._forwardTypeCount=0}parse(e){this._initialize(e),this._deferArrayCountEval.length=0;const n=[];for(;!this._isAtEnd();){const i=this._global_decl_or_directive();if(!i)break;n.push(i)}if(this._deferArrayCountEval.length>0){for(const i of this._deferArrayCountEval){const r=i.arrayType,s=i.countNode;if(s instanceof Kn){const a=s.name,o=this._context.constants.get(a);if(o)try{const l=o.constEvaluate(this._exec);r.count=l}catch{}}}this._deferArrayCountEval.length=0}if(this._forwardTypeCount>0)for(const i of n)i.search(r=>{r instanceof rT||r instanceof ud?r.type=this._forwardType(r.type):r instanceof Mc?r.format=this._forwardType(r.format):r instanceof Pr||r instanceof Rc||r instanceof cd?r.type=this._forwardType(r.type):r instanceof au?r.returnType=this._forwardType(r.returnType):r instanceof iT&&(r.type=this._forwardType(r.type))});return n}_forwardType(e){if(e instanceof nT){const n=this._getType(e.name);if(n)return n}else e instanceof ud?e.type=this._forwardType(e.type):e instanceof Mc&&(e.format=this._forwardType(e.format));return e}_initialize(e){if(e)if(typeof e=="string"){const n=new Bz(e);this._tokens=n.scanTokens()}else this._tokens=e;else this._tokens=[];this._current=0}_updateNode(e,n){return e.line=n??this._currentLine,e}_error(e,n){return{token:e,message:n,toString:()=>`${n}`}}_isAtEnd(){return this._current>=this._tokens.length||this._peek().type==R.eof}_match(e){if(e instanceof W)return!!this._check(e)&&(this._advance(),!0);for(let n=0,i=e.length;n<i;++n){const r=e[n];if(this._check(r))return this._advance(),!0}return!1}_consume(e,n){if(this._check(e))return this._advance();throw this._error(this._peek(),`${n}. Line:${this._currentLine}`)}_check(e){if(this._isAtEnd())return!1;const n=this._peek();if(e instanceof Array){const i=n.type;let r=!1;for(const s of e){if(i===s)return!0;s===R.tokens.name&&(r=!0)}if(r){const s=R.tokens.name.rule.exec(n.lexeme);if(s&&s.index==0&&s[0]==n.lexeme)return!0}return!1}if(n.type===e)return!0;if(e===R.tokens.name){const i=R.tokens.name.rule.exec(n.lexeme);return i&&i.index==0&&i[0]==n.lexeme}return!1}_advance(){var e,n;return this._currentLine=(n=(e=this._peek())===null||e===void 0?void 0:e.line)!==null&&n!==void 0?n:-1,this._isAtEnd()||this._current++,this._previous()}_peek(){return this._tokens[this._current]}_previous(){return this._tokens[this._current-1]}_global_decl_or_directive(){for(;this._match(R.tokens.semicolon)&&!this._isAtEnd(););if(this._match(R.keywords.alias)){const n=this._type_alias();return this._consume(R.tokens.semicolon,"Expected ';'"),this._exec.reflection.updateAST([n]),n}if(this._match(R.keywords.diagnostic)){const n=this._diagnostic();return this._consume(R.tokens.semicolon,"Expected ';'"),this._exec.reflection.updateAST([n]),n}if(this._match(R.keywords.requires)){const n=this._requires_directive();return this._consume(R.tokens.semicolon,"Expected ';'"),this._exec.reflection.updateAST([n]),n}if(this._match(R.keywords.enable)){const n=this._enable_directive();return this._consume(R.tokens.semicolon,"Expected ';'"),this._exec.reflection.updateAST([n]),n}const e=this._attribute();if(this._check(R.keywords.var)){const n=this._global_variable_decl();return n!=null&&(n.attributes=e),this._consume(R.tokens.semicolon,"Expected ';'."),this._exec.reflection.updateAST([n]),n}if(this._check(R.keywords.override)){const n=this._override_variable_decl();return n!=null&&(n.attributes=e),this._consume(R.tokens.semicolon,"Expected ';'."),this._exec.reflection.updateAST([n]),n}if(this._check(R.keywords.let)){const n=this._global_let_decl();return n!=null&&(n.attributes=e),this._consume(R.tokens.semicolon,"Expected ';'."),this._exec.reflection.updateAST([n]),n}if(this._check(R.keywords.const)){const n=this._global_const_decl();return n!=null&&(n.attributes=e),this._consume(R.tokens.semicolon,"Expected ';'."),this._exec.reflection.updateAST([n]),n}if(this._check(R.keywords.struct)){const n=this._struct_decl();return n!=null&&(n.attributes=e),this._exec.reflection.updateAST([n]),n}if(this._check(R.keywords.fn)){const n=this._function_decl();return n!=null&&(n.attributes=e),this._exec.reflection.updateAST([n]),n}return null}_function_decl(){if(!this._match(R.keywords.fn))return null;const e=this._currentLine,n=this._consume(R.tokens.ident,"Expected function name.").toString();this._consume(R.tokens.paren_left,"Expected '(' for function arguments.");const i=[];if(!this._check(R.tokens.paren_right))do{if(this._check(R.tokens.paren_right))break;const o=this._attribute(),l=this._consume(R.tokens.name,"Expected argument name.").toString();this._consume(R.tokens.colon,"Expected ':' for argument type.");const c=this._attribute(),u=this._type_decl();u!=null&&(u.attributes=c,i.push(this._updateNode(new iT(l,u,o))))}while(this._match(R.tokens.comma));this._consume(R.tokens.paren_right,"Expected ')' after function arguments.");let r=null;if(this._match(R.tokens.arrow)){const o=this._attribute();r=this._type_decl(),r!=null&&(r.attributes=o)}const s=this._compound_statement(),a=this._currentLine;return this._updateNode(new au(n,i,r,s,e,a),e)}_compound_statement(){const e=[];for(this._consume(R.tokens.brace_left,"Expected '{' for block.");!this._check(R.tokens.brace_right);){const n=this._statement();n!==null&&e.push(n)}return this._consume(R.tokens.brace_right,"Expected '}' for block."),e}_statement(){for(;this._match(R.tokens.semicolon)&&!this._isAtEnd(););if(this._check(R.tokens.attr)&&this._attribute(),this._check(R.keywords.if))return this._if_statement();if(this._check(R.keywords.switch))return this._switch_statement();if(this._check(R.keywords.loop))return this._loop_statement();if(this._check(R.keywords.for))return this._for_statement();if(this._check(R.keywords.while))return this._while_statement();if(this._check(R.keywords.continuing))return this._continuing_statement();if(this._check(R.keywords.static_assert))return this._static_assert_statement();if(this._check(R.tokens.brace_left))return this._compound_statement();let e=null;if(this._check(R.keywords.return))e=this._return_statement();else if(this._check([R.keywords.var,R.keywords.let,R.keywords.const]))e=this._variable_statement();else if(this._match(R.keywords.discard))e=this._updateNode(new Dz);else if(this._match(R.keywords.break)){const n=this._updateNode(new iR);if(this._currentLoop.length>0){const i=this._currentLoop[this._currentLoop.length-1];n.loopId=i.id}e=n,this._check(R.keywords.if)&&(this._advance(),n.condition=this._optional_paren_expression())}else if(this._match(R.keywords.continue)){const n=this._updateNode(new rR);if(!(this._currentLoop.length>0))throw this._error(this._peek(),`Continue statement must be inside a loop. Line: ${n.line}`);{const i=this._currentLoop[this._currentLoop.length-1];n.loopId=i.id}e=n}else e=this._increment_decrement_statement()||this._func_call_statement()||this._assignment_statement();return e!=null&&this._consume(R.tokens.semicolon,"Expected ';' after statement."),e}_static_assert_statement(){if(!this._match(R.keywords.static_assert))return null;const e=this._currentLine,n=this._optional_paren_expression();return this._updateNode(new Oz(n),e)}_while_statement(){if(!this._match(R.keywords.while))return null;const e=this._updateNode(new qC(null,null));return this._currentLoop.push(e),e.condition=this._optional_paren_expression(),this._check(R.tokens.attr)&&this._attribute(),e.body=this._compound_statement(),this._currentLoop.pop(),e}_continuing_statement(){const e=this._currentLoop.length>0?this._currentLoop[this._currentLoop.length-1].id:-1;if(!this._match(R.keywords.continuing))return null;const n=this._currentLine,i=this._compound_statement();return this._updateNode(new E_(i,e),n)}_for_statement(){if(!this._match(R.keywords.for))return null;this._consume(R.tokens.paren_left,"Expected '('.");const e=this._updateNode(new KC(null,null,null,null));return this._currentLoop.push(e),e.init=this._check(R.tokens.semicolon)?null:this._for_init(),this._consume(R.tokens.semicolon,"Expected ';'."),e.condition=this._check(R.tokens.semicolon)?null:this._short_circuit_or_expression(),this._consume(R.tokens.semicolon,"Expected ';'."),e.increment=this._check(R.tokens.paren_right)?null:this._for_increment(),this._consume(R.tokens.paren_right,"Expected ')'."),this._check(R.tokens.attr)&&this._attribute(),e.body=this._compound_statement(),this._currentLoop.pop(),e}_for_init(){return this._variable_statement()||this._func_call_statement()||this._assignment_statement()}_for_increment(){return this._func_call_statement()||this._increment_decrement_statement()||this._assignment_statement()}_variable_statement(){if(this._check(R.keywords.var)){const e=this._variable_decl();if(e===null)throw this._error(this._peek(),"Variable declaration expected.");let n=null;return this._match(R.tokens.equal)&&(n=this._short_circuit_or_expression()),this._updateNode(new Pr(e.name,e.type,e.storage,e.access,n),e.line)}if(this._match(R.keywords.let)){const e=this._currentLine,n=this._consume(R.tokens.name,"Expected name for let.").toString();let i=null;if(this._match(R.tokens.colon)){const s=this._attribute();i=this._type_decl(),i!=null&&(i.attributes=s)}this._consume(R.tokens.equal,"Expected '=' for let.");const r=this._short_circuit_or_expression();return this._updateNode(new Rc(n,i,null,null,r),e)}if(this._match(R.keywords.const)){const e=this._currentLine,n=this._consume(R.tokens.name,"Expected name for const.").toString();let i=null;if(this._match(R.tokens.colon)){const s=this._attribute();i=this._type_decl(),i!=null&&(i.attributes=s)}this._consume(R.tokens.equal,"Expected '=' for const.");const r=this._short_circuit_or_expression();return i===null&&r instanceof rn&&(i=r.type),this._updateNode(new cd(n,i,null,null,r),e)}return null}_increment_decrement_statement(){const e=this._current,n=this._unary_expression();if(n==null)return null;if(!this._check(R.increment_operators))return this._current=e,null;const i=this._consume(R.increment_operators,"Expected increment operator");return this._updateNode(new ZC(i.type===R.tokens.plus_plus?Co.increment:Co.decrement,n))}_assignment_statement(){let e=null;const n=this._currentLine;if(this._check(R.tokens.brace_right))return null;let i=this._match(R.tokens.underscore);if(i||(e=this._unary_expression()),!i&&e==null)return null;const r=this._consume(R.assignment_operators,"Expected assignment operator."),s=this._short_circuit_or_expression();return this._updateNode(new GC(sc.parse(r.lexeme),e,s),n)}_func_call_statement(){if(!this._check(R.tokens.ident))return null;const e=this._currentLine,n=this._current,i=this._consume(R.tokens.ident,"Expected function name."),r=this._argument_expression_list();return r===null?(this._current=n,null):this._updateNode(new ev(i.lexeme,r),e)}_loop_statement(){if(!this._match(R.keywords.loop))return null;this._check(R.tokens.attr)&&this._attribute(),this._consume(R.tokens.brace_left,"Expected '{' for loop.");const e=this._updateNode(new QC([],null));this._currentLoop.push(e);let n=this._statement();for(;n!==null;){if(Array.isArray(n))for(let i of n)e.body.push(i);else e.body.push(n);if(n instanceof E_){e.continuing=n;break}n=this._statement()}return this._currentLoop.pop(),this._consume(R.tokens.brace_right,"Expected '}' for loop."),e}_switch_statement(){if(!this._match(R.keywords.switch))return null;const e=this._updateNode(new JC(null,[]));if(this._currentLoop.push(e),e.condition=this._optional_paren_expression(),this._check(R.tokens.attr)&&this._attribute(),this._consume(R.tokens.brace_left,"Expected '{' for switch."),e.cases=this._switch_body(),e.cases==null||e.cases.length==0)throw this._error(this._previous(),"Expected 'case' or 'default'.");return this._consume(R.tokens.brace_right,"Expected '}' for switch."),this._currentLoop.pop(),e}_switch_body(){const e=[];let n=!1;for(;this._check([R.keywords.default,R.keywords.case]);){if(this._match(R.keywords.case)){const i=this._case_selectors();for(const s of i)if(s instanceof fd){if(n)throw this._error(this._previous(),"Multiple default cases in switch statement.");n=!0;break}this._match(R.tokens.colon),this._check(R.tokens.attr)&&this._attribute(),this._consume(R.tokens.brace_left,"Exected '{' for switch case.");const r=this._case_body();this._consume(R.tokens.brace_right,"Exected '}' for switch case."),e.push(this._updateNode(new cR(i,r)))}if(this._match(R.keywords.default)){if(n)throw this._error(this._previous(),"Multiple default cases in switch statement.");this._match(R.tokens.colon),this._check(R.tokens.attr)&&this._attribute(),this._consume(R.tokens.brace_left,"Exected '{' for switch default.");const i=this._case_body();this._consume(R.tokens.brace_right,"Exected '}' for switch default."),e.push(this._updateNode(new uR(i)))}}return e}_case_selectors(){const e=[];for(this._match(R.keywords.default)?e.push(this._updateNode(new fd)):e.push(this._shift_expression());this._match(R.tokens.comma);)this._match(R.keywords.default)?e.push(this._updateNode(new fd)):e.push(this._shift_expression());return e}_case_body(){if(this._match(R.keywords.fallthrough))return this._consume(R.tokens.semicolon,"Expected ';'"),[];let e=this._statement();if(e==null)return[];e instanceof Array||(e=[e]);const n=this._case_body();return n.length==0?e:[...e,n[0]]}_if_statement(){if(!this._match(R.keywords.if))return null;const e=this._currentLine,n=this._optional_paren_expression();this._check(R.tokens.attr)&&this._attribute();const i=this._compound_statement();let r=[];this._match_elseif()&&(this._check(R.tokens.attr)&&this._attribute(),r=this._elseif_statement(r));let s=null;return this._match(R.keywords.else)&&(this._check(R.tokens.attr)&&this._attribute(),s=this._compound_statement()),this._updateNode(new eR(n,i,r,s),e)}_match_elseif(){return this._tokens[this._current].type===R.keywords.else&&this._tokens[this._current+1].type===R.keywords.if&&(this._advance(),this._advance(),!0)}_elseif_statement(e=[]){const n=this._optional_paren_expression(),i=this._compound_statement();return e.push(this._updateNode(new kz(n,i))),this._match_elseif()&&(this._check(R.tokens.attr)&&this._attribute(),this._elseif_statement(e)),e}_return_statement(){if(!this._match(R.keywords.return))return null;const e=this._short_circuit_or_expression();return this._updateNode(new tR(e))}_short_circuit_or_expression(){let e=this._short_circuit_and_expr();for(;this._match(R.tokens.or_or);)e=this._updateNode(new Vi(this._previous().toString(),e,this._short_circuit_and_expr()));return e}_short_circuit_and_expr(){let e=this._inclusive_or_expression();for(;this._match(R.tokens.and_and);)e=this._updateNode(new Vi(this._previous().toString(),e,this._inclusive_or_expression()));return e}_inclusive_or_expression(){let e=this._exclusive_or_expression();for(;this._match(R.tokens.or);)e=this._updateNode(new Vi(this._previous().toString(),e,this._exclusive_or_expression()));return e}_exclusive_or_expression(){let e=this._and_expression();for(;this._match(R.tokens.xor);)e=this._updateNode(new Vi(this._previous().toString(),e,this._and_expression()));return e}_and_expression(){let e=this._equality_expression();for(;this._match(R.tokens.and);)e=this._updateNode(new Vi(this._previous().toString(),e,this._equality_expression()));return e}_equality_expression(){const e=this._relational_expression();return this._match([R.tokens.equal_equal,R.tokens.not_equal])?this._updateNode(new Vi(this._previous().toString(),e,this._relational_expression())):e}_relational_expression(){let e=this._shift_expression();for(;this._match([R.tokens.less_than,R.tokens.greater_than,R.tokens.less_than_equal,R.tokens.greater_than_equal]);)e=this._updateNode(new Vi(this._previous().toString(),e,this._shift_expression()));return e}_shift_expression(){let e=this._additive_expression();for(;this._match([R.tokens.shift_left,R.tokens.shift_right]);)e=this._updateNode(new Vi(this._previous().toString(),e,this._additive_expression()));return e}_additive_expression(){let e=this._multiplicative_expression();for(;this._match([R.tokens.plus,R.tokens.minus]);)e=this._updateNode(new Vi(this._previous().toString(),e,this._multiplicative_expression()));return e}_multiplicative_expression(){let e=this._unary_expression();for(;this._match([R.tokens.star,R.tokens.forward_slash,R.tokens.modulo]);)e=this._updateNode(new Vi(this._previous().toString(),e,this._unary_expression()));return e}_unary_expression(){return this._match([R.tokens.minus,R.tokens.bang,R.tokens.tilde,R.tokens.star,R.tokens.and])?this._updateNode(new qt(this._previous().toString(),this._unary_expression())):this._singular_expression()}_singular_expression(){const e=this._primary_expression(),n=this._postfix_expression();return n&&(e.postfix=n),e}_postfix_expression(){if(this._match(R.tokens.bracket_left)){const e=this._short_circuit_or_expression();this._consume(R.tokens.bracket_right,"Expected ']'.");const n=this._updateNode(new al(e)),i=this._postfix_expression();return i&&(n.postfix=i),n}if(this._match(R.tokens.period)){const e=this._consume(R.tokens.name,"Expected member name."),n=this._postfix_expression(),i=this._updateNode(new Da(e.lexeme));return n&&(i.postfix=n),i}return null}_getStruct(e){return this._context.aliases.has(e)?this._context.aliases.get(e).type:this._context.structs.has(e)?this._context.structs.get(e):null}_getType(e){const n=this._getStruct(e);if(n!==null)return n;switch(e){case"void":return te.void;case"bool":return te.bool;case"i32":return te.i32;case"u32":return te.u32;case"f32":return te.f32;case"f16":return te.f16;case"vec2f":return X.vec2f;case"vec3f":return X.vec3f;case"vec4f":return X.vec4f;case"vec2i":return X.vec2i;case"vec3i":return X.vec3i;case"vec4i":return X.vec4i;case"vec2u":return X.vec2u;case"vec3u":return X.vec3u;case"vec4u":return X.vec4u;case"vec2h":return X.vec2h;case"vec3h":return X.vec3h;case"vec4h":return X.vec4h;case"mat2x2f":return X.mat2x2f;case"mat2x3f":return X.mat2x3f;case"mat2x4f":return X.mat2x4f;case"mat3x2f":return X.mat3x2f;case"mat3x3f":return X.mat3x3f;case"mat3x4f":return X.mat3x4f;case"mat4x2f":return X.mat4x2f;case"mat4x3f":return X.mat4x3f;case"mat4x4f":return X.mat4x4f;case"mat2x2h":return X.mat2x2h;case"mat2x3h":return X.mat2x3h;case"mat2x4h":return X.mat2x4h;case"mat3x2h":return X.mat3x2h;case"mat3x3h":return X.mat3x3h;case"mat3x4h":return X.mat3x4h;case"mat4x2h":return X.mat4x2h;case"mat4x3h":return X.mat4x3h;case"mat4x4h":return X.mat4x4h;case"mat2x2i":return X.mat2x2i;case"mat2x3i":return X.mat2x3i;case"mat2x4i":return X.mat2x4i;case"mat3x2i":return X.mat3x2i;case"mat3x3i":return X.mat3x3i;case"mat3x4i":return X.mat3x4i;case"mat4x2i":return X.mat4x2i;case"mat4x3i":return X.mat4x3i;case"mat4x4i":return X.mat4x4i;case"mat2x2u":return X.mat2x2u;case"mat2x3u":return X.mat2x3u;case"mat2x4u":return X.mat2x4u;case"mat3x2u":return X.mat3x2u;case"mat3x3u":return X.mat3x3u;case"mat3x4u":return X.mat3x4u;case"mat4x2u":return X.mat4x2u;case"mat4x3u":return X.mat4x3u;case"mat4x4u":return X.mat4x4u}return null}_validateTypeRange(e,n){if(n.name==="i32"){if(e<-2147483648||e>2147483647)throw this._error(this._previous(),`Value out of range for i32: ${e}. Line: ${this._currentLine}.`)}else if(n.name==="u32"&&(e<0||e>4294967295))throw this._error(this._previous(),`Value out of range for u32: ${e}. Line: ${this._currentLine}.`)}_primary_expression(){if(this._match(R.tokens.ident)){const i=this._previous().toString();if(this._check(R.tokens.paren_left)){const r=this._argument_expression_list(),s=this._getType(i);return s!==null?this._updateNode(new Ji(s,r)):this._updateNode(new nv(i,r))}if(this._context.constants.has(i)){const r=this._context.constants.get(i);return this._updateNode(new sR(i,r.value))}return this._updateNode(new Kn(i))}if(this._match(R.tokens.int_literal)){const i=this._previous().toString();let r=i.endsWith("i")||i.endsWith("i")?te.i32:i.endsWith("u")||i.endsWith("U")?te.u32:te.x32;const s=parseInt(i);return this._validateTypeRange(s,r),this._updateNode(new rn(new V(s,this._exec.getTypeInfo(r)),r))}if(this._match(R.tokens.uint_literal)){const i=parseInt(this._previous().toString());return this._validateTypeRange(i,te.u32),this._updateNode(new rn(new V(i,this._exec.getTypeInfo(te.u32)),te.u32))}if(this._match([R.tokens.decimal_float_literal,R.tokens.hex_float_literal])){let i=this._previous().toString(),r=i.endsWith("h");r&&(i=i.substring(0,i.length-1));const s=parseFloat(i);this._validateTypeRange(s,r?te.f16:te.f32);const a=r?te.f16:te.f32;return this._updateNode(new rn(new V(s,this._exec.getTypeInfo(a)),a))}if(this._match([R.keywords.true,R.keywords.false])){let i=this._previous().toString()===R.keywords.true.rule;return this._updateNode(new rn(new V(i?1:0,this._exec.getTypeInfo(te.bool)),te.bool))}if(this._check(R.tokens.paren_left))return this._paren_expression();if(this._match(R.keywords.bitcast)){this._consume(R.tokens.less_than,"Expected '<'.");const i=this._type_decl();this._consume(R.tokens.greater_than,"Expected '>'.");const r=this._paren_expression();return this._updateNode(new aR(i,r))}const e=this._type_decl(),n=this._argument_expression_list();return this._updateNode(new Ji(e,n))}_argument_expression_list(){if(!this._match(R.tokens.paren_left))return null;const e=[];do{if(this._check(R.tokens.paren_right))break;const n=this._short_circuit_or_expression();e.push(n)}while(this._match(R.tokens.comma));return this._consume(R.tokens.paren_right,"Expected ')' for agument list"),e}_optional_paren_expression(){this._match(R.tokens.paren_left);const e=this._short_circuit_or_expression();return this._match(R.tokens.paren_right),e}_paren_expression(){this._consume(R.tokens.paren_left,"Expected '('.");const e=this._short_circuit_or_expression();return this._consume(R.tokens.paren_right,"Expected ')'."),e}_struct_decl(){if(!this._match(R.keywords.struct))return null;const e=this._currentLine,n=this._consume(R.tokens.ident,"Expected name for struct.").toString();this._consume(R.tokens.brace_left,"Expected '{' for struct body.");const i=[];for(;!this._check(R.tokens.brace_right);){const a=this._attribute(),o=this._consume(R.tokens.name,"Expected variable name.").toString();this._consume(R.tokens.colon,"Expected ':' for struct member type.");const l=this._attribute(),c=this._type_decl();c!=null&&(c.attributes=l),this._check(R.tokens.brace_right)?this._match(R.tokens.comma):this._consume(R.tokens.comma,"Expected ',' for struct member."),i.push(this._updateNode(new rT(o,c,a)))}this._consume(R.tokens.brace_right,"Expected '}' after struct body.");const r=this._currentLine,s=this._updateNode(new Mr(n,i,e,r),e);return this._context.structs.set(n,s),s}_global_variable_decl(){const e=this._variable_decl();if(!e)return null;if(this._match(R.tokens.equal)){const n=this._const_expression();e.value=n}if(e.type!==null&&e.value instanceof rn){if(e.value.type.name!=="x32"&&e.type.getTypeName()!==e.value.type.getTypeName())throw this._error(this._peek(),`Invalid cast from ${e.value.type.name} to ${e.type.name}. Line:${this._currentLine}`);e.value.isScalar&&this._validateTypeRange(e.value.scalarValue,e.type),e.value.type=e.type}else e.type===null&&e.value instanceof rn&&(e.type=e.value.type.name==="x32"?te.i32:e.value.type,e.value.isScalar&&this._validateTypeRange(e.value.scalarValue,e.type));return e}_override_variable_decl(){const e=this._override_decl();return e&&this._match(R.tokens.equal)&&(e.value=this._const_expression()),e}_global_const_decl(){var e;if(!this._match(R.keywords.const))return null;const n=this._consume(R.tokens.name,"Expected variable name"),i=this._currentLine;let r=null;if(this._match(R.tokens.colon)){const l=this._attribute();r=this._type_decl(),r!=null&&(r.attributes=l)}let s=null;this._consume(R.tokens.equal,"const declarations require an assignment");const a=this._short_circuit_or_expression();try{let l=[te.f32],c=a.constEvaluate(this._exec,l);c instanceof V&&this._validateTypeRange(c.value,l[0]),l[0]instanceof X&&l[0].format===null&&c.typeInfo instanceof Pa&&c.typeInfo.format!==null&&(c.typeInfo.format.name==="f16"?l[0].format=te.f16:c.typeInfo.format.name==="f32"?l[0].format=te.f32:c.typeInfo.format.name==="i32"?l[0].format=te.i32:c.typeInfo.format.name==="u32"?l[0].format=te.u32:c.typeInfo.format.name==="bool"?l[0].format=te.bool:console.error(`TODO: impelement template format type ${c.typeInfo.format.name}`)),s=this._updateNode(new rn(c,l[0])),this._exec.context.setVariable(n.toString(),c)}catch{s=a}if(r!==null&&s instanceof rn){if(s.type.name!=="x32"&&r.getTypeName()!==s.type.getTypeName())throw this._error(this._peek(),`Invalid cast from ${s.type.name} to ${r.name}. Line:${this._currentLine}`);s.type=r,s.isScalar&&this._validateTypeRange(s.scalarValue,s.type)}else r===null&&s instanceof rn&&(r=(e=s==null?void 0:s.type)!==null&&e!==void 0?e:te.f32,r===te.x32&&(r=te.i32));const o=this._updateNode(new cd(n.toString(),r,"","",s),i);return this._context.constants.set(o.name,o),o}_global_let_decl(){if(!this._match(R.keywords.let))return null;const e=this._currentLine,n=this._consume(R.tokens.name,"Expected variable name");let i=null;if(this._match(R.tokens.colon)){const s=this._attribute();i=this._type_decl(),i!=null&&(i.attributes=s)}let r=null;if(this._match(R.tokens.equal)&&(r=this._const_expression()),i!==null&&r instanceof rn){if(r.type.name!=="x32"&&i.getTypeName()!==r.type.getTypeName())throw this._error(this._peek(),`Invalid cast from ${r.type.name} to ${i.name}. Line:${this._currentLine}`);r.type=i}else i===null&&r instanceof rn&&(i=r.type.name==="x32"?te.i32:r.type);return r instanceof rn&&r.isScalar&&this._validateTypeRange(r.scalarValue,i),this._updateNode(new Rc(n.toString(),i,"","",r),e)}_const_expression(){return this._short_circuit_or_expression()}_variable_decl(){if(!this._match(R.keywords.var))return null;const e=this._currentLine;let n="",i="";this._match(R.tokens.less_than)&&(n=this._consume(R.storage_class,"Expected storage_class.").toString(),this._match(R.tokens.comma)&&(i=this._consume(R.access_mode,"Expected access_mode.").toString()),this._consume(R.tokens.greater_than,"Expected '>'."));const r=this._consume(R.tokens.name,"Expected variable name");let s=null;if(this._match(R.tokens.colon)){const a=this._attribute();s=this._type_decl(),s!=null&&(s.attributes=a)}return this._updateNode(new Pr(r.toString(),s,n,i,null),e)}_override_decl(){if(!this._match(R.keywords.override))return null;const e=this._consume(R.tokens.name,"Expected variable name");let n=null;if(this._match(R.tokens.colon)){const i=this._attribute();n=this._type_decl(),n!=null&&(n.attributes=i)}return this._updateNode(new J0(e.toString(),n,null))}_diagnostic(){this._consume(R.tokens.paren_left,"Expected '('");const e=this._consume(R.tokens.ident,"Expected severity control name.");this._consume(R.tokens.comma,"Expected ','");let n=this._consume(R.tokens.ident,"Expected diagnostic rule name.").toString();return this._match(R.tokens.period)&&(n+=`.${this._consume(R.tokens.ident,"Expected diagnostic message.").toString()}`),this._consume(R.tokens.paren_right,"Expected ')'"),this._updateNode(new nR(e.toString(),n))}_enable_directive(){const e=this._consume(R.tokens.ident,"identity expected.");return this._updateNode(new Iz(e.toString()))}_requires_directive(){const e=[this._consume(R.tokens.ident,"identity expected.").toString()];for(;this._match(R.tokens.comma);){const n=this._consume(R.tokens.ident,"identity expected.");e.push(n.toString())}return this._updateNode(new Pz(e))}_type_alias(){const e=this._consume(R.tokens.ident,"identity expected.");this._consume(R.tokens.equal,"Expected '=' for type alias.");let n=this._type_decl();if(n===null)throw this._error(this._peek(),"Expected Type for Alias.");this._context.aliases.has(n.name)&&(n=this._context.aliases.get(n.name).type);const i=this._updateNode(new tv(e.toString(),n));return this._context.aliases.set(i.name,i),i}_type_decl(){if(this._check([R.tokens.ident,...R.texel_format,R.keywords.bool,R.keywords.f32,R.keywords.i32,R.keywords.u32])){const i=this._advance().toString();if(this._context.structs.has(i))return this._context.structs.get(i);if(this._context.aliases.has(i))return this._context.aliases.get(i).type;if(!this._getType(i)){const r=this._updateNode(new nT(i));return this._forwardTypeCount++,r}return this._updateNode(new te(i))}let e=this._texture_sampler_types();if(e)return e;if(this._check(R.template_types)){let i=this._advance().toString(),r=null,s=null;return this._match(R.tokens.less_than)&&(r=this._type_decl(),s=null,this._match(R.tokens.comma)&&(s=this._consume(R.access_mode,"Expected access_mode for pointer").toString()),this._consume(R.tokens.greater_than,"Expected '>' for type.")),this._updateNode(new X(i,r,s))}if(this._match(R.keywords.ptr)){let i=this._previous().toString();this._consume(R.tokens.less_than,"Expected '<' for pointer.");const r=this._consume(R.storage_class,"Expected storage_class for pointer");this._consume(R.tokens.comma,"Expected ',' for pointer.");const s=this._type_decl();let a=null;return this._match(R.tokens.comma)&&(a=this._consume(R.access_mode,"Expected access_mode for pointer").toString()),this._consume(R.tokens.greater_than,"Expected '>' for pointer."),this._updateNode(new ud(i,r.toString(),s,a))}const n=this._attribute();if(this._match(R.keywords.array)){let i=null,r=-1;const s=this._previous();let a=null;if(this._match(R.tokens.less_than)){i=this._type_decl(),this._context.aliases.has(i.name)&&(i=this._context.aliases.get(i.name).type);let l="";if(this._match(R.tokens.comma)){a=this._shift_expression();try{l=a.constEvaluate(this._exec).toString(),a=null}catch{l="1"}}this._consume(R.tokens.greater_than,"Expected '>' for array."),r=l?parseInt(l):0}const o=this._updateNode(new Mc(s.toString(),n,i,r));return a&&this._deferArrayCountEval.push({arrayType:o,countNode:a}),o}return null}_texture_sampler_types(){if(this._match(R.sampler_type))return this._updateNode(new ac(this._previous().toString(),null,null));if(this._match(R.depth_texture_type))return this._updateNode(new ac(this._previous().toString(),null,null));if(this._match(R.sampled_texture_type)||this._match(R.multisampled_texture_type)){const e=this._previous();this._consume(R.tokens.less_than,"Expected '<' for sampler type.");const n=this._type_decl();return this._consume(R.tokens.greater_than,"Expected '>' for sampler type."),this._updateNode(new ac(e.toString(),n,null))}if(this._match(R.storage_texture_type)){const e=this._previous();this._consume(R.tokens.less_than,"Expected '<' for sampler type.");const n=this._consume(R.texel_format,"Invalid texel format.").toString();this._consume(R.tokens.comma,"Expected ',' after texel format.");const i=this._consume(R.access_mode,"Expected access mode for storage texture type.").toString();return this._consume(R.tokens.greater_than,"Expected '>' for sampler type."),this._updateNode(new ac(e.toString(),n,i))}return null}_attribute(){let e=[];for(;this._match(R.tokens.attr);){const n=this._consume(R.attribute_name,"Expected attribute name"),i=this._updateNode(new fR(n.toString(),null));if(this._match(R.tokens.paren_left)){if(i.value=this._consume(R.literal_or_ident,"Expected attribute value").toString(),this._check(R.tokens.comma)){this._advance();do{const r=this._consume(R.literal_or_ident,"Expected attribute value").toString();i.value instanceof Array||(i.value=[i.value]),i.value.push(r)}while(this._match(R.tokens.comma))}this._consume(R.tokens.paren_right,"Expected ')'")}e.push(i)}return e.length==0?null:e}}class qz extends lr{constructor(e){super(),e&&this.update(e)}update(e){const n=new Xz().parse(e);this.updateAST(n)}}function Kz(t){var s;const e={attributes:[],bindings:[]};let n;try{n=Zz(t)}catch(a){return ie.error(a.message)(),e}for(const a of n.uniforms){const o=[];for(const l of((s=a.type)==null?void 0:s.members)||[])o.push({name:l.name,type:oT(l.type)});e.bindings.push({type:"uniform",name:a.name,group:a.group,location:a.binding,members:o})}for(const a of n.textures)e.bindings.push({type:"texture",name:a.name,group:a.group,location:a.binding});for(const a of n.samplers)e.bindings.push({type:"sampler",name:a.name,group:a.group,location:a.binding});const i=n.entry.vertex[0],r=(i==null?void 0:i.inputs.length)||0;for(let a=0;a<r;a++){const o=i.inputs[a];if(o.locationType==="location"){const l=oT(o.type);e.attributes.push({name:o.name,location:Number(o.location),type:l})}}return e}function oT(t){return t!=null&&t.format?`${t.name}<${t.format.name}>`:t.name}function Zz(t){try{return new qz(t)}catch(e){if(e instanceof Error)throw e;let n="WGSL parse error";throw typeof e=="object"&&(e!=null&&e.message)&&(n+=`: ${e.message} `),typeof e=="object"&&(e!=null&&e.token)&&(n+=e.token.line||""),new Error(n,{cause:e})}}const Gz={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0,_cartographicRadians:!1};globalThis.mathgl=globalThis.mathgl||{config:{...Gz}};const Ri=globalThis.mathgl.config;function Qz(t,{precision:e=Ri.precision}={}){return t=Jz(t),`${parseFloat(t.toPrecision(e))}`}function ol(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function _s(t,e,n){return t9(t,i=>Math.max(e,Math.min(n,i)))}function yh(t,e,n){return ol(t)?t.map((i,r)=>yh(i,e[r],n)):n*e+(1-n)*t}function ou(t,e,n){const i=Ri.EPSILON;try{if(t===e)return!0;if(ol(t)&&ol(e)){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!ou(t[r],e[r]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):typeof t=="number"&&typeof e=="number"?Math.abs(t-e)<=Ri.EPSILON*Math.max(1,Math.abs(t),Math.abs(e)):!1}finally{Ri.EPSILON=i}}function Jz(t){return Math.round(t/Ri.EPSILON)*Ri.EPSILON}function e9(t){return t.clone?t.clone():new Array(t.length)}function t9(t,e,n){if(ol(t)){const i=t;n=n||e9(i);for(let r=0;r<n.length&&r<i.length;++r){const s=typeof t=="number"?t:t[r];n[r]=e(s,r,n)}return n}return e(t)}class dR extends Array{clone(){return new this.constructor().copy(this)}fromArray(e,n=0){for(let i=0;i<this.ELEMENTS;++i)this[i]=e[i+n];return this.check()}toArray(e=[],n=0){for(let i=0;i<this.ELEMENTS;++i)e[n+i]=this[i];return e}toObject(e){return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:ol(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Ri)}formatString(e){let n="";for(let i=0;i<this.ELEMENTS;++i)n+=(i>0?", ":"")+Qz(this[i],e);return`${e.printTypes?this.constructor.name:""}[${n}]`}equals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(!ou(this[n],e[n]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(this[n]!==e[n])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,n,i){if(i===void 0)return this.lerp(this,e,n);for(let r=0;r<this.ELEMENTS;++r){const s=e[r],a=typeof n=="number"?n:n[r];this[r]=s+i*(a-s)}return this.check()}min(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(e[n],this[n]);return this.check()}max(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.max(e[n],this[n]);return this.check()}clamp(e,n){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e[i]),n[i]);return this.check()}add(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]+=n[i];return this.check()}subtract(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]-=n[i];return this.check()}scale(e){if(typeof e=="number")for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;else for(let n=0;n<this.ELEMENTS&&n<e.length;++n)this[n]*=e[n];return this.check()}multiplyByScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}check(){if(Ri.debug&&!this.validate())throw new Error(`math.gl: ${this.constructor.name} some fields set to invalid numbers'`);return this}validate(){let e=this.length===this.ELEMENTS;for(let n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(this[n]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=e;return this.check()}addScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,n){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e),n);return this.check()}get elements(){return this}}function n9(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}function Xn(t){if(!Number.isFinite(t))throw new Error(`Invalid number ${JSON.stringify(t)}`);return t}function Mm(t,e,n=""){if(Ri.debug&&!n9(t,e))throw new Error(`math.gl: ${n} some fields set to invalid numbers'`);return t}function lT(t,e){if(!t)throw new Error(`math.gl assertion ${e}`)}class i9 extends dR{get x(){return this[0]}set x(e){this[0]=Xn(e)}get y(){return this[1]}set y(e){this[1]=Xn(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*this[n];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let n=0;for(let i=0;i<this.ELEMENTS;++i){const r=this[i]-e[i];n+=r*r}return Xn(n)}dot(e){let n=0;for(let i=0;i<this.ELEMENTS;++i)n+=this[i]*e[i];return Xn(n)}normalize(){const e=this.magnitude();if(e!==0)for(let n=0;n<this.ELEMENTS;++n)this[n]/=e;return this.check()}multiply(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]*=n[i];return this.check()}divide(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]/=n[i];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return lT(e>=0&&e<this.ELEMENTS,"index is out of range"),Xn(this[e])}setComponent(e,n){return lT(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=n,this.check()}addVectors(e,n){return this.copy(e).add(n)}subVectors(e,n){return this.copy(e).subtract(n)}multiplyVectors(e,n){return this.copy(e).multiply(n)}addScaledVector(e,n){return this.add(new this.constructor(e).multiplyScalar(n))}}const dd=1e-6;let ll=typeof Float32Array<"u"?Float32Array:Array;function r9(){const t=new ll(2);return ll!=Float32Array&&(t[0]=0,t[1]=0),t}function cT(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function s9(t,e){return t[0]=-e[0],t[1]=-e[1],t}function hR(t,e,n,i){const r=e[0],s=e[1];return t[0]=r+i*(n[0]-r),t[1]=s+i*(n[1]-s),t}function a9(t,e,n){const i=e[0],r=e[1];return t[0]=n[0]*i+n[4]*r+n[12],t[1]=n[1]*i+n[5]*r+n[13],t}(function(){const t=r9();return function(e,n,i,r,s,a){let o,l;for(n||(n=2),i||(i=0),r?l=Math.min(r*n+i,e.length):l=e.length,o=i;o<l;o+=n)t[0]=e[o],t[1]=e[o+1],s(t,t,a),e[o]=t[0],e[o+1]=t[1];return e}})();function o9(t,e,n){const i=e[0],r=e[1],s=n[3]*i+n[7]*r||1;return t[0]=(n[0]*i+n[4]*r)/s,t[1]=(n[1]*i+n[5]*r)/s,t}function pR(t,e,n){const i=e[0],r=e[1],s=e[2],a=n[3]*i+n[7]*r+n[11]*s||1;return t[0]=(n[0]*i+n[4]*r+n[8]*s)/a,t[1]=(n[1]*i+n[5]*r+n[9]*s)/a,t[2]=(n[2]*i+n[6]*r+n[10]*s)/a,t}function l9(t,e,n){const i=e[0],r=e[1];return t[0]=n[0]*i+n[2]*r,t[1]=n[1]*i+n[3]*r,t[2]=e[2],t}function c9(){const t=new ll(3);return ll!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function u9(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function f9(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function d9(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function h9(t,e,n){const i=e[0],r=e[1],s=e[2],a=n[0],o=n[1],l=n[2];return t[0]=r*l-s*o,t[1]=s*a-i*l,t[2]=i*o-r*a,t}function gR(t,e,n){const i=e[0],r=e[1],s=e[2];let a=n[3]*i+n[7]*r+n[11]*s+n[15];return a=a||1,t[0]=(n[0]*i+n[4]*r+n[8]*s+n[12])/a,t[1]=(n[1]*i+n[5]*r+n[9]*s+n[13])/a,t[2]=(n[2]*i+n[6]*r+n[10]*s+n[14])/a,t}function p9(t,e,n){const i=e[0],r=e[1],s=e[2];return t[0]=i*n[0]+r*n[3]+s*n[6],t[1]=i*n[1]+r*n[4]+s*n[7],t[2]=i*n[2]+r*n[5]+s*n[8],t}function g9(t,e,n){const i=n[0],r=n[1],s=n[2],a=n[3],o=e[0],l=e[1],c=e[2];let u=r*c-s*l,f=s*o-i*c,d=i*l-r*o,p=r*d-s*f,m=s*u-i*d,S=i*f-r*u;const v=a*2;return u*=v,f*=v,d*=v,p*=2,m*=2,S*=2,t[0]=o+u+p,t[1]=l+f+m,t[2]=c+d+S,t}function m9(t,e,n,i){const r=[],s=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[0],s[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),s[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function y9(t,e,n,i){const r=[],s=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),s[1]=r[1],s[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function _9(t,e,n,i){const r=[],s=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),s[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),s[2]=r[2],t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function b9(t,e){const n=t[0],i=t[1],r=t[2],s=e[0],a=e[1],o=e[2],l=Math.sqrt((n*n+i*i+r*r)*(s*s+a*a+o*o)),c=l&&d9(t,e)/l;return Math.acos(Math.min(Math.max(c,-1),1))}const v9=u9;(function(){const t=c9();return function(e,n,i,r,s,a){let o,l;for(n||(n=3),i||(i=0),r?l=Math.min(r*n+i,e.length):l=e.length,o=i;o<l;o+=n)t[0]=e[o],t[1]=e[o+1],t[2]=e[o+2],s(t,t,a),e[o]=t[0],e[o+1]=t[1],e[o+2]=t[2];return e}})();const Om=[0,0,0];let If;class fr extends i9{static get ZERO(){return If||(If=new fr(0,0,0),Object.freeze(If)),If}constructor(e=0,n=0,i=0){super(-0,-0,-0),arguments.length===1&&ol(e)?this.copy(e):(Ri.debug&&(Xn(e),Xn(n),Xn(i)),this[0]=e,this[1]=n,this[2]=i)}set(e,n,i){return this[0]=e,this[1]=n,this[2]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return Ri.debug&&(Xn(e.x),Xn(e.y),Xn(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=Xn(e)}angle(e){return b9(this,e)}cross(e){return h9(this,this,e),this.check()}rotateX({radians:e,origin:n=Om}){return m9(this,this,n,e),this.check()}rotateY({radians:e,origin:n=Om}){return y9(this,this,n,e),this.check()}rotateZ({radians:e,origin:n=Om}){return _9(this,this,n,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return gR(this,this,e),this.check()}transformAsVector(e){return pR(this,this,e),this.check()}transformByMatrix3(e){return p9(this,this,e),this.check()}transformByMatrix2(e){return l9(this,this,e),this.check()}transformByQuaternion(e){return g9(this,this,e),this.check()}}class T9 extends dR{toString(){let e="[";if(Ri.printRowMajor){e+="row-major:";for(let n=0;n<this.RANK;++n)for(let i=0;i<this.RANK;++i)e+=` ${this[i*this.RANK+n]}`}else{e+="column-major:";for(let n=0;n<this.ELEMENTS;++n)e+=` ${this[n]}`}return e+="]",e}getElementIndex(e,n){return n*this.RANK+e}getElement(e,n){return this[n*this.RANK+e]}setElement(e,n,i){return this[n*this.RANK+e]=Xn(i),this}getColumn(e,n=new Array(this.RANK).fill(-0)){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)n[r]=this[i+r];return n}setColumn(e,n){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)this[i+r]=n[r];return this}}function x9(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function S9(t,e){if(t===e){const n=e[1],i=e[2],r=e[3],s=e[6],a=e[7],o=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=s,t[11]=e[14],t[12]=r,t[13]=a,t[14]=o}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function R_(t,e){const n=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],f=e[9],d=e[10],p=e[11],m=e[12],S=e[13],v=e[14],y=e[15],_=n*o-i*a,T=n*l-r*a,b=n*c-s*a,M=i*l-r*o,C=i*c-s*o,D=r*c-s*l,F=u*S-f*m,L=u*v-d*m,U=u*y-p*m,N=f*v-d*S,A=f*y-p*S,Y=d*y-p*v;let k=_*Y-T*A+b*N+M*U-C*L+D*F;return k?(k=1/k,t[0]=(o*Y-l*A+c*N)*k,t[1]=(r*A-i*Y-s*N)*k,t[2]=(S*D-v*C+y*M)*k,t[3]=(d*C-f*D-p*M)*k,t[4]=(l*U-a*Y-c*L)*k,t[5]=(n*Y-r*U+s*L)*k,t[6]=(v*b-m*D-y*T)*k,t[7]=(u*D-d*b+p*T)*k,t[8]=(a*A-o*U+c*F)*k,t[9]=(i*U-n*A-s*F)*k,t[10]=(m*C-S*b+y*_)*k,t[11]=(f*b-u*C-p*_)*k,t[12]=(o*L-a*N-l*F)*k,t[13]=(n*N-i*L+r*F)*k,t[14]=(S*T-m*M-v*_)*k,t[15]=(u*M-f*T+d*_)*k,t):null}function w9(t){const e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],a=t[5],o=t[6],l=t[7],c=t[8],u=t[9],f=t[10],d=t[11],p=t[12],m=t[13],S=t[14],v=t[15],y=e*a-n*s,_=e*o-i*s,T=n*o-i*a,b=c*m-u*p,M=c*S-f*p,C=u*S-f*m,D=e*C-n*M+i*b,F=s*C-a*M+o*b,L=c*T-u*_+f*y,U=p*T-m*_+S*y;return l*D-r*F+v*L-d*U}function ba(t,e,n){const i=e[0],r=e[1],s=e[2],a=e[3],o=e[4],l=e[5],c=e[6],u=e[7],f=e[8],d=e[9],p=e[10],m=e[11],S=e[12],v=e[13],y=e[14],_=e[15];let T=n[0],b=n[1],M=n[2],C=n[3];return t[0]=T*i+b*o+M*f+C*S,t[1]=T*r+b*l+M*d+C*v,t[2]=T*s+b*c+M*p+C*y,t[3]=T*a+b*u+M*m+C*_,T=n[4],b=n[5],M=n[6],C=n[7],t[4]=T*i+b*o+M*f+C*S,t[5]=T*r+b*l+M*d+C*v,t[6]=T*s+b*c+M*p+C*y,t[7]=T*a+b*u+M*m+C*_,T=n[8],b=n[9],M=n[10],C=n[11],t[8]=T*i+b*o+M*f+C*S,t[9]=T*r+b*l+M*d+C*v,t[10]=T*s+b*c+M*p+C*y,t[11]=T*a+b*u+M*m+C*_,T=n[12],b=n[13],M=n[14],C=n[15],t[12]=T*i+b*o+M*f+C*S,t[13]=T*r+b*l+M*d+C*v,t[14]=T*s+b*c+M*p+C*y,t[15]=T*a+b*u+M*m+C*_,t}function _h(t,e,n){const i=n[0],r=n[1],s=n[2];let a,o,l,c,u,f,d,p,m,S,v,y;return e===t?(t[12]=e[0]*i+e[4]*r+e[8]*s+e[12],t[13]=e[1]*i+e[5]*r+e[9]*s+e[13],t[14]=e[2]*i+e[6]*r+e[10]*s+e[14],t[15]=e[3]*i+e[7]*r+e[11]*s+e[15]):(a=e[0],o=e[1],l=e[2],c=e[3],u=e[4],f=e[5],d=e[6],p=e[7],m=e[8],S=e[9],v=e[10],y=e[11],t[0]=a,t[1]=o,t[2]=l,t[3]=c,t[4]=u,t[5]=f,t[6]=d,t[7]=p,t[8]=m,t[9]=S,t[10]=v,t[11]=y,t[12]=a*i+u*r+m*s+e[12],t[13]=o*i+f*r+S*s+e[13],t[14]=l*i+d*r+v*s+e[14],t[15]=c*i+p*r+y*s+e[15]),t}function ov(t,e,n){const i=n[0],r=n[1],s=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function A9(t,e,n,i){let r=i[0],s=i[1],a=i[2],o=Math.sqrt(r*r+s*s+a*a),l,c,u,f,d,p,m,S,v,y,_,T,b,M,C,D,F,L,U,N,A,Y,k,j;return o<dd?null:(o=1/o,r*=o,s*=o,a*=o,c=Math.sin(n),l=Math.cos(n),u=1-l,f=e[0],d=e[1],p=e[2],m=e[3],S=e[4],v=e[5],y=e[6],_=e[7],T=e[8],b=e[9],M=e[10],C=e[11],D=r*r*u+l,F=s*r*u+a*c,L=a*r*u-s*c,U=r*s*u-a*c,N=s*s*u+l,A=a*s*u+r*c,Y=r*a*u+s*c,k=s*a*u-r*c,j=a*a*u+l,t[0]=f*D+S*F+T*L,t[1]=d*D+v*F+b*L,t[2]=p*D+y*F+M*L,t[3]=m*D+_*F+C*L,t[4]=f*U+S*N+T*A,t[5]=d*U+v*N+b*A,t[6]=p*U+y*N+M*A,t[7]=m*U+_*N+C*A,t[8]=f*Y+S*k+T*j,t[9]=d*Y+v*k+b*j,t[10]=p*Y+y*k+M*j,t[11]=m*Y+_*k+C*j,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function mR(t,e,n){const i=Math.sin(n),r=Math.cos(n),s=e[4],a=e[5],o=e[6],l=e[7],c=e[8],u=e[9],f=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*r+c*i,t[5]=a*r+u*i,t[6]=o*r+f*i,t[7]=l*r+d*i,t[8]=c*r-s*i,t[9]=u*r-a*i,t[10]=f*r-o*i,t[11]=d*r-l*i,t}function E9(t,e,n){const i=Math.sin(n),r=Math.cos(n),s=e[0],a=e[1],o=e[2],l=e[3],c=e[8],u=e[9],f=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*r-c*i,t[1]=a*r-u*i,t[2]=o*r-f*i,t[3]=l*r-d*i,t[8]=s*i+c*r,t[9]=a*i+u*r,t[10]=o*i+f*r,t[11]=l*i+d*r,t}function yR(t,e,n){const i=Math.sin(n),r=Math.cos(n),s=e[0],a=e[1],o=e[2],l=e[3],c=e[4],u=e[5],f=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*r+c*i,t[1]=a*r+u*i,t[2]=o*r+f*i,t[3]=l*r+d*i,t[4]=c*r-s*i,t[5]=u*r-a*i,t[6]=f*r-o*i,t[7]=d*r-l*i,t}function C9(t,e){const n=e[0],i=e[1],r=e[2],s=e[3],a=n+n,o=i+i,l=r+r,c=n*a,u=i*a,f=i*o,d=r*a,p=r*o,m=r*l,S=s*a,v=s*o,y=s*l;return t[0]=1-f-m,t[1]=u+y,t[2]=d-v,t[3]=0,t[4]=u-y,t[5]=1-c-m,t[6]=p+S,t[7]=0,t[8]=d+v,t[9]=p-S,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function R9(t,e,n,i,r,s,a){const o=1/(n-e),l=1/(r-i),c=1/(s-a);return t[0]=s*2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s*2*l,t[6]=0,t[7]=0,t[8]=(n+e)*o,t[9]=(r+i)*l,t[10]=(a+s)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*s*2*c,t[15]=0,t}function M9(t,e,n,i,r){const s=1/Math.tan(e/2);if(t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,r!=null&&r!==1/0){const a=1/(i-r);t[10]=(r+i)*a,t[14]=2*r*i*a}else t[10]=-1,t[14]=-2*i;return t}const O9=M9;function I9(t,e,n,i,r,s,a){const o=1/(e-n),l=1/(i-r),c=1/(s-a);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*o,t[13]=(r+i)*l,t[14]=(a+s)*c,t[15]=1,t}const P9=I9;function D9(t,e,n,i){let r,s,a,o,l,c,u,f,d,p;const m=e[0],S=e[1],v=e[2],y=i[0],_=i[1],T=i[2],b=n[0],M=n[1],C=n[2];return Math.abs(m-b)<dd&&Math.abs(S-M)<dd&&Math.abs(v-C)<dd?x9(t):(f=m-b,d=S-M,p=v-C,r=1/Math.sqrt(f*f+d*d+p*p),f*=r,d*=r,p*=r,s=_*p-T*d,a=T*f-y*p,o=y*d-_*f,r=Math.sqrt(s*s+a*a+o*o),r?(r=1/r,s*=r,a*=r,o*=r):(s=0,a=0,o=0),l=d*o-p*a,c=p*s-f*o,u=f*a-d*s,r=Math.sqrt(l*l+c*c+u*u),r?(r=1/r,l*=r,c*=r,u*=r):(l=0,c=0,u=0),t[0]=s,t[1]=l,t[2]=f,t[3]=0,t[4]=a,t[5]=c,t[6]=d,t[7]=0,t[8]=o,t[9]=u,t[10]=p,t[11]=0,t[12]=-(s*m+a*S+o*v),t[13]=-(l*m+c*S+u*v),t[14]=-(f*m+d*S+p*v),t[15]=1,t)}function k9(){const t=new ll(4);return ll!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function N9(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function ku(t,e,n){const i=e[0],r=e[1],s=e[2],a=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*s+n[12]*a,t[1]=n[1]*i+n[5]*r+n[9]*s+n[13]*a,t[2]=n[2]*i+n[6]*r+n[10]*s+n[14]*a,t[3]=n[3]*i+n[7]*r+n[11]*s+n[15]*a,t}(function(){const t=k9();return function(e,n,i,r,s,a){let o,l;for(n||(n=4),i||(i=0),r?l=Math.min(r*n+i,e.length):l=e.length,o=i;o<l;o+=n)t[0]=e[o],t[1]=e[o+1],t[2]=e[o+2],t[3]=e[o+3],s(t,t,a),e[o]=t[0],e[o+1]=t[1],e[o+2]=t[2],e[o+3]=t[3];return e}})();var M_;(function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"})(M_||(M_={}));const B9=45*Math.PI/180,L9=1,Im=.1,Pm=500,U9=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class dr extends T9{static get IDENTITY(){return z9()}static get ZERO(){return F9()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return M_}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,n,i,r,s,a,o,l,c,u,f,d,p,m,S,v){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this[4]=s,this[5]=a,this[6]=o,this[7]=l,this[8]=c,this[9]=u,this[10]=f,this[11]=d,this[12]=p,this[13]=m,this[14]=S,this[15]=v,this.check()}setRowMajor(e,n,i,r,s,a,o,l,c,u,f,d,p,m,S,v){return this[0]=e,this[1]=s,this[2]=c,this[3]=p,this[4]=n,this[5]=a,this[6]=u,this[7]=m,this[8]=i,this[9]=o,this[10]=f,this[11]=S,this[12]=r,this[13]=l,this[14]=d,this[15]=v,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(U9)}fromObject(e){return this.check()}fromQuaternion(e){return C9(this,e),this.check()}frustum(e){const{left:n,right:i,bottom:r,top:s,near:a=Im,far:o=Pm}=e;return o===1/0?V9(this,n,i,r,s,a):R9(this,n,i,r,s,a,o),this.check()}lookAt(e){const{eye:n,center:i=[0,0,0],up:r=[0,1,0]}=e;return D9(this,n,i,r),this.check()}ortho(e){const{left:n,right:i,bottom:r,top:s,near:a=Im,far:o=Pm}=e;return P9(this,n,i,r,s,a,o),this.check()}orthographic(e){const{fovy:n=B9,aspect:i=L9,focalDistance:r=1,near:s=Im,far:a=Pm}=e;uT(n);const o=n/2,l=r*Math.tan(o),c=l*i;return this.ortho({left:-c,right:c,bottom:-l,top:l,near:s,far:a})}perspective(e){const{fovy:n=45*Math.PI/180,aspect:i=1,near:r=.1,far:s=500}=e;return uT(n),O9(this,n,i,r,s),this.check()}determinant(){return w9(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const i=this.getScale(n),r=1/i[0],s=1/i[1],a=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*s,e[2]=this[2]*a,e[3]=0,e[4]=this[4]*r,e[5]=this[5]*s,e[6]=this[6]*a,e[7]=0,e[8]=this[8]*r,e[9]=this[9]*s,e[10]=this[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const i=this.getScale(n),r=1/i[0],s=1/i[1],a=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*s,e[2]=this[2]*a,e[3]=this[4]*r,e[4]=this[5]*s,e[5]=this[6]*a,e[6]=this[8]*r,e[7]=this[9]*s,e[8]=this[10]*a,e}transpose(){return S9(this,this),this.check()}invert(){return R_(this,this),this.check()}multiplyLeft(e){return ba(this,e,this),this.check()}multiplyRight(e){return ba(this,this,e),this.check()}rotateX(e){return mR(this,this,e),this.check()}rotateY(e){return E9(this,this,e),this.check()}rotateZ(e){return yR(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,n){return A9(this,this,e,n),this.check()}scale(e){return ov(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return _h(this,this,e),this.check()}transform(e,n){return e.length===4?(n=ku(n||[-0,-0,-0,-0],e,this),Mm(n,4),n):this.transformAsPoint(e,n)}transformAsPoint(e,n){const{length:i}=e;let r;switch(i){case 2:r=a9(n||[-0,-0],e,this);break;case 3:r=gR(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Mm(r,e.length),r}transformAsVector(e,n){let i;switch(e.length){case 2:i=o9(n||[-0,-0],e,this);break;case 3:i=pR(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Mm(i,e.length),i}transformPoint(e,n){return this.transformAsPoint(e,n)}transformVector(e,n){return this.transformAsPoint(e,n)}transformDirection(e,n){return this.transformAsVector(e,n)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,n,i){return this.identity().translate([e,n,i])}}let Pf,Df;function F9(){return Pf||(Pf=new dr([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(Pf)),Pf}function z9(){return Df||(Df=new dr,Object.freeze(Df)),Df}function uT(t){if(t>Math.PI*2)throw Error("expected radians")}function V9(t,e,n,i,r,s){const a=2*s/(n-e),o=2*s/(r-i),l=(n+e)/(n-e),c=(r+i)/(r-i),u=-1,f=-1,d=-2*s;return t[0]=a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=l,t[9]=c,t[10]=u,t[11]=f,t[12]=0,t[13]=0,t[14]=d,t[15]=0,t}function _R(t,e=[],n=0){const i=Math.fround(t),r=t-i;return e[n]=i,e[n+1]=r,e}function $9(t){return t-Math.fround(t)}function j9(t){const e=new Float32Array(32);for(let n=0;n<4;++n)for(let i=0;i<4;++i){const r=n*4+i;_R(t[i*4+n],e,r*2)}return e}const H9=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND

// All these functions are for substituting tan() function from Intel GPU only
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01; // 1/3!
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03; // 1/5!
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04; // 1/7!
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06; // 1/9!

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }

    // 2pi range reduction
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,W9={name:"fp32",vs:H9},Y9=`
uniform fp64arithmeticUniforms {
  uniform float ONE;
} fp64;

/*
About LUMA_FP64_CODE_ELIMINATION_WORKAROUND

The purpose of this workaround is to prevent shader compilers from
optimizing away necessary arithmetic operations by swapping their sequences
or transform the equation to some 'equivalent' form.

The method is to multiply an artifical variable, ONE, which will be known to
the compiler to be 1 only at runtime. The whole expression is then represented
as a polynomial with respective to ONE. In the coefficients of all terms, only one a
and one b should appear

err = (a + b) * ONE^6 - a * ONE^5 - (a + b) * ONE^4 + a * ONE^3 - b - (a + b) * ONE^2 + a * ONE
*/

// Divide float number to high and low floats to extend fraction bits
vec2 split(float a) {
  const float SPLIT = 4097.0;
  float t = a * SPLIT;
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float a_hi = t * fp64.ONE - (t - a);
  float a_lo = a * fp64.ONE - a_hi;
#else
  float a_hi = t - (t - a);
  float a_lo = a - a_hi;
#endif
  return vec2(a_hi, a_lo);
}

// Divide float number again when high float uses too many fraction bits
vec2 split2(vec2 a) {
  vec2 b = split(a.x);
  b.y += a.y;
  return b;
}

// Special sum operation when a > b
vec2 quickTwoSum(float a, float b) {
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float sum = (a + b) * fp64.ONE;
  float err = b - (sum - a) * fp64.ONE;
#else
  float sum = a + b;
  float err = b - (sum - a);
#endif
  return vec2(sum, err);
}

// General sum operation
vec2 twoSum(float a, float b) {
  float s = (a + b);
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float v = (s * fp64.ONE - a) * fp64.ONE;
  float err = (a - (s - v) * fp64.ONE) * fp64.ONE * fp64.ONE * fp64.ONE + (b - v);
#else
  float v = s - a;
  float err = (a - (s - v)) + (b - v);
#endif
  return vec2(s, err);
}

vec2 twoSub(float a, float b) {
  float s = (a - b);
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float v = (s * fp64.ONE - a) * fp64.ONE;
  float err = (a - (s - v) * fp64.ONE) * fp64.ONE * fp64.ONE * fp64.ONE - (b + v);
#else
  float v = s - a;
  float err = (a - (s - v)) - (b + v);
#endif
  return vec2(s, err);
}

vec2 twoSqr(float a) {
  float prod = a * a;
  vec2 a_fp64 = split(a);
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float err = ((a_fp64.x * a_fp64.x - prod) * fp64.ONE + 2.0 * a_fp64.x *
    a_fp64.y * fp64.ONE * fp64.ONE) + a_fp64.y * a_fp64.y * fp64.ONE * fp64.ONE * fp64.ONE;
#else
  float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;
#endif
  return vec2(prod, err);
}

vec2 twoProd(float a, float b) {
  float prod = a * b;
  vec2 a_fp64 = split(a);
  vec2 b_fp64 = split(b);
  float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +
    a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;
  return vec2(prod, err);
}

vec2 sum_fp64(vec2 a, vec2 b) {
  vec2 s, t;
  s = twoSum(a.x, b.x);
  t = twoSum(a.y, b.y);
  s.y += t.x;
  s = quickTwoSum(s.x, s.y);
  s.y += t.y;
  s = quickTwoSum(s.x, s.y);
  return s;
}

vec2 sub_fp64(vec2 a, vec2 b) {
  vec2 s, t;
  s = twoSub(a.x, b.x);
  t = twoSub(a.y, b.y);
  s.y += t.x;
  s = quickTwoSum(s.x, s.y);
  s.y += t.y;
  s = quickTwoSum(s.x, s.y);
  return s;
}

vec2 mul_fp64(vec2 a, vec2 b) {
  vec2 prod = twoProd(a.x, b.x);
  // y component is for the error
  prod.y += a.x * b.y;
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
  prod = split2(prod);
#endif
  prod = quickTwoSum(prod.x, prod.y);
  prod.y += a.y * b.x;
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
  prod = split2(prod);
#endif
  prod = quickTwoSum(prod.x, prod.y);
  return prod;
}

vec2 div_fp64(vec2 a, vec2 b) {
  float xn = 1.0 / b.x;
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
  vec2 yn = mul_fp64(a, vec2(xn, 0));
#else
  vec2 yn = a * xn;
#endif
  float diff = (sub_fp64(a, mul_fp64(b, yn))).x;
  vec2 prod = twoProd(xn, diff);
  return sum_fp64(yn, prod);
}

vec2 sqrt_fp64(vec2 a) {
  if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);
  if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);

  float x = 1.0 / sqrt(a.x);
  float yn = a.x * x;
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  vec2 yn_sqr = twoSqr(yn) * fp64.ONE;
#else
  vec2 yn_sqr = twoSqr(yn);
#endif
  float diff = sub_fp64(a, yn_sqr).x;
  vec2 prod = twoProd(x * 0.5, diff);
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
  return sum_fp64(split(yn), prod);
#else
  return sum_fp64(vec2(yn, 0.0), prod);
#endif
}
`,X9={ONE:1},q9={name:"fp64arithmetic",vs:Y9,defaultUniforms:X9,uniformTypes:{ONE:"f32"},fp64ify:_R,fp64LowPart:$9,fp64ifyMatrix4:j9},K9=[0,1,1,1],Z9=`uniform pickingUniforms {
  float isActive;
  float isAttribute;
  float isHighlightActive;
  float useFloatColors;
  vec3 highlightedObjectColor;
  vec4 highlightColor;
} picking;

out vec4 picking_vRGBcolor_Avalid;

// Normalize unsigned byte color to 0-1 range
vec3 picking_normalizeColor(vec3 color) {
  return picking.useFloatColors > 0.5 ? color : color / 255.0;
}

// Normalize unsigned byte color to 0-1 range
vec4 picking_normalizeColor(vec4 color) {
  return picking.useFloatColors > 0.5 ? color : color / 255.0;
}

bool picking_isColorZero(vec3 color) {
  return dot(color, vec3(1.0)) < 0.00001;
}

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.00001;
}

// Check if this vertex is highlighted 
bool isVertexHighlighted(vec3 vertexColor) {
  vec3 highlightedObjectColor = picking_normalizeColor(picking.highlightedObjectColor);
  return
    bool(picking.isHighlightActive) && picking_isColorZero(abs(vertexColor - highlightedObjectColor));
}

// Set the current picking color
void picking_setPickingColor(vec3 pickingColor) {
  pickingColor = picking_normalizeColor(pickingColor);

  if (bool(picking.isActive)) {
    // Use alpha as the validity flag. If pickingColor is [0, 0, 0] fragment is non-pickable
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!bool(picking.isAttribute)) {
      // Stores the picking color so that the fragment shader can render it during picking
      picking_vRGBcolor_Avalid.rgb = pickingColor;
    }
  } else {
    // Do the comparison with selected item color in vertex shader as it should mean fewer compares
    picking_vRGBcolor_Avalid.a = float(isVertexHighlighted(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (bool(picking.isAttribute)) {
    picking_vRGBcolor_Avalid.r = value;
  }
}

void picking_setPickingAttribute(vec2 value) {
  if (bool(picking.isAttribute)) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}

void picking_setPickingAttribute(vec3 value) {
  if (bool(picking.isAttribute)) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,G9=`uniform pickingUniforms {
  float isActive;
  float isAttribute;
  float isHighlightActive;
  float useFloatColors;
  vec3 highlightedObjectColor;
  vec4 highlightColor;
} picking;

in vec4 picking_vRGBcolor_Avalid;

/*
 * Returns highlight color if this item is selected.
 */
vec4 picking_filterHighlightColor(vec4 color) {
  // If we are still picking, we don't highlight
  if (picking.isActive > 0.5) {
    return color;
  }

  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    // Blend in highlight color based on its alpha value
    float highLightAlpha = picking.highlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking.highlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 picking_filterPickingColor(vec4 color) {
  if (bool(picking.isActive)) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 picking_filterColor(vec4 color) {
  vec4 highlightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highlightColor);
}
`,fT={props:{},uniforms:{},name:"picking",uniformTypes:{isActive:"f32",isAttribute:"f32",isHighlightActive:"f32",useFloatColors:"f32",highlightedObjectColor:"vec3<f32>",highlightColor:"vec4<f32>"},defaultUniforms:{isActive:!1,isAttribute:!1,isHighlightActive:!1,useFloatColors:!0,highlightedObjectColor:[0,0,0],highlightColor:K9},vs:Z9,fs:G9,getUniforms:Q9};function Q9(t={},e){const n={};if(t.highlightedObjectColor!==void 0)if(t.highlightedObjectColor===null)n.isHighlightActive=!1;else{n.isHighlightActive=!0;const i=t.highlightedObjectColor.slice(0,3);n.highlightedObjectColor=i}if(t.highlightColor){const i=Array.from(t.highlightColor,r=>r/255);Number.isFinite(i[3])||(i[3]=1),n.highlightColor=i}return t.isActive!==void 0&&(n.isActive=!!t.isActive,n.isAttribute=!!t.isAttribute),t.useFloatColors!==void 0&&(n.useFloatColors=!!t.useFloatColors),n}const dT=`uniform layerUniforms {
  uniform float opacity;
} layer;
`,J9={name:"layer",vs:dT,fs:dT,getUniforms:t=>({opacity:Math.pow(t.opacity,1/2.2)}),uniformTypes:{opacity:"f32"}},eV=`

struct ColorUniforms {
  opacity: f32,
};

var<private> color: ColorUniforms = ColorUniforms(1.0);
// TODO (kaapp) avoiding binding index collisions to handle layer opacity 
// requires some thought.
// @group(0) @binding(0) var<uniform> color: ColorUniforms;

@must_use
fn deckgl_premultiplied_alpha(fragColor: vec4<f32>) -> vec4<f32> {
    return vec4(fragColor.rgb * fragColor.a, fragColor.a); 
};
`,tV={name:"color",dependencies:[],source:eV,getUniforms:t=>({}),uniformTypes:{opacity:"f32"}},nV=`const SMOOTH_EDGE_RADIUS: f32 = 0.5;

struct VertexGeometry {
  position: vec4<f32>,
  worldPosition: vec3<f32>,
  worldPositionAlt: vec3<f32>,
  normal: vec3<f32>,
  uv: vec2<f32>,
  pickingColor: vec3<f32>,
};

var<private> geometry_: VertexGeometry = VertexGeometry(
  vec4<f32>(0.0, 0.0, 1.0, 0.0),
  vec3<f32>(0.0, 0.0, 0.0),
  vec3<f32>(0.0, 0.0, 0.0),
  vec3<f32>(0.0, 0.0, 0.0),
  vec2<f32>(0.0, 0.0),
  vec3<f32>(0.0, 0.0, 0.0)
);

struct FragmentGeometry {
  uv: vec2<f32>,
};

var<private> fragmentGeometry: FragmentGeometry;

fn smoothedge(edge: f32, x: f32) -> f32 {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`,bR="#define SMOOTH_EDGE_RADIUS 0.5",iV=`${bR}

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`,rV=`${bR}

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`,vR={name:"geometry",source:nV,vs:iV,fs:rV},sV=25;var Jt;(function(t){t[t.Start=1]="Start",t[t.Move=2]="Move",t[t.End=4]="End",t[t.Cancel=8]="Cancel"})(Jt||(Jt={}));var sn;(function(t){t[t.None=0]="None",t[t.Left=1]="Left",t[t.Right=2]="Right",t[t.Up=4]="Up",t[t.Down=8]="Down",t[t.Horizontal=3]="Horizontal",t[t.Vertical=12]="Vertical",t[t.All=15]="All"})(sn||(sn={}));var Ce;(function(t){t[t.Possible=1]="Possible",t[t.Began=2]="Began",t[t.Changed=4]="Changed",t[t.Ended=8]="Ended",t[t.Recognized=8]="Recognized",t[t.Cancelled=16]="Cancelled",t[t.Failed=32]="Failed"})(Ce||(Ce={}));const aV="compute",oV="auto",O_="manipulation",hd="none",I_="pan-x",P_="pan-y";function lV(t){if(t.includes(hd))return hd;const e=t.includes(I_),n=t.includes(P_);return e&&n?hd:e||n?e?I_:P_:t.includes(O_)?O_:oV}class cV{constructor(e,n){this.actions="",this.manager=e,this.set(n)}set(e){e===aV&&(e=this.compute()),this.manager.element&&(this.manager.element.style.touchAction=e,this.actions=e)}update(){this.set(this.manager.options.touchAction)}compute(){let e=[];for(const n of this.manager.recognizers)n.options.enable&&(e=e.concat(n.getTouchAction()));return lV(e.join(" "))}}function bh(t){return t.trim().split(/\s+/g)}function Dm(t,e,n){if(t)for(const i of bh(e))t.addEventListener(i,n,!1)}function km(t,e,n){if(t)for(const i of bh(e))t.removeEventListener(i,n,!1)}function hT(t){return(t.ownerDocument||t).defaultView}function uV(t,e){let n=t;for(;n;){if(n===e)return!0;n=n.parentNode}return!1}function TR(t){const e=t.length;if(e===1)return{x:Math.round(t[0].clientX),y:Math.round(t[0].clientY)};let n=0,i=0,r=0;for(;r<e;)n+=t[r].clientX,i+=t[r].clientY,r++;return{x:Math.round(n/e),y:Math.round(i/e)}}function pT(t){const e=[];let n=0;for(;n<t.pointers.length;)e[n]={clientX:Math.round(t.pointers[n].clientX),clientY:Math.round(t.pointers[n].clientY)},n++;return{timeStamp:Date.now(),pointers:e,center:TR(e),deltaX:t.deltaX,deltaY:t.deltaY}}function xR(t,e){const n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)}function gT(t,e){const n=e.clientX-t.clientX,i=e.clientY-t.clientY;return Math.sqrt(n*n+i*i)}function fV(t,e){const n=e.x-t.x,i=e.y-t.y;return Math.atan2(i,n)*180/Math.PI}function mT(t,e){const n=e.clientX-t.clientX,i=e.clientY-t.clientY;return Math.atan2(i,n)*180/Math.PI}function SR(t,e){return t===e?sn.None:Math.abs(t)>=Math.abs(e)?t<0?sn.Left:sn.Right:e<0?sn.Up:sn.Down}function dV(t,e){const n=e.center;let i=t.offsetDelta,r=t.prevDelta;const s=t.prevInput;return(e.eventType===Jt.Start||(s==null?void 0:s.eventType)===Jt.End)&&(r=t.prevDelta={x:(s==null?void 0:s.deltaX)||0,y:(s==null?void 0:s.deltaY)||0},i=t.offsetDelta={x:n.x,y:n.y}),{deltaX:r.x+(n.x-i.x),deltaY:r.y+(n.y-i.y)}}function wR(t,e,n){return{x:e/t||0,y:n/t||0}}function hV(t,e){return gT(e[0],e[1])/gT(t[0],t[1])}function pV(t,e){return mT(e[1],e[0])-mT(t[1],t[0])}function gV(t,e){const n=t.lastInterval||e,i=e.timeStamp-n.timeStamp;let r,s,a,o;if(e.eventType!==Jt.Cancel&&(i>sV||n.velocity===void 0)){const l=e.deltaX-n.deltaX,c=e.deltaY-n.deltaY,u=wR(i,l,c);s=u.x,a=u.y,r=Math.abs(u.x)>Math.abs(u.y)?u.x:u.y,o=SR(l,c),t.lastInterval=e}else r=n.velocity,s=n.velocityX,a=n.velocityY,o=n.direction;e.velocity=r,e.velocityX=s,e.velocityY=a,e.direction=o}function mV(t,e){const{session:n}=t,{pointers:i}=e,{length:r}=i;n.firstInput||(n.firstInput=pT(e)),r>1&&!n.firstMultiple?n.firstMultiple=pT(e):r===1&&(n.firstMultiple=!1);const{firstInput:s,firstMultiple:a}=n,o=a?a.center:s.center,l=e.center=TR(i);e.timeStamp=Date.now(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=fV(o,l),e.distance=xR(o,l);const{deltaX:c,deltaY:u}=dV(n,e);e.deltaX=c,e.deltaY=u,e.offsetDirection=SR(e.deltaX,e.deltaY);const f=wR(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=f.x,e.overallVelocityY=f.y,e.overallVelocity=Math.abs(f.x)>Math.abs(f.y)?f.x:f.y,e.scale=a?hV(a.pointers,i):1,e.rotation=a?pV(a.pointers,i):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length;let d=t.element;return uV(e.srcEvent.target,d)&&(d=e.srcEvent.target),e.target=d,gV(n,e),e}function yV(t,e,n){const i=n.pointers.length,r=n.changedPointers.length,s=e&Jt.Start&&i-r===0,a=e&(Jt.End|Jt.Cancel)&&i-r===0;n.isFirst=!!s,n.isFinal=!!a,s&&(t.session={}),n.eventType=e;const o=mV(t,n);t.emit("hammer.input",o),t.recognize(o),t.session.prevInput=o}let _V=class{constructor(e){this.evEl="",this.evWin="",this.evTarget="",this.domHandler=n=>{this.manager.options.enable&&this.handler(n)},this.manager=e,this.element=e.element,this.target=e.options.inputTarget||e.element}callback(e,n){yV(this.manager,e,n)}init(){Dm(this.element,this.evEl,this.domHandler),Dm(this.target,this.evTarget,this.domHandler),Dm(hT(this.element),this.evWin,this.domHandler)}destroy(){km(this.element,this.evEl,this.domHandler),km(this.target,this.evTarget,this.domHandler),km(hT(this.element),this.evWin,this.domHandler)}};const bV={pointerdown:Jt.Start,pointermove:Jt.Move,pointerup:Jt.End,pointercancel:Jt.Cancel,pointerout:Jt.Cancel},vV="pointerdown",TV="pointermove pointerup pointercancel";class xV extends _V{constructor(e){super(e),this.evEl=vV,this.evWin=TV,this.store=this.manager.session.pointerEvents=[],this.init()}handler(e){const{store:n}=this;let i=!1;const r=bV[e.type],s=e.pointerType,a=s==="touch";let o=n.findIndex(l=>l.pointerId===e.pointerId);r&Jt.Start&&(e.buttons||a)?o<0&&(n.push(e),o=n.length-1):r&(Jt.End|Jt.Cancel)&&(i=!0),!(o<0)&&(n[o]=e,this.callback(r,{pointers:n,changedPointers:[e],eventType:r,pointerType:s,srcEvent:e}),i&&n.splice(o,1))}}const SV=["","webkit","Moz","MS","ms","o"];function wV(t,e){const n=e[0].toUpperCase()+e.slice(1);for(const i of SV){const r=i?i+n:e;if(r in t)return r}}const AV=1,yT=2,_T={touchAction:"compute",enable:!0,inputTarget:null,cssProps:{userSelect:"none",userDrag:"none",touchCallout:"none",tapHighlightColor:"rgba(0,0,0,0)"}};class EV{constructor(e,n){this.options={..._T,...n,cssProps:{..._T.cssProps,...n.cssProps},inputTarget:n.inputTarget||e},this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new xV(this),this.touchAction=new cV(this,this.options.touchAction),this.toggleCssProps(!0)}set(e){return Object.assign(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this}stop(e){this.session.stopped=e?yT:AV}recognize(e){const{session:n}=this;if(n.stopped)return;this.session.prevented&&e.srcEvent.preventDefault();let i;const{recognizers:r}=this;let{curRecognizer:s}=n;(!s||s&&s.state&Ce.Recognized)&&(s=n.curRecognizer=null);let a=0;for(;a<r.length;)i=r[a],n.stopped!==yT&&(!s||i===s||i.canRecognizeWith(s))?i.recognize(e):i.reset(),!s&&i.state&(Ce.Began|Ce.Changed|Ce.Ended)&&(s=n.curRecognizer=i),a++}get(e){const{recognizers:n}=this;for(let i=0;i<n.length;i++)if(n[i].options.event===e)return n[i];return null}add(e){if(Array.isArray(e)){for(const i of e)this.add(i);return this}const n=this.get(e.options.event);return n&&this.remove(n),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e}remove(e){if(Array.isArray(e)){for(const i of e)this.remove(i);return this}const n=typeof e=="string"?this.get(e):e;if(n){const{recognizers:i}=this,r=i.indexOf(n);r!==-1&&(i.splice(r,1),this.touchAction.update())}return this}on(e,n){if(!e||!n)return;const{handlers:i}=this;for(const r of bh(e))i[r]=i[r]||[],i[r].push(n)}off(e,n){if(!e)return;const{handlers:i}=this;for(const r of bh(e))n?i[r]&&i[r].splice(i[r].indexOf(n),1):delete i[r]}emit(e,n){const i=this.handlers[e]&&this.handlers[e].slice();if(!i||!i.length)return;const r=n;r.type=e,r.preventDefault=function(){n.srcEvent.preventDefault()};let s=0;for(;s<i.length;)i[s](r),s++}destroy(){this.toggleCssProps(!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}toggleCssProps(e){const{element:n}=this;if(n){for(const[i,r]of Object.entries(this.options.cssProps)){const s=wV(n.style,i);e?(this.oldCssProps[s]=n.style[s],n.style[s]=r):n.style[s]=this.oldCssProps[s]||""}e||(this.oldCssProps={})}}}let CV=1;function RV(){return CV++}function bT(t){return t&Ce.Cancelled?"cancel":t&Ce.Ended?"end":t&Ce.Changed?"move":t&Ce.Began?"start":""}class AR{constructor(e){this.options=e,this.id=RV(),this.state=Ce.Possible,this.simultaneous={},this.requireFail=[]}set(e){return Object.assign(this.options,e),this.manager.touchAction.update(),this}recognizeWith(e){if(Array.isArray(e)){for(const r of e)this.recognizeWith(r);return this}let n;if(typeof e=="string"){if(n=this.manager.get(e),!n)throw new Error(`Cannot find recognizer ${e}`)}else n=e;const{simultaneous:i}=this;return i[n.id]||(i[n.id]=n,n.recognizeWith(this)),this}dropRecognizeWith(e){if(Array.isArray(e)){for(const i of e)this.dropRecognizeWith(i);return this}let n;return typeof e=="string"?n=this.manager.get(e):n=e,n&&delete this.simultaneous[n.id],this}requireFailure(e){if(Array.isArray(e)){for(const r of e)this.requireFailure(r);return this}let n;if(typeof e=="string"){if(n=this.manager.get(e),!n)throw new Error(`Cannot find recognizer ${e}`)}else n=e;const{requireFail:i}=this;return i.indexOf(n)===-1&&(i.push(n),n.requireFailure(this)),this}dropRequireFailure(e){if(Array.isArray(e)){for(const i of e)this.dropRequireFailure(i);return this}let n;if(typeof e=="string"?n=this.manager.get(e):n=e,n){const i=this.requireFail.indexOf(n);i>-1&&this.requireFail.splice(i,1)}return this}hasRequireFailures(){return!!this.requireFail.find(e=>e.options.enable)}canRecognizeWith(e){return!!this.simultaneous[e.id]}emit(e){if(!e)return;const{state:n}=this;n<Ce.Ended&&this.manager.emit(this.options.event+bT(n),e),this.manager.emit(this.options.event,e),e.additionalEvent&&this.manager.emit(e.additionalEvent,e),n>=Ce.Ended&&this.manager.emit(this.options.event+bT(n),e)}tryEmit(e){this.canEmit()?this.emit(e):this.state=Ce.Failed}canEmit(){let e=0;for(;e<this.requireFail.length;){if(!(this.requireFail[e].state&(Ce.Failed|Ce.Possible)))return!1;e++}return!0}recognize(e){const n={...e};if(!this.options.enable){this.reset(),this.state=Ce.Failed;return}this.state&(Ce.Recognized|Ce.Cancelled|Ce.Failed)&&(this.state=Ce.Possible),this.state=this.process(n),this.state&(Ce.Began|Ce.Changed|Ce.Ended|Ce.Cancelled)&&this.tryEmit(n)}getEventNames(){return[this.options.event]}reset(){}}class ER extends AR{attrTest(e){const n=this.options.pointers;return n===0||e.pointers.length===n}process(e){const{state:n}=this,{eventType:i}=e,r=n&(Ce.Began|Ce.Changed),s=this.attrTest(e);return r&&(i&Jt.Cancel||!s)?n|Ce.Cancelled:r||s?i&Jt.End?n|Ce.Ended:n&Ce.Began?n|Ce.Changed:Ce.Began:Ce.Failed}}class vT extends AR{constructor(e={}){super({enable:!0,event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10,...e}),this.pTime=null,this.pCenter=null,this._timer=null,this._input=null,this.count=0}getTouchAction(){return[O_]}process(e){const{options:n}=this,i=e.pointers.length===n.pointers,r=e.distance<n.threshold,s=e.deltaTime<n.time;if(this.reset(),e.eventType&Jt.Start&&this.count===0)return this.failTimeout();if(r&&s&&i){if(e.eventType!==Jt.End)return this.failTimeout();const a=this.pTime?e.timeStamp-this.pTime<n.interval:!0,o=!this.pCenter||xR(this.pCenter,e.center)<n.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,!o||!a?this.count=1:this.count+=1,this._input=e,this.count%n.taps===0)return this.hasRequireFailures()?(this._timer=setTimeout(()=>{this.state=Ce.Recognized,this.tryEmit(this._input)},n.interval),Ce.Began):Ce.Recognized}return Ce.Failed}failTimeout(){return this._timer=setTimeout(()=>{this.state=Ce.Failed},this.options.interval),Ce.Failed}reset(){clearTimeout(this._timer)}emit(e){this.state===Ce.Recognized&&(e.tapCount=this.count,this.manager.emit(this.options.event,e))}}const MV=["","start","move","end","cancel","up","down","left","right"];class TT extends ER{constructor(e={}){super({enable:!0,pointers:1,event:"pan",threshold:10,direction:sn.All,...e}),this.pX=null,this.pY=null}getTouchAction(){const{options:{direction:e}}=this,n=[];return e&sn.Horizontal&&n.push(P_),e&sn.Vertical&&n.push(I_),n}getEventNames(){return MV.map(e=>this.options.event+e)}directionTest(e){const{options:n}=this;let i=!0,{distance:r}=e,{direction:s}=e;const a=e.deltaX,o=e.deltaY;return s&n.direction||(n.direction&sn.Horizontal?(s=a===0?sn.None:a<0?sn.Left:sn.Right,i=a!==this.pX,r=Math.abs(e.deltaX)):(s=o===0?sn.None:o<0?sn.Up:sn.Down,i=o!==this.pY,r=Math.abs(e.deltaY))),e.direction=s,i&&r>n.threshold&&!!(s&n.direction)}attrTest(e){return super.attrTest(e)&&(!!(this.state&Ce.Began)||!(this.state&Ce.Began)&&this.directionTest(e))}emit(e){this.pX=e.deltaX,this.pY=e.deltaY;const n=sn[e.direction].toLowerCase();n&&(e.additionalEvent=this.options.event+n),super.emit(e)}}const OV=["","start","move","end","cancel","in","out"];class IV extends ER{constructor(e={}){super({enable:!0,event:"pinch",threshold:0,pointers:2,...e})}getTouchAction(){return[hd]}getEventNames(){return OV.map(e=>this.options.event+e)}attrTest(e){return super.attrTest(e)&&(Math.abs(e.scale-1)>this.options.threshold||!!(this.state&Ce.Began))}emit(e){if(e.scale!==1){const n=e.scale<1?"in":"out";e.additionalEvent=this.options.event+n}super.emit(e)}}class eg{constructor(e,n,i){this.element=e,this.callback=n,this.options=i}}const PV=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",DV=PV.indexOf("firefox")!==-1,xT=4.000244140625,kV=40,NV=.25;class BV extends eg{constructor(e,n,i){super(e,n,{enable:!0,...i}),this.handleEvent=r=>{if(!this.options.enable)return;let s=r.deltaY;globalThis.WheelEvent&&(DV&&r.deltaMode===globalThis.WheelEvent.DOM_DELTA_PIXEL&&(s/=globalThis.devicePixelRatio),r.deltaMode===globalThis.WheelEvent.DOM_DELTA_LINE&&(s*=kV)),s!==0&&s%xT===0&&(s=Math.floor(s/xT)),r.shiftKey&&s&&(s=s*NV),this.callback({type:"wheel",center:{x:r.clientX,y:r.clientY},delta:-s,srcEvent:r,pointerType:"mouse",target:r.target})},e.addEventListener("wheel",this.handleEvent,{passive:!1})}destroy(){this.element.removeEventListener("wheel",this.handleEvent)}enableEventType(e,n){e==="wheel"&&(this.options.enable=n)}}const ST=["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"];class LV extends eg{constructor(e,n,i){super(e,n,{enable:!0,...i}),this.handleEvent=s=>{this.handleOverEvent(s),this.handleOutEvent(s),this.handleEnterEvent(s),this.handleLeaveEvent(s),this.handleMoveEvent(s)},this.pressed=!1;const{enable:r}=this.options;this.enableMoveEvent=r,this.enableLeaveEvent=r,this.enableEnterEvent=r,this.enableOutEvent=r,this.enableOverEvent=r,ST.forEach(s=>e.addEventListener(s,this.handleEvent))}destroy(){ST.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){switch(e){case"pointermove":this.enableMoveEvent=n;break;case"pointerover":this.enableOverEvent=n;break;case"pointerout":this.enableOutEvent=n;break;case"pointerenter":this.enableEnterEvent=n;break;case"pointerleave":this.enableLeaveEvent=n;break}}handleOverEvent(e){this.enableOverEvent&&e.type==="mouseover"&&this._emit("pointerover",e)}handleOutEvent(e){this.enableOutEvent&&e.type==="mouseout"&&this._emit("pointerout",e)}handleEnterEvent(e){this.enableEnterEvent&&e.type==="mouseenter"&&this._emit("pointerenter",e)}handleLeaveEvent(e){this.enableLeaveEvent&&e.type==="mouseleave"&&this._emit("pointerleave",e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":e.buttons===0&&(this.pressed=!1),this.pressed||this._emit("pointermove",e);break;case"mouseup":this.pressed=!1;break}}_emit(e,n){this.callback({type:e,center:{x:n.clientX,y:n.clientY},srcEvent:n,pointerType:"mouse",target:n.target})}}const wT=["keydown","keyup"];class UV extends eg{constructor(e,n,i){super(e,n,{enable:!0,tabIndex:0,...i}),this.handleEvent=r=>{const s=r.target||r.srcElement;s.tagName==="INPUT"&&s.type==="text"||s.tagName==="TEXTAREA"||(this.enableDownEvent&&r.type==="keydown"&&this.callback({type:"keydown",srcEvent:r,key:r.key,target:r.target}),this.enableUpEvent&&r.type==="keyup"&&this.callback({type:"keyup",srcEvent:r,key:r.key,target:r.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,e.tabIndex=this.options.tabIndex,e.style.outline="none",wT.forEach(r=>e.addEventListener(r,this.handleEvent))}destroy(){wT.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e==="keydown"&&(this.enableDownEvent=n),e==="keyup"&&(this.enableUpEvent=n)}}class FV extends eg{constructor(e,n,i){super(e,n,i),this.handleEvent=r=>{this.options.enable&&this.callback({type:"contextmenu",center:{x:r.clientX,y:r.clientY},srcEvent:r,pointerType:"mouse",target:r.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,n){e==="contextmenu"&&(this.options.enable=n)}}const AT=1,D_=2,ET=4,zV={pointerdown:AT,pointermove:D_,pointerup:ET,mousedown:AT,mousemove:D_,mouseup:ET},VV=0,$V=1,jV=2,HV=1,WV=2,YV=4;function XV(t){const e=zV[t.srcEvent.type];if(!e)return null;const{buttons:n,button:i}=t.srcEvent;let r=!1,s=!1,a=!1;return e===D_?(r=!!(n&HV),s=!!(n&YV),a=!!(n&WV)):(r=i===VV,s=i===$V,a=i===jV),{leftButton:r,middleButton:s,rightButton:a}}function qV(t,e){const n=t.center;if(!n)return null;const i=e.getBoundingClientRect(),r=i.width/e.offsetWidth||1,s=i.height/e.offsetHeight||1,a={x:(n.x-i.left-e.clientLeft)/r,y:(n.y-i.top-e.clientTop)/s};return{center:n,offsetCenter:a}}const KV={srcElement:"root",priority:0};class ZV{constructor(e,n){this.handleEvent=i=>{if(this.isEmpty())return;const r=this._normalizeEvent(i);let s=i.srcEvent.target;for(;s&&s!==r.rootElement;){if(this._emit(r,s),r.handled)return;s=s.parentNode}this._emit(r,"root")},this.eventManager=e,this.recognizerName=n,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,n,i,r=!1,s=!1){const{handlers:a,handlersByElement:o}=this,l={...KV,...i};let c=o.get(l.srcElement);c||(c=[],o.set(l.srcElement,c));const u={type:e,handler:n,srcElement:l.srcElement,priority:l.priority};r&&(u.once=!0),s&&(u.passive=!0),a.push(u),this._active=this._active||!u.passive;let f=c.length-1;for(;f>=0&&!(c[f].priority>=u.priority);)f--;c.splice(f+1,0,u)}remove(e,n){const{handlers:i,handlersByElement:r}=this;for(let s=i.length-1;s>=0;s--){const a=i[s];if(a.type===e&&a.handler===n){i.splice(s,1);const o=r.get(a.srcElement);o.splice(o.indexOf(a),1),o.length===0&&r.delete(a.srcElement)}}this._active=i.some(s=>!s.passive)}_emit(e,n){const i=this.handlersByElement.get(n);if(i){let r=!1;const s=()=>{e.handled=!0},a=()=>{e.handled=!0,r=!0},o=[];for(let l=0;l<i.length;l++){const{type:c,handler:u,once:f}=i[l];if(u({...e,type:c,stopPropagation:s,stopImmediatePropagation:a}),f&&o.push(i[l]),r)break}for(let l=0;l<o.length;l++){const{type:c,handler:u}=o[l];this.remove(c,u)}}}_normalizeEvent(e){const n=this.eventManager.getElement();return{...e,...XV(e),...qV(e,n),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:n}}}function GV(t){if("recognizer"in t)return t;let e;const n=Array.isArray(t)?[...t]:[t];if(typeof n[0]=="function"){const i=n.shift(),r=n.shift()||{};e=new i(r)}else e=n.shift();return{recognizer:e,recognizeWith:typeof n[0]=="string"?[n[0]]:n[0],requireFailure:typeof n[1]=="string"?[n[1]]:n[1]}}class QV{constructor(e=null,n={}){if(this._onBasicInput=i=>{this.manager.emit(i.srcEvent.type,i)},this._onOtherEvent=i=>{this.manager.emit(i.type,i)},this.options={recognizers:[],events:{},touchAction:"compute",tabIndex:0,cssProps:{},...n},this.events=new Map,this.element=e,!!e){this.manager=new EV(e,this.options);for(const i of this.options.recognizers){const{recognizer:r,recognizeWith:s,requireFailure:a}=GV(i);this.manager.add(r),s&&r.recognizeWith(s),a&&r.requireFailure(a)}this.manager.on("hammer.input",this._onBasicInput),this.wheelInput=new BV(e,this._onOtherEvent,{enable:!1}),this.moveInput=new LV(e,this._onOtherEvent,{enable:!1}),this.keyInput=new UV(e,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new FV(e,this._onOtherEvent,{enable:!1}),this.on(this.options.events)}}getElement(){return this.element}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy())}on(e,n,i){this._addEventHandler(e,n,i,!1)}once(e,n,i){this._addEventHandler(e,n,i,!0)}watch(e,n,i){this._addEventHandler(e,n,i,!1,!0)}off(e,n){this._removeEventHandler(e,n)}_toggleRecognizer(e,n){var s,a,o,l;const{manager:i}=this;if(!i)return;const r=i.get(e);r&&(r.set({enable:n}),i.touchAction.update()),(s=this.wheelInput)==null||s.enableEventType(e,n),(a=this.moveInput)==null||a.enableEventType(e,n),(o=this.keyInput)==null||o.enableEventType(e,n),(l=this.contextmenuInput)==null||l.enableEventType(e,n)}_addEventHandler(e,n,i,r,s){if(typeof e!="string"){i=n;for(const[c,u]of Object.entries(e))this._addEventHandler(c,u,i,r,s);return}const{manager:a,events:o}=this;if(!a)return;let l=o.get(e);if(!l){const c=this._getRecognizerName(e)||e;l=new ZV(this,c),o.set(e,l),a&&a.on(e,l.handleEvent)}l.add(e,n,i,r,s),l.isEmpty()||this._toggleRecognizer(l.recognizerName,!0)}_removeEventHandler(e,n){if(typeof e!="string"){for(const[s,a]of Object.entries(e))this._removeEventHandler(s,a);return}const{events:i}=this,r=i.get(e);if(r&&(r.remove(e,n),r.isEmpty())){const{recognizerName:s}=r;let a=!1;for(const o of i.values())if(o.recognizerName===s&&!o.isEmpty()){a=!0;break}a||this._toggleRecognizer(s,!1)}}_getRecognizerName(e){var n;return(n=this.manager.recognizers.find(i=>i.getEventNames().includes(e)))==null?void 0:n.options.event}}const Ze={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(Ze,"IDENTITY",{get:()=>(ut.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const Si={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},Fs={common:0,meters:1,pixels:2},k_={click:"onClick",dblclick:"onClick",panstart:"onDragStart",panmove:"onDrag",panend:"onDragEnd"},CT={multipan:[TT,{threshold:10,direction:sn.Vertical,pointers:2}],pinch:[IV,{},null,["multipan"]],pan:[TT,{threshold:1},["pinch"],["multipan"]],dblclick:[vT,{event:"dblclick",taps:2}],click:[vT,{event:"click"},null,["dblclick"]]};function JV(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}return!1}function Nu(t){let e={},n;return i=>{for(const r in i)if(!JV(i[r],e[r])){n=t(i),e=i;break}return n}}const RT=[0,0,0,0],e$=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],CR=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t$=[0,0,0],RR=[0,0,0],n$=Nu(s$);function MR(t,e,n=RR){n.length<3&&(n=[n[0],n[1],0]);let i=n,r,s=!0;switch(e===Ze.LNGLAT_OFFSETS||e===Ze.METER_OFFSETS?r=n:r=t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case Si.WEB_MERCATOR:(e===Ze.LNGLAT||e===Ze.CARTESIAN)&&(r=[0,0,0],s=!1);break;case Si.WEB_MERCATOR_AUTO_OFFSET:e===Ze.LNGLAT?i=r:e===Ze.CARTESIAN&&(i=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],r=t.unprojectPosition(i),i[0]-=n[0],i[1]-=n[1],i[2]-=n[2]);break;case Si.IDENTITY:i=t.position.map(Math.fround),i[2]=i[2]||0;break;case Si.GLOBE:s=!1,r=null;break;default:s=!1}return{geospatialOrigin:r,shaderCoordinateOrigin:i,offsetMode:s}}function i$(t,e,n){const{viewMatrixUncentered:i,projectionMatrix:r}=t;let{viewMatrix:s,viewProjectionMatrix:a}=t,o=RT,l=RT,c=t.cameraPosition;const{geospatialOrigin:u,shaderCoordinateOrigin:f,offsetMode:d}=MR(t,e,n);return d&&(l=t.projectPosition(u||f),c=[c[0]-l[0],c[1]-l[1],c[2]-l[2]],l[3]=1,o=ku([],l,a),s=i||s,a=ba([],r,s),a=ba([],a,e$)),{viewMatrix:s,viewProjectionMatrix:a,projectionCenter:o,originCommon:l,cameraPosCommon:c,shaderCoordinateOrigin:f,geospatialOrigin:u}}function r$({viewport:t,devicePixelRatio:e=1,modelMatrix:n=null,coordinateSystem:i=Ze.DEFAULT,coordinateOrigin:r=RR,autoWrapLongitude:s=!1}){i===Ze.DEFAULT&&(i=t.isGeospatial?Ze.LNGLAT:Ze.CARTESIAN);const a=n$({viewport:t,devicePixelRatio:e,coordinateSystem:i,coordinateOrigin:r});return a.wrapLongitude=s,a.modelMatrix=n||CR,a}function s$({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:i}){const{projectionCenter:r,viewProjectionMatrix:s,originCommon:a,cameraPosCommon:o,shaderCoordinateOrigin:l,geospatialOrigin:c}=i$(t,n,i),u=t.getDistanceScales(),f=[t.width*e,t.height*e],d=ku([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,p={coordinateSystem:n,projectionMode:t.projectionMode,coordinateOrigin:l,commonOrigin:a.slice(0,3),center:r,pseudoMeters:!!t._pseudoMeters,viewportSize:f,devicePixelRatio:e,focalDistance:d,commonUnitsPerMeter:u.unitsPerMeter,commonUnitsPerWorldUnit:u.unitsPerMeter,commonUnitsPerWorldUnit2:t$,scale:t.scale,wrapLongitude:!1,viewProjectionMatrix:s,modelMatrix:CR,cameraPosition:o};if(c){const m=t.getDistanceScales(c);switch(n){case Ze.METER_OFFSETS:p.commonUnitsPerWorldUnit=m.unitsPerMeter,p.commonUnitsPerWorldUnit2=m.unitsPerMeter2;break;case Ze.LNGLAT:case Ze.LNGLAT_OFFSETS:t._pseudoMeters||(p.commonUnitsPerMeter=m.unitsPerMeter),p.commonUnitsPerWorldUnit=m.unitsPerDegree,p.commonUnitsPerWorldUnit2=m.unitsPerDegree2;break;case Ze.CARTESIAN:p.commonUnitsPerWorldUnit=[1,1,m.unitsPerMeter[2]],p.commonUnitsPerWorldUnit2=[0,0,m.unitsPerMeter2[2]];break}}return p}const a$=Object.keys(Ze).map(t=>`const COORDINATE_SYSTEM_${t}: i32 = ${Ze[t]};`).join(""),o$=Object.keys(Si).map(t=>`const PROJECTION_MODE_${t}: i32 = ${Si[t]};`).join(""),l$=Object.keys(Fs).map(t=>`const UNIT_${t.toUpperCase()}: i32 = ${Fs[t]};`).join(""),c$=`${a$}
${o$}
${l$}

const TILE_SIZE: f32 = 512.0;
const PI: f32 = 3.1415926536;
const WORLD_SCALE: f32 = TILE_SIZE / (PI * 2.0);
const ZERO_64_LOW: vec3<f32> = vec3<f32>(0.0, 0.0, 0.0);
const EARTH_RADIUS: f32 = 6370972.0; // meters
const GLOBE_RADIUS: f32 = 256.0;

// -----------------------------------------------------------------------------
// Uniform block (converted from GLSL uniform block)
// -----------------------------------------------------------------------------
struct ProjectUniforms {
  wrapLongitude: i32,
  coordinateSystem: i32,
  commonUnitsPerMeter: vec3<f32>,
  projectionMode: i32,
  scale: f32,
  commonUnitsPerWorldUnit: vec3<f32>,
  commonUnitsPerWorldUnit2: vec3<f32>,
  center: vec4<f32>,
  modelMatrix: mat4x4<f32>,
  viewProjectionMatrix: mat4x4<f32>,
  viewportSize: vec2<f32>,
  devicePixelRatio: f32,
  focalDistance: f32,
  cameraPosition: vec3<f32>,
  coordinateOrigin: vec3<f32>,
  commonOrigin: vec3<f32>,
  pseudoMeters: i32,
};

@group(0) @binding(0)
var<uniform> project: ProjectUniforms;

// -----------------------------------------------------------------------------
// Geometry data
// (In your GLSL code, "geometry" was assumed to be available globally. In WGSL,
// you might supply this via vertex attributes or a uniform. Here we define a
// uniform struct for demonstration.)
// -----------------------------------------------------------------------------

// Structure to carry additional geometry data used by deck.gl filters.
struct Geometry {
  worldPosition: vec3<f32>,
  worldPositionAlt: vec3<f32>,
  position: vec4<f32>,
  normal: vec3<f32>,
  uv: vec2<f32>,
  pickingColor: vec3<f32>,
};

// @group(0) @binding(1)
var<private> geometry: Geometry;
`,u$=`${c$}

// -----------------------------------------------------------------------------
// Functions
// -----------------------------------------------------------------------------

// Returns an adjustment factor for commonUnitsPerMeter
fn _project_size_at_latitude(lat: f32) -> f32 {
  let y = clamp(lat, -89.9, 89.9);
  return 1.0 / cos(radians(y));
}

// Overloaded version: scales a value in meters at a given latitude.
fn _project_size_at_latitude_m(meters: f32, lat: f32) -> f32 {
  return meters * project.commonUnitsPerMeter.z * _project_size_at_latitude(lat);
}

// Computes a non-linear scale factor based on geometry.
// (Note: This function relies on "geometry" being provided.)
fn project_size() -> f32 {
  if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR &&
      project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
      project.pseudoMeters == 0) {
    if (geometry.position.w == 0.0) {
      return _project_size_at_latitude(geometry.worldPosition.y);
    }
    let y: f32 = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
    let y2 = y * y;
    let y4 = y2 * y2;
    let y6 = y4 * y2;
    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
  }
  return 1.0;
}

// Overloads to scale offsets (meters to world units)
fn project_size_float(meters: f32) -> f32 {
  return meters * project.commonUnitsPerMeter.z * project_size();
}

fn project_size_vec2(meters: vec2<f32>) -> vec2<f32> {
  return meters * project.commonUnitsPerMeter.xy * project_size();
}

fn project_size_vec3(meters: vec3<f32>) -> vec3<f32> {
  return meters * project.commonUnitsPerMeter * project_size();
}

fn project_size_vec4(meters: vec4<f32>) -> vec4<f32> {
  return vec4<f32>(meters.xyz * project.commonUnitsPerMeter, meters.w);
}

// Returns a rotation matrix aligning the zaxis with the given up vector.
fn project_get_orientation_matrix(up: vec3<f32>) -> mat3x3<f32> {
  let uz = normalize(up);
  let ux = select(
    vec3<f32>(1.0, 0.0, 0.0),
    normalize(vec3<f32>(uz.y, -uz.x, 0.0)),
    abs(uz.z) == 1.0
  );
  let uy = cross(uz, ux);
  return mat3x3<f32>(ux, uy, uz);
}

// Since WGSL does not support "out" parameters, we return a struct.
struct RotationResult {
  needsRotation: bool,
  transform: mat3x3<f32>,
};

fn project_needs_rotation(commonPosition: vec3<f32>) -> RotationResult {
  if (project.projectionMode == PROJECTION_MODE_GLOBE) {
    return RotationResult(true, project_get_orientation_matrix(commonPosition));
  } else {
    return RotationResult(false, mat3x3<f32>());  // identity alternative if needed
  };
}

// Projects a normal vector from the current coordinate system to world space.
fn project_normal(vector: vec3<f32>) -> vec3<f32> {
  let normal_modelspace = project.modelMatrix * vec4<f32>(vector, 0.0);
  var n = normalize(normal_modelspace.xyz * project.commonUnitsPerMeter);
  let rotResult = project_needs_rotation(geometry.position.xyz);
  if (rotResult.needsRotation) {
    n = rotResult.transform * n;
  }
  return n;
}

// Applies a scale offset based on y-offset (dy)
fn project_offset_(offset: vec4<f32>) -> vec4<f32> {
  let dy: f32 = offset.y;
  let commonUnitsPerWorldUnit = project.commonUnitsPerWorldUnit + project.commonUnitsPerWorldUnit2 * dy;
  return vec4<f32>(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}

// Projects lng/lat coordinates to a unit tile [0,1]
fn project_mercator_(lnglat: vec2<f32>) -> vec2<f32> {
  var x = lnglat.x;
  if (project.wrapLongitude != 0) {
    x = ((x + 180.0) % 360.0) - 180.0;
  }
  let y = clamp(lnglat.y, -89.9, 89.9);
  return vec2<f32>(
    radians(x) + PI,
    PI + log(tan(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

// Projects lng/lat/z coordinates for a globe projection.
fn project_globe_(lnglatz: vec3<f32>) -> vec3<f32> {
  let lambda = radians(lnglatz.x);
  let phi = radians(lnglatz.y);
  let cosPhi = cos(phi);
  let D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;
  return vec3<f32>(
    sin(lambda) * cosPhi,
    -cos(lambda) * cosPhi,
    sin(phi)
  ) * D;
}

// Projects positions (with an optional 64-bit low part) from the input
// coordinate system to the common space.
fn project_position_vec4_f64(position: vec4<f32>, position64Low: vec3<f32>) -> vec4<f32> {
  var position_world = project.modelMatrix * position;

  // Work around for a Mac+NVIDIA bug:
  if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR) {
    if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4<f32>(
        project_mercator_(position_world.xy),
        _project_size_at_latitude_m(position_world.z, position_world.y),
        position_world.w
      );
    }
    if (project.coordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
      position_world = vec4f(position_world.xyz + project.coordinateOrigin, position_world.w);
    }
  }
  if (project.projectionMode == PROJECTION_MODE_GLOBE) {
    if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4<f32>(
        project_globe_(position_world.xyz),
        position_world.w
      );
    }
  }
  if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
    if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      if (abs(position_world.y - project.coordinateOrigin.y) > 0.25) {
        return vec4<f32>(
          project_mercator_(position_world.xy) - project.commonOrigin.xy,
          project_size_float(position_world.z),
          position_world.w
        );
      }
    }
  }
  if (project.projectionMode == PROJECTION_MODE_IDENTITY ||
      (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
       (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
        project.coordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
    position_world = vec4f(position_world.xyz - project.coordinateOrigin, position_world.w);
  }

  return project_offset_(position_world) +
         project_offset_(project.modelMatrix * vec4<f32>(position64Low, 0.0));
}

// Overloaded versions for different input types.
fn project_position_vec4_f32(position: vec4<f32>) -> vec4<f32> {
  return project_position_vec4_f64(position, ZERO_64_LOW);
}

fn project_position_vec3_f64(position: vec3<f32>, position64Low: vec3<f32>) -> vec3<f32> {
  let projected_position = project_position_vec4_f64(vec4<f32>(position, 1.0), position64Low);
  return projected_position.xyz;
}

fn project_position_vec3_f32(position: vec3<f32>) -> vec3<f32> {
  let projected_position = project_position_vec4_f64(vec4<f32>(position, 1.0), ZERO_64_LOW);
  return projected_position.xyz;
}

fn project_position_vec2_f32(position: vec2<f32>) -> vec2<f32> {
  let projected_position = project_position_vec4_f64(vec4<f32>(position, 0.0, 1.0), ZERO_64_LOW);
  return projected_position.xy;
}

// Transforms a common space position to clip space.
fn project_common_position_to_clipspace_with_projection(position: vec4<f32>, viewProjectionMatrix: mat4x4<f32>, center: vec4<f32>) -> vec4<f32> {
  return viewProjectionMatrix * position + center;
}

// Uses the project viewProjectionMatrix and center.
fn project_common_position_to_clipspace(position: vec4<f32>) -> vec4<f32> {
  return project_common_position_to_clipspace_with_projection(position, project.viewProjectionMatrix, project.center);
}

// Returns a clip space offset corresponding to a given number of screen pixels.
fn project_pixel_size_to_clipspace(pixels: vec2<f32>) -> vec2<f32> {
  let offset = pixels / project.viewportSize * project.devicePixelRatio * 2.0;
  return offset * project.focalDistance;
}

fn project_meter_size_to_pixel(meters: f32) -> f32 {
  return project_size_float(meters) * project.scale;
}

fn project_unit_size_to_pixel(size: f32, unit: i32) -> f32 {
  if (unit == UNIT_METERS) {
    return project_meter_size_to_pixel(size);
  } else if (unit == UNIT_COMMON) {
    return size * project.scale;
  }
  // UNIT_PIXELS: no scaling applied.
  return size;
}

fn project_pixel_size_float(pixels: f32) -> f32 {
  return pixels / project.scale;
}

fn project_pixel_size_vec2(pixels: vec2<f32>) -> vec2<f32> {
  return pixels / project.scale;
}
`,f$=Object.keys(Ze).map(t=>`const int COORDINATE_SYSTEM_${t} = ${Ze[t]};`).join(""),d$=Object.keys(Si).map(t=>`const int PROJECTION_MODE_${t} = ${Si[t]};`).join(""),h$=Object.keys(Fs).map(t=>`const int UNIT_${t.toUpperCase()} = ${Fs[t]};`).join(""),p$=`${f$}
${d$}
${h$}
uniform projectUniforms {
bool wrapLongitude;
int coordinateSystem;
vec3 commonUnitsPerMeter;
int projectionMode;
float scale;
vec3 commonUnitsPerWorldUnit;
vec3 commonUnitsPerWorldUnit2;
vec4 center;
mat4 modelMatrix;
mat4 viewProjectionMatrix;
vec2 viewportSize;
float devicePixelRatio;
float focalDistance;
vec3 cameraPosition;
vec3 coordinateOrigin;
vec3 commonOrigin;
bool pseudoMeters;
} project;
const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0;
const float GLOBE_RADIUS = 256.0;
float project_size_at_latitude(float lat) {
float y = clamp(lat, -89.9, 89.9);
return 1.0 / cos(radians(y));
}
float project_size() {
if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR &&
project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
project.pseudoMeters == false) {
if (geometry.position.w == 0.0) {
return project_size_at_latitude(geometry.worldPosition.y);
}
float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
float y2 = y * y;
float y4 = y2 * y2;
float y6 = y4 * y2;
return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
}
return 1.0;
}
float project_size_at_latitude(float meters, float lat) {
return meters * project.commonUnitsPerMeter.z * project_size_at_latitude(lat);
}
float project_size(float meters) {
return meters * project.commonUnitsPerMeter.z * project_size();
}
vec2 project_size(vec2 meters) {
return meters * project.commonUnitsPerMeter.xy * project_size();
}
vec3 project_size(vec3 meters) {
return meters * project.commonUnitsPerMeter * project_size();
}
vec4 project_size(vec4 meters) {
return vec4(meters.xyz * project.commonUnitsPerMeter, meters.w);
}
mat3 project_get_orientation_matrix(vec3 up) {
vec3 uz = normalize(up);
vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
vec3 uy = cross(uz, ux);
return mat3(ux, uy, uz);
}
bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
if (project.projectionMode == PROJECTION_MODE_GLOBE) {
transform = project_get_orientation_matrix(commonPosition);
return true;
}
return false;
}
vec3 project_normal(vec3 vector) {
vec4 normal_modelspace = project.modelMatrix * vec4(vector, 0.0);
vec3 n = normalize(normal_modelspace.xyz * project.commonUnitsPerMeter);
mat3 rotation;
if (project_needs_rotation(geometry.position.xyz, rotation)) {
n = rotation * n;
}
return n;
}
vec4 project_offset_(vec4 offset) {
float dy = offset.y;
vec3 commonUnitsPerWorldUnit = project.commonUnitsPerWorldUnit + project.commonUnitsPerWorldUnit2 * dy;
return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}
vec2 project_mercator_(vec2 lnglat) {
float x = lnglat.x;
if (project.wrapLongitude) {
x = mod(x + 180., 360.0) - 180.;
}
float y = clamp(lnglat.y, -89.9, 89.9);
return vec2(
radians(x) + PI,
PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
) * WORLD_SCALE;
}
vec3 project_globe_(vec3 lnglatz) {
float lambda = radians(lnglatz.x);
float phi = radians(lnglatz.y);
float cosPhi = cos(phi);
float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;
return vec3(
sin(lambda) * cosPhi,
-cos(lambda) * cosPhi,
sin(phi)
) * D;
}
vec4 project_position(vec4 position, vec3 position64Low) {
vec4 position_world = project.modelMatrix * position;
if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR) {
if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
return vec4(
project_mercator_(position_world.xy),
project_size_at_latitude(position_world.z, position_world.y),
position_world.w
);
}
if (project.coordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
position_world.xyz += project.coordinateOrigin;
}
}
if (project.projectionMode == PROJECTION_MODE_GLOBE) {
if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
return vec4(
project_globe_(position_world.xyz),
position_world.w
);
}
}
if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
if (abs(position_world.y - project.coordinateOrigin.y) > 0.25) {
return vec4(
project_mercator_(position_world.xy) - project.commonOrigin.xy,
project_size(position_world.z),
position_world.w
);
}
}
}
if (project.projectionMode == PROJECTION_MODE_IDENTITY ||
(project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
(project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
project.coordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
position_world.xyz -= project.coordinateOrigin;
}
return project_offset_(position_world) + project_offset_(project.modelMatrix * vec4(position64Low, 0.0));
}
vec4 project_position(vec4 position) {
return project_position(position, ZERO_64_LOW);
}
vec3 project_position(vec3 position, vec3 position64Low) {
vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
return projected_position.xyz;
}
vec3 project_position(vec3 position) {
vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
return projected_position.xyz;
}
vec2 project_position(vec2 position) {
vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
return projected_position.xy;
}
vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
return viewProjectionMatrix * position + center;
}
vec4 project_common_position_to_clipspace(vec4 position) {
return project_common_position_to_clipspace(position, project.viewProjectionMatrix, project.center);
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
vec2 offset = pixels / project.viewportSize * project.devicePixelRatio * 2.0;
return offset * project.focalDistance;
}
float project_size_to_pixel(float meters) {
return project_size(meters) * project.scale;
}
float project_size_to_pixel(float size, int unit) {
if (unit == UNIT_METERS) return project_size_to_pixel(size);
if (unit == UNIT_COMMON) return size * project.scale;
return size;
}
float project_pixel_size(float pixels) {
return pixels / project.scale;
}
vec2 project_pixel_size(vec2 pixels) {
return pixels / project.scale;
}
`,g$={};function m$(t=g$){return"viewport"in t?r$(t):{}}const lv={name:"project",dependencies:[W9,vR],source:u$,vs:p$,getUniforms:m$,uniformTypes:{wrapLongitude:"f32",coordinateSystem:"i32",commonUnitsPerMeter:"vec3<f32>",projectionMode:"i32",scale:"f32",commonUnitsPerWorldUnit:"vec3<f32>",commonUnitsPerWorldUnit2:"vec3<f32>",center:"vec4<f32>",modelMatrix:"mat4x4<f32>",viewProjectionMatrix:"mat4x4<f32>",viewportSize:"vec2<f32>",devicePixelRatio:"f32",focalDistance:"f32",cameraPosition:"vec3<f32>",coordinateOrigin:"vec3<f32>",commonOrigin:"vec3<f32>",pseudoMeters:"f32"}},y$=`// Define a structure to hold both the clip-space position and the common position.
struct ProjectResult {
  clipPosition: vec4<f32>,
  commonPosition: vec4<f32>,
};

// This function mimics the GLSL version with the 'out' parameter by returning both values.
fn project_position_to_clipspace_and_commonspace(
    position: vec3<f32>,
    position64Low: vec3<f32>,
    offset: vec3<f32>
) -> ProjectResult {
  // Compute the projected position.
  let projectedPosition: vec3<f32> = project_position_vec3_f64(position, position64Low);

  // Start with the provided offset.
  var finalOffset: vec3<f32> = offset;

  // Get whether a rotation is needed and the rotation matrix.
  let rotationResult = project_needs_rotation(projectedPosition);

  // If rotation is needed, update the offset.
  if (rotationResult.needsRotation) {
    finalOffset = rotationResult.transform * offset;
  }

  // Compute the common position.
  let commonPosition: vec4<f32> = vec4<f32>(projectedPosition + finalOffset, 1.0);

  // Convert to clip-space.
  let clipPosition: vec4<f32> = project_common_position_to_clipspace(commonPosition);

  return ProjectResult(clipPosition, commonPosition);
}

// A convenience overload that returns only the clip-space position.
fn project_position_to_clipspace(
    position: vec3<f32>,
    position64Low: vec3<f32>,
    offset: vec3<f32>
) -> vec4<f32> {
  return project_position_to_clipspace_and_commonspace(position, position64Low, offset).clipPosition;
}
`,_$=`vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,cv={name:"project32",dependencies:[lv],source:y$,vs:_$};function b$(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Ho(t,e){const n=ku([],e,t);return N9(n,n,1/n[3]),n}function MT(t,e){const n=t%e;return n<0?e+n:n}function N_(t,e,n){return t<e?e:t>n?n:t}function v$(t){return Math.log(t)*Math.LOG2E}const uv=Math.log2||v$;function Yr(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const Hi=Math.PI,OR=Hi/4,Mi=Hi/180,B_=180/Hi,cl=512,vh=4003e4,kf=85.051129,T$=1.5;function x$(t){return uv(t)}function Th(t){const[e,n]=t;Yr(Number.isFinite(e)),Yr(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");const i=e*Mi,r=n*Mi,s=cl*(i+Hi)/(2*Hi),a=cl*(Hi+Math.log(Math.tan(OR+r*.5)))/(2*Hi);return[s,a]}function ul(t){const[e,n]=t,i=e/cl*(2*Hi)-Hi,r=2*(Math.atan(Math.exp(n/cl*(2*Hi)-Hi))-OR);return[i*B_,r*B_]}function S$(t){const{latitude:e}=t;Yr(Number.isFinite(e));const n=Math.cos(e*Mi);return x$(vh*n)-9}function Nm(t){const e=Math.cos(t*Mi);return cl/vh/e}function L_(t){const{latitude:e,longitude:n,highPrecision:i=!1}=t;Yr(Number.isFinite(e)&&Number.isFinite(n));const r=cl,s=Math.cos(e*Mi),a=r/360,o=a/s,l=r/vh/s,c={unitsPerMeter:[l,l,l],metersPerUnit:[1/l,1/l,1/l],unitsPerDegree:[a,o,l],degreesPerUnit:[1/a,1/o,1/l]};if(i){const u=Mi*Math.tan(e*Mi)/s,f=a*u/2,d=r/vh*u,p=d/o*l;c.unitsPerDegree2=[0,f,d],c.unitsPerMeter2=[p,0,p]}return c}function IR(t,e){const[n,i,r]=t,[s,a,o]=e,{unitsPerMeter:l,unitsPerMeter2:c}=L_({longitude:n,latitude:i,highPrecision:!0}),u=Th(t);u[0]+=s*(l[0]+c[0]*a),u[1]+=a*(l[1]+c[1]*a);const f=ul(u),d=(r||0)+(o||0);return Number.isFinite(r)||Number.isFinite(o)?[f[0],f[1],d]:f}function w$(t){const{height:e,pitch:n,bearing:i,altitude:r,scale:s,center:a}=t,o=b$();_h(o,o,[0,0,-r]),mR(o,o,-n*Mi),yR(o,o,i*Mi);const l=s/e;return ov(o,o,[l,l,l]),a&&_h(o,o,f9([],a)),o}function A$(t){const{width:e,height:n,altitude:i,pitch:r=0,offset:s,center:a,scale:o,nearZMultiplier:l=1,farZMultiplier:c=1}=t;let{fovy:u=xh(T$)}=t;i!==void 0&&(u=xh(i));const f=u*Mi,d=r*Mi,p=PR(u);let m=p;a&&(m+=a[2]*o/Math.cos(d)/n);const S=f*(.5+(s?s[1]:0)/n),v=Math.sin(S)*m/Math.sin(N_(Math.PI/2-d-S,.01,Math.PI-.01)),y=Math.sin(d)*v+m,_=m*10,T=Math.min(y*c,_);return{fov:f,aspect:e/n,focalDistance:p,near:l,far:T}}function xh(t){return 2*Math.atan(.5/t)*B_}function PR(t){return .5/Math.tan(.5*t*Mi)}function DR(t,e){const[n,i,r=0]=t;return Yr(Number.isFinite(n)&&Number.isFinite(i)&&Number.isFinite(r)),Ho(e,[n,i,r,1])}function fv(t,e,n=0){const[i,r,s]=t;if(Yr(Number.isFinite(i)&&Number.isFinite(r),"invalid pixel coordinate"),Number.isFinite(s))return Ho(e,[i,r,s,1]);const a=Ho(e,[i,r,0,1]),o=Ho(e,[i,r,1,1]),l=a[2],c=o[2],u=l===c?0:((n||0)-l)/(c-l);return hR([],a,o,u)}function E$(t){const{width:e,height:n,bounds:i,minExtent:r=0,maxZoom:s=24,offset:a=[0,0]}=t,[[o,l],[c,u]]=i,f=C$(t.padding),d=Th([o,N_(u,-kf,kf)]),p=Th([c,N_(l,-kf,kf)]),m=[Math.max(Math.abs(p[0]-d[0]),r),Math.max(Math.abs(p[1]-d[1]),r)],S=[e-f.left-f.right-Math.abs(a[0])*2,n-f.top-f.bottom-Math.abs(a[1])*2];Yr(S[0]>0&&S[1]>0);const v=S[0]/m[0],y=S[1]/m[1],_=(f.right-f.left)/2/v,T=(f.top-f.bottom)/2/y,b=[(p[0]+d[0])/2+_,(p[1]+d[1])/2+T],M=ul(b),C=Math.min(s,uv(Math.abs(Math.min(v,y))));return Yr(Number.isFinite(C)),{longitude:M[0],latitude:M[1],zoom:C}}function C$(t=0){return typeof t=="number"?{top:t,bottom:t,left:t,right:t}:(Yr(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}const OT=Math.PI/180;function R$(t,e=0){const{width:n,height:i,unproject:r}=t,s={targetZ:e},a=r([0,i],s),o=r([n,i],s);let l,c;const u=t.fovy?.5*t.fovy*OT:Math.atan(.5/t.altitude),f=(90-t.pitch)*OT;return u>f-.01?(l=IT(t,0,e),c=IT(t,n,e)):(l=r([0,0],s),c=r([n,0],s)),[a,o,c,l]}function IT(t,e,n){const{pixelUnprojectionMatrix:i}=t,r=Ho(i,[e,0,1,1]),s=Ho(i,[e,t.height,1,1]),o=(n*t.distanceScales.unitsPerMeter[2]-r[2])/(s[2]-r[2]),l=hR([],r,s,o),c=ul(l);return c.push(n),c}const PT=512;function M$(t){const{width:e,height:n,pitch:i=0}=t;let{longitude:r,latitude:s,zoom:a,bearing:o=0}=t;(r<-180||r>180)&&(r=MT(r+180,360)-180),(o<-180||o>180)&&(o=MT(o+180,360)-180);const l=uv(n/PT);if(a<=l)a=l,s=0;else{const c=n/2/Math.pow(2,a),u=ul([0,c])[1];if(s<u)s=u;else{const f=ul([0,PT-c])[1];s>f&&(s=f)}}return{width:e,height:n,longitude:r,latitude:s,zoom:a,pitch:i,bearing:o}}const kR=`
uniform shadowUniforms {
  bool drawShadowMap;
  bool useShadowMap;
  vec4 color;
  highp int lightId;
  float lightCount;
  mat4 viewProjectionMatrix0;
  mat4 viewProjectionMatrix1;
  vec4 projectCenter0;
  vec4 projectCenter1;
} shadow;
`,O$=`
const int max_lights = 2;

out vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  mat4 viewProjectionMatrices[max_lights];
  viewProjectionMatrices[0] = shadow.viewProjectionMatrix0;
  viewProjectionMatrices[1] = shadow.viewProjectionMatrix1;
  vec4 projectCenters[max_lights];
  projectCenters[0] = shadow.projectCenter0;
  projectCenters[1] = shadow.projectCenter1;

  if (shadow.drawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, viewProjectionMatrices[shadow.lightId], projectCenters[shadow.lightId]);
  }
  if (shadow.useShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow.lightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, viewProjectionMatrices[i], projectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,I$=`
${kR}
${O$}
`,P$=`
const int max_lights = 2;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;

in vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow.drawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow.useShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow.lightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow.color.a / shadow.lightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow.color.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,D$=`
${kR}
${P$}
`,k$=Nu(F$),N$=Nu(z$),B$=[0,0,0,1],L$=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function U$(t,e){const[n,i,r]=t,s=fv([n,i,r],e);return Number.isFinite(r)?s:[s[0],s[1],0]}function F$({viewport:t,center:e}){return new dr(t.viewProjectionMatrix).invert().transform(e)}function z$({viewport:t,shadowMatrices:e}){const n=[],i=t.pixelUnprojectionMatrix,r=t.isGeospatial?void 0:1,s=[[0,0,r],[t.width,0,r],[0,t.height,r],[t.width,t.height,r],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(a=>U$(a,i));for(const a of e){const o=a.clone().translate(new fr(t.center).negate()),l=s.map(u=>o.transform(u)),c=new dr().ortho({left:Math.min(...l.map(u=>u[0])),right:Math.max(...l.map(u=>u[0])),bottom:Math.min(...l.map(u=>u[1])),top:Math.max(...l.map(u=>u[1])),near:Math.min(...l.map(u=>-u[2])),far:Math.max(...l.map(u=>-u[2]))});n.push(c.multiplyRight(a))}return n}function V$(t){const{shadowEnabled:e=!0,project:n}=t;if(!e||!n||!t.shadowMatrices||!t.shadowMatrices.length)return{drawShadowMap:!1,useShadowMap:!1,shadow_uShadowMap0:t.dummyShadowMap,shadow_uShadowMap1:t.dummyShadowMap};const i=lv.getUniforms(n),r=k$({viewport:n.viewport,center:i.center}),s=[],a=N$({shadowMatrices:t.shadowMatrices,viewport:n.viewport}).slice();for(let l=0;l<t.shadowMatrices.length;l++){const c=a[l],u=c.clone().translate(new fr(n.viewport.center).negate());i.coordinateSystem===Ze.LNGLAT&&i.projectionMode===Si.WEB_MERCATOR?(a[l]=u,s[l]=r):(a[l]=c.clone().multiplyRight(L$),s[l]=u.transform(r))}const o={drawShadowMap:!!t.drawToShadowMap,useShadowMap:t.shadowMaps?t.shadowMaps.length>0:!1,color:t.shadowColor||B$,lightId:t.shadowLightId||0,lightCount:t.shadowMatrices.length,shadow_uShadowMap0:t.dummyShadowMap,shadow_uShadowMap1:t.dummyShadowMap};for(let l=0;l<a.length;l++)o[`viewProjectionMatrix${l}`]=a[l],o[`projectCenter${l}`]=s[l];for(let l=0;l<2;l++)o[`shadow_uShadowMap${l}`]=t.shadowMaps&&t.shadowMaps[l]||t.dummyShadowMap;return o}const DT={name:"shadow",dependencies:[lv],vs:I$,fs:D$,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:V$,uniformTypes:{drawShadowMap:"f32",useShadowMap:"f32",color:"vec4<f32>",lightId:"i32",lightCount:"f32",viewProjectionMatrix0:"mat4x4<f32>",viewProjectionMatrix1:"mat4x4<f32>",projectCenter0:"vec4<f32>",projectCenter1:"vec4<f32>"}},dv={...fT,defaultUniforms:{...fT.defaultUniforms,useFloatColors:!1},inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}}},$$=[vR],j$=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"],H$=[];function W$(t){const e=sh.getDefaultShaderAssembler();for(const i of $$)e.addDefaultModule(i);e._hookFunctions.length=0;const n=t==="glsl"?j$:H$;for(const i of n)e.addShaderHook(i);return e}const Y$=[255,255,255],X$=1;let q$=0;class K${constructor(e={}){this.type="ambient";const{color:n=Y$}=e,{intensity:i=X$}=e;this.id=e.id||`ambient-${q$++}`,this.color=n,this.intensity=i}}const Z$=[255,255,255],G$=1,Q$=[0,0,-1];let J$=0;class kT{constructor(e={}){this.type="directional";const{color:n=Z$}=e,{intensity:i=G$}=e,{direction:r=Q$}=e,{_shadow:s=!1}=e;this.id=e.id||`directional-${J$++}`,this.color=n,this.intensity=i,this.type="directional",this.direction=new fr(r).normalize().toArray(),this.shadow=s}getProjectedLight(e){return this}}class e7{constructor(e,n={id:"pass"}){const{id:i}=n;this.id=i,this.device=e,this.props={...n}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class hv extends e7{constructor(){super(...arguments),this._lastRenderIndex=-1}render(e){const[n,i]=this.device.canvasContext.getDrawingBufferSize(),r=e.clearCanvas??!0,s=e.clearColor??(r?[0,0,0,0]:!1),a=r?1:!1,o=r?0:!1,l=e.colorMask??15,c={viewport:[0,0,n,i]};e.colorMask&&(c.colorMask=l),e.scissorRect&&(c.scissorRect=e.scissorRect);const u=this.device.beginRenderPass({framebuffer:e.target,parameters:c,clearColor:s,clearDepth:a,clearStencil:o});try{return this._drawLayers(u,e)}finally{u.end(),this.device.submit()}}_drawLayers(e,n){const{target:i,shaderModuleProps:r,viewports:s,views:a,onViewportActive:o,clearStack:l=!0}=n;n.pass=n.pass||"unknown",l&&(this._lastRenderIndex=-1);const c=[];for(const u of s){const f=a&&a[u.id];o==null||o(u);const d=this._getDrawLayerParams(u,n),p=u.subViewports||[u];for(const m of p){const S=this._drawLayersInViewport(e,{target:i,shaderModuleProps:r,viewport:m,view:f,pass:n.pass,layers:n.layers},d);c.push(S)}}return c}_getDrawLayerParams(e,{layers:n,pass:i,isPicking:r=!1,layerFilter:s,cullRect:a,effects:o,shaderModuleProps:l},c=!1){var m;const u=[],f=NR(this._lastRenderIndex+1),d={layer:n[0],viewport:e,isPicking:r,renderPass:i,cullRect:a},p={};for(let S=0;S<n.length;S++){const v=n[S],y=this._shouldDrawLayer(v,d,s,p),_={shouldDrawLayer:y};y&&!c&&(_.shouldDrawLayer=!0,_.layerRenderIndex=f(v,y),_.shaderModuleProps=this._getShaderModuleProps(v,o,i,l),_.layerParameters={...(m=v.context.deck)==null?void 0:m.props.parameters,...this.getLayerParameters(v,S,e)}),u[S]=_}return u}_drawLayersInViewport(e,{layers:n,shaderModuleProps:i,pass:r,target:s,viewport:a,view:o},l){const c=t7(this.device,{shaderModuleProps:i,target:s,viewport:a});if(o){const{clear:f,clearColor:d,clearDepth:p,clearStencil:m}=o.props;if(f){let S=[0,0,0,0],v=1,y=0;Array.isArray(d)?S=[...d.slice(0,3),d[3]||255].map(T=>T/255):d===!1&&(S=!1),p!==void 0&&(v=p),m!==void 0&&(y=m),this.device.beginRenderPass({framebuffer:s,parameters:{viewport:c,scissorRect:c},clearColor:S,clearDepth:v,clearStencil:y}).end()}}const u={totalCount:n.length,visibleCount:0,compositeCount:0,pickableCount:0};e.setParameters({viewport:c});for(let f=0;f<n.length;f++){const d=n[f],p=l[f],{shouldDrawLayer:m}=p;if(m&&d.props.pickable&&u.pickableCount++,d.isComposite&&u.compositeCount++,d.isDrawable&&p.shouldDrawLayer){const{layerRenderIndex:S,shaderModuleProps:v,layerParameters:y}=p;u.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,S),v.project&&(v.project.viewport=a),d.context.renderPass=e;try{d._drawLayer({renderPass:e,shaderModuleProps:v,uniforms:{layerIndex:S},parameters:y})}catch(_){d.raiseError(_,`drawing ${d} to ${r}`)}}}return u}shouldDrawLayer(e){return!0}getShaderModuleProps(e,n,i){return null}getLayerParameters(e,n,i){return e.props.parameters}_shouldDrawLayer(e,n,i,r){if(!(e.props.visible&&this.shouldDrawLayer(e)))return!1;n.layer=e;let a=e.parent;for(;a;){if(!a.props.visible||!a.filterSubLayer(n))return!1;n.layer=a,a=a.parent}if(i){const o=n.layer.id;if(o in r||(r[o]=i(n)),!r[o])return!1}return e.activateViewport(n.viewport),!0}_getShaderModuleProps(e,n,i,r){var l,c;const s=this.device.canvasContext.cssToDeviceRatio(),a=((l=e.internalState)==null?void 0:l.propsInTransition)||e.props,o={layer:a,picking:{isActive:!1},project:{viewport:e.context.viewport,devicePixelRatio:s,modelMatrix:a.modelMatrix,coordinateSystem:a.coordinateSystem,coordinateOrigin:a.coordinateOrigin,autoWrapLongitude:e.wrapLongitude}};if(n)for(const u of n)NT(o,(c=u.getShaderModuleProps)==null?void 0:c.call(u,e,o));return NT(o,this.getShaderModuleProps(e,n,o),r)}}function NR(t=0,e={}){const n={},i=(r,s)=>{const a=r.props._offset,o=r.id,l=r.parent&&r.parent.id;let c;if(l&&!(l in e)&&i(r.parent,!1),l in n){const u=n[l]=n[l]||NR(e[l],e);c=u(r,s),n[o]=u}else Number.isFinite(a)?(c=a+(e[l]||0),n[o]=null):c=t;return s&&c>=t&&(t=c+1),e[o]=c,c};return i}function t7(t,{shaderModuleProps:e,target:n,viewport:i}){var l;const r=((l=e==null?void 0:e.project)==null?void 0:l.devicePixelRatio)??t.canvasContext.cssToDeviceRatio(),[,s]=t.canvasContext.getDrawingBufferSize(),a=n?n.height:s,o=i;return[o.x*r,a-(o.y+o.height)*r,o.width*r,o.height*r]}function NT(t,...e){for(const n of e)if(n)for(const i in n)t[i]?Object.assign(t[i],n[i]):t[i]=n[i];return t}class n7 extends hv{constructor(e,n){super(e,n);const i=e.createTexture({format:"rgba8unorm",width:1,height:1,sampler:{minFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}}),r=e.createTexture({format:"depth16unorm",width:1,height:1});this.fbo=e.createFramebuffer({id:"shadowmap",width:1,height:1,colorAttachments:[i],depthStencilAttachment:r})}delete(){this.fbo&&(this.fbo.destroy(),this.fbo=null)}getShadowMap(){return this.fbo.colorAttachments[0].texture}render(e){const n=this.fbo,i=this.device.canvasContext.cssToDeviceRatio(),r=e.viewports[0],s=r.width*i,a=r.height*i,o=[1,1,1,1];(s!==n.width||a!==n.height)&&n.resize({width:s,height:a}),super.render({...e,clearColor:o,target:n,pass:"shadow"})}getLayerParameters(e,n,i){return{...e.props.parameters,blend:!1,depthWriteEnabled:!0,depthCompare:"less-equal"}}shouldDrawLayer(e){return e.props.shadowEnabled!==!1}getShaderModuleProps(e,n,i){return{shadow:{project:i.project,drawToShadowMap:!0}}}}const i7={color:[255,255,255],intensity:1},BT=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],r7=[0,0,0,200/255];class BR{constructor(e={}){this.id="lighting-effect",this.shadowColor=r7,this.shadow=!1,this.directionalLights=[],this.pointLights=[],this.shadowPasses=[],this.dummyShadowMap=null,this.setProps(e)}setup(e){this.context=e;const{device:n,deck:i}=e;this.shadow&&!this.dummyShadowMap&&(this._createShadowPasses(n),i._addDefaultShaderModule(DT),this.dummyShadowMap=n.createTexture({width:1,height:1}))}setProps(e){this.ambientLight=void 0,this.directionalLights=[],this.pointLights=[];for(const n in e){const i=e[n];switch(i.type){case"ambient":this.ambientLight=i;break;case"directional":this.directionalLights.push(i);break;case"point":this.pointLights.push(i);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(n=>n.shadow),this.context&&this.setup(this.context),this.props=e}preRender({layers:e,layerFilter:n,viewports:i,onViewportActive:r,views:s}){if(this.shadow){this.shadowMatrices=this._calculateMatrices();for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:e,layerFilter:n,viewports:i,onViewportActive:r,views:s,shaderModuleProps:{shadow:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}}})}}getShaderModuleProps(e,n){const i=this.shadow?{project:n.project,shadowMaps:this.shadowPasses.map(a=>a.getShadowMap()),dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{},r={enabled:!0,ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(a=>a.getProjectedLight({layer:e})),pointLights:this.pointLights.map(a=>a.getProjectedLight({layer:e}))},s=e.props.material;return{shadow:i,lighting:r,phongMaterial:s,gouraudMaterial:s}}cleanup(e){for(const n of this.shadowPasses)n.delete();this.shadowPasses.length=0,this.dummyShadowMap&&(this.dummyShadowMap.destroy(),this.dummyShadowMap=null,e.deck._removeDefaultShaderModule(DT))}_calculateMatrices(){const e=[];for(const n of this.directionalLights){const i=new dr().lookAt({eye:new fr(n.direction).negate()});e.push(i)}return e}_createShadowPasses(e){for(let n=0;n<this.directionalLights.length;n++){const i=new n7(e);this.shadowPasses[n]=i}}_applyDefaultLights(){const{ambientLight:e,pointLights:n,directionalLights:i}=this;!e&&n.length===0&&i.length===0&&(this.ambientLight=new K$(i7),this.directionalLights.push(new kT(BT[0]),new kT(BT[1])))}}class s7{constructor(e={}){this._pool=[],this.opts={overAlloc:2,poolSize:100},this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,n,{size:i=1,type:r,padding:s=0,copy:a=!1,initialize:o=!1,maxCount:l}){const c=r||e&&e.constructor||Float32Array,u=n*i+s;if(ArrayBuffer.isView(e)){if(u<=e.length)return e;if(u*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new c(e.buffer,0,u)}let f=1/0;l&&(f=l*i+s);const d=this._allocate(c,u,o,f);return e&&a?d.set(e):o||d.fill(0,0,4),this._release(e),d}release(e){this._release(e)}_allocate(e,n,i,r){let s=Math.max(Math.ceil(n*this.opts.overAlloc),1);s>r&&(s=r);const a=this._pool,o=e.BYTES_PER_ELEMENT*s,l=a.findIndex(c=>c.byteLength>=o);if(l>=0){const c=new e(a.splice(l,1)[0],0,s);return i&&c.fill(0),c}return new e(s)}_release(e){if(!ArrayBuffer.isView(e))return;const n=this._pool,{buffer:i}=e,{byteLength:r}=i,s=n.findIndex(a=>a.byteLength>=r);s<0?n.push(i):(s>0||n.length<this.opts.poolSize)&&n.splice(s,0,i),n.length>this.opts.poolSize&&n.shift()}}const fl=new s7;function oc(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function a7(t){return[t[12],t[13],t[14]]}function o7(t){return{left:oo(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:oo(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:oo(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:oo(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:oo(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:oo(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}const LT=new fr;function oo(t,e,n,i){LT.set(t,e,n);const r=LT.len();return{distance:i/r,normal:new fr(-t/r,-e/r,-n/r)}}function l7(t){return t-Math.fround(t)}let ql;function Bm(t,e){const{size:n=1,startIndex:i=0}=e,r=e.endIndex!==void 0?e.endIndex:t.length,s=(r-i)/n;ql=fl.allocate(ql,s,{type:Float32Array,size:n*2});let a=i,o=0;for(;a<r;){for(let l=0;l<n;l++){const c=t[a++];ql[o+l]=c,ql[o+l+n]=l7(c)}o+=n*2}return ql.subarray(0,s*n*2)}function c7(t){let e=null,n=!1;for(const i of t)i&&(e?(n||(e=[[e[0][0],e[0][1]],[e[1][0],e[1][1]]],n=!0),e[0][0]=Math.min(e[0][0],i[0][0]),e[0][1]=Math.min(e[0][1],i[0][1]),e[1][0]=Math.max(e[1][0],i[1][0]),e[1][1]=Math.max(e[1][1],i[1][1])):e=i);return e}const u7=Math.PI/180,f7=oc(),UT=[0,0,0],d7={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function h7({width:t,height:e,orthographic:n,fovyRadians:i,focalDistance:r,padding:s,near:a,far:o}){const l=t/e,c=n?new dr().orthographic({fovy:i,aspect:l,focalDistance:r,near:a,far:o}):new dr().perspective({fovy:i,aspect:l,near:a,far:o});if(s){const{left:u=0,right:f=0,top:d=0,bottom:p=0}=s,m=_s((u+t-f)/2,0,t)-t/2,S=_s((d+e-p)/2,0,e)-e/2;c[8]-=m*2/t,c[9]+=S*2/e}return c}class Bu{constructor(e={}){this._frustumPlanes={},this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||d7,this.focalDistance=e.focalDistance||1,this.position=e.position||UT,this.modelMatrix=e.modelMatrix||null;const{longitude:n,latitude:i}=e;this.isGeospatial=Number.isFinite(i)&&Number.isFinite(n),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?Si.WEB_MERCATOR:Si.WEB_MERCATOR_AUTO_OFFSET:Si.IDENTITY}equals(e){return e instanceof Bu?this===e?!0:e.width===this.width&&e.height===this.height&&e.scale===this.scale&&ou(e.projectionMatrix,this.projectionMatrix)&&ou(e.viewMatrix,this.viewMatrix):!1}project(e,{topLeft:n=!0}={}){const i=this.projectPosition(e),r=DR(i,this.pixelProjectionMatrix),[s,a]=r,o=n?a:this.height-a;return e.length===2?[s,o]:[s,o,r[2]]}unproject(e,{topLeft:n=!0,targetZ:i}={}){const[r,s,a]=e,o=n?s:this.height-s,l=i&&i*this.distanceScales.unitsPerMeter[2],c=fv([r,o,a],this.pixelUnprojectionMatrix,l),[u,f,d]=this.unprojectPosition(c);return Number.isFinite(a)?[u,f,d]:Number.isFinite(i)?[u,f,i]:[u,f]}projectPosition(e){const[n,i]=this.projectFlat(e),r=(e[2]||0)*this.distanceScales.unitsPerMeter[2];return[n,i,r]}unprojectPosition(e){const[n,i]=this.unprojectFlat(e),r=(e[2]||0)*this.distanceScales.metersPerUnit[2];return[n,i,r]}projectFlat(e){if(this.isGeospatial){const n=Th(e);return n[1]=_s(n[1],-318,830),n}return e}unprojectFlat(e){return this.isGeospatial?ul(e):e}getBounds(e={}){const n={targetZ:e.z||0},i=this.unproject([0,0],n),r=this.unproject([this.width,0],n),s=this.unproject([0,this.height],n),a=this.unproject([this.width,this.height],n);return[Math.min(i[0],r[0],s[0],a[0]),Math.min(i[1],r[1],s[1],a[1]),Math.max(i[0],r[0],s[0],a[0]),Math.max(i[1],r[1],s[1],a[1])]}getDistanceScales(e){return e&&this.isGeospatial?L_({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:n,width:i=1,height:r=1}){return e<this.x+this.width&&this.x<e+i&&n<this.y+this.height&&this.y<n+r}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,o7(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(e,n){return null}_initProps(e){const n=e.longitude,i=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=S$({latitude:i})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||L_({latitude:i,longitude:n}));const r=Math.pow(2,this.zoom);this.scale=r;const{position:s,modelMatrix:a}=e;let o=UT;if(s&&(o=a?new dr(a).transformAsVector(s,[]):s),this.isGeospatial){const l=this.projectPosition([n,i,0]);this.center=new fr(o).scale(this.distanceScales.unitsPerMeter).add(l)}else this.center=this.projectPosition(o)}_initMatrices(e){const{viewMatrix:n=f7,projectionMatrix:i=null,orthographic:r=!1,fovyRadians:s,fovy:a=75,near:o=.1,far:l=1e3,padding:c=null,focalDistance:u=1}=e;this.viewMatrixUncentered=n,this.viewMatrix=new dr().multiplyRight(n).translate(new fr(this.center).negate()),this.projectionMatrix=i||h7({width:this.width,height:this.height,orthographic:r,fovyRadians:s||a*u7,focalDistance:u,padding:c,near:o,far:l});const f=oc();ba(f,f,this.projectionMatrix),ba(f,f,this.viewMatrix),this.viewProjectionMatrix=f,this.viewMatrixInverse=R_([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=a7(this.viewMatrixInverse);const d=oc(),p=oc();ov(d,d,[this.width/2,-this.height/2,1]),_h(d,d,[1,-1,0]),ba(p,d,this.viewProjectionMatrix),this.pixelProjectionMatrix=p,this.pixelUnprojectionMatrix=R_(oc(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||ut.warn("Pixel project matrix not invertible")()}}Bu.displayName="Viewport";class dl extends Bu{constructor(e={}){const{latitude:n=0,longitude:i=0,zoom:r=0,pitch:s=0,bearing:a=0,nearZMultiplier:o=.1,farZMultiplier:l=1.01,nearZ:c,farZ:u,orthographic:f=!1,projectionMatrix:d,repeat:p=!1,worldOffset:m=0,position:S,padding:v,legacyMeterSizes:y=!1}=e;let{width:_,height:T,altitude:b=1.5}=e;const M=Math.pow(2,r);_=_||1,T=T||1;let C,D=null;if(d)b=d[5]/2,C=xh(b);else{e.fovy?(C=e.fovy,b=PR(C)):C=xh(b);let L;if(v){const{top:U=0,bottom:N=0}=v;L=[0,_s((U+T-N)/2,0,T)-T/2]}D=A$({width:_,height:T,scale:M,center:S&&[0,0,S[2]*Nm(n)],offset:L,pitch:s,fovy:C,nearZMultiplier:o,farZMultiplier:l}),Number.isFinite(c)&&(D.near=c),Number.isFinite(u)&&(D.far=u)}let F=w$({height:T,pitch:s,bearing:a,scale:M,altitude:b});m&&(F=new dr().translate([512*m,0,0]).multiplyLeft(F)),super({...e,width:_,height:T,viewMatrix:F,longitude:i,latitude:n,zoom:r,...D,fovy:C,focalDistance:b}),this.latitude=n,this.longitude=i,this.zoom=r,this.pitch=s,this.bearing=a,this.altitude=b,this.fovy=C,this.orthographic=f,this._subViewports=p?[]:null,this._pseudoMeters=y,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),n=Math.floor((e[0]+180)/360),i=Math.ceil((e[2]-180)/360);for(let r=n;r<=i;r++){const s=r?new dl({...this,worldOffset:r}):this;this._subViewports.push(s)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[n,i]=this.projectFlat(e),r=(e[2]||0)*Nm(e[1]);return[n,i,r]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[n,i]=this.unprojectFlat(e),r=(e[2]||0)/Nm(i);return[n,i,r]}addMetersToLngLat(e,n){return IR(e,n)}panByPosition(e,n){const i=fv(n,this.pixelUnprojectionMatrix),r=this.projectFlat(e),s=cT([],r,s9([],i)),a=cT([],this.center,s),[o,l]=this.unprojectFlat(a);return{longitude:o,latitude:l}}getBounds(e={}){const n=R$(this,e.z||0);return[Math.min(n[0][0],n[1][0],n[2][0],n[3][0]),Math.min(n[0][1],n[1][1],n[2][1],n[3][1]),Math.max(n[0][0],n[1][0],n[2][0],n[3][0]),Math.max(n[0][1],n[1][1],n[2][1],n[3][1])]}fitBounds(e,n={}){const{width:i,height:r}=this,{longitude:s,latitude:a,zoom:o}=E$({width:i,height:r,bounds:e,...n});return new dl({width:i,height:r,longitude:s,latitude:a,zoom:o})}}dl.displayName="WebMercatorViewport";const FT=[0,0,0];function Lm(t,e,n=!1){const i=e.projectPosition(t);if(n&&e instanceof dl){const[r,s,a=0]=t,o=e.getDistanceScales([r,s]);i[2]=a*o.unitsPerMeter[2]}return i}function p7(t){const{viewport:e,modelMatrix:n,coordinateOrigin:i}=t;let{coordinateSystem:r,fromCoordinateSystem:s,fromCoordinateOrigin:a}=t;return r===Ze.DEFAULT&&(r=e.isGeospatial?Ze.LNGLAT:Ze.CARTESIAN),s===void 0&&(s=r),a===void 0&&(a=i),{viewport:e,coordinateSystem:r,coordinateOrigin:i,modelMatrix:n,fromCoordinateSystem:s,fromCoordinateOrigin:a}}function LR(t,{viewport:e,modelMatrix:n,coordinateSystem:i,coordinateOrigin:r,offsetMode:s}){let[a,o,l=0]=t;switch(n&&([a,o,l]=ku([],[a,o,l,1],n)),i){case Ze.LNGLAT:return Lm([a,o,l],e,s);case Ze.LNGLAT_OFFSETS:return Lm([a+r[0],o+r[1],l+(r[2]||0)],e,s);case Ze.METER_OFFSETS:return Lm(IR(r,[a,o,l]),e,s);case Ze.CARTESIAN:default:return e.isGeospatial?[a+r[0],o+r[1],l+r[2]]:e.projectPosition([a,o,l])}}function g7(t,e){const{viewport:n,coordinateSystem:i,coordinateOrigin:r,modelMatrix:s,fromCoordinateSystem:a,fromCoordinateOrigin:o}=p7(e),{autoOffset:l=!0}=e,{geospatialOrigin:c=FT,shaderCoordinateOrigin:u=FT,offsetMode:f=!1}=l?MR(n,i,r):{},d=LR(t,{viewport:n,modelMatrix:s,coordinateSystem:a,coordinateOrigin:o,offsetMode:f});if(f){const p=n.projectPosition(c||u);v9(d,d,p)}return d}let m7=1,y7=1;class UR{constructor(){x(this,"time",0);x(this,"channels",new Map);x(this,"animations",new Map);x(this,"playing",!1);x(this,"lastEngineTime",-1)}addChannel(e){const{delay:n=0,duration:i=Number.POSITIVE_INFINITY,rate:r=1,repeat:s=1}=e,a=m7++,o={time:0,delay:n,duration:i,rate:r,repeat:s};return this._setChannelTime(o,this.time),this.channels.set(a,o),a}removeChannel(e){this.channels.delete(e);for(const[n,i]of this.animations)i.channel===e&&this.detachAnimation(n)}isFinished(e){const n=this.channels.get(e);return n===void 0?!1:this.time>=n.delay+n.duration*n.repeat}getTime(e){if(e===void 0)return this.time;const n=this.channels.get(e);return n===void 0?-1:n.time}setTime(e){this.time=Math.max(0,e);const n=this.channels.values();for(const r of n)this._setChannelTime(r,this.time);const i=this.animations.values();for(const r of i){const{animation:s,channel:a}=r;s.setTime(this.getTime(a))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,n){const i=y7++;return this.animations.set(i,{animation:e,channel:n}),e.setTime(this.getTime(n)),i}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,n){const i=n-e.delay,r=e.duration*e.repeat;i>=r?e.time=e.duration*e.rate:(e.time=Math.max(0,i)%e.duration,e.time*=e.rate)}}function _7(t){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}function b7(t){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}let v7=0;const zh=class zh{constructor(e){x(this,"device",null);x(this,"canvas",null);x(this,"props");x(this,"animationProps",null);x(this,"timeline",null);x(this,"stats");x(this,"cpuTime");x(this,"gpuTime");x(this,"frameRate");x(this,"display");x(this,"needsRedraw","initialized");x(this,"_initialized",!1);x(this,"_running",!1);x(this,"_animationFrameId",null);x(this,"_nextFramePromise",null);x(this,"_resolveNextFrame",null);x(this,"_cpuStartTime",0);x(this,"_error",null);if(this.props={...zh.defaultAnimationLoopProps,...e},e=this.props,!e.device)throw new Error("No device provided");this.stats=e.stats||new Gp({id:"animation-loop-stats"}),this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this.setProps({autoResizeViewport:e.autoResizeViewport}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}destroy(){this.stop(),this._setDisplay(null)}delete(){this.destroy()}reportError(e){this.props.onError(e),this._error=e}setNeedsRedraw(e){return this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.props.autoResizeViewport=e.autoResizeViewport||!1),this}async start(){if(this._running)return this;this._running=!0;try{let e;return this._initialized||(this._initialized=!0,await this._initDevice(),this._initialize(),await this.props.onInitialize(this._getAnimationProps())),this._running?(e!==!1&&(this._cancelAnimationFrame(),this._requestAnimationFrame()),this):null}catch(e){const n=e instanceof Error?e:new Error("Unknown error");throw this.props.onError(n),n}}stop(){return this._running&&(this.animationProps&&!this._error&&this.props.onFinalize(this.animationProps),this._cancelAnimationFrame(),this._nextFramePromise=null,this._resolveNextFrame=null,this._running=!1),this}redraw(){var e;return(e=this.device)!=null&&e.isLost||this._error?this:(this._beginFrameTimers(),this._setupFrame(),this._updateAnimationProps(),this._renderFrame(this._getAnimationProps()),this._clearNeedsRedraw(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endFrameTimers(),this)}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}async toDataURL(){if(this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.canvas instanceof HTMLCanvasElement)return this.canvas.toDataURL();throw new Error("OffscreenCanvas")}_initialize(){this._startEventHandling(),this._initializeAnimationProps(),this._updateAnimationProps(),this._resizeViewport()}_setDisplay(e){this.display&&(this.display.destroy(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_requestAnimationFrame(){this._running&&(this._animationFrameId=_7(this._animationFrame.bind(this)))}_cancelAnimationFrame(){this._animationFrameId!==null&&(b7(this._animationFrameId),this._animationFrameId=null)}_animationFrame(){this._running&&(this.redraw(),this._requestAnimationFrame())}_renderFrame(e){var n;if(this.display){this.display._renderFrame(e);return}this.props.onRender(this._getAnimationProps()),(n=this.device)==null||n.submit()}_clearNeedsRedraw(){this.needsRedraw=!1}_setupFrame(){this._resizeViewport()}_initializeAnimationProps(){var r;const e=(r=this.device)==null?void 0:r.getDefaultCanvasContext();if(!this.device||!e)throw new Error("loop");const n=e==null?void 0:e.canvas,i=e.props.useDevicePixels;this.animationProps={animationLoop:this,device:this.device,canvasContext:e,canvas:n,useDevicePixels:i,timeline:this.timeline,needsRedraw:!1,width:1,height:1,aspect:1,time:0,startTime:Date.now(),engineTime:0,tick:0,tock:0,_mousePosition:null}}_getAnimationProps(){if(!this.animationProps)throw new Error("animationProps");return this.animationProps}_updateAnimationProps(){if(!this.animationProps)return;const{width:e,height:n,aspect:i}=this._getSizeAndAspect();(e!==this.animationProps.width||n!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),i!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=i,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime}async _initDevice(){if(this.device=await this.props.device,!this.device)throw new Error("No device provided");this.canvas=this.device.getDefaultCanvasContext().canvas||null}_createInfoDiv(){if(this.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const n=document.createElement("div");n.style.position="absolute",n.style.left="10px",n.style.bottom="10px",n.style.width="300px",n.style.background="white",this.canvas instanceof HTMLCanvasElement&&e.appendChild(this.canvas),e.appendChild(n);const i=this.props.onAddHTML(n);i&&(n.innerHTML=i)}}_getSizeAndAspect(){var s,a;if(!this.device)return{width:1,height:1,aspect:1};const[e,n]=((s=this.device)==null?void 0:s.getDefaultCanvasContext().getDevicePixelSize())||[1,1];let i=1;const r=(a=this.device)==null?void 0:a.getDefaultCanvasContext().canvas;return r&&r.clientHeight?i=r.clientWidth/r.clientHeight:e>0&&n>0&&(i=e/n),{width:e,height:n,aspect:i}}_resizeViewport(){this.props.autoResizeViewport&&this.device.gl&&this.device.gl.viewport(0,0,this.device.gl.drawingBufferWidth,this.device.gl.drawingBufferHeight)}_beginFrameTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this.cpuTime.timeStart()}_endFrameTimers(){this.cpuTime.timeEnd()}_startEventHandling(){this.canvas&&(this.canvas.addEventListener("mousemove",this._onMousemove.bind(this)),this.canvas.addEventListener("mouseleave",this._onMouseleave.bind(this)))}_onMousemove(e){e instanceof MouseEvent&&(this._getAnimationProps()._mousePosition=[e.offsetX,e.offsetY])}_onMouseleave(e){this._getAnimationProps()._mousePosition=null}};x(zh,"defaultAnimationLoopProps",{device:null,onAddHTML:()=>"",onInitialize:async()=>null,onRender:()=>{},onFinalize:()=>{},onError:e=>console.error(e),stats:__.stats.get(`animation-loop-${v7++}`),autoResizeViewport:!1});let U_=zh;const Um={};function Lu(t="id"){Um[t]=Um[t]||1;const e=Um[t]++;return`${t}-${e}`}class zT{constructor(e){x(this,"id");x(this,"userData",{});x(this,"topology");x(this,"bufferLayout",[]);x(this,"vertexCount");x(this,"indices");x(this,"attributes");if(this.id=e.id||Lu("geometry"),this.topology=e.topology,this.indices=e.indices||null,this.attributes=e.attributes,this.vertexCount=e.vertexCount,this.bufferLayout=e.bufferLayout||[],this.indices&&!(this.indices.usage&It.INDEX))throw new Error("Index buffer must have INDEX usage")}destroy(){var e;(e=this.indices)==null||e.destroy();for(const n of Object.values(this.attributes))n.destroy()}getVertexCount(){return this.vertexCount}getAttributes(){return this.attributes}getIndexes(){return this.indices||null}_calculateVertexCount(e){return e.byteLength/12}}function T7(t,e){if(e instanceof zT)return e;const n=x7(t,e),{attributes:i,bufferLayout:r}=S7(t,e);return new zT({topology:e.topology||"triangle-list",bufferLayout:r,vertexCount:e.vertexCount,indices:n,attributes:i})}function x7(t,e){if(!e.indices)return;const n=e.indices.value;return t.createBuffer({usage:It.INDEX,data:n})}function S7(t,e){const n=[],i={};for(const[s,a]of Object.entries(e.attributes)){let o=s;switch(s){case"POSITION":o="positions";break;case"NORMAL":o="normals";break;case"TEXCOORD_0":o="texCoords";break;case"COLOR_0":o="colors";break}if(a){i[o]=t.createBuffer({data:a.value,id:`${s}-buffer`});const{value:l,size:c,normalized:u}=a;n.push({name:o,format:xF(l,c,u)})}}const r=e._calculateVertexCount(e.attributes,e.indices);return{attributes:i,bufferLayout:n,vertexCount:r}}const Vh=class Vh{constructor(e){x(this,"device");x(this,"cachingEnabled");x(this,"destroyPolicy");x(this,"debug");x(this,"_hashCounter",0);x(this,"_hashes",{});x(this,"_renderPipelineCache",{});x(this,"_computePipelineCache",{});this.device=e,this.cachingEnabled=e.props._cachePipelines,this.destroyPolicy=e.props._cacheDestroyPolicy,this.debug=e.props.debugFactories}static getDefaultPipelineFactory(e){return e._lumaData.defaultPipelineFactory=e._lumaData.defaultPipelineFactory||new Vh(e),e._lumaData.defaultPipelineFactory}get[Symbol.toStringTag](){return"PipelineFactory"}toString(){return`PipelineFactory(${this.device.id})`}createRenderPipeline(e){var a;if(!this.cachingEnabled)return this.device.createRenderPipeline(e);const n={..._a.defaultProps,...e},i=this._renderPipelineCache,r=this._hashRenderPipeline(n);let s=(a=i[r])==null?void 0:a.pipeline;return s?(i[r].useCount++,this.debug&&ie.log(3,`${this}: ${i[r].pipeline} reused, count=${i[r].useCount}, (id=${e.id})`)()):(s=this.device.createRenderPipeline({...n,id:n.id?`${n.id}-cached`:Lu("unnamed-cached")}),s.hash=r,i[r]={pipeline:s,useCount:1},this.debug&&ie.log(3,`${this}: ${s} created, count=${i[r].useCount}`)()),s}createComputePipeline(e){var a;if(!this.cachingEnabled)return this.device.createComputePipeline(e);const n={...uh.defaultProps,...e},i=this._computePipelineCache,r=this._hashComputePipeline(n);let s=(a=i[r])==null?void 0:a.pipeline;return s?(i[r].useCount++,this.debug&&ie.log(3,`${this}: ${i[r].pipeline} reused, count=${i[r].useCount}, (id=${e.id})`)()):(s=this.device.createComputePipeline({...n,id:n.id?`${n.id}-cached`:void 0}),s.hash=r,i[r]={pipeline:s,useCount:1},this.debug&&ie.log(3,`${this}: ${s} created, count=${i[r].useCount}`)()),s}release(e){if(!this.cachingEnabled){e.destroy();return}const n=this._getCache(e),i=e.hash;n[i].useCount--,n[i].useCount===0?(this._destroyPipeline(e),this.debug&&ie.log(3,`${this}: ${e} released and destroyed`)()):n[i].useCount<0?(ie.error(`${this}: ${e} released, useCount < 0, resetting`)(),n[i].useCount=0):this.debug&&ie.log(3,`${this}: ${e} released, count=${n[i].useCount}`)()}_destroyPipeline(e){const n=this._getCache(e);switch(this.destroyPolicy){case"never":return!1;case"unused":return delete n[e.hash],e.destroy(),!0}}_getCache(e){let n;if(e instanceof uh&&(n=this._computePipelineCache),e instanceof _a&&(n=this._renderPipelineCache),!n)throw new Error(`${this}`);if(!n[e.hash])throw new Error(`${this}: ${e} matched incorrect entry`);return n}_hashComputePipeline(e){const{type:n}=this.device,i=this._getHash(e.shader.source);return`${n}/C/${i}`}_hashRenderPipeline(e){const n=e.vs?this._getHash(e.vs.source):0,i=e.fs?this._getHash(e.fs.source):0,r="-",s=this._getHash(JSON.stringify(e.bufferLayout)),{type:a}=this.device;switch(a){case"webgl":return`${a}/R/${n}/${i}V${r}BL${s}`;case"webgpu":default:const o=this._getHash(JSON.stringify(e.parameters));return`${a}/R/${n}/${i}V${r}T${e.topology}P${o}BL${s}`}}_getHash(e){return this._hashes[e]===void 0&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}};x(Vh,"defaultProps",{..._a.defaultProps});let F_=Vh;const $h=class $h{constructor(e){x(this,"device");x(this,"cachingEnabled");x(this,"destroyPolicy");x(this,"debug");x(this,"_cache",{});this.device=e,this.cachingEnabled=e.props._cacheShaders,this.destroyPolicy=e.props._cacheDestroyPolicy,this.debug=!0}static getDefaultShaderFactory(e){var n;return(n=e._lumaData).defaultShaderFactory||(n.defaultShaderFactory=new $h(e)),e._lumaData.defaultShaderFactory}get[Symbol.toStringTag](){return"ShaderFactory"}toString(){return`${this[Symbol.toStringTag]}(${this.device.id})`}createShader(e){if(!this.cachingEnabled)return this.device.createShader(e);const n=this._hashShader(e);let i=this._cache[n];if(i)i.useCount++,this.debug&&ie.log(3,`${this}: Reusing shader ${i.shader.id} count=${i.useCount}`)();else{const r=this.device.createShader({...e,id:e.id?`${e.id}-cached`:void 0});this._cache[n]=i={shader:r,useCount:1},this.debug&&ie.log(3,`${this}: Created new shader ${r.id}`)()}return i.shader}release(e){if(!this.cachingEnabled){e.destroy();return}const n=this._hashShader(e),i=this._cache[n];if(i)if(i.useCount--,i.useCount===0)this.destroyPolicy==="unused"&&(delete this._cache[n],i.shader.destroy(),this.debug&&ie.log(3,`${this}: Releasing shader ${e.id}, destroyed`)());else{if(i.useCount<0)throw new Error(`ShaderFactory: Shader ${e.id} released too many times`);this.debug&&ie.log(3,`${this}: Releasing shader ${e.id} count=${i.useCount}`)()}}_hashShader(e){return`${e.stage}:${e.source}`}};x($h,"defaultProps",{...lh.defaultProps});let z_=$h;function w7(t,e){var r;const n={},i="Values";if(t.attributes.length===0&&!((r=t.varyings)!=null&&r.length))return{"No attributes or varyings":{[i]:"N/A"}};for(const s of t.attributes)if(s){const a=`${s.location} ${s.name}: ${s.type}`;n[`in ${a}`]={[i]:s.stepMode||"vertex"}}for(const s of t.varyings||[]){const a=`${s.location} ${s.name}`;n[`out ${a}`]={[i]:JSON.stringify(s)}}return n}let ln=null,Gs=null;function A7(t,{id:e,minimap:n,opaque:i,top:r="0",left:s="0",rgbaScale:a=1}){ln||(ln=document.createElement("canvas"),ln.id=e,ln.title=e,ln.style.zIndex="100",ln.style.position="absolute",ln.style.top=r,ln.style.left=s,ln.style.border="blue 5px solid",ln.style.transform="scaleY(-1)",document.body.appendChild(ln),Gs=ln.getContext("2d")),(ln.width!==t.width||ln.height!==t.height)&&(ln.width=t.width/2,ln.height=t.height/2,ln.style.width="400px",ln.style.height="400px");const o=t.device.readPixelsToArrayWebGL(t),l=Gs==null?void 0:Gs.createImageData(t.width,t.height);if(l){for(let u=0;u<o.length;u+=4)l.data[0+u+0]=o[u+0]*a,l.data[0+u+1]=o[u+1]*a,l.data[0+u+2]=o[u+2]*a,l.data[0+u+3]=i?255:o[u+3]*a;Gs==null||Gs.putImageData(l,0,0)}}function V_(t,e,n){if(t===e)return!0;if(!n||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!V_(t[i],e[i],n-1))return!1;return!0}if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;for(const s of i)if(!e.hasOwnProperty(s)||!V_(t[s],e[s],n-1))return!1;return!0}return!1}class Fm{constructor(e){x(this,"bufferLayouts");this.bufferLayouts=e}getBufferLayout(e){return this.bufferLayouts.find(n=>n.name===e)||null}getAttributeNamesForBuffer(e){var n;return e.attributes?(n=e.attributes)==null?void 0:n.map(i=>i.attribute):[e.name]}mergeBufferLayouts(e,n){const i=[...e];for(const r of n){const s=i.findIndex(a=>a.name===r.name);s<0?i.push(r):i[s]=r}return i}getBufferIndex(e){const n=this.bufferLayouts.findIndex(i=>i.name===e);return n===-1&&ie.warn(`BufferLayout: Missing buffer for "${e}".`)(),n}}function E7(t,e){const n=Object.fromEntries(t.attributes.map(r=>[r.name,r.location])),i=e.slice();return i.sort((r,s)=>{const a=r.attributes?r.attributes.map(u=>u.attribute):[r.name],o=s.attributes?s.attributes.map(u=>u.attribute):[s.name],l=Math.min(...a.map(u=>n[u])),c=Math.min(...o.map(u=>n[u]));return l-c}),i}function C7(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function R7(t){return Array.isArray(t)?t.length===0||typeof t[0]=="number":!1}function M7(t){return C7(t)||R7(t)}function O7(t){return M7(t)||typeof t=="number"||typeof t=="boolean"}function I7(t){const e={bindings:{},uniforms:{}};return Object.keys(t).forEach(n=>{const i=t[n];O7(i)?e.uniforms[n]=i:e.bindings[n]=i}),e}class P7{constructor(e,n){x(this,"options",{disableWarnings:!1});x(this,"modules");x(this,"moduleUniforms");x(this,"moduleBindings");Object.assign(this.options,n);const i=X0(Object.values(e).filter(r=>r.dependencies));for(const r of i)e[r.name]=r;ie.log(1,"Creating ShaderInputs with modules",Object.keys(e))(),this.modules=e,this.moduleUniforms={},this.moduleBindings={};for(const[r,s]of Object.entries(e))this._addModule(s),s.name&&r!==s.name&&!this.options.disableWarnings&&ie.warn(`Module name: ${r} vs ${s.name}`)()}destroy(){}setProps(e){var n;for(const i of Object.keys(e)){const r=i,s=e[r]||{},a=this.modules[r];if(!a){this.options.disableWarnings||ie.warn(`Module ${i} not found`)();continue}const o=this.moduleUniforms[r],l=this.moduleBindings[r],c=((n=a.getUniforms)==null?void 0:n.call(a,s,o))||s,{uniforms:u,bindings:f}=I7(c);this.moduleUniforms[r]={...o,...u},this.moduleBindings[r]={...l,...f}}}getModules(){return Object.values(this.modules)}getUniformValues(){return this.moduleUniforms}getBindingValues(){const e={};for(const n of Object.values(this.moduleBindings))Object.assign(e,n);return e}getDebugTable(){var n;const e={};for(const[i,r]of Object.entries(this.moduleUniforms))for(const[s,a]of Object.entries(r))e[`${i}.${s}`]={type:(n=this.modules[i].uniformTypes)==null?void 0:n[s],value:String(a)};return e}_addModule(e){const n=e.name;this.moduleUniforms[n]=e.defaultUniforms||{},this.moduleBindings[n]={}}}let D7="";async function k7(t,e){const n=new Image;return n.crossOrigin="anonymous",n.src=t.startsWith("http")?t:D7+t,await n.decode(),e?await createImageBitmap(n,e):await createImageBitmap(n)}const N7=["+X","-X","+Y","-Y","+Z","-Z"],B7=["+X","-X","+Y","-Y","+Z","-Z"],jh=class jh{constructor(e,n){x(this,"device");x(this,"id");x(this,"props");x(this,"texture");x(this,"sampler");x(this,"view");x(this,"ready");x(this,"isReady",!1);x(this,"destroyed",!1);x(this,"resolveReady",()=>{});x(this,"rejectReady",()=>{});this.device=e;const i=Lu("async-texture");this.props={...jh.defaultProps,id:i,...n},this.id=this.props.id,n={...n},typeof(n==null?void 0:n.data)=="string"&&n.dimension==="2d"&&(n.data=k7(n.data)),n.mipmaps&&(n.mipLevels="auto"),this.ready=new Promise((r,s)=>{this.resolveReady=()=>{this.isReady=!0,r()},this.rejectReady=s}),this.initAsync(n)}get[Symbol.toStringTag](){return"AsyncTexture"}toString(){return`AsyncTexture:"${this.id}"(${this.isReady?"ready":"loading"})`}async initAsync(e){const n=e.data,i=await FR(n).then(void 0,this.rejectReady);if(this.destroyed)return;const r=this.props.width&&this.props.height?{width:this.props.width,height:this.props.height}:this.getTextureDataSize(i);if(!r)throw new Error("Texture size could not be determined");const s={...r,...e,data:void 0,mipLevels:1},a=this.device.getMipLevelCount(s.width,s.height);if(s.mipLevels=this.props.mipLevels==="auto"?a:Math.min(a,this.props.mipLevels),this.texture=this.device.createTexture(s),this.sampler=this.texture.sampler,this.view=this.texture.view,e.data)switch(this.props.dimension){case"1d":this._setTexture1DData(this.texture,i);break;case"2d":this._setTexture2DData(i);break;case"3d":this._setTexture3DData(this.texture,i);break;case"2d-array":this._setTextureArrayData(this.texture,i);break;case"cube":this._setTextureCubeData(this.texture,i);break;case"cube-array":this._setTextureCubeArrayData(this.texture,i);break}this.props.mipmaps&&this.generateMipmaps(),ie.info(1,`${this} loaded`),this.resolveReady()}destroy(){this.texture&&(this.texture.destroy(),this.texture=null),this.destroyed=!0}generateMipmaps(){this.texture.generateMipmapsWebGL()}setSampler(e={}){this.texture.setSampler(e instanceof sl?e:this.device.createSampler(e))}resize(e){if(!this.isReady)throw new Error("Cannot resize texture before it is ready");if(e.width===this.texture.width&&e.height===this.texture.height)return!1;if(this.texture){const n=this.texture;this.texture=n.clone(e),n.destroy()}return!0}isTextureLevelData(e){const n=e==null?void 0:e.data;return ArrayBuffer.isView(n)}getTextureDataSize(e){if(!e||ArrayBuffer.isView(e))return null;if(Array.isArray(e))return this.getTextureDataSize(e[0]);if(this.device.isExternalImage(e))return this.device.getExternalImageSize(e);if(e&&typeof e=="object"&&e.constructor===Object){const i=Object.values(e)[0];return{width:i.width,height:i.height}}throw new Error("texture size deduction failed")}getCubeFaceDepth(e){switch(e){case"+X":return 0;case"-X":return 1;case"+Y":return 2;case"-Y":return 3;case"+Z":return 4;case"-Z":return 5;default:throw new Error(e)}}setTextureData(e){}_setTexture1DData(e,n){throw new Error("setTexture1DData not supported in WebGL.")}_setTexture2DData(e,n=0){if(!this.texture)throw new Error("Texture not initialized");const i=this._normalizeTextureData(e);i.length>1&&this.props.mipmaps!==!1&&ie.warn(`Texture ${this.id} mipmap and multiple LODs.`)();for(let r=0;r<i.length;r++){const s=i[r];this.device.isExternalImage(s)?this.texture.copyExternalImage({image:s,depth:n,mipLevel:r,flipY:!0}):this.texture.copyImageData({data:s.data,mipLevel:r})}}_setTexture3DData(e,n){var i;if(((i=this.texture)==null?void 0:i.props.dimension)!=="3d")throw new Error(this.id);for(let r=0;r<n.length;r++)this._setTexture2DData(n[r],r)}_setTextureCubeData(e,n){var i;if(((i=this.texture)==null?void 0:i.props.dimension)!=="cube")throw new Error(this.id);for(const[r,s]of Object.entries(n)){const a=B7.indexOf(r);this._setTexture2DData(s,a)}}_setTextureArrayData(e,n){var i;if(((i=this.texture)==null?void 0:i.props.dimension)!=="2d-array")throw new Error(this.id);for(let r=0;r<n.length;r++)this._setTexture2DData(n[r],r)}_setTextureCubeArrayData(e,n){throw new Error("setTextureCubeArrayData not supported in WebGL2.")}_setTextureCubeFaceData(e,n,i,r=0){Array.isArray(n)&&n.length>1&&this.props.mipmaps!==!1&&ie.warn(`${this.id} has mipmap and multiple LODs.`)();const s=N7.indexOf(i);this._setTexture2DData(n,s)}_normalizeTextureData(e){const n=this.texture;let i;return ArrayBuffer.isView(e)?i=[{data:e,width:n.width,height:n.height}]:Array.isArray(e)?i=e:i=[e],i}};x(jh,"defaultProps",{...Jn.defaultProps,data:null,mipmaps:!1});let Oc=jh;async function FR(t){if(t=await t,Array.isArray(t))return await Promise.all(t.map(FR));if(t&&typeof t=="object"&&t.constructor===Object){const e=t,n=await Promise.all(Object.values(e)),i=Object.keys(e),r={};for(let s=0;s<i.length;s++)r[i[s]]=n[s];return r}return t}const Qs=2,L7=1e4,Hh=class Hh{constructor(e,n){x(this,"device");x(this,"id");x(this,"source");x(this,"vs");x(this,"fs");x(this,"pipelineFactory");x(this,"shaderFactory");x(this,"userData",{});x(this,"parameters");x(this,"topology");x(this,"bufferLayout");x(this,"isInstanced");x(this,"instanceCount",0);x(this,"vertexCount");x(this,"indexBuffer",null);x(this,"bufferAttributes",{});x(this,"constantAttributes",{});x(this,"bindings",{});x(this,"vertexArray");x(this,"transformFeedback",null);x(this,"pipeline");x(this,"shaderInputs");x(this,"_uniformStore");x(this,"_attributeInfos",{});x(this,"_gpuGeometry",null);x(this,"props");x(this,"_pipelineNeedsUpdate","newly created");x(this,"_needsRedraw","initializing");x(this,"_destroyed",!1);x(this,"_lastDrawTimestamp",-1);x(this,"_lastLogTime",0);x(this,"_logOpen",!1);x(this,"_drawCount",0);var l,c,u,f;this.props={...Hh.defaultProps,...n},n=this.props,this.id=n.id||Lu("model"),this.device=e,Object.assign(this.userData,n.userData);const i=Object.fromEntries(((l=this.props.modules)==null?void 0:l.map(d=>[d.name,d]))||[]),r=n.shaderInputs||new P7(i,{disableWarnings:this.props.disableWarnings});this.setShaderInputs(r);const s=F7(e),a=(((c=this.props.modules)==null?void 0:c.length)>0?this.props.modules:(u=this.shaderInputs)==null?void 0:u.getModules())||[];if(this.device.type==="webgpu"&&this.props.source){const{source:d,getUniforms:p}=this.props.shaderAssembler.assembleWGSLShader({platformInfo:s,...this.props,modules:a});this.source=d,this._getModuleUniforms=p,(f=this.props).shaderLayout||(f.shaderLayout=Kz(this.source))}else{const{vs:d,fs:p,getUniforms:m}=this.props.shaderAssembler.assembleGLSLShaderPair({platformInfo:s,...this.props,modules:a});this.vs=d,this.fs=p,this._getModuleUniforms=m}this.vertexCount=this.props.vertexCount,this.instanceCount=this.props.instanceCount,this.topology=this.props.topology,this.bufferLayout=this.props.bufferLayout,this.parameters=this.props.parameters,n.geometry&&this.setGeometry(n.geometry),this.pipelineFactory=n.pipelineFactory||F_.getDefaultPipelineFactory(this.device),this.shaderFactory=n.shaderFactory||z_.getDefaultShaderFactory(this.device),this.pipeline=this._updatePipeline(),this.vertexArray=e.createVertexArray({shaderLayout:this.pipeline.shaderLayout,bufferLayout:this.pipeline.bufferLayout}),this._gpuGeometry&&this._setGeometryAttributes(this._gpuGeometry),"isInstanced"in n&&(this.isInstanced=n.isInstanced),n.instanceCount&&this.setInstanceCount(n.instanceCount),n.vertexCount&&this.setVertexCount(n.vertexCount),n.indexBuffer&&this.setIndexBuffer(n.indexBuffer),n.attributes&&this.setAttributes(n.attributes),n.constantAttributes&&this.setConstantAttributes(n.constantAttributes),n.bindings&&this.setBindings(n.bindings),n.transformFeedback&&(this.transformFeedback=n.transformFeedback),Object.seal(this)}get[Symbol.toStringTag](){return"Model"}toString(){return`Model(${this.id})`}destroy(){var e;this._destroyed||(this.pipelineFactory.release(this.pipeline),this.shaderFactory.release(this.pipeline.vs),this.pipeline.fs&&this.shaderFactory.release(this.pipeline.fs),this._uniformStore.destroy(),(e=this._gpuGeometry)==null||e.destroy(),this._destroyed=!0)}needsRedraw(){this._getBindingsUpdateTimestamp()>this._lastDrawTimestamp&&this.setNeedsRedraw("contents of bound textures or buffers updated");const e=this._needsRedraw;return this._needsRedraw=!1,e}setNeedsRedraw(e){this._needsRedraw||(this._needsRedraw=e)}predraw(){this.updateShaderInputs(),this.pipeline=this._updatePipeline()}draw(e){const n=this._areBindingsLoading();if(n)return ie.info(Qs,`>>> DRAWING ABORTED ${this.id}: ${n} not loaded`)(),!1;try{e.pushDebugGroup(`${this}.predraw(${e})`),this.predraw()}finally{e.popDebugGroup()}let i;try{e.pushDebugGroup(`${this}.draw(${e})`),this._logDrawCallStart(),this.pipeline=this._updatePipeline();const r=this._getBindings();this.pipeline.setBindings(r,{disableWarnings:this.props.disableWarnings});const{indexBuffer:s}=this.vertexArray,a=s?s.byteLength/(s.indexType==="uint32"?4:2):void 0;i=this.pipeline.draw({renderPass:e,vertexArray:this.vertexArray,isInstanced:this.isInstanced,vertexCount:this.vertexCount,instanceCount:this.instanceCount,indexCount:a,transformFeedback:this.transformFeedback||void 0,parameters:this.parameters,topology:this.topology})}finally{e.popDebugGroup(),this._logDrawCallEnd()}return this._logFramebuffer(e),i?(this._lastDrawTimestamp=this.device.timestamp,this._needsRedraw=!1):this._needsRedraw="waiting for resource initialization",i}setGeometry(e){var i;(i=this._gpuGeometry)==null||i.destroy();const n=e&&T7(this.device,e);if(n){this.setTopology(n.topology||"triangle-list");const r=new Fm(this.bufferLayout);this.bufferLayout=r.mergeBufferLayouts(n.bufferLayout,this.bufferLayout),this.vertexArray&&this._setGeometryAttributes(n)}this._gpuGeometry=n}setTopology(e){e!==this.topology&&(this.topology=e,this._setPipelineNeedsUpdate("topology"))}setBufferLayout(e){const n=new Fm(this.bufferLayout);this.bufferLayout=this._gpuGeometry?n.mergeBufferLayouts(e,this._gpuGeometry.bufferLayout):e,this._setPipelineNeedsUpdate("bufferLayout"),this.pipeline=this._updatePipeline(),this.vertexArray=this.device.createVertexArray({shaderLayout:this.pipeline.shaderLayout,bufferLayout:this.pipeline.bufferLayout}),this._gpuGeometry&&this._setGeometryAttributes(this._gpuGeometry)}setParameters(e){V_(e,this.parameters,2)||(this.parameters=e,this._setPipelineNeedsUpdate("parameters"))}setInstanceCount(e){this.instanceCount=e,this.isInstanced===void 0&&e>0&&(this.isInstanced=!0),this.setNeedsRedraw("instanceCount")}setVertexCount(e){this.vertexCount=e,this.setNeedsRedraw("vertexCount")}setShaderInputs(e){this.shaderInputs=e,this._uniformStore=new bz(this.shaderInputs.modules);for(const[n,i]of Object.entries(this.shaderInputs.modules))if(U7(i)){const r=this._uniformStore.getManagedUniformBuffer(this.device,n);this.bindings[`${n}Uniforms`]=r}this.setNeedsRedraw("shaderInputs")}updateShaderInputs(){this._uniformStore.setUniforms(this.shaderInputs.getUniformValues()),this.setBindings(this.shaderInputs.getBindingValues()),this.setNeedsRedraw("shaderInputs")}setBindings(e){Object.assign(this.bindings,e),this.setNeedsRedraw("bindings")}setTransformFeedback(e){this.transformFeedback=e,this.setNeedsRedraw("transformFeedback")}setIndexBuffer(e){this.vertexArray.setIndexBuffer(e),this.setNeedsRedraw("indexBuffer")}setAttributes(e,n){const i=(n==null?void 0:n.disableWarnings)??this.props.disableWarnings;e.indices&&ie.warn(`Model:${this.id} setAttributes() - indexBuffer should be set using setIndexBuffer()`)(),this.bufferLayout=E7(this.pipeline.shaderLayout,this.bufferLayout);const r=new Fm(this.bufferLayout);for(const[s,a]of Object.entries(e)){const o=r.getBufferLayout(s);if(!o){i||ie.warn(`Model(${this.id}): Missing layout for buffer "${s}".`)();continue}const l=r.getAttributeNamesForBuffer(o);let c=!1;for(const u of l){const f=this._attributeInfos[u];if(f){const d=this.device.type==="webgpu"?r.getBufferIndex(f.bufferName):f.location;this.vertexArray.setBuffer(d,a),c=!0}}!c&&!i&&ie.warn(`Model(${this.id}): Ignoring buffer "${a.id}" for unknown attribute "${s}"`)()}this.setNeedsRedraw("attributes")}setConstantAttributes(e,n){for(const[i,r]of Object.entries(e)){const s=this._attributeInfos[i];s?this.vertexArray.setConstantWebGL(s.location,r):((n==null?void 0:n.disableWarnings)??this.props.disableWarnings)||ie.warn(`Model "${this.id}: Ignoring constant supplied for unknown attribute "${i}"`)()}this.setNeedsRedraw("constants")}_areBindingsLoading(){for(const e of Object.values(this.bindings))if(e instanceof Oc&&!e.isReady)return e.id;return!1}_getBindings(){const e={};for(const[n,i]of Object.entries(this.bindings))i instanceof Oc?i.isReady&&(e[n]=i.texture):e[n]=i;return e}_getBindingsUpdateTimestamp(){let e=0;for(const n of Object.values(this.bindings))n instanceof oh?e=Math.max(e,n.texture.updateTimestamp):n instanceof It||n instanceof Jn?e=Math.max(e,n.updateTimestamp):n instanceof Oc?e=n.texture?Math.max(e,n.texture.updateTimestamp):1/0:n instanceof sl||(e=Math.max(e,n.buffer.updateTimestamp));return e}_setGeometryAttributes(e){const n={...e.attributes};for(const[i]of Object.entries(n))!this.pipeline.shaderLayout.attributes.find(r=>r.name===i)&&i!=="positions"&&delete n[i];this.vertexCount=e.vertexCount,this.setIndexBuffer(e.indices||null),this.setAttributes(e.attributes,{disableWarnings:!0}),this.setAttributes(n,{disableWarnings:this.props.disableWarnings}),this.setNeedsRedraw("geometry attributes")}_setPipelineNeedsUpdate(e){this._pipelineNeedsUpdate||(this._pipelineNeedsUpdate=e),this.setNeedsRedraw(e)}_updatePipeline(){if(this._pipelineNeedsUpdate){let e=null,n=null;this.pipeline&&(ie.log(1,`Model ${this.id}: Recreating pipeline because "${this._pipelineNeedsUpdate}".`)(),e=this.pipeline.vs,n=this.pipeline.fs),this._pipelineNeedsUpdate=!1;const i=this.shaderFactory.createShader({id:`${this.id}-vertex`,stage:"vertex",source:this.source||this.vs,debugShaders:this.props.debugShaders});let r=null;this.source?r=i:this.fs&&(r=this.shaderFactory.createShader({id:`${this.id}-fragment`,stage:"fragment",source:this.source||this.fs,debugShaders:this.props.debugShaders})),this.pipeline=this.pipelineFactory.createRenderPipeline({...this.props,bufferLayout:this.bufferLayout,topology:this.topology,parameters:this.parameters,bindings:this._getBindings(),vs:i,fs:r}),this._attributeInfos=jC(this.pipeline.shaderLayout,this.bufferLayout),e&&this.shaderFactory.release(e),n&&this.shaderFactory.release(n)}return this.pipeline}_logDrawCallStart(){const e=ie.level>3?0:L7;ie.level<2||Date.now()-this._lastLogTime<e||(this._lastLogTime=Date.now(),this._logOpen=!0,ie.group(Qs,`>>> DRAWING MODEL ${this.id}`,{collapsed:ie.level<=2})())}_logDrawCallEnd(){if(this._logOpen){const e=w7(this.pipeline.shaderLayout,this.id);ie.table(Qs,e)();const n=this.shaderInputs.getDebugTable();ie.table(Qs,n)();const i=this._getAttributeDebugTable();ie.table(Qs,this._attributeInfos)(),ie.table(Qs,i)(),ie.groupEnd(Qs)(),this._logOpen=!1}}_logFramebuffer(e){const n=this.device.props.debugFramebuffers;if(this._drawCount++,!n)return;const i=e.props.framebuffer;i&&A7(i,{id:i.id,minimap:!0})}_getAttributeDebugTable(){const e={};for(const[n,i]of Object.entries(this._attributeInfos)){const r=this.vertexArray.attributes[i.location];e[i.location]={name:n,type:i.shaderType,values:r?this._getBufferOrConstantValues(r,i.bufferDataType):"null"}}if(this.vertexArray.indexBuffer){const{indexBuffer:n}=this.vertexArray,i=n.indexType==="uint32"?new Uint32Array(n.debugData):new Uint16Array(n.debugData);e.indices={name:"indices",type:n.indexType,values:i.toString()}}return e}_getBufferOrConstantValues(e,n){const i=K0(n);return(e instanceof It?new i(e.debugData):e).toString()}};x(Hh,"defaultProps",{..._a.defaultProps,source:void 0,vs:null,fs:null,id:"unnamed",handle:void 0,userData:{},defines:{},modules:[],geometry:null,indexBuffer:null,attributes:{},constantAttributes:{},varyings:[],isInstanced:void 0,instanceCount:0,vertexCount:0,shaderInputs:void 0,pipelineFactory:void 0,shaderFactory:void 0,transformFeedback:void 0,shaderAssembler:sh.getDefaultShaderAssembler(),debugShaders:void 0,disableWarnings:void 0});let ka=Hh;function U7(t){return!!(t.uniformTypes&&!z7(t.uniformTypes))}function F7(t){return{type:t.type,shaderLanguage:t.info.shadingLanguage,shaderLanguageVersion:t.info.shadingLanguageVersion,gpu:t.info.gpu,features:t.features}}function z7(t){for(const e in t)return!1;return!0}const Bc=class Bc{constructor(e,n=Bc.defaultProps){x(this,"device");x(this,"model");x(this,"transformFeedback");if(!Bc.isSupported(e))throw new Error("BufferTransform not yet implemented on WebGPU");this.device=e,this.model=new ka(this.device,{id:n.id||"buffer-transform-model",fs:n.fs||pF(),topology:n.topology||"point-list",varyings:n.outputs||n.varyings,...n}),this.transformFeedback=this.device.createTransformFeedback({layout:this.model.pipeline.shaderLayout,buffers:n.feedbackBuffers}),this.model.setTransformFeedback(this.transformFeedback),Object.seal(this)}static isSupported(e){var n;return((n=e==null?void 0:e.info)==null?void 0:n.type)==="webgl"}destroy(){this.model&&this.model.destroy()}delete(){this.destroy()}run(e){e!=null&&e.inputBuffers&&this.model.setAttributes(e.inputBuffers),e!=null&&e.outputBuffers&&this.transformFeedback.setBuffers(e.outputBuffers);const n=this.device.beginRenderPass(e);this.model.draw(n),n.end()}getBuffer(e){return this.transformFeedback.getBuffer(e)}readAsync(e){const n=this.getBuffer(e);if(!n)throw new Error("BufferTransform#getBuffer");if(n instanceof It)return n.readAsync();const{buffer:i,byteOffset:r=0,byteLength:s=i.byteLength}=n;return i.readAsync(r,s)}};x(Bc,"defaultProps",{...ka.defaultProps,outputs:void 0,feedbackBuffers:void 0});let lu=Bc;class pv{constructor(e){x(this,"id");x(this,"topology");x(this,"vertexCount");x(this,"indices");x(this,"attributes");x(this,"userData",{});const{attributes:n={},indices:i=null,vertexCount:r=null}=e;this.id=e.id||Lu("geometry"),this.topology=e.topology,i&&(this.indices=ArrayBuffer.isView(i)?{value:i,size:1}:i),this.attributes={};for(const[s,a]of Object.entries(n)){const o=ArrayBuffer.isView(a)?{value:a}:a;if(!ArrayBuffer.isView(o.value))throw new Error(`${this._print(s)}: must be typed array or object with value as typed array`);if((s==="POSITION"||s==="positions")&&!o.size&&(o.size=3),s==="indices"){if(this.indices)throw new Error("Multiple indices detected");this.indices=o}else this.attributes[s]=o}this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this.vertexCount=r||this._calculateVertexCount(this.attributes,this.indices)}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return`Geometry ${this.id} attribute ${e}`}_setAttributes(e,n){return this}_calculateVertexCount(e,n){if(n)return n.value.length;let i=1/0;for(const r of Object.values(e)){const{value:s,size:a,constant:o}=r;!o&&s&&a!==void 0&&a>=1&&(i=Math.min(i,s.length/a))}return i}}const V7={blendColorOperation:"add",blendColorSrcFactor:"one",blendColorDstFactor:"zero",blendAlphaOperation:"add",blendAlphaSrcFactor:"constant",blendAlphaDstFactor:"zero"};class zR extends hv{constructor(){super(...arguments),this._colorEncoderState=null}render(e){return"pickingFBO"in e?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:n,views:i,viewports:r,onViewportActive:s,pickingFBO:a,deviceRect:{x:o,y:l,width:c,height:u},cullRect:f,effects:d,pass:p="picking",pickZ:m,shaderModuleProps:S}){this.pickZ=m;const v=this._resetColorEncoder(m),y=[o,l,c,u],_=super.render({target:a,layers:e,layerFilter:n,views:i,viewports:r,onViewportActive:s,cullRect:f,effects:d==null?void 0:d.filter(b=>b.useInPicking),pass:p,isPicking:!0,shaderModuleProps:S,clearColor:[0,0,0,0],colorMask:15,scissorRect:y});return this._colorEncoderState=null,{decodePickingColor:v&&j7.bind(null,v),stats:_}}shouldDrawLayer(e){const{pickable:n,operation:i}=e.props;return n&&i.includes("draw")||i.includes("terrain")||i.includes("mask")}getShaderModuleProps(e,n,i){return{picking:{isActive:1,isAttribute:this.pickZ},lighting:{enabled:!1}}}getLayerParameters(e,n,i){const r={...e.props.parameters},{pickable:s,operation:a}=e.props;return!this._colorEncoderState||a.includes("terrain")?r.blend=!1:s&&a.includes("draw")&&(Object.assign(r,V7),r.blend=!0,r.blendColor=$7(this._colorEncoderState,e,i)),r}_resetColorEncoder(e){return this._colorEncoderState=e?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function $7(t,e,n){const{byLayer:i,byAlpha:r}=t;let s,a=i.get(e);return a?(a.viewports.push(n),s=a.a):(s=i.size+1,s<=255?(a={a:s,layer:e,viewports:[n]},i.set(e,a),r[s]=a):(ut.warn("Too many pickable layers, only picking the first 255")(),s=0)),[0,0,0,s/255]}function j7(t,e){const n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}const po={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},Sh=Symbol.for("component"),Os=Symbol.for("propTypes"),zm=Symbol.for("deprecatedProps"),Wo=Symbol.for("asyncPropDefaults"),Na=Symbol.for("asyncPropOriginal"),bs=Symbol.for("asyncPropResolved");function gv(t,e=()=>!0){return Array.isArray(t)?VR(t,e,[]):e(t)?[t]:[]}function VR(t,e,n){let i=-1;for(;++i<t.length;){const r=t[i];Array.isArray(r)?VR(r,e,n):e(r)&&n.push(r)}return n}function H7({target:t,source:e,start:n=0,count:i=1}){const r=e.length,s=i*r;let a=0;for(let o=n;a<r;a++)t[o++]=e[a];for(;a<s;)a<s-a?(t.copyWithin(n+a,n,n+a),a*=2):(t.copyWithin(n+a,n,n+s-a),a=s);return t}class W7{constructor(e,n,i){this._loadCount=0,this._subscribers=new Set,this.id=e,this.context=i,this.setData(n)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,n){if(e===this._data&&!n)return;this._data=e;const i=++this._loadCount;let r=e;typeof e=="string"&&(r=nh(e)),r instanceof Promise?(this.isLoaded=!1,this._loader=r.then(s=>{this._loadCount===i&&(this.isLoaded=!0,this._error=void 0,this._content=s)}).catch(s=>{this._loadCount===i&&(this.isLoaded=!0,this._error=s||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const s of this._subscribers)s.onChange(this.getData())}}class Y7{constructor(e){var n;this.protocol=e.protocol||"resource://",this._context={device:e.device,gl:(n=e.device)==null?void 0:n.gl,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return e.startsWith(this.protocol)?!0:e in this._resources}add({resourceId:e,data:n,forceUpdate:i=!1,persistent:r=!0}){let s=this._resources[e];s?s.setData(n,i):(s=new W7(e,n,this._context),this._resources[e]=s),s.persistent=r}remove(e){const n=this._resources[e];n&&(n.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const n=this._consumers[e];if(n){for(const i in n){const r=n[i],s=this._resources[r.resourceId];s&&s.unsubscribe(r)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:n,consumerId:i,requestId:r="default"}){const{_resources:s,protocol:a}=this;e.startsWith(a)&&(e=e.replace(a,""),s[e]||this.add({resourceId:e,data:null,persistent:!1}));const o=s[e];if(this._track(i,r,o,n),o)return o.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,n,i,r){const s=this._consumers,a=s[e]=s[e]||{};let o=a[n];const l=o&&o.resourceId&&this._resources[o.resourceId];l&&(l.unsubscribe(o),this.prune()),i&&(o?(o.onChange=r,o.resourceId=i.id):o={onChange:r,resourceId:i.id},a[n]=o,i.subscribe(o))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const n=this._resources[e];!n.persistent&&!n.inUse()&&(n.delete(),delete this._resources[e])}}}const X7="layerManager.setLayers",q7="layerManager.activateViewport";class K7{constructor(e,n){var o;this._lastRenderedLayers=[],this._needsRedraw=!1,this._needsUpdate=!1,this._nextLayers=null,this._debug=!1,this._defaultShaderModulesChanged=!1,this.activateViewport=l=>{En(q7,this,l),l&&(this.context.viewport=l)};const{deck:i,stats:r,viewport:s,timeline:a}=n||{};this.layers=[],this.resourceManager=new Y7({device:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,device:e,gl:e==null?void 0:e.gl,deck:i,shaderAssembler:W$(((o=e==null?void 0:e.info)==null?void 0:o.shadingLanguage)||"glsl"),defaultShaderModules:[J9],renderPass:void 0,stats:r||new Gp({id:"deck.gl"}),viewport:s||new Bu({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:a||new UR,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const i of this.layers){const r=i.getNeedsRedraw(e);n=n||r}return n}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._defaultShaderModulesChanged?"shader modules changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(n=>e.find(i=>n.id.indexOf(i)===0)):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,n){En(X7,this,n,e),this._lastRenderedLayers=e;const i=gv(e,Boolean);for(const r of i)r.context=this.context;this._updateLayers(this.layers,i)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw(`updating layers: ${e}`),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}addDefaultShaderModule(e){const{defaultShaderModules:n}=this.context;n.find(i=>i.name===e.name)||(n.push(e),this._defaultShaderModulesChanged=!0)}removeDefaultShaderModule(e){const{defaultShaderModules:n}=this.context,i=n.findIndex(r=>r.name===e.name);i>=0&&(n.splice(i,1),this._defaultShaderModulesChanged=!0)}_handleError(e,n,i){i.raiseError(n,`${e} of ${i}`)}_updateLayers(e,n){const i={};for(const a of e)i[a.id]?ut.warn(`Multiple old layers with same id ${a.id}`)():i[a.id]=a;if(this._defaultShaderModulesChanged){for(const a of e)a.setNeedsUpdate(),a.setChangeFlags({extensionsChanged:!0});this._defaultShaderModulesChanged=!1}const r=[];this._updateSublayersRecursively(n,i,r),this._finalizeOldLayers(i);let s=!1;for(const a of r)if(a.hasUniformTransition()){s=`Uniform transition in ${a}`;break}this._needsUpdate=s,this.layers=r}_updateSublayersRecursively(e,n,i){for(const r of e){r.context=this.context;const s=n[r.id];s===null&&ut.warn(`Multiple new layers with same id ${r.id}`)(),n[r.id]=null;let a=null;try{this._debug&&s!==r&&r.validateProps(),s?(this._transferLayerState(s,r),this._updateLayer(r)):this._initializeLayer(r),i.push(r),a=r.isComposite?r.getSubLayers():null}catch(o){this._handleError("matching",o,r)}a&&this._updateSublayersRecursively(a,n,i)}}_finalizeOldLayers(e){for(const n in e){const i=e[n];i&&this._finalizeLayer(i)}}_initializeLayer(e){try{e._initialize(),e.lifecycle=po.INITIALIZED}catch(n){this._handleError("initialization",n,e)}}_transferLayerState(e,n){n._transferState(e),n.lifecycle=po.MATCHED,n!==e&&(e.lifecycle=po.AWAITING_GC)}_updateLayer(e){try{e._update()}catch(n){this._handleError("update",n,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||`finalized ${e}`,e.lifecycle=po.AWAITING_FINALIZATION;try{e._finalize(),e.lifecycle=po.FINALIZED}catch(n){this._handleError("finalization",n,e)}}}function wi(t,e,n){if(t===e)return!0;if(!n||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!wi(t[i],e[i],n-1))return!1;return!0}if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;for(const s of i)if(!e.hasOwnProperty(s)||!wi(t[s],e[s],n-1))return!1;return!0}return!1}class Z7{constructor(e){this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const n=this.controllers[e];n&&n.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const n=this.controllers[e];n&&n.updateTransition()}}getViewports(e){return e?this._viewports.filter(n=>n.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(n=>{e[n.id]=n}),e}getView(e){return this.views.find(n=>n.id===e)}getViewState(e){const n=typeof e=="string"?this.getView(e):e,i=n&&this.viewState[n.getViewStateId()]||this.viewState;return n?n.filterViewState(i):i}getViewport(e){return this._viewportMap[e]}unproject(e,n){const i=this.getViewports(),r={x:e[0],y:e[1]};for(let s=i.length-1;s>=0;--s){const a=i[s];if(a.containsPixel(r)){const o=e.slice();return o[0]-=a.x,o[1]-=a.y,a.unproject(o,n)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,n){(e!==this.width||n!==this.height)&&(this.width=e,this.height=n,this.setNeedsUpdate("Size changed"))}_setViews(e){e=gv(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!wi(e,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):ut.warn("missing `viewState` or `initialViewState`")()}_createController(e,n){const i=n.type;return new i({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._eventCallbacks.onViewStateChange,onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:s=>{var a;return(a=this.getView(e.id))==null?void 0:a.makeViewport({viewState:s,width:this.width,height:this.height})}})}_updateController(e,n,i,r){const s=e.controller;if(s&&i){const a={...n,...s,id:e.id,x:i.x,y:i.y,width:i.width,height:i.height};return(!r||r.constructor!==s.type)&&(r=this._createController(e,a)),r&&r.setProps(a),r}return null}_rebuildViewports(){const{views:e}=this,n=this.controllers;this._viewports=[],this.controllers={};let i=!1;for(let r=e.length;r--;){const s=e[r],a=this.getViewState(s),o=s.makeViewport({viewState:a,width:this.width,height:this.height});let l=n[s.id];const c=!!s.controller;c&&!l&&(i=!0),(i||!c)&&l&&(l.finalize(),l=null),this.controllers[s.id]=this._updateController(s,a,o,l),o&&this._viewports.unshift(o)}for(const r in n){const s=n[r];s&&!this.controllers[r]&&s.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,n){return e.length!==n.length?!0:e.some((i,r)=>!e[r].equals(n[r]))}}const G7=/([0-9]+\.?[0-9]*)(%|px)/;function es(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=G7.exec(t);if(e&&e.length>=3){const n=e[2]==="%",i=parseFloat(e[1]);return{position:n?i/100:i,relative:n}}default:throw new Error(`Could not parse position string ${t}`)}}function ts(t,e){return t.relative?Math.round(t.position*e):t.position}class hl{constructor(e){const{id:n,x:i=0,y:r=0,width:s="100%",height:a="100%",padding:o=null}=e;this.id=n||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=es(i),this._y=es(r),this._width=es(s),this._height=es(a),this._padding=o&&{left:es(o.left||0),right:es(o.right||0),top:es(o.top||0),bottom:es(o.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e?!0:this.constructor===e.constructor&&wi(this.props,e.props,2)}clone(e){const n=this.constructor;return new n({...this.props,...e})}makeViewport({width:e,height:n,viewState:i}){i=this.filterViewState(i);const r=this.getDimensions({width:e,height:n});if(!r.height||!r.width)return null;const s=this.getViewportType(i);return new s({...i,...this.props,...r})}getViewStateId(){const{viewState:e}=this.props;return typeof e=="string"?e:(e==null?void 0:e.id)||this.id}filterViewState(e){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const n={...e};for(const i in this.props.viewState)i!=="id"&&(n[i]=this.props.viewState[i]);return n}return e}getDimensions({width:e,height:n}){const i={x:ts(this._x,e),y:ts(this._y,n),width:ts(this._width,e),height:ts(this._height,n)};return this._padding&&(i.padding={left:ts(this._padding.left,e),top:ts(this._padding.top,n),right:ts(this._padding.right,e),bottom:ts(this._padding.bottom,n)}),i}get controller(){const e=this.props.controller;return e?e===!0?{type:this.ControllerType}:typeof e=="function"?{type:e}:{type:this.ControllerType,...e}:null}}class tg{constructor(e){this._inProgress=!1,this._handle=null,this.time=0,this.settings={duration:0},this._timeline=e}get inProgress(){return this._inProgress}start(e){var n,i;this.cancel(),this.settings=e,this._inProgress=!0,(i=(n=this.settings).onStart)==null||i.call(n,this)}end(){var e,n;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(n=(e=this.settings).onEnd)==null||n.call(e,this))}cancel(){var e,n;this._inProgress&&((n=(e=this.settings).onInterrupt)==null||n.call(e,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var e,n;if(!this._inProgress)return!1;if(this._handle===null){const{_timeline:i,settings:r}=this;this._handle=i.addChannel({delay:i.getTime(),duration:r.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(n=(e=this.settings).onUpdate)==null||n.call(e,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const VT=()=>{},$_={BREAK:1,SNAP_TO_END:2,IGNORE:3},Q7=t=>t,J7=$_.BREAK;class ej{constructor(e){this._onTransitionUpdate=n=>{const{time:i,settings:{interpolator:r,startProps:s,endProps:a,duration:o,easing:l}}=n,c=l(i/o),u=r.interpolateProps(s,a,c);this.propsInTransition=this.getControllerState({...this.props,...u}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})},this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new tg(e.timeline),this.onViewStateChange=e.onViewStateChange||VT,this.onStateChange=e.onStateChange||VT}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let n=!1;const i=this.props;if(this.props=e,!i||this._shouldIgnoreViewportChange(i,e))return!1;if(this._isTransitionEnabled(e)){let r=i;if(this.transition.inProgress){const{interruption:s,endProps:a}=this.transition.settings;r={...i,...s===$_.SNAP_TO_END?a:this.propsInTransition||i}}this._triggerTransition(r,e),n=!0}else this.transition.cancel();return n}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:n,transitionInterpolator:i}=e;return(n>0||n==="auto")&&!!i}_isUpdateDueToCurrentTransition(e){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition):!1}_shouldIgnoreViewportChange(e,n){return this.transition.inProgress?this.transition.settings.interruption===$_.IGNORE||this._isUpdateDueToCurrentTransition(n):this._isTransitionEnabled(n)?n.transitionInterpolator.arePropsEqual(e,n):!0}_triggerTransition(e,n){const i=this.getControllerState(e),r=this.getControllerState(n).shortestPathFrom(i),s=n.transitionInterpolator,a=s.getDuration?s.getDuration(e,n):n.transitionDuration;if(a===0)return;const o=s.initializeProps(e,r);this.propsInTransition={};const l={duration:a,easing:n.transitionEasing||Q7,interpolator:s,interruption:n.transitionInterruption||J7,startProps:o.start,endProps:o.end,onStart:n.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(n.onTransitionInterrupt),onEnd:this._onTransitionEnd(n.onTransitionEnd)};this.transition.start(l),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return n=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e==null||e(n)}}}function mn(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}class tj{constructor(e){const{compare:n,extract:i,required:r}=e;this._propsToCompare=n,this._propsToExtract=i||n,this._requiredProps=r}arePropsEqual(e,n){for(const i of this._propsToCompare)if(!(i in e)||!(i in n)||!ou(e[i],n[i]))return!1;return!0}initializeProps(e,n){const i={},r={};for(const s of this._propsToExtract)(s in e||s in n)&&(i[s]=e[s],r[s]=n[s]);return this._checkRequiredProps(i),this._checkRequiredProps(r),{start:i,end:r}}getDuration(e,n){return n.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(n=>{const i=e[n];mn(Number.isFinite(i)||Array.isArray(i),`${n} is required for transition`)})}}const nj=["longitude","latitude","zoom","bearing","pitch"],ij=["longitude","latitude","zoom"];class $R extends tj{constructor(e={}){const n=Array.isArray(e)?e:e.transitionProps,i=Array.isArray(e)?{}:e;i.transitionProps=Array.isArray(n)?{compare:n,required:n}:n||{compare:nj,required:ij},super(i.transitionProps),this.opts=i}initializeProps(e,n){const i=super.initializeProps(e,n),{makeViewport:r,around:s}=this.opts;if(r&&s){const a=r(e),o=r(n),l=a.unproject(s);i.start.around=s,Object.assign(i.end,{around:o.project(l),aroundPosition:l,width:n.width,height:n.height})}return i}interpolateProps(e,n,i){const r={};for(const s of this._propsToExtract)r[s]=yh(e[s]||0,n[s]||0,i);if(n.aroundPosition&&this.opts.makeViewport){const s=this.opts.makeViewport({...n,...r});Object.assign(r,s.panByPosition(n.aroundPosition,yh(e.around,n.around,i)))}return r}}const Ar={transitionDuration:0},rj=300,Nf=t=>1-(1-t)*(1-t),lo={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],MULTI_PAN:["multipanstart","multipanmove","multipanend"],DOUBLE_CLICK:["dblclick"],KEYBOARD:["keydown"]},Js={};class sj{constructor(e){this.state={},this._events={},this._interactionState={isDragging:!1},this._customEvents=[],this._eventStartBlocked=null,this._panMove=!1,this.invertPan=!1,this.dragMode="rotate",this.inertia=0,this.scrollZoom=!0,this.dragPan=!0,this.dragRotate=!0,this.doubleClickZoom=!0,this.touchZoom=!0,this.touchRotate=!1,this.keyboard=!0,this.transitionManager=new ej({...e,getControllerState:n=>new this.ControllerState(n),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){var e;for(const n in this._events)this._events[n]&&((e=this.eventManager)==null||e.off(n,this.handleEvent));this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const n=this._eventStartBlocked;switch(e.type){case"panstart":return n?!1:this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return n?!1:this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"multipanstart":return n?!1:this._onMultiPanStart(e);case"multipanmove":return this._onMultiPan(e);case"multipanend":return this._onMultiPanEnd(e);case"dblclick":return this._onDoubleClick(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:n,y:i}=this.props,{offsetCenter:r}=e;return[r.x-n,r.y-i]}isPointInBounds(e,n){const{width:i,height:r}=this.props;if(n&&n.handled)return!1;const s=e[0]>=0&&e[0]<=i&&e[1]>=0&&e[1]<=r;return s&&n&&n.stopPropagation(),s}isFunctionKeyPressed(e){const{srcEvent:n}=e;return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const n=setTimeout(()=>{this._eventStartBlocked===n&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=n}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:n}=e;this.inertia=Number.isFinite(n)?n:n===!0?rj:0;const{scrollZoom:i=!0,dragPan:r=!0,dragRotate:s=!0,doubleClickZoom:a=!0,touchZoom:o=!0,touchRotate:l=!1,keyboard:c=!0}=e,u=!!this.onViewStateChange;this.toggleEvents(lo.WHEEL,u&&i),this.toggleEvents(lo.PAN,u),this.toggleEvents(lo.PINCH,u&&(o||l)),this.toggleEvents(lo.MULTI_PAN,u&&l),this.toggleEvents(lo.DOUBLE_CLICK,u&&a),this.toggleEvents(lo.KEYBOARD,u&&c),this.scrollZoom=i,this.dragPan=r,this.dragRotate=s,this.doubleClickZoom=a,this.touchZoom=o,this.touchRotate=l,this.keyboard=c}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,n){this.eventManager&&e.forEach(i=>{this._events[i]!==n&&(this._events[i]=n,n?this.eventManager.on(i,this.handleEvent):this.eventManager.off(i,this.handleEvent))})}updateViewport(e,n=null,i={}){const r={...e.getViewportProps(),...n},s=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(i),s){const a=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:this._interactionState,oldViewState:a,viewId:this.props.id})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState,viewId:this.props.id})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;let i=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(i=!i);const r=this.controllerState[i?"panStart":"rotateStart"]({pos:n});return this._panMove=i,this.updateViewport(r,Ar,{isDragging:!0}),!0}_onPan(e){return this.isDragging()?this._panMove?this._onPanMove(e):this._onPanRotate(e):!1}_onPanEnd(e){return this.isDragging()?this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e):!1}_onPanMove(e){if(!this.dragPan)return!1;const n=this.getCenter(e),i=this.controllerState.pan({pos:n});return this.updateViewport(i,Ar,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:n}=this;if(this.dragPan&&n&&e.velocity){const i=this.getCenter(e),r=[i[0]+e.velocityX*n/2,i[1]+e.velocityY*n/2],s=this.controllerState.pan({pos:r}).panEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:Nf},{isDragging:!1,isPanning:!0})}else{const i=this.controllerState.panEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const n=this.getCenter(e),i=this.controllerState.rotate({pos:n});return this.updateViewport(i,Ar,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:n}=this;if(this.dragRotate&&n&&e.velocity){const i=this.getCenter(e),r=[i[0]+e.velocityX*n/2,i[1]+e.velocityY*n/2],s=this.controllerState.rotate({pos:r}).rotateEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:Nf},{isDragging:!1,isRotating:!0})}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;e.srcEvent.preventDefault();const{speed:i=.01,smooth:r=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:s}=e;let a=2/(1+Math.exp(-Math.abs(s*i)));s<0&&a!==0&&(a=1/a);const o=r?{...this._getTransitionProps({around:n}),transitionDuration:250}:Ar,l=this.controllerState.zoom({pos:n,scale:a});return this.updateViewport(l,o,{isZooming:!0,isPanning:!0}),!0}_onMultiPanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const i=this.controllerState.rotateStart({pos:n});return this.updateViewport(i,Ar,{isDragging:!0}),!0}_onMultiPan(e){if(!this.touchRotate||!this.isDragging())return!1;const n=this.getCenter(e);n[0]-=e.deltaX;const i=this.controllerState.rotate({pos:n});return this.updateViewport(i,Ar,{isDragging:!0,isRotating:!0}),!0}_onMultiPanEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this;if(this.touchRotate&&n&&e.velocityY){const i=this.getCenter(e),r=[i[0],i[1]+=e.velocityY*n/2],s=this.controllerState.rotate({pos:r});this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:Nf},{isDragging:!1,isRotating:!0}),this.blockEvents(n)}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const i=this.controllerState.zoomStart({pos:n}).rotateStart({pos:n});return Js._startPinchRotation=e.rotation,Js._lastPinchEvent=e,this.updateViewport(i,Ar,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let n=this.controllerState;if(this.touchZoom){const{scale:i}=e,r=this.getCenter(e);n=n.zoom({pos:r,scale:i})}if(this.touchRotate){const{rotation:i}=e;n=n.rotate({deltaAngleX:Js._startPinchRotation-i})}return this.updateViewport(n,Ar,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),Js._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this,{_lastPinchEvent:i}=Js;if(this.touchZoom&&n&&i&&e.scale!==i.scale){const r=this.getCenter(e);let s=this.controllerState.rotateEnd();const a=Math.log2(e.scale),o=(a-Math.log2(i.scale))/(e.deltaTime-i.deltaTime),l=Math.pow(2,a+o*n/2);s=s.zoom({pos:r,scale:l}).zoomEnd(),this.updateViewport(s,{...this._getTransitionProps({around:r}),transitionDuration:n,transitionEasing:Nf},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(n)}else{const r=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return Js._startPinchRotation=null,Js._lastPinchEvent=null,!0}_onDoubleClick(e){if(!this.doubleClickZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const i=this.isFunctionKeyPressed(e),r=this.controllerState.zoom({pos:n,scale:i?.5:2});return this.updateViewport(r,this._getTransitionProps({around:n}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const n=this.isFunctionKeyPressed(e),{zoomSpeed:i,moveSpeed:r,rotateSpeedX:s,rotateSpeedY:a}=this.keyboard===!0?{}:this.keyboard,{controllerState:o}=this;let l;const c={};switch(e.srcEvent.code){case"Minus":l=n?o.zoomOut(i).zoomOut(i):o.zoomOut(i),c.isZooming=!0;break;case"Equal":l=n?o.zoomIn(i).zoomIn(i):o.zoomIn(i),c.isZooming=!0;break;case"ArrowLeft":n?(l=o.rotateLeft(s),c.isRotating=!0):(l=o.moveLeft(r),c.isPanning=!0);break;case"ArrowRight":n?(l=o.rotateRight(s),c.isRotating=!0):(l=o.moveRight(r),c.isPanning=!0);break;case"ArrowUp":n?(l=o.rotateUp(a),c.isRotating=!0):(l=o.moveUp(r),c.isPanning=!0);break;case"ArrowDown":n?(l=o.rotateDown(a),c.isRotating=!0):(l=o.moveDown(r),c.isPanning=!0);break;default:return!1}return this.updateViewport(l,this._getTransitionProps(),c),!0}_getTransitionProps(e){const{transition:n}=this;return!n||!n.transitionInterpolator?Ar:e?{...n,transitionInterpolator:new $R({...e,...n.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:n}}class aj{constructor(e,n){this._viewportProps=this.applyConstraints(e),this._state=n}getViewportProps(){return this._viewportProps}getState(){return this._state}}const $T=5,oj=1.2;class lj extends aj{constructor(e){const{width:n,height:i,latitude:r,longitude:s,zoom:a,bearing:o=0,pitch:l=0,altitude:c=1.5,position:u=[0,0,0],maxZoom:f=20,minZoom:d=0,maxPitch:p=60,minPitch:m=0,startPanLngLat:S,startZoomLngLat:v,startRotatePos:y,startBearing:_,startPitch:T,startZoom:b,normalize:M=!0}=e;mn(Number.isFinite(s)),mn(Number.isFinite(r)),mn(Number.isFinite(a)),super({width:n,height:i,latitude:r,longitude:s,zoom:a,bearing:o,pitch:l,altitude:c,maxZoom:f,minZoom:d,maxPitch:p,minPitch:m,normalize:M,position:u},{startPanLngLat:S,startZoomLngLat:v,startRotatePos:y,startBearing:_,startPitch:T,startZoom:b}),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:n}){const i=this.getState().startPanLngLat||this._unproject(n);if(!i)return this;const s=this.makeViewport(this.getViewportProps()).panByPosition(i,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:i=0}){const{startRotatePos:r,startBearing:s,startPitch:a}=this.getState();if(!r||s===void 0||a===void 0)return this;let o;return e?o=this._getNewRotation(e,r,a,s):o={bearing:s+n,pitch:a+i},this._getUpdatedState(o)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:i}){let{startZoom:r,startZoomLngLat:s}=this.getState();if(s||(r=this.getViewportProps().zoom,s=this._unproject(n)||this._unproject(e)),!s)return this;const{maxZoom:a,minZoom:o}=this.getViewportProps();let l=r+Math.log2(i);l=_s(l,o,a);const c=this.makeViewport({...this.getViewportProps(),zoom:l});return this._getUpdatedState({zoom:l,...c.panByPosition(s,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const n=e.getViewportProps(),i={...this.getViewportProps()},{bearing:r,longitude:s}=i;return Math.abs(r-n.bearing)>180&&(i.bearing=r<0?r+360:r-360),Math.abs(s-n.longitude)>180&&(i.longitude=s<0?s+360:s-360),i}applyConstraints(e){const{maxZoom:n,minZoom:i,zoom:r}=e;e.zoom=_s(r,i,n);const{maxPitch:s,minPitch:a,pitch:o}=e;e.pitch=_s(o,a,s);const{normalize:l=!0}=e;return l&&Object.assign(e,M$(e)),e}_zoomFromCenter(e){const{width:n,height:i}=this.getViewportProps();return this.zoom({pos:[n/2,i/2],scale:e})}_panFromCenter(e){const{width:n,height:i}=this.getViewportProps();return this.pan({startPos:[n/2,i/2],pos:[n/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_getNewRotation(e,n,i,r){const s=e[0]-n[0],a=e[1]-n[1],o=e[1],l=n[1],{width:c,height:u}=this.getViewportProps(),f=s/c;let d=0;a>0?Math.abs(u-l)>$T&&(d=a/(l-u)*oj):a<0&&l>$T&&(d=1-o/l),d=_s(d,-1,1);const{minPitch:p,maxPitch:m}=this.getViewportProps(),S=r+180*f;let v=i;return d>0?v=i+d*(m-i):d<0&&(v=i-d*(p-i)),{pitch:v,bearing:S}}}class cj extends sj{constructor(){super(...arguments),this.ControllerState=lj,this.transition={transitionDuration:300,transitionInterpolator:new $R({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})},this.dragMode="pan"}setProps(e){e.position=e.position||[0,0,0];const n=this.props;super.setProps(e),(!n||n.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class jR extends hl{constructor(e={}){super(e)}getViewportType(){return dl}get ControllerType(){return cj}}jR.displayName="MapView";const uj=new BR;function fj(t,e){const n=t.order??1/0,i=e.order??1/0;return n-i}class dj{constructor(e){this._resolvedEffects=[],this._defaultEffects=[],this.effects=[],this._context=e,this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(e){const n=this._defaultEffects;if(!n.find(i=>i.id===e.id)){const i=n.findIndex(r=>fj(r,e)>0);i<0?n.push(e):n.splice(i,0,e),e.setup(this._context),this._setEffects(this.effects)}}setProps(e){"effects"in e&&(wi(e.effects,this.effects,1)||this._setEffects(e.effects))}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}getEffects(){return this._resolvedEffects}_setEffects(e){const n={};for(const r of this.effects)n[r.id]=r;const i=[];for(const r of e){const s=n[r.id];let a=r;s&&s!==r?s.setProps?(s.setProps(r.props),a=s):s.cleanup(this._context):s||r.setup(this._context),i.push(a),delete n[r.id]}for(const r in n)n[r].cleanup(this._context);this.effects=i,this._resolvedEffects=i.concat(this._defaultEffects),e.some(r=>r instanceof BR)||this._resolvedEffects.push(uj),this._needsRedraw="effects changed"}finalize(){for(const e of this._resolvedEffects)e.cleanup(this._context);this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class hj extends hv{shouldDrawLayer(e){const{operation:n}=e.props;return n.includes("draw")||n.includes("terrain")}}const pj="deckRenderer.renderLayers";class gj{constructor(e){this.device=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new hj(e),this.pickLayersPass=new zR(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){if(!e.viewports.length)return;const n=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,i={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...e};i.effects&&this._preRender(i.effects,i);const r=this.lastPostProcessEffect?this.renderBuffers[0]:i.target;this.lastPostProcessEffect&&(i.clearColor=[0,0,0,0],i.clearCanvas=!0);const s=n.render({...i,target:r});i.effects&&(this.lastPostProcessEffect&&(i.clearCanvas=e.clearCanvas===void 0?!0:e.clearCanvas),this._postRender(i.effects,i)),this.renderCount++,En(pj,this,s,e)}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}finalize(){const{renderBuffers:e}=this;for(const n of e)n.delete();e.length=0}_preRender(e,n){this.lastPostProcessEffect=null,n.preRenderStats=n.preRenderStats||{};for(const i of e)n.preRenderStats[i.id]=i.preRender(n),i.postRender&&(this.lastPostProcessEffect=i.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:e}=this,n=this.device.canvasContext.getDrawingBufferSize(),[i,r]=n;e.length===0&&[0,1].map(s=>{const a=this.device.createTexture({sampler:{minFilter:"linear",magFilter:"linear"},width:i,height:r});e.push(this.device.createFramebuffer({id:`deck-renderbuffer-${s}`,colorAttachments:[a]}))});for(const s of e)s.resize(n)}_postRender(e,n){const{renderBuffers:i}=this,r={...n,inputBuffer:i[0],swapBuffer:i[1]};for(const s of e)if(s.postRender){r.target=s.id===this.lastPostProcessEffect?n.target:void 0;const a=s.postRender(r);r.inputBuffer=a,r.swapBuffer=a===i[0]?i[1]:i[0]}}}const mj={pickedColor:null,pickedObjectIndex:-1};function jT({pickedColors:t,decodePickingColor:e,deviceX:n,deviceY:i,deviceRadius:r,deviceRect:s}){const{x:a,y:o,width:l,height:c}=s;let u=r*r,f=-1,d=0;for(let p=0;p<c;p++){const m=p+o-i,S=m*m;if(S>u)d+=4*l;else for(let v=0;v<l;v++){if(t[d+3]-1>=0){const _=v+a-n,T=_*_+S;T<=u&&(u=T,f=d)}d+=4}}if(f>=0){const p=t.slice(f,f+4),m=e(p);if(m){const S=Math.floor(f/4/l),v=f/4-S*l;return{...m,pickedColor:p,pickedX:a+v,pickedY:o+S}}ut.error("Picked non-existent layer. Is picking buffer corrupt?")()}return mj}function HT({pickedColors:t,decodePickingColor:e}){const n=new Map;if(t){for(let i=0;i<t.length;i+=4)if(t[i+3]-1>=0){const s=t.slice(i,i+4),a=s.join(",");if(!n.has(a)){const o=e(s);o?n.set(a,{...o,color:s}):ut.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(n.values())}function j_({pickInfo:t,viewports:e,pixelRatio:n,x:i,y:r,z:s}){let a=e[0];e.length>1&&(a=yj((t==null?void 0:t.pickedViewports)||e,{x:i,y:r}));let o;if(a){const l=[i-a.x,r-a.y];s!==void 0&&(l[2]=s),o=a.unproject(l)}return{color:null,layer:null,viewport:a,index:-1,picked:!1,x:i,y:r,pixel:[i,r],coordinate:o,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:n}}function WT(t){const{pickInfo:e,lastPickedInfo:n,mode:i,layers:r}=t,{pickedColor:s,pickedLayer:a,pickedObjectIndex:o}=e,l=a?[a]:[];if(i==="hover"){const f=n.index,d=n.layerId,p=a?a.props.id:null;if(p!==d||o!==f){if(p!==d){const m=r.find(S=>S.props.id===d);m&&l.unshift(m)}n.layerId=p,n.index=o,n.info=null}}const c=j_(t),u=new Map;return u.set(null,c),l.forEach(f=>{let d={...c};f===a&&(d.color=s,d.index=o,d.picked=!0),d=H_({layer:f,info:d,mode:i});const p=d.layer;f===a&&i==="hover"&&(n.info=d),u.set(p.id,d),i==="hover"&&p.updateAutoHighlight(d)}),u}function H_({layer:t,info:e,mode:n}){for(;t&&e;){const i=e.layer||null;e.sourceLayer=i,e.layer=t,e=t.getPickingInfo({info:e,mode:n,sourceLayer:i}),t=t.parent}return e}function yj(t,e){for(let n=t.length-1;n>=0;n--){const i=t[n];if(i.containsPixel(e))return i}return t[0]}class _j{constructor(e){this._pickable=!0,this.device=e,this.pickLayersPass=new zR(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.destroy(),this.depthFBO&&this.depthFBO.destroy()}pickObjectAsync(e){return this._pickClosestObjectAsync(e)}pickObjectsAsync(e){return this._pickVisibleObjectsAsync(e)}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:n,layers:i,viewports:r},s=this.lastPickedInfo.info){const a=s&&s.layer&&s.layer.id,o=s&&s.viewport&&s.viewport.id,l=a?i.find(d=>d.id===a):null,c=o&&r.find(d=>d.id===o)||r[0],u=c&&c.unproject([e-c.x,n-c.y]);return{...s,...{x:e,y:n,viewport:c,coordinate:u,layer:l}}}_resizeBuffer(){var n,i;if(!this.pickingFBO&&(this.pickingFBO=this.device.createFramebuffer({colorAttachments:["rgba8unorm"],depthStencilAttachment:"depth16unorm"}),this.device.isTextureFormatRenderable("rgba32float"))){const r=this.device.createFramebuffer({colorAttachments:["rgba32float"],depthStencilAttachment:"depth16unorm"});this.depthFBO=r}const{canvas:e}=this.device.getDefaultCanvasContext();(n=this.pickingFBO)==null||n.resize({width:e.width,height:e.height}),(i=this.depthFBO)==null||i.resize({width:e.width,height:e.height})}_getPickable(e){if(this._pickable===!1)return null;const n=e.filter(i=>this.pickLayersPass.shouldDrawLayer(i)&&!i.isComposite);return n.length?n:null}async _pickClosestObjectAsync({layers:e,views:n,viewports:i,x:r,y:s,radius:a=0,depth:o=1,mode:l="query",unproject3D:c,onViewportActive:u,effects:f}){const d=this.device.canvasContext.cssToDeviceRatio(),p=this._getPickable(e);if(!p||i.length===0)return{result:[],emptyInfo:j_({viewports:i,x:r,y:s,pixelRatio:d})};this._resizeBuffer();const m=this.device.canvasContext.cssToDevicePixels([r,s],!0),S=[m.x+Math.floor(m.width/2),m.y+Math.floor(m.height/2)],v=Math.round(a*d),{width:y,height:_}=this.pickingFBO,T=this._getPickingRect({deviceX:S[0],deviceY:S[1],deviceRadius:v,deviceWidth:y,deviceHeight:_}),b={x:r-a,y:s-a,width:a*2+1,height:a*2+1};let M;const C=[],D=new Set;for(let F=0;F<o;F++){let L;if(T){const N=this._drawAndSample({layers:p,views:n,viewports:i,onViewportActive:u,deviceRect:T,cullRect:b,effects:f,pass:`picking:${l}`});L=jT({...N,deviceX:S[0],deviceY:S[1],deviceRadius:v,deviceRect:T})}else L={pickedColor:null,pickedObjectIndex:-1};let U;if(L.pickedLayer&&c&&this.depthFBO){const{pickedColors:N}=this._drawAndSample({layers:[L.pickedLayer],views:n,viewports:i,onViewportActive:u,deviceRect:{x:L.pickedX,y:L.pickedY,width:1,height:1},cullRect:b,effects:f,pass:`picking:${l}:z`},!0);N[3]&&(U=N[0])}L.pickedLayer&&F+1<o&&(D.add(L.pickedLayer),L.pickedLayer.disablePickingIndex(L.pickedObjectIndex)),M=WT({pickInfo:L,lastPickedInfo:this.lastPickedInfo,mode:l,layers:p,viewports:i,x:r,y:s,z:U,pixelRatio:d});for(const N of M.values())N.layer&&C.push(N);if(!L.pickedColor)break}for(const F of D)F.restorePickingColors();return{result:C,emptyInfo:M.get(null)}}_pickClosestObject({layers:e,views:n,viewports:i,x:r,y:s,radius:a=0,depth:o=1,mode:l="query",unproject3D:c,onViewportActive:u,effects:f}){const d=this.device.canvasContext.cssToDeviceRatio(),p=this._getPickable(e);if(!p||i.length===0)return{result:[],emptyInfo:j_({viewports:i,x:r,y:s,pixelRatio:d})};this._resizeBuffer();const m=this.device.canvasContext.cssToDevicePixels([r,s],!0),S=[m.x+Math.floor(m.width/2),m.y+Math.floor(m.height/2)],v=Math.round(a*d),{width:y,height:_}=this.pickingFBO,T=this._getPickingRect({deviceX:S[0],deviceY:S[1],deviceRadius:v,deviceWidth:y,deviceHeight:_}),b={x:r-a,y:s-a,width:a*2+1,height:a*2+1};let M;const C=[],D=new Set;for(let F=0;F<o;F++){let L;if(T){const N=this._drawAndSample({layers:p,views:n,viewports:i,onViewportActive:u,deviceRect:T,cullRect:b,effects:f,pass:`picking:${l}`});L=jT({...N,deviceX:S[0],deviceY:S[1],deviceRadius:v,deviceRect:T})}else L={pickedColor:null,pickedObjectIndex:-1};let U;if(L.pickedLayer&&c&&this.depthFBO){const{pickedColors:N}=this._drawAndSample({layers:[L.pickedLayer],views:n,viewports:i,onViewportActive:u,deviceRect:{x:L.pickedX,y:L.pickedY,width:1,height:1},cullRect:b,effects:f,pass:`picking:${l}:z`},!0);N[3]&&(U=N[0])}L.pickedLayer&&F+1<o&&(D.add(L.pickedLayer),L.pickedLayer.disablePickingIndex(L.pickedObjectIndex)),M=WT({pickInfo:L,lastPickedInfo:this.lastPickedInfo,mode:l,layers:p,viewports:i,x:r,y:s,z:U,pixelRatio:d});for(const N of M.values())N.layer&&C.push(N);if(!L.pickedColor)break}for(const F of D)F.restorePickingColors();return{result:C,emptyInfo:M.get(null)}}async _pickVisibleObjectsAsync({layers:e,views:n,viewports:i,x:r,y:s,width:a=1,height:o=1,mode:l="query",maxObjects:c=null,onViewportActive:u,effects:f}){const d=this._getPickable(e);if(!d||i.length===0)return[];this._resizeBuffer();const p=this.device.canvasContext.cssToDeviceRatio(),m=this.device.canvasContext.cssToDevicePixels([r,s],!0),S=m.x,v=m.y+m.height,y=this.device.canvasContext.cssToDevicePixels([r+a,s+o],!0),_=y.x+y.width,T=y.y,b={x:S,y:T,width:_-S,height:v-T},M=this._drawAndSample({layers:d,views:n,viewports:i,onViewportActive:u,deviceRect:b,cullRect:{x:r,y:s,width:a,height:o},effects:f,pass:`picking:${l}`}),C=HT(M),D=new Map,F=[],L=Number.isFinite(c);for(let U=0;U<C.length&&!(L&&F.length>=c);U++){const N=C[U];let A={color:N.pickedColor,layer:null,index:N.pickedObjectIndex,picked:!0,x:r,y:s,pixelRatio:p};A=H_({layer:N.pickedLayer,info:A,mode:l});const Y=A.layer.id;D.has(Y)||D.set(Y,new Set);const k=D.get(Y),j=A.object??A.index;k.has(j)||(k.add(j),F.push(A))}return F}_pickVisibleObjects({layers:e,views:n,viewports:i,x:r,y:s,width:a=1,height:o=1,mode:l="query",maxObjects:c=null,onViewportActive:u,effects:f}){const d=this._getPickable(e);if(!d||i.length===0)return[];this._resizeBuffer();const p=this.device.canvasContext.cssToDeviceRatio(),m=this.device.canvasContext.cssToDevicePixels([r,s],!0),S=m.x,v=m.y+m.height,y=this.device.canvasContext.cssToDevicePixels([r+a,s+o],!0),_=y.x+y.width,T=y.y,b={x:S,y:T,width:_-S,height:v-T},M=this._drawAndSample({layers:d,views:n,viewports:i,onViewportActive:u,deviceRect:b,cullRect:{x:r,y:s,width:a,height:o},effects:f,pass:`picking:${l}`}),C=HT(M),D=new Map,F=[],L=Number.isFinite(c);for(let U=0;U<C.length&&!(L&&F.length>=c);U++){const N=C[U];let A={color:N.pickedColor,layer:null,index:N.pickedObjectIndex,picked:!0,x:r,y:s,pixelRatio:p};A=H_({layer:N.pickedLayer,info:A,mode:l});const Y=A.layer.id;D.has(Y)||D.set(Y,new Set);const k=D.get(Y),j=A.object??A.index;k.has(j)||(k.add(j),F.push(A))}return F}async _drawAndSampleAsync({layers:e,views:n,viewports:i,onViewportActive:r,deviceRect:s,cullRect:a,effects:o,pass:l},c=!1){const u=c?this.depthFBO:this.pickingFBO,f={layers:e,layerFilter:this.layerFilter,views:n,viewports:i,onViewportActive:r,pickingFBO:u,deviceRect:s,cullRect:a,effects:o,pass:l,pickZ:c,preRenderStats:{},isPicking:!0};for(const _ of o)_.useInPicking&&(f.preRenderStats[_.id]=_.preRender(f));const{decodePickingColor:d}=this.pickLayersPass.render(f),{x:p,y:m,width:S,height:v}=s,y=new(c?Float32Array:Uint8Array)(S*v*4);return this.device.readPixelsToArrayWebGL(u,{sourceX:p,sourceY:m,sourceWidth:S,sourceHeight:v,target:y}),{pickedColors:y,decodePickingColor:d}}_drawAndSample({layers:e,views:n,viewports:i,onViewportActive:r,deviceRect:s,cullRect:a,effects:o,pass:l},c=!1){const u=c?this.depthFBO:this.pickingFBO,f={layers:e,layerFilter:this.layerFilter,views:n,viewports:i,onViewportActive:r,pickingFBO:u,deviceRect:s,cullRect:a,effects:o,pass:l,pickZ:c,preRenderStats:{},isPicking:!0};for(const _ of o)_.useInPicking&&(f.preRenderStats[_.id]=_.preRender(f));const{decodePickingColor:d}=this.pickLayersPass.render(f),{x:p,y:m,width:S,height:v}=s,y=new(c?Float32Array:Uint8Array)(S*v*4);return this.device.readPixelsToArrayWebGL(u,{sourceX:p,sourceY:m,sourceWidth:S,sourceHeight:v,target:y}),{pickedColors:y,decodePickingColor:d}}_getPickingRect({deviceX:e,deviceY:n,deviceRadius:i,deviceWidth:r,deviceHeight:s}){const a=Math.max(0,e-i),o=Math.max(0,n-i),l=Math.min(r,e+i+1)-a,c=Math.min(s,n+i+1)-o;return l<=0||c<=0?null:{x:a,y:o,width:l,height:c}}}const bj={"top-left":{top:0,left:0},"top-right":{top:0,right:0},"bottom-left":{bottom:0,left:0},"bottom-right":{bottom:0,right:0},fill:{top:0,left:0,bottom:0,right:0}},vj="top-left",YT="__root";class Tj{constructor({deck:e,parentElement:n}){this.defaultWidgets=[],this.widgets=[],this.resolvedWidgets=[],this.containers={},this.lastViewports={},this.deck=e,n==null||n.classList.add("deck-widget-container"),this.parentElement=n}getWidgets(){return this.resolvedWidgets}setProps(e){if(e.widgets&&!wi(e.widgets,this.widgets,1)){const n=e.widgets.filter(Boolean);this._setWidgets(n)}}finalize(){for(const e of this.getWidgets())this._removeWidget(e);this.defaultWidgets.length=0,this.resolvedWidgets.length=0;for(const e in this.containers)this.containers[e].remove()}addDefault(e){this.defaultWidgets.find(n=>n.id===e.id)||(this._addWidget(e),this.defaultWidgets.push(e),this._setWidgets(this.widgets))}onRedraw({viewports:e,layers:n}){var r,s;const i=e.reduce((a,o)=>(a[o.id]=o,a),{});for(const a of this.getWidgets()){const{viewId:o}=a;if(o){const l=i[o];l&&(a.onViewportChange&&a.onViewportChange(l),(r=a.onRedraw)==null||r.call(a,{viewports:[l],layers:n}))}else{if(a.onViewportChange)for(const l of e)a.onViewportChange(l);(s=a.onRedraw)==null||s.call(a,{viewports:e,layers:n})}}this.lastViewports=i,this._updateContainers()}onHover(e,n){var i,r;for(const s of this.getWidgets()){const{viewId:a}=s;(!a||a===((i=e.viewport)==null?void 0:i.id))&&((r=s.onHover)==null||r.call(s,e,n))}}onEvent(e,n){var r,s;const i=k_[n.type];if(i)for(const a of this.getWidgets()){const{viewId:o}=a;(!o||o===((r=e.viewport)==null?void 0:r.id))&&((s=a[i])==null||s.call(a,e,n))}}_setWidgets(e){const n={};for(const i of this.resolvedWidgets)n[i.id]=i;this.resolvedWidgets.length=0;for(const i of this.defaultWidgets)n[i.id]=null,this.resolvedWidgets.push(i);for(let i of e){const r=n[i.id];r?r.viewId!==i.viewId||r.placement!==i.placement?(this._removeWidget(r),this._addWidget(i)):i!==r&&(r.setProps(i.props),i=r):this._addWidget(i),n[i.id]=null,this.resolvedWidgets.push(i)}for(const i in n){const r=n[i];r&&this._removeWidget(r)}this.widgets=e}_addWidget(e){const{viewId:n=null,placement:i=vj}=e;e.widgetManager=this,e.deck=this.deck,e.rootElement=e._onAdd({deck:this.deck,viewId:n}),e.rootElement&&this._getContainer(n,i).append(e.rootElement),e.updateHTML()}_removeWidget(e){var n;(n=e.onRemove)==null||n.call(e),e.rootElement&&e.rootElement.remove(),e.rootElement=void 0,e.deck=void 0,e.widgetManager=void 0}_getContainer(e,n){var a;const i=e||YT;let r=this.containers[i];r||(r=document.createElement("div"),r.style.pointerEvents="none",r.style.position="absolute",r.style.overflow="hidden",(a=this.parentElement)==null||a.append(r),this.containers[i]=r);let s=r.querySelector(`.${n}`);return s||(s=globalThis.document.createElement("div"),s.className=n,s.style.position="absolute",s.style.zIndex="2",Object.assign(s.style,bj[n]),r.append(s)),s}_updateContainers(){const e=this.deck.width,n=this.deck.height;for(const i in this.containers){const r=this.lastViewports[i]||null,s=i===YT||r,a=this.containers[i];s?(a.style.display="block",a.style.left=`${r?r.x:0}px`,a.style.top=`${r?r.y:0}px`,a.style.width=`${r?r.width:e}px`,a.style.height=`${r?r.height:n}px`):a.style.display="none"}}}function XT(t,e){e&&Object.entries(e).map(([n,i])=>{n.startsWith("--")?t.style.setProperty(n,i):t.style[n]=i})}function xj(t,e){e&&Object.keys(e).map(n=>{n.startsWith("--")?t.style.removeProperty(n):t.style[n]=""})}class mv{constructor(e){this.viewId=null,this.props={...this.constructor.defaultProps,...e},this.id=this.props.id}setProps(e){const n=this.props,i=this.rootElement;i&&n.className!==e.className&&(n.className&&i.classList.remove(n.className),e.className&&i.classList.add(e.className)),i&&!wi(n.style,e.style,1)&&(xj(i,n.style),XT(i,e.style)),Object.assign(this.props,e),this.updateHTML()}updateHTML(){this.rootElement&&this.onRenderHTML(this.rootElement)}onCreateRootElement(){const e=["deck-widget",this.className,this.props.className],n=document.createElement("div");return e.filter(i=>typeof i=="string"&&i.length>0).forEach(i=>n.classList.add(i)),XT(n,this.props.style),n}_onAdd(e){return this.onAdd(e)??this.onCreateRootElement()}onAdd(e){}onRemove(){}onViewportChange(e){}onRedraw(e){}onHover(e,n){}onClick(e,n){}onDrag(e,n){}onDragStart(e,n){}onDragEnd(e,n){}}mv.defaultProps={id:"widget",style:{},className:""};const Sj={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class HR extends mv{constructor(e={}){super(e),this.id="default-tooltip",this.placement="fill",this.className="deck-tooltip",this.isVisible=!1,this.setProps(e)}onCreateRootElement(){const e=document.createElement("div");return e.className=this.className,Object.assign(e.style,Sj),e}onRenderHTML(e){}onViewportChange(e){var n;this.isVisible&&e.id===((n=this.lastViewport)==null?void 0:n.id)&&!e.equals(this.lastViewport)&&this.setTooltip(null),this.lastViewport=e}onHover(e){const{deck:n}=this,i=n&&n.props.getTooltip;if(!i)return;const r=i(e);this.setTooltip(r,e.x,e.y)}setTooltip(e,n,i){const r=this.rootElement;if(r){if(typeof e=="string")r.innerText=e;else if(e)e.text&&(r.innerText=e.text),e.html&&(r.innerHTML=e.html),e.className&&(r.className=e.className);else{this.isVisible=!1,r.style.display="none";return}this.isVisible=!0,r.style.display="block",r.style.transform=`translate(${n}px, ${i}px)`,e&&typeof e=="object"&&"style"in e&&Object.assign(r.style,e.style)}}}HR.defaultProps={...mv.defaultProps};const wj="modulepreload",Aj=function(t){return"/google-timeline-viewer/"+t},qT={},KT=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=Aj(l),l in qT)return;qT[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":wj,c||(f.as="script"),f.crossOrigin="",f.href=l,o&&f.setAttribute("nonce",o),document.head.appendChild(f),c)return new Promise((d,p)=>{f.addEventListener("load",d),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return r.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};var Ro;(function(t){t[t.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",t[t.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",t[t.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t[t.ZERO=0]="ZERO",t[t.ONE=1]="ONE",t[t.SRC_COLOR=768]="SRC_COLOR",t[t.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",t[t.SRC_ALPHA=770]="SRC_ALPHA",t[t.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",t[t.DST_ALPHA=772]="DST_ALPHA",t[t.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",t[t.DST_COLOR=774]="DST_COLOR",t[t.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",t[t.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",t[t.CONSTANT_COLOR=32769]="CONSTANT_COLOR",t[t.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",t[t.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",t[t.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",t[t.FUNC_ADD=32774]="FUNC_ADD",t[t.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",t[t.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",t[t.BLEND_EQUATION=32777]="BLEND_EQUATION",t[t.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",t[t.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",t[t.BLEND_DST_RGB=32968]="BLEND_DST_RGB",t[t.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",t[t.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",t[t.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",t[t.BLEND_COLOR=32773]="BLEND_COLOR",t[t.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",t[t.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",t[t.LINE_WIDTH=2849]="LINE_WIDTH",t[t.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",t[t.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",t[t.CULL_FACE_MODE=2885]="CULL_FACE_MODE",t[t.FRONT_FACE=2886]="FRONT_FACE",t[t.DEPTH_RANGE=2928]="DEPTH_RANGE",t[t.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",t[t.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",t[t.DEPTH_FUNC=2932]="DEPTH_FUNC",t[t.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",t[t.STENCIL_FUNC=2962]="STENCIL_FUNC",t[t.STENCIL_FAIL=2964]="STENCIL_FAIL",t[t.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",t[t.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",t[t.STENCIL_REF=2967]="STENCIL_REF",t[t.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",t[t.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",t[t.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",t[t.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",t[t.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",t[t.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",t[t.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",t[t.VIEWPORT=2978]="VIEWPORT",t[t.SCISSOR_BOX=3088]="SCISSOR_BOX",t[t.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",t[t.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",t[t.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",t[t.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",t[t.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",t[t.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",t[t.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",t[t.RED_BITS=3410]="RED_BITS",t[t.GREEN_BITS=3411]="GREEN_BITS",t[t.BLUE_BITS=3412]="BLUE_BITS",t[t.ALPHA_BITS=3413]="ALPHA_BITS",t[t.DEPTH_BITS=3414]="DEPTH_BITS",t[t.STENCIL_BITS=3415]="STENCIL_BITS",t[t.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",t[t.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",t[t.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",t[t.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",t[t.SAMPLES=32937]="SAMPLES",t[t.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",t[t.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",t[t.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",t[t.VENDOR=7936]="VENDOR",t[t.RENDERER=7937]="RENDERER",t[t.VERSION=7938]="VERSION",t[t.IMPLEMENTATION_COLOR_READ_TYPE=35738]="IMPLEMENTATION_COLOR_READ_TYPE",t[t.IMPLEMENTATION_COLOR_READ_FORMAT=35739]="IMPLEMENTATION_COLOR_READ_FORMAT",t[t.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",t[t.STATIC_DRAW=35044]="STATIC_DRAW",t[t.STREAM_DRAW=35040]="STREAM_DRAW",t[t.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.BUFFER_SIZE=34660]="BUFFER_SIZE",t[t.BUFFER_USAGE=34661]="BUFFER_USAGE",t[t.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",t[t.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",t[t.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",t[t.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",t[t.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",t[t.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",t[t.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",t[t.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",t[t.CULL_FACE=2884]="CULL_FACE",t[t.FRONT=1028]="FRONT",t[t.BACK=1029]="BACK",t[t.FRONT_AND_BACK=1032]="FRONT_AND_BACK",t[t.BLEND=3042]="BLEND",t[t.DEPTH_TEST=2929]="DEPTH_TEST",t[t.DITHER=3024]="DITHER",t[t.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",t[t.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",t[t.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",t[t.SCISSOR_TEST=3089]="SCISSOR_TEST",t[t.STENCIL_TEST=2960]="STENCIL_TEST",t[t.NO_ERROR=0]="NO_ERROR",t[t.INVALID_ENUM=1280]="INVALID_ENUM",t[t.INVALID_VALUE=1281]="INVALID_VALUE",t[t.INVALID_OPERATION=1282]="INVALID_OPERATION",t[t.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",t[t.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",t[t.CW=2304]="CW",t[t.CCW=2305]="CCW",t[t.DONT_CARE=4352]="DONT_CARE",t[t.FASTEST=4353]="FASTEST",t[t.NICEST=4354]="NICEST",t[t.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.INT=5124]="INT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.FLOAT=5126]="FLOAT",t[t.DOUBLE=5130]="DOUBLE",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.ALPHA=6406]="ALPHA",t[t.RGB=6407]="RGB",t[t.RGBA=6408]="RGBA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",t[t.VERTEX_SHADER=35633]="VERTEX_SHADER",t[t.COMPILE_STATUS=35713]="COMPILE_STATUS",t[t.DELETE_STATUS=35712]="DELETE_STATUS",t[t.LINK_STATUS=35714]="LINK_STATUS",t[t.VALIDATE_STATUS=35715]="VALIDATE_STATUS",t[t.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",t[t.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",t[t.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",t[t.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",t[t.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",t[t.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",t[t.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",t[t.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",t[t.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",t[t.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",t[t.SHADER_TYPE=35663]="SHADER_TYPE",t[t.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",t[t.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",t[t.NEVER=512]="NEVER",t[t.LESS=513]="LESS",t[t.EQUAL=514]="EQUAL",t[t.LEQUAL=515]="LEQUAL",t[t.GREATER=516]="GREATER",t[t.NOTEQUAL=517]="NOTEQUAL",t[t.GEQUAL=518]="GEQUAL",t[t.ALWAYS=519]="ALWAYS",t[t.KEEP=7680]="KEEP",t[t.REPLACE=7681]="REPLACE",t[t.INCR=7682]="INCR",t[t.DECR=7683]="DECR",t[t.INVERT=5386]="INVERT",t[t.INCR_WRAP=34055]="INCR_WRAP",t[t.DECR_WRAP=34056]="DECR_WRAP",t[t.NEAREST=9728]="NEAREST",t[t.LINEAR=9729]="LINEAR",t[t.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",t[t.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",t[t.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",t[t.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",t[t.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",t[t.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",t[t.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",t[t.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE=5890]="TEXTURE",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t[t.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",t[t.TEXTURE0=33984]="TEXTURE0",t[t.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",t[t.REPEAT=10497]="REPEAT",t[t.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t[t.TEXTURE_WIDTH=4096]="TEXTURE_WIDTH",t[t.TEXTURE_HEIGHT=4097]="TEXTURE_HEIGHT",t[t.FLOAT_VEC2=35664]="FLOAT_VEC2",t[t.FLOAT_VEC3=35665]="FLOAT_VEC3",t[t.FLOAT_VEC4=35666]="FLOAT_VEC4",t[t.INT_VEC2=35667]="INT_VEC2",t[t.INT_VEC3=35668]="INT_VEC3",t[t.INT_VEC4=35669]="INT_VEC4",t[t.BOOL=35670]="BOOL",t[t.BOOL_VEC2=35671]="BOOL_VEC2",t[t.BOOL_VEC3=35672]="BOOL_VEC3",t[t.BOOL_VEC4=35673]="BOOL_VEC4",t[t.FLOAT_MAT2=35674]="FLOAT_MAT2",t[t.FLOAT_MAT3=35675]="FLOAT_MAT3",t[t.FLOAT_MAT4=35676]="FLOAT_MAT4",t[t.SAMPLER_2D=35678]="SAMPLER_2D",t[t.SAMPLER_CUBE=35680]="SAMPLER_CUBE",t[t.LOW_FLOAT=36336]="LOW_FLOAT",t[t.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",t[t.HIGH_FLOAT=36338]="HIGH_FLOAT",t[t.LOW_INT=36339]="LOW_INT",t[t.MEDIUM_INT=36340]="MEDIUM_INT",t[t.HIGH_INT=36341]="HIGH_INT",t[t.FRAMEBUFFER=36160]="FRAMEBUFFER",t[t.RENDERBUFFER=36161]="RENDERBUFFER",t[t.RGBA4=32854]="RGBA4",t[t.RGB5_A1=32855]="RGB5_A1",t[t.RGB565=36194]="RGB565",t[t.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",t[t.STENCIL_INDEX=6401]="STENCIL_INDEX",t[t.STENCIL_INDEX8=36168]="STENCIL_INDEX8",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t[t.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",t[t.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",t[t.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",t[t.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",t[t.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",t[t.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",t[t.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",t[t.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",t[t.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",t[t.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",t[t.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",t[t.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",t[t.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",t[t.NONE=0]="NONE",t[t.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",t[t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",t[t.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",t[t.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",t[t.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",t[t.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",t[t.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER",t[t.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",t[t.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",t[t.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",t[t.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",t[t.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",t[t.READ_BUFFER=3074]="READ_BUFFER",t[t.UNPACK_ROW_LENGTH=3314]="UNPACK_ROW_LENGTH",t[t.UNPACK_SKIP_ROWS=3315]="UNPACK_SKIP_ROWS",t[t.UNPACK_SKIP_PIXELS=3316]="UNPACK_SKIP_PIXELS",t[t.PACK_ROW_LENGTH=3330]="PACK_ROW_LENGTH",t[t.PACK_SKIP_ROWS=3331]="PACK_SKIP_ROWS",t[t.PACK_SKIP_PIXELS=3332]="PACK_SKIP_PIXELS",t[t.TEXTURE_BINDING_3D=32874]="TEXTURE_BINDING_3D",t[t.UNPACK_SKIP_IMAGES=32877]="UNPACK_SKIP_IMAGES",t[t.UNPACK_IMAGE_HEIGHT=32878]="UNPACK_IMAGE_HEIGHT",t[t.MAX_3D_TEXTURE_SIZE=32883]="MAX_3D_TEXTURE_SIZE",t[t.MAX_ELEMENTS_VERTICES=33e3]="MAX_ELEMENTS_VERTICES",t[t.MAX_ELEMENTS_INDICES=33001]="MAX_ELEMENTS_INDICES",t[t.MAX_TEXTURE_LOD_BIAS=34045]="MAX_TEXTURE_LOD_BIAS",t[t.MAX_FRAGMENT_UNIFORM_COMPONENTS=35657]="MAX_FRAGMENT_UNIFORM_COMPONENTS",t[t.MAX_VERTEX_UNIFORM_COMPONENTS=35658]="MAX_VERTEX_UNIFORM_COMPONENTS",t[t.MAX_ARRAY_TEXTURE_LAYERS=35071]="MAX_ARRAY_TEXTURE_LAYERS",t[t.MIN_PROGRAM_TEXEL_OFFSET=35076]="MIN_PROGRAM_TEXEL_OFFSET",t[t.MAX_PROGRAM_TEXEL_OFFSET=35077]="MAX_PROGRAM_TEXEL_OFFSET",t[t.MAX_VARYING_COMPONENTS=35659]="MAX_VARYING_COMPONENTS",t[t.FRAGMENT_SHADER_DERIVATIVE_HINT=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT",t[t.RASTERIZER_DISCARD=35977]="RASTERIZER_DISCARD",t[t.VERTEX_ARRAY_BINDING=34229]="VERTEX_ARRAY_BINDING",t[t.MAX_VERTEX_OUTPUT_COMPONENTS=37154]="MAX_VERTEX_OUTPUT_COMPONENTS",t[t.MAX_FRAGMENT_INPUT_COMPONENTS=37157]="MAX_FRAGMENT_INPUT_COMPONENTS",t[t.MAX_SERVER_WAIT_TIMEOUT=37137]="MAX_SERVER_WAIT_TIMEOUT",t[t.MAX_ELEMENT_INDEX=36203]="MAX_ELEMENT_INDEX",t[t.RED=6403]="RED",t[t.RGB8=32849]="RGB8",t[t.RGBA8=32856]="RGBA8",t[t.RGB10_A2=32857]="RGB10_A2",t[t.TEXTURE_3D=32879]="TEXTURE_3D",t[t.TEXTURE_WRAP_R=32882]="TEXTURE_WRAP_R",t[t.TEXTURE_MIN_LOD=33082]="TEXTURE_MIN_LOD",t[t.TEXTURE_MAX_LOD=33083]="TEXTURE_MAX_LOD",t[t.TEXTURE_BASE_LEVEL=33084]="TEXTURE_BASE_LEVEL",t[t.TEXTURE_MAX_LEVEL=33085]="TEXTURE_MAX_LEVEL",t[t.TEXTURE_COMPARE_MODE=34892]="TEXTURE_COMPARE_MODE",t[t.TEXTURE_COMPARE_FUNC=34893]="TEXTURE_COMPARE_FUNC",t[t.SRGB=35904]="SRGB",t[t.SRGB8=35905]="SRGB8",t[t.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",t[t.COMPARE_REF_TO_TEXTURE=34894]="COMPARE_REF_TO_TEXTURE",t[t.RGBA32F=34836]="RGBA32F",t[t.RGB32F=34837]="RGB32F",t[t.RGBA16F=34842]="RGBA16F",t[t.RGB16F=34843]="RGB16F",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_BINDING_2D_ARRAY=35869]="TEXTURE_BINDING_2D_ARRAY",t[t.R11F_G11F_B10F=35898]="R11F_G11F_B10F",t[t.RGB9_E5=35901]="RGB9_E5",t[t.RGBA32UI=36208]="RGBA32UI",t[t.RGB32UI=36209]="RGB32UI",t[t.RGBA16UI=36214]="RGBA16UI",t[t.RGB16UI=36215]="RGB16UI",t[t.RGBA8UI=36220]="RGBA8UI",t[t.RGB8UI=36221]="RGB8UI",t[t.RGBA32I=36226]="RGBA32I",t[t.RGB32I=36227]="RGB32I",t[t.RGBA16I=36232]="RGBA16I",t[t.RGB16I=36233]="RGB16I",t[t.RGBA8I=36238]="RGBA8I",t[t.RGB8I=36239]="RGB8I",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.R8=33321]="R8",t[t.RG8=33323]="RG8",t[t.R16F=33325]="R16F",t[t.R32F=33326]="R32F",t[t.RG16F=33327]="RG16F",t[t.RG32F=33328]="RG32F",t[t.R8I=33329]="R8I",t[t.R8UI=33330]="R8UI",t[t.R16I=33331]="R16I",t[t.R16UI=33332]="R16UI",t[t.R32I=33333]="R32I",t[t.R32UI=33334]="R32UI",t[t.RG8I=33335]="RG8I",t[t.RG8UI=33336]="RG8UI",t[t.RG16I=33337]="RG16I",t[t.RG16UI=33338]="RG16UI",t[t.RG32I=33339]="RG32I",t[t.RG32UI=33340]="RG32UI",t[t.R8_SNORM=36756]="R8_SNORM",t[t.RG8_SNORM=36757]="RG8_SNORM",t[t.RGB8_SNORM=36758]="RGB8_SNORM",t[t.RGBA8_SNORM=36759]="RGBA8_SNORM",t[t.RGB10_A2UI=36975]="RGB10_A2UI",t[t.TEXTURE_IMMUTABLE_FORMAT=37167]="TEXTURE_IMMUTABLE_FORMAT",t[t.TEXTURE_IMMUTABLE_LEVELS=33503]="TEXTURE_IMMUTABLE_LEVELS",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.HALF_FLOAT=5131]="HALF_FLOAT",t[t.RG=33319]="RG",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.INT_2_10_10_10_REV=36255]="INT_2_10_10_10_REV",t[t.CURRENT_QUERY=34917]="CURRENT_QUERY",t[t.QUERY_RESULT=34918]="QUERY_RESULT",t[t.QUERY_RESULT_AVAILABLE=34919]="QUERY_RESULT_AVAILABLE",t[t.ANY_SAMPLES_PASSED=35887]="ANY_SAMPLES_PASSED",t[t.ANY_SAMPLES_PASSED_CONSERVATIVE=36202]="ANY_SAMPLES_PASSED_CONSERVATIVE",t[t.MAX_DRAW_BUFFERS=34852]="MAX_DRAW_BUFFERS",t[t.DRAW_BUFFER0=34853]="DRAW_BUFFER0",t[t.DRAW_BUFFER1=34854]="DRAW_BUFFER1",t[t.DRAW_BUFFER2=34855]="DRAW_BUFFER2",t[t.DRAW_BUFFER3=34856]="DRAW_BUFFER3",t[t.DRAW_BUFFER4=34857]="DRAW_BUFFER4",t[t.DRAW_BUFFER5=34858]="DRAW_BUFFER5",t[t.DRAW_BUFFER6=34859]="DRAW_BUFFER6",t[t.DRAW_BUFFER7=34860]="DRAW_BUFFER7",t[t.DRAW_BUFFER8=34861]="DRAW_BUFFER8",t[t.DRAW_BUFFER9=34862]="DRAW_BUFFER9",t[t.DRAW_BUFFER10=34863]="DRAW_BUFFER10",t[t.DRAW_BUFFER11=34864]="DRAW_BUFFER11",t[t.DRAW_BUFFER12=34865]="DRAW_BUFFER12",t[t.DRAW_BUFFER13=34866]="DRAW_BUFFER13",t[t.DRAW_BUFFER14=34867]="DRAW_BUFFER14",t[t.DRAW_BUFFER15=34868]="DRAW_BUFFER15",t[t.MAX_COLOR_ATTACHMENTS=36063]="MAX_COLOR_ATTACHMENTS",t[t.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",t[t.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",t[t.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",t[t.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",t[t.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",t[t.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",t[t.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",t[t.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",t[t.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",t[t.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",t[t.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",t[t.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",t[t.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",t[t.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",t[t.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15",t[t.SAMPLER_3D=35679]="SAMPLER_3D",t[t.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",t[t.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",t[t.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",t[t.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",t[t.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",t[t.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",t[t.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",t[t.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",t[t.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",t[t.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",t[t.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",t[t.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY",t[t.MAX_SAMPLES=36183]="MAX_SAMPLES",t[t.SAMPLER_BINDING=35097]="SAMPLER_BINDING",t[t.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",t[t.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",t[t.PIXEL_PACK_BUFFER_BINDING=35053]="PIXEL_PACK_BUFFER_BINDING",t[t.PIXEL_UNPACK_BUFFER_BINDING=35055]="PIXEL_UNPACK_BUFFER_BINDING",t[t.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",t[t.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",t[t.COPY_READ_BUFFER_BINDING=36662]="COPY_READ_BUFFER_BINDING",t[t.COPY_WRITE_BUFFER_BINDING=36663]="COPY_WRITE_BUFFER_BINDING",t[t.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",t[t.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",t[t.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",t[t.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",t[t.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",t[t.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",t[t.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",t[t.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",t[t.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",t[t.UNSIGNED_NORMALIZED=35863]="UNSIGNED_NORMALIZED",t[t.SIGNED_NORMALIZED=36764]="SIGNED_NORMALIZED",t[t.VERTEX_ATTRIB_ARRAY_INTEGER=35069]="VERTEX_ATTRIB_ARRAY_INTEGER",t[t.VERTEX_ATTRIB_ARRAY_DIVISOR=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR",t[t.TRANSFORM_FEEDBACK_BUFFER_MODE=35967]="TRANSFORM_FEEDBACK_BUFFER_MODE",t[t.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS=35968]="MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",t[t.TRANSFORM_FEEDBACK_VARYINGS=35971]="TRANSFORM_FEEDBACK_VARYINGS",t[t.TRANSFORM_FEEDBACK_BUFFER_START=35972]="TRANSFORM_FEEDBACK_BUFFER_START",t[t.TRANSFORM_FEEDBACK_BUFFER_SIZE=35973]="TRANSFORM_FEEDBACK_BUFFER_SIZE",t[t.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN=35976]="TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",t[t.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS=35978]="MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",t[t.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS=35979]="MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",t[t.INTERLEAVED_ATTRIBS=35980]="INTERLEAVED_ATTRIBS",t[t.SEPARATE_ATTRIBS=35981]="SEPARATE_ATTRIBS",t[t.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER",t[t.TRANSFORM_FEEDBACK_BUFFER_BINDING=35983]="TRANSFORM_FEEDBACK_BUFFER_BINDING",t[t.TRANSFORM_FEEDBACK=36386]="TRANSFORM_FEEDBACK",t[t.TRANSFORM_FEEDBACK_PAUSED=36387]="TRANSFORM_FEEDBACK_PAUSED",t[t.TRANSFORM_FEEDBACK_ACTIVE=36388]="TRANSFORM_FEEDBACK_ACTIVE",t[t.TRANSFORM_FEEDBACK_BINDING=36389]="TRANSFORM_FEEDBACK_BINDING",t[t.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",t[t.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",t[t.FRAMEBUFFER_ATTACHMENT_RED_SIZE=33298]="FRAMEBUFFER_ATTACHMENT_RED_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE=33299]="FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE=33300]="FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE=33301]="FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE=33302]="FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE=33303]="FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",t[t.FRAMEBUFFER_DEFAULT=33304]="FRAMEBUFFER_DEFAULT",t[t.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",t[t.DRAW_FRAMEBUFFER_BINDING=36006]="DRAW_FRAMEBUFFER_BINDING",t[t.READ_FRAMEBUFFER_BINDING=36010]="READ_FRAMEBUFFER_BINDING",t[t.RENDERBUFFER_SAMPLES=36011]="RENDERBUFFER_SAMPLES",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER=36052]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",t[t.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE=36182]="FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t[t.UNIFORM_BUFFER_BINDING=35368]="UNIFORM_BUFFER_BINDING",t[t.UNIFORM_BUFFER_START=35369]="UNIFORM_BUFFER_START",t[t.UNIFORM_BUFFER_SIZE=35370]="UNIFORM_BUFFER_SIZE",t[t.MAX_VERTEX_UNIFORM_BLOCKS=35371]="MAX_VERTEX_UNIFORM_BLOCKS",t[t.MAX_FRAGMENT_UNIFORM_BLOCKS=35373]="MAX_FRAGMENT_UNIFORM_BLOCKS",t[t.MAX_COMBINED_UNIFORM_BLOCKS=35374]="MAX_COMBINED_UNIFORM_BLOCKS",t[t.MAX_UNIFORM_BUFFER_BINDINGS=35375]="MAX_UNIFORM_BUFFER_BINDINGS",t[t.MAX_UNIFORM_BLOCK_SIZE=35376]="MAX_UNIFORM_BLOCK_SIZE",t[t.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS=35377]="MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",t[t.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS=35379]="MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",t[t.UNIFORM_BUFFER_OFFSET_ALIGNMENT=35380]="UNIFORM_BUFFER_OFFSET_ALIGNMENT",t[t.ACTIVE_UNIFORM_BLOCKS=35382]="ACTIVE_UNIFORM_BLOCKS",t[t.UNIFORM_TYPE=35383]="UNIFORM_TYPE",t[t.UNIFORM_SIZE=35384]="UNIFORM_SIZE",t[t.UNIFORM_BLOCK_INDEX=35386]="UNIFORM_BLOCK_INDEX",t[t.UNIFORM_OFFSET=35387]="UNIFORM_OFFSET",t[t.UNIFORM_ARRAY_STRIDE=35388]="UNIFORM_ARRAY_STRIDE",t[t.UNIFORM_MATRIX_STRIDE=35389]="UNIFORM_MATRIX_STRIDE",t[t.UNIFORM_IS_ROW_MAJOR=35390]="UNIFORM_IS_ROW_MAJOR",t[t.UNIFORM_BLOCK_BINDING=35391]="UNIFORM_BLOCK_BINDING",t[t.UNIFORM_BLOCK_DATA_SIZE=35392]="UNIFORM_BLOCK_DATA_SIZE",t[t.UNIFORM_BLOCK_ACTIVE_UNIFORMS=35394]="UNIFORM_BLOCK_ACTIVE_UNIFORMS",t[t.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395]="UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",t[t.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396]="UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",t[t.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398]="UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",t[t.OBJECT_TYPE=37138]="OBJECT_TYPE",t[t.SYNC_CONDITION=37139]="SYNC_CONDITION",t[t.SYNC_STATUS=37140]="SYNC_STATUS",t[t.SYNC_FLAGS=37141]="SYNC_FLAGS",t[t.SYNC_FENCE=37142]="SYNC_FENCE",t[t.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE",t[t.UNSIGNALED=37144]="UNSIGNALED",t[t.SIGNALED=37145]="SIGNALED",t[t.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",t[t.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",t[t.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",t[t.WAIT_FAILED=37149]="WAIT_FAILED",t[t.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT",t[t.COLOR=6144]="COLOR",t[t.DEPTH=6145]="DEPTH",t[t.STENCIL=6146]="STENCIL",t[t.MIN=32775]="MIN",t[t.MAX=32776]="MAX",t[t.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",t[t.STREAM_READ=35041]="STREAM_READ",t[t.STREAM_COPY=35042]="STREAM_COPY",t[t.STATIC_READ=35045]="STATIC_READ",t[t.STATIC_COPY=35046]="STATIC_COPY",t[t.DYNAMIC_READ=35049]="DYNAMIC_READ",t[t.DYNAMIC_COPY=35050]="DYNAMIC_COPY",t[t.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",t[t.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8",t[t.INVALID_INDEX=4294967295]="INVALID_INDEX",t[t.TIMEOUT_IGNORED=-1]="TIMEOUT_IGNORED",t[t.MAX_CLIENT_WAIT_TIMEOUT_WEBGL=37447]="MAX_CLIENT_WAIT_TIMEOUT_WEBGL",t[t.UNMASKED_VENDOR_WEBGL=37445]="UNMASKED_VENDOR_WEBGL",t[t.UNMASKED_RENDERER_WEBGL=37446]="UNMASKED_RENDERER_WEBGL",t[t.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047]="MAX_TEXTURE_MAX_ANISOTROPY_EXT",t[t.TEXTURE_MAX_ANISOTROPY_EXT=34046]="TEXTURE_MAX_ANISOTROPY_EXT",t[t.R16_EXT=33322]="R16_EXT",t[t.RG16_EXT=33324]="RG16_EXT",t[t.RGB16_EXT=32852]="RGB16_EXT",t[t.RGBA16_EXT=32859]="RGBA16_EXT",t[t.R16_SNORM_EXT=36760]="R16_SNORM_EXT",t[t.RG16_SNORM_EXT=36761]="RG16_SNORM_EXT",t[t.RGB16_SNORM_EXT=36762]="RGB16_SNORM_EXT",t[t.RGBA16_SNORM_EXT=36763]="RGBA16_SNORM_EXT",t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_RED_RGTC1_EXT=36283]="COMPRESSED_RED_RGTC1_EXT",t[t.COMPRESSED_SIGNED_RED_RGTC1_EXT=36284]="COMPRESSED_SIGNED_RED_RGTC1_EXT",t[t.COMPRESSED_RED_GREEN_RGTC2_EXT=36285]="COMPRESSED_RED_GREEN_RGTC2_EXT",t[t.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT=36286]="COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT",t[t.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",t[t.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",t[t.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",t[t.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37493]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37494]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37495]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37496]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37497]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t[t.COMPRESSED_RGBA_ASTC_5x4_KHR=37809]="COMPRESSED_RGBA_ASTC_5x4_KHR",t[t.COMPRESSED_RGBA_ASTC_5x5_KHR=37810]="COMPRESSED_RGBA_ASTC_5x5_KHR",t[t.COMPRESSED_RGBA_ASTC_6x5_KHR=37811]="COMPRESSED_RGBA_ASTC_6x5_KHR",t[t.COMPRESSED_RGBA_ASTC_6x6_KHR=37812]="COMPRESSED_RGBA_ASTC_6x6_KHR",t[t.COMPRESSED_RGBA_ASTC_8x5_KHR=37813]="COMPRESSED_RGBA_ASTC_8x5_KHR",t[t.COMPRESSED_RGBA_ASTC_8x6_KHR=37814]="COMPRESSED_RGBA_ASTC_8x6_KHR",t[t.COMPRESSED_RGBA_ASTC_8x8_KHR=37815]="COMPRESSED_RGBA_ASTC_8x8_KHR",t[t.COMPRESSED_RGBA_ASTC_10x5_KHR=37816]="COMPRESSED_RGBA_ASTC_10x5_KHR",t[t.COMPRESSED_RGBA_ASTC_10x6_KHR=37817]="COMPRESSED_RGBA_ASTC_10x6_KHR",t[t.COMPRESSED_RGBA_ASTC_10x8_KHR=37818]="COMPRESSED_RGBA_ASTC_10x8_KHR",t[t.COMPRESSED_RGBA_ASTC_10x10_KHR=37819]="COMPRESSED_RGBA_ASTC_10x10_KHR",t[t.COMPRESSED_RGBA_ASTC_12x10_KHR=37820]="COMPRESSED_RGBA_ASTC_12x10_KHR",t[t.COMPRESSED_RGBA_ASTC_12x12_KHR=37821]="COMPRESSED_RGBA_ASTC_12x12_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR=37840]="COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR=37841]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR=37842]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR=37843]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR=37844]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR=37845]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR=37846]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR=37847]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR=37848]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR=37849]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR=37850]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR=37851]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR=37852]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR=37853]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR",t[t.QUERY_COUNTER_BITS_EXT=34916]="QUERY_COUNTER_BITS_EXT",t[t.CURRENT_QUERY_EXT=34917]="CURRENT_QUERY_EXT",t[t.QUERY_RESULT_EXT=34918]="QUERY_RESULT_EXT",t[t.QUERY_RESULT_AVAILABLE_EXT=34919]="QUERY_RESULT_AVAILABLE_EXT",t[t.TIME_ELAPSED_EXT=35007]="TIME_ELAPSED_EXT",t[t.TIMESTAMP_EXT=36392]="TIMESTAMP_EXT",t[t.GPU_DISJOINT_EXT=36795]="GPU_DISJOINT_EXT",t[t.COMPLETION_STATUS_KHR=37297]="COMPLETION_STATUS_KHR",t[t.DEPTH_CLAMP_EXT=34383]="DEPTH_CLAMP_EXT",t[t.FIRST_VERTEX_CONVENTION_WEBGL=36429]="FIRST_VERTEX_CONVENTION_WEBGL",t[t.LAST_VERTEX_CONVENTION_WEBGL=36430]="LAST_VERTEX_CONVENTION_WEBGL",t[t.PROVOKING_VERTEX_WEBL=36431]="PROVOKING_VERTEX_WEBL",t[t.POLYGON_MODE_WEBGL=2880]="POLYGON_MODE_WEBGL",t[t.POLYGON_OFFSET_LINE_WEBGL=10754]="POLYGON_OFFSET_LINE_WEBGL",t[t.LINE_WEBGL=6913]="LINE_WEBGL",t[t.FILL_WEBGL=6914]="FILL_WEBGL",t[t.MAX_CLIP_DISTANCES_WEBGL=3378]="MAX_CLIP_DISTANCES_WEBGL",t[t.MAX_CULL_DISTANCES_WEBGL=33529]="MAX_CULL_DISTANCES_WEBGL",t[t.MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL=33530]="MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL",t[t.CLIP_DISTANCE0_WEBGL=12288]="CLIP_DISTANCE0_WEBGL",t[t.CLIP_DISTANCE1_WEBGL=12289]="CLIP_DISTANCE1_WEBGL",t[t.CLIP_DISTANCE2_WEBGL=12290]="CLIP_DISTANCE2_WEBGL",t[t.CLIP_DISTANCE3_WEBGL=12291]="CLIP_DISTANCE3_WEBGL",t[t.CLIP_DISTANCE4_WEBGL=12292]="CLIP_DISTANCE4_WEBGL",t[t.CLIP_DISTANCE5_WEBGL=12293]="CLIP_DISTANCE5_WEBGL",t[t.CLIP_DISTANCE6_WEBGL=12294]="CLIP_DISTANCE6_WEBGL",t[t.CLIP_DISTANCE7_WEBGL=12295]="CLIP_DISTANCE7_WEBGL",t[t.POLYGON_OFFSET_CLAMP_EXT=36379]="POLYGON_OFFSET_CLAMP_EXT",t[t.LOWER_LEFT_EXT=36001]="LOWER_LEFT_EXT",t[t.UPPER_LEFT_EXT=36002]="UPPER_LEFT_EXT",t[t.NEGATIVE_ONE_TO_ONE_EXT=37726]="NEGATIVE_ONE_TO_ONE_EXT",t[t.ZERO_TO_ONE_EXT=37727]="ZERO_TO_ONE_EXT",t[t.CLIP_ORIGIN_EXT=37724]="CLIP_ORIGIN_EXT",t[t.CLIP_DEPTH_MODE_EXT=37725]="CLIP_DEPTH_MODE_EXT",t[t.SRC1_COLOR_WEBGL=35065]="SRC1_COLOR_WEBGL",t[t.SRC1_ALPHA_WEBGL=34185]="SRC1_ALPHA_WEBGL",t[t.ONE_MINUS_SRC1_COLOR_WEBGL=35066]="ONE_MINUS_SRC1_COLOR_WEBGL",t[t.ONE_MINUS_SRC1_ALPHA_WEBGL=35067]="ONE_MINUS_SRC1_ALPHA_WEBGL",t[t.MAX_DUAL_SOURCE_DRAW_BUFFERS_WEBGL=35068]="MAX_DUAL_SOURCE_DRAW_BUFFERS_WEBGL",t[t.MIRROR_CLAMP_TO_EDGE_EXT=34627]="MIRROR_CLAMP_TO_EDGE_EXT"})(Ro||(Ro={}));const Ej={WEBGL_depth_texture:{UNSIGNED_INT_24_8_WEBGL:34042},OES_element_index_uint:{},OES_texture_float:{},OES_texture_half_float:{HALF_FLOAT_OES:5131},EXT_color_buffer_float:{},OES_standard_derivatives:{FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723},EXT_frag_depth:{},EXT_blend_minmax:{MIN_EXT:32775,MAX_EXT:32776},EXT_shader_texture_lod:{}},Cj=t=>({drawBuffersWEBGL(e){return t.drawBuffers(e)},COLOR_ATTACHMENT0_WEBGL:36064,COLOR_ATTACHMENT1_WEBGL:36065,COLOR_ATTACHMENT2_WEBGL:36066,COLOR_ATTACHMENT3_WEBGL:36067}),Rj=t=>({VERTEX_ARRAY_BINDING_OES:34229,createVertexArrayOES(){return t.createVertexArray()},deleteVertexArrayOES(e){return t.deleteVertexArray(e)},isVertexArrayOES(e){return t.isVertexArray(e)},bindVertexArrayOES(e){return t.bindVertexArray(e)}}),Mj=t=>({VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,drawArraysInstancedANGLE(...e){return t.drawArraysInstanced(...e)},drawElementsInstancedANGLE(...e){return t.drawElementsInstanced(...e)},vertexAttribDivisorANGLE(...e){return t.vertexAttribDivisor(...e)}});function Oj(t=!0){const e=HTMLCanvasElement.prototype;if(!t&&e.originalGetContext){e.getContext=e.originalGetContext,e.originalGetContext=void 0;return}e.originalGetContext=e.getContext,e.getContext=function(n,i){if(n==="webgl"||n==="experimental-webgl"){const r=this.originalGetContext("webgl2",i);return r instanceof HTMLElement&&Ij(r),r}return this.originalGetContext(n,i)}}function Ij(t){t.getExtension("EXT_color_buffer_float");const e={...Ej,WEBGL_disjoint_timer_query:t.getExtension("EXT_disjoint_timer_query_webgl2"),WEBGL_draw_buffers:Cj(t),OES_vertex_array_object:Rj(t),ANGLE_instanced_arrays:Mj(t)},n=t.getExtension;t.getExtension=function(r){const s=n.call(t,r);return s||(r in e?e[r]:null)};const i=t.getSupportedExtensions;t.getSupportedExtensions=function(){const r=i.apply(t)||[];return r==null?void 0:r.concat(Object.keys(e))}}async function WR(t,e){const n=document.getElementsByTagName("head")[0];if(!n)throw new Error("loadScript");const i=document.createElement("script");return i.setAttribute("type","text/javascript"),i.setAttribute("src",t),new Promise((r,s)=>{i.onload=r,i.onerror=a=>s(new Error(`Unable to load script '${t}': ${a}`)),n.appendChild(i)})}const Pj=1;let dt=null,ZT=!1;const yv={debugSpectorJS:ie.get("debug-spectorjs"),debugSpectorJSUrl:"https://cdn.jsdelivr.net/npm/spectorjs@0.9.30/dist/spector.bundle.js",gl:void 0};async function Dj(t){if(!globalThis.SPECTOR)try{await WR(t.debugSpectorJSUrl||yv.debugSpectorJSUrl)}catch(e){ie.warn(String(e))}}function kj(t){var e;if(t={...yv,...t},!t.debugSpectorJS)return null;if(!dt&&globalThis.SPECTOR&&!((e=globalThis.luma)!=null&&e.spector)){ie.probe(Pj,"SPECTOR found and initialized. Start with `luma.spector.displayUI()`")();const{Spector:n}=globalThis.SPECTOR;dt=new n,globalThis.luma&&(globalThis.luma.spector=dt)}if(!dt)return null;if(ZT||(ZT=!0,dt.spyCanvases(),dt==null||dt.onCaptureStarted.add(n=>ie.info("Spector capture started:",n)()),dt==null||dt.onCapture.add(n=>{ie.info("Spector capture complete:",n)(),dt==null||dt.getResultUI(),dt==null||dt.resultView.display(),dt==null||dt.resultView.addCapture(n)})),t.gl){const n=t.gl,i=n.device;dt==null||dt.startCapture(t.gl,500),n.device=i,new Promise(r=>setTimeout(r,2e3)).then(r=>{ie.info("Spector capture stopped after 2 seconds")(),dt==null||dt.stopCapture()})}return dt}const Nj="https://unpkg.com/webgl-debug@2.0.1/index.js";function YR(t){return t.luma=t.luma||{},t.luma}async function Bj(){Va()&&!globalThis.WebGLDebugUtils&&(globalThis.global=globalThis.global||globalThis,globalThis.global.module={},await WR(Nj))}function Lj(t,e={}){return e.debugWebGL||e.traceWebGL?Fj(t,e):Uj(t)}function Uj(t){const e=YR(t);return e.realContext?e.realContext:t}function Fj(t,e){if(!globalThis.WebGLDebugUtils)return ie.warn("webgl-debug not loaded")(),t;const n=YR(t);if(n.debugContext)return n.debugContext;globalThis.WebGLDebugUtils.init({...Ro,...t});const i=globalThis.WebGLDebugUtils.makeDebugContext(t,zj.bind(null,e),Vj.bind(null,e));for(const a in Ro)!(a in i)&&typeof Ro[a]=="number"&&(i[a]=Ro[a]);class r{}Object.setPrototypeOf(i,Object.getPrototypeOf(t)),Object.setPrototypeOf(r,i);const s=Object.create(r);return n.realContext=t,n.debugContext=s,s.debug=!0,s}function GT(t,e){e=Array.from(e).map(i=>i===void 0?"undefined":i);let n=globalThis.WebGLDebugUtils.glFunctionArgsToString(t,e);return n=`${n.slice(0,100)}${n.length>100?"...":""}`,`gl.${t}(${n})`}function zj(t,e,n,i){i=Array.from(i).map(o=>o===void 0?"undefined":o);const r=globalThis.WebGLDebugUtils.glEnumToString(e),s=globalThis.WebGLDebugUtils.glFunctionArgsToString(n,i),a=`${r} in gl.${n}(${s})`;ie.error(a)();debugger}function Vj(t,e,n){let i="";ie.level>=1&&(i=GT(e,n),t.traceWebGL&&ie.log(1,i)());for(const r of n)if(r===void 0){i=i||GT(e,n);debugger}}const Bf=1;class $j extends FF{constructor(){super();x(this,"type","webgl");Ia.defaultProps={...Ia.defaultProps,...yv}}enforceWebGL2(n){Oj(n)}isSupported(){return typeof WebGL2RenderingContext<"u"}isDeviceHandle(n){return typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext?!0:(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext&&ie.warn("WebGL1 is not supported",n)(),!1)}async attach(n,i={}){const{WebGLDevice:r}=await KT(async()=>{const{WebGLDevice:a}=await Promise.resolve().then(()=>hx);return{WebGLDevice:a}},void 0);if(n instanceof r)return n;if((n==null?void 0:n.device)instanceof r)return n.device;if(!jj(n))throw new Error("Invalid WebGL2RenderingContext");const s=i.createCanvasContext===!0?{}:i.createCanvasContext;return new r({...i,_handle:n,createCanvasContext:{canvas:n.canvas,autoResize:!1,...s}})}async create(n={}){const{WebGLDevice:i}=await KT(async()=>{const{WebGLDevice:r}=await Promise.resolve().then(()=>hx);return{WebGLDevice:r}},void 0);ie.groupCollapsed(Bf,"WebGLDevice created")();try{const r=[];(n.debugWebGL||n.debug)&&r.push(Bj()),n.debugSpectorJS&&r.push(Dj(n));const s=await Promise.allSettled(r);for(const l of s)l.status==="rejected"&&ie.error(`Failed to initialize debug libraries ${l.reason}`)();const a=new i(n),o=`${a._reused?"Reusing":"Created"} device with WebGL2 ${a.props.debug?"debug ":""}context: ${a.info.vendor}, ${a.info.renderer} for canvas: ${a.canvasContext.id}`;return ie.probe(Bf,o)(),ie.table(Bf,a.info)(),a}finally{ie.groupEnd(Bf)()}}}function jj(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&Number.isFinite(t._version))}const Vm=new $j,_v={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,35725:null,36006:null,36007:null,34229:null,34964:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32926:!1,32928:!1,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],36389:null,36662:null,36663:null,35053:null,35055:null,35723:4352,36010:null,35977:!1,3333:4,3317:4,37440:!1,37441:!1,37443:37444,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},Yt=(t,e,n)=>e?t.enable(n):t.disable(n),QT=(t,e,n)=>t.hint(n,e),Wn=(t,e,n)=>t.pixelStorei(n,e),JT=(t,e,n)=>{const i=n===36006?36009:36008;return t.bindFramebuffer(i,e)},Kl=(t,e,n)=>{const r={34964:34962,36662:36662,36663:36663,35053:35051,35055:35052}[n];t.bindBuffer(r,e)};function $m(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}const Hj={3042:Yt,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:Yt,2885:(t,e)=>t.cullFace(e),2929:Yt,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:Yt,35723:QT,35725:(t,e)=>t.useProgram(e),36007:(t,e)=>t.bindRenderbuffer(36161,e),36389:(t,e)=>{var n;return(n=t.bindTransformFeedback)==null?void 0:n.call(t,36386,e)},34229:(t,e)=>t.bindVertexArray(e),36006:JT,36010:JT,34964:Kl,36662:Kl,36663:Kl,35053:Kl,35055:Kl,2886:(t,e)=>t.frontFace(e),33170:QT,2849:(t,e)=>t.lineWidth(e),32823:Yt,32824:"polygonOffset",10752:"polygonOffset",35977:Yt,32926:Yt,32928:Yt,32938:"sampleCoverage",32939:"sampleCoverage",3089:Yt,3088:(t,e)=>t.scissor(...e),2960:Yt,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),34383:Yt,10754:Yt,12288:Yt,12289:Yt,12290:Yt,12291:Yt,12292:Yt,12293:Yt,12294:Yt,12295:Yt,3333:Wn,3317:Wn,37440:Wn,37441:Wn,37443:Wn,3330:Wn,3332:Wn,3331:Wn,3314:Wn,32878:Wn,3316:Wn,3315:Wn,32877:Wn,framebuffer:(t,e)=>{const n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{const n=typeof e=="number"?[e,e]:e;t.blendEquationSeparate(...n)},blendFunc:(t,e)=>{const n=(e==null?void 0:e.length)===2?[...e,...e]:e;t.blendFuncSeparate(...n)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(e[0],e[1]||!1),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=$m(e)?e:[e,e];const[n,i]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,i)},stencilFunc:(t,e)=>{e=$m(e)&&e.length===3?[...e,...e]:e;const[n,i,r,s,a,o]=e;t.stencilFuncSeparate(1028,n,i,r),t.stencilFuncSeparate(1029,s,a,o)},stencilOp:(t,e)=>{e=$m(e)&&e.length===3?[...e,...e]:e;const[n,i,r,s,a,o]=e;t.stencilOpSeparate(1028,n,i,r),t.stencilOpSeparate(1029,s,a,o)},viewport:(t,e)=>t.viewport(...e)};function Nt(t,e,n){return e[t]!==void 0?e[t]:n[t]}const Wj={blendEquation:(t,e,n)=>t.blendEquationSeparate(Nt(32777,e,n),Nt(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(Nt(32969,e,n),Nt(32968,e,n),Nt(32971,e,n),Nt(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(Nt(32824,e,n),Nt(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(Nt(32938,e,n),Nt(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,Nt(2962,e,n),Nt(2967,e,n),Nt(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,Nt(34816,e,n),Nt(36003,e,n),Nt(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,Nt(2964,e,n),Nt(2965,e,n),Nt(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,Nt(34817,e,n),Nt(34818,e,n),Nt(34819,e,n))},ex={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),useProgram:(t,e)=>t({35725:e}),bindRenderbuffer:(t,e,n)=>t({36007:n}),bindTransformFeedback:(t,e,n)=>t({36389:n}),bindVertexArray:(t,e)=>t({34229:e}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({36006:n,36010:n});case 36009:return t({36006:n});case 36008:return t({36010:n});default:return null}},bindBuffer:(t,e,n)=>{const i={34962:[34964],36662:[36662],36663:[36663],35051:[35053],35052:[35055]}[e];return i?t({[i]:n}):{valueChanged:!0}},blendColor:(t,e,n,i,r)=>t({32773:new Float32Array([e,n,i,r])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,n)=>t({32777:e,34877:n}),blendFunc:(t,e,n)=>t({32969:e,32968:n,32971:e,32970:n}),blendFuncSeparate:(t,e,n,i,r)=>t({32969:e,32968:n,32971:i,32970:r}),clearColor:(t,e,n,i,r)=>t({3106:new Float32Array([e,n,i,r])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,n,i,r)=>t({3107:[e,n,i,r]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,n)=>t({2928:new Float32Array([e,n])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,n)=>t({32824:e,10752:n}),sampleCoverage:(t,e,n)=>t({32938:e,32939:n}),scissor:(t,e,n,i,r)=>t({3088:new Int32Array([e,n,i,r])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,n)=>t({[e===1028?2968:36005]:n}),stencilFunc:(t,e,n,i)=>t({2962:e,2967:n,2963:i,34816:e,36003:n,36004:i}),stencilFuncSeparate:(t,e,n,i,r)=>t({[e===1028?2962:34816]:n,[e===1028?2967:36003]:i,[e===1028?2963:36004]:r}),stencilOp:(t,e,n,i)=>t({2964:e,2965:n,2966:i,34817:e,34818:n,34819:i}),stencilOpSeparate:(t,e,n,i,r)=>t({[e===1028?2964:34817]:n,[e===1028?2965:34818]:i,[e===1028?2966:34819]:r}),viewport:(t,e,n,i,r)=>t({2978:[e,n,i,r]})},Qi=(t,e)=>t.isEnabled(e),tx={3042:Qi,2884:Qi,2929:Qi,3024:Qi,32823:Qi,32926:Qi,32928:Qi,3089:Qi,2960:Qi,35977:Qi},Yj=new Set([34016,36388,36387,35983,35368,34965,35739,35738,3074,34853,34854,34855,34856,34857,34858,34859,34860,34861,34862,34863,34864,34865,34866,34867,34868,35097,32873,35869,32874,34068]);function Cl(t,e){if(qj(e))return;const n={};for(const r in e){const s=Number(r),a=Hj[r];a&&(typeof a=="string"?n[a]=!0:a(t,e[r],s))}const i=t.state&&t.state.cache;if(i)for(const r in n){const s=Wj[r];s(t,e,i)}}function XR(t,e=_v){if(typeof e=="number"){const r=e,s=tx[r];return s?s(t,r):t.getParameter(r)}const n=Array.isArray(e)?e:Object.keys(e),i={};for(const r of n){const s=tx[r];i[r]=s?s(t,Number(r)):t.getParameter(Number(r))}return i}function Xj(t){Cl(t,_v)}function qj(t){for(const e in t)return!1;return!0}function Kj(t,e){if(t===e)return!0;if(nx(t)&&nx(e)&&t.length===e.length){for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}return!1}function nx(t){return Array.isArray(t)||ArrayBuffer.isView(t)}class va{constructor(e,n){x(this,"gl");x(this,"program",null);x(this,"stateStack",[]);x(this,"enable",!0);x(this,"cache",null);x(this,"log");x(this,"initialized",!1);this.gl=e,this.log=(n==null?void 0:n.log)||(()=>{}),this._updateCache=this._updateCache.bind(this),Object.seal(this)}static get(e){return e.state}push(e={}){this.stateStack.push({})}pop(){const e=this.stateStack[this.stateStack.length-1];Cl(this.gl,e),this.stateStack.pop()}trackState(e,n){if(this.cache=n!=null&&n.copyState?XR(e):Object.assign({},_v),this.initialized)throw new Error("WebGLStateTracker");this.initialized=!0,this.gl.state=this,Gj(e);for(const i in ex){const r=ex[i];Zj(e,i,r)}ix(e,"getParameter"),ix(e,"isEnabled")}_updateCache(e){let n=!1,i;const r=this.stateStack.length>0?this.stateStack[this.stateStack.length-1]:null;for(const s in e){const a=e[s],o=this.cache[s];Kj(a,o)||(n=!0,i=o,r&&!(s in r)&&(r[s]=o),this.cache[s]=a)}return{valueChanged:n,oldValue:i}}}function ix(t,e){const n=t[e].bind(t);t[e]=function(r){if(r===void 0||Yj.has(r))return n(r);const s=va.get(t);return r in s.cache||(s.cache[r]=n(r)),s.enable?s.cache[r]:n(r)},Object.defineProperty(t[e],"name",{value:`${e}-from-cache`,configurable:!1})}function Zj(t,e,n){if(!t[e])return;const i=t[e].bind(t);t[e]=function(...s){const a=va.get(t),{valueChanged:o,oldValue:l}=n(a._updateCache,...s);return o&&i(...s),l},Object.defineProperty(t[e],"name",{value:`${e}-to-cache`,configurable:!1})}function Gj(t){const e=t.useProgram.bind(t);t.useProgram=function(i){const r=va.get(t);r.program!==i&&(e(i),r.program=i)}}function Qj(t,e,n){let i="";const r={preserveDrawingBuffer:!0,...n};let s=null;if(s||(s=t.getContext("webgl2",r)),r.failIfMajorPerformanceCaveat&&(i||(i="Only software GPU is available. Set `failIfMajorPerformanceCaveat: false` to allow.")),!s&&!n.failIfMajorPerformanceCaveat&&(r.failIfMajorPerformanceCaveat=!1,s=t.getContext("webgl2",r),s.luma||(s.luma={}),s.luma.softwareRenderer=!0),s||(s=t.getContext("webgl",{}),s&&(s=null,i||(i="Your browser only supports WebGL1"))),!s)throw i||(i="Your browser does not support WebGL"),new Error(`Failed to create WebGL context: ${i}`);const{onContextLost:a,onContextRestored:o}=e;return t.addEventListener("webglcontextlost",l=>a(l),!1),t.addEventListener("webglcontextrestored",l=>o(l),!1),s.luma||(s.luma={}),s}function pl(t,e,n){return n[e]===void 0&&(n[e]=t.getExtension(e)||null),n[e]}function Jj(t,e){const n=t.getParameter(7936),i=t.getParameter(7937);pl(t,"WEBGL_debug_renderer_info",e);const r=e.WEBGL_debug_renderer_info,s=t.getParameter(r?r.UNMASKED_VENDOR_WEBGL:7936),a=t.getParameter(r?r.UNMASKED_RENDERER_WEBGL:7937),o=s||n,l=a||i,c=t.getParameter(7938),u=qR(o,l),f=eH(o,l),d=tH(o,l);return{type:"webgl",gpu:u,gpuType:d,gpuBackend:f,vendor:o,renderer:l,version:c,shadingLanguage:"glsl",shadingLanguageVersion:300}}function qR(t,e){return/NVIDIA/i.exec(t)||/NVIDIA/i.exec(e)?"nvidia":/INTEL/i.exec(t)||/INTEL/i.exec(e)?"intel":/Apple/i.exec(t)||/Apple/i.exec(e)?"apple":/AMD/i.exec(t)||/AMD/i.exec(e)||/ATI/i.exec(t)||/ATI/i.exec(e)?"amd":/SwiftShader/i.exec(t)||/SwiftShader/i.exec(e)?"software":"unknown"}function eH(t,e){return/Metal/i.exec(t)||/Metal/i.exec(e)?"metal":/ANGLE/i.exec(t)||/ANGLE/i.exec(e)?"opengl":"unknown"}function tH(t,e){if(/SwiftShader/i.exec(t)||/SwiftShader/i.exec(e))return"cpu";switch(qR(t,e)){case"intel":return"integrated";case"software":return"cpu";case"unknown":return"unknown";default:return"discrete"}}function KR(t){switch(t){case"uint8":return 5121;case"sint8":return 5120;case"unorm8":return 5121;case"snorm8":return 5120;case"uint16":return 5123;case"sint16":return 5122;case"unorm16":return 5123;case"snorm16":return 5122;case"uint32":return 5125;case"sint32":return 5124;case"float16":return 5131;case"float32":return 5126}throw new Error(String(t))}const lc="WEBGL_compressed_texture_s3tc",cc="WEBGL_compressed_texture_s3tc_srgb",Mo="EXT_texture_compression_rgtc",Oo="EXT_texture_compression_bptc",nH="WEBGL_compressed_texture_etc",iH="WEBGL_compressed_texture_astc",rH="WEBGL_compressed_texture_etc1",sH="WEBGL_compressed_texture_pvrtc",aH="WEBGL_compressed_texture_atc",rx="EXT_texture_norm16",sx="EXT_render_snorm",oH="EXT_color_buffer_float",bv={"float32-renderable-webgl":["EXT_color_buffer_float"],"float16-renderable-webgl":["EXT_color_buffer_half_float"],"rgb9e5ufloat-renderable-webgl":["WEBGL_render_shared_exponent"],"snorm8-renderable-webgl":[sx],"norm16-renderable-webgl":[rx],"snorm16-renderable-webgl":[rx,sx],"float32-filterable":["OES_texture_float_linear"],"float16-filterable-webgl":["OES_texture_half_float_linear"],"texture-filterable-anisotropic-webgl":["EXT_texture_filter_anisotropic"],"texture-blend-float-webgl":["EXT_float_blend"],"texture-compression-bc":[lc,cc,Mo,Oo],"texture-compression-bc5-webgl":[Mo],"texture-compression-bc7-webgl":[Oo],"texture-compression-etc2":[nH],"texture-compression-astc":[iH],"texture-compression-etc1-webgl":[rH],"texture-compression-pvrtc-webgl":[sH],"texture-compression-atc-webgl":[aH]};function lH(t){return t in bv}function cH(t,e,n){return(bv[e]||[]).every(r=>pl(t,r,n))}const vv={r8unorm:{gl:33321,rb:!0},r8snorm:{gl:36756},r8uint:{gl:33330,rb:!0},r8sint:{gl:33329,rb:!0},rg8unorm:{gl:33323,rb:!0},rg8snorm:{gl:36757},rg8uint:{gl:33336,rb:!0},rg8sint:{gl:33335,rb:!0},r16uint:{gl:33332,rb:!0},r16sint:{gl:33331,rb:!0},r16float:{gl:33325,rb:!0},r16unorm:{gl:33322,rb:!0},r16snorm:{gl:36760},"rgba4unorm-webgl":{gl:32854,rb:!0},"rgb565unorm-webgl":{gl:36194,rb:!0},"rgb5a1unorm-webgl":{gl:32855,rb:!0},"rgb8unorm-webgl":{gl:32849},"rgb8snorm-webgl":{gl:36758},rgba8unorm:{gl:32856},"rgba8unorm-srgb":{gl:35907},rgba8snorm:{gl:36759},rgba8uint:{gl:36220},rgba8sint:{gl:36238},bgra8unorm:{},"bgra8unorm-srgb":{},rg16uint:{gl:33338},rg16sint:{gl:33337},rg16float:{gl:33327,rb:!0},rg16unorm:{gl:33324},rg16snorm:{gl:36761},r32uint:{gl:33334,rb:!0},r32sint:{gl:33333,rb:!0},r32float:{gl:33326},rgb9e5ufloat:{gl:35901},rg11b10ufloat:{gl:35898,rb:!0},rgb10a2unorm:{gl:32857,rb:!0},rgb10a2uint:{gl:36975,rb:!0},"rgb16unorm-webgl":{gl:32852},"rgb16snorm-webgl":{gl:36762},rg32uint:{gl:33340,rb:!0},rg32sint:{gl:33339,rb:!0},rg32float:{gl:33328,rb:!0},rgba16uint:{gl:36214,rb:!0},rgba16sint:{gl:36232,rb:!0},rgba16float:{gl:34842},rgba16unorm:{gl:32859,rb:!0},rgba16snorm:{gl:36763},"rgb32float-webgl":{gl:34837,x:oH,dataFormat:6407,types:[5126]},rgba32uint:{gl:36208,rb:!0},rgba32sint:{gl:36226,rb:!0},rgba32float:{gl:34836,rb:!0},stencil8:{gl:36168,rb:!0},depth16unorm:{gl:33189,dataFormat:6402,types:[5123],rb:!0},depth24plus:{gl:33190,dataFormat:6402,types:[5125]},depth32float:{gl:36012,dataFormat:6402,types:[5126],rb:!0},"depth24plus-stencil8":{gl:35056,rb:!0,depthTexture:!0,dataFormat:34041,types:[34042]},"depth32float-stencil8":{gl:36013,dataFormat:34041,types:[36269],rb:!0},"bc1-rgb-unorm-webgl":{gl:33776,x:lc},"bc1-rgb-unorm-srgb-webgl":{gl:35916,x:cc},"bc1-rgba-unorm":{gl:33777,x:lc},"bc1-rgba-unorm-srgb":{gl:35916,x:cc},"bc2-rgba-unorm":{gl:33778,x:lc},"bc2-rgba-unorm-srgb":{gl:35918,x:cc},"bc3-rgba-unorm":{gl:33779,x:lc},"bc3-rgba-unorm-srgb":{gl:35919,x:cc},"bc4-r-unorm":{gl:36283,x:Mo},"bc4-r-snorm":{gl:36284,x:Mo},"bc5-rg-unorm":{gl:36285,x:Mo},"bc5-rg-snorm":{gl:36286,x:Mo},"bc6h-rgb-ufloat":{gl:36495,x:Oo},"bc6h-rgb-float":{gl:36494,x:Oo},"bc7-rgba-unorm":{gl:36492,x:Oo},"bc7-rgba-unorm-srgb":{gl:36493,x:Oo},"etc2-rgb8unorm":{gl:37492},"etc2-rgb8unorm-srgb":{gl:37494},"etc2-rgb8a1unorm":{gl:37496},"etc2-rgb8a1unorm-srgb":{gl:37497},"etc2-rgba8unorm":{gl:37493},"etc2-rgba8unorm-srgb":{gl:37495},"eac-r11unorm":{gl:37488},"eac-r11snorm":{gl:37489},"eac-rg11unorm":{gl:37490},"eac-rg11snorm":{gl:37491},"astc-4x4-unorm":{gl:37808},"astc-4x4-unorm-srgb":{gl:37840},"astc-5x4-unorm":{gl:37809},"astc-5x4-unorm-srgb":{gl:37841},"astc-5x5-unorm":{gl:37810},"astc-5x5-unorm-srgb":{gl:37842},"astc-6x5-unorm":{gl:37811},"astc-6x5-unorm-srgb":{gl:37843},"astc-6x6-unorm":{gl:37812},"astc-6x6-unorm-srgb":{gl:37844},"astc-8x5-unorm":{gl:37813},"astc-8x5-unorm-srgb":{gl:37845},"astc-8x6-unorm":{gl:37814},"astc-8x6-unorm-srgb":{gl:37846},"astc-8x8-unorm":{gl:37815},"astc-8x8-unorm-srgb":{gl:37847},"astc-10x5-unorm":{gl:37819},"astc-10x5-unorm-srgb":{gl:37851},"astc-10x6-unorm":{gl:37817},"astc-10x6-unorm-srgb":{gl:37849},"astc-10x8-unorm":{gl:37818},"astc-10x8-unorm-srgb":{gl:37850},"astc-10x10-unorm":{gl:37819},"astc-10x10-unorm-srgb":{gl:37851},"astc-12x10-unorm":{gl:37820},"astc-12x10-unorm-srgb":{gl:37852},"astc-12x12-unorm":{gl:37821},"astc-12x12-unorm-srgb":{gl:37853},"pvrtc-rgb4unorm-webgl":{gl:35840},"pvrtc-rgba4unorm-webgl":{gl:35842},"pvrtc-rbg2unorm-webgl":{gl:35841},"pvrtc-rgba2unorm-webgl":{gl:35843},"etc1-rbg-unorm-webgl":{gl:36196},"atc-rgb-unorm-webgl":{gl:35986},"atc-rgba-unorm-webgl":{gl:35986},"atc-rgbai-unorm-webgl":{gl:34798}};function uH(t,e,n){let i=e.create;const r=vv[e.format];return(r==null?void 0:r.gl)===void 0&&(i=!1),r!=null&&r.x&&(i=i&&!!pl(t,r.x,n)),{format:e.format,create:i&&e.create,render:i&&e.render,filter:i&&e.filter,blend:i&&e.blend,store:i&&e.store}}function ZR(t){var r;const e=vv[t],n=hH(t),i=jo.getInfo(t);return i.compressed&&(e.dataFormat=n),{internalFormat:n,format:(e==null?void 0:e.dataFormat)||dH(i.channels,i.integer,i.normalized,n),type:i.dataType?KR(i.dataType):((r=e==null?void 0:e.types)==null?void 0:r[0])||5121,compressed:i.compressed||!1}}function fH(t){switch(jo.getInfo(t).attachment){case"depth":return 36096;case"stencil":return 36128;case"depth-stencil":return 33306;default:throw new Error(`Not a depth stencil format: ${t}`)}}function dH(t,e,n,i){if(i===6408||i===6407)return i;switch(t){case"r":return e&&!n?36244:6403;case"rg":return e&&!n?33320:33319;case"rgb":return e&&!n?36248:6407;case"rgba":return e&&!n?36249:6408;case"bgra":throw new Error("bgra pixels not supported by WebGL");default:return 6408}}function hH(t){const e=vv[t],n=e==null?void 0:e.gl;if(n===void 0)throw new Error(`Unsupported texture format ${t}`);return n}const ax={"depth-clip-control":"EXT_depth_clamp","timer-query-webgl":"EXT_disjoint_timer_query_webgl2","compilation-status-async-webgl":"KHR_parallel_shader_compile","polygon-mode-webgl":"WEBGL_polygon_mode","provoking-vertex-webgl":"WEBGL_provoking_vertex","shader-clip-cull-distance-webgl":"WEBGL_clip_cull_distance","shader-noperspective-interpolation-webgl":"NV_shader_noperspective_interpolation","shader-conservative-depth-webgl":"EXT_conservative_depth"};class pH extends LF{constructor(n,i,r){super([],r);x(this,"gl");x(this,"extensions");x(this,"testedFeatures",new Set);this.gl=n,this.extensions=i,pl(n,"EXT_color_buffer_float",i)}*[Symbol.iterator](){const n=this.getFeatures();for(const i of n)this.has(i)&&(yield i);return[]}has(n){var i;return(i=this.disabledFeatures)!=null&&i[n]?!1:(this.testedFeatures.has(n)||(this.testedFeatures.add(n),lH(n)&&cH(this.gl,n,this.extensions)&&this.features.add(n),this.getWebGLFeature(n)&&this.features.add(n)),this.features.has(n))}initializeFeatures(){const n=this.getFeatures().filter(i=>i!=="polygon-mode-webgl");for(const i of n)this.has(i)}getFeatures(){return[...Object.keys(ax),...Object.keys(bv)]}getWebGLFeature(n){const i=ax[n];return typeof i=="string"?!!pl(this.gl,i,this.extensions):!!i}}class gH extends BF{constructor(n){super();x(this,"gl");x(this,"limits",{});this.gl=n}get maxTextureDimension1D(){return 0}get maxTextureDimension2D(){return this.getParameter(3379)}get maxTextureDimension3D(){return this.getParameter(32883)}get maxTextureArrayLayers(){return this.getParameter(35071)}get maxBindGroups(){return 0}get maxDynamicUniformBuffersPerPipelineLayout(){return 0}get maxDynamicStorageBuffersPerPipelineLayout(){return 0}get maxSampledTexturesPerShaderStage(){return this.getParameter(35660)}get maxSamplersPerShaderStage(){return this.getParameter(35661)}get maxStorageBuffersPerShaderStage(){return 0}get maxStorageTexturesPerShaderStage(){return 0}get maxUniformBuffersPerShaderStage(){return this.getParameter(35375)}get maxUniformBufferBindingSize(){return this.getParameter(35376)}get maxStorageBufferBindingSize(){return 0}get minUniformBufferOffsetAlignment(){return this.getParameter(35380)}get minStorageBufferOffsetAlignment(){return 0}get maxVertexBuffers(){return 16}get maxVertexAttributes(){return this.getParameter(34921)}get maxVertexBufferArrayStride(){return 2048}get maxInterStageShaderVariables(){return this.getParameter(35659)}get maxComputeWorkgroupStorageSize(){return 0}get maxComputeInvocationsPerWorkgroup(){return 0}get maxComputeWorkgroupSizeX(){return 0}get maxComputeWorkgroupSizeY(){return 0}get maxComputeWorkgroupSizeZ(){return 0}get maxComputeWorkgroupsPerDimension(){return 0}getParameter(n){return this.limits[n]===void 0&&(this.limits[n]=this.gl.getParameter(n)),this.limits[n]||0}}class Ic extends ch{constructor(n,i){super(n,i);x(this,"device");x(this,"gl");x(this,"handle");x(this,"colorAttachments",[]);x(this,"depthStencilAttachment",null);const r=i.handle===null;this.device=n,this.gl=n.gl,this.handle=this.props.handle||r?this.props.handle:this.gl.createFramebuffer(),r||(n._setWebGLDebugMetadata(this.handle,this,{spector:this.props}),this.autoCreateAttachmentTextures(),this.updateAttachments())}destroy(){super.destroy(),!this.destroyed&&this.handle!==null&&this.gl.deleteFramebuffer(this.handle)}updateAttachments(){const n=this.gl.bindFramebuffer(36160,this.handle);for(let i=0;i<this.colorAttachments.length;++i){const r=this.colorAttachments[i];if(r){const s=36064+i;this._attachTextureView(s,r)}}if(this.depthStencilAttachment){const i=fH(this.depthStencilAttachment.props.format);this._attachTextureView(i,this.depthStencilAttachment)}if(this.device.props.debug){const i=this.gl.checkFramebufferStatus(36160);if(i!==36053)throw new Error(`Framebuffer ${yH(i)}`)}this.gl.bindFramebuffer(36160,n)}_attachTextureView(n,i){const{gl:r}=this.device,{texture:s}=i,a=i.props.baseMipLevel,o=i.props.baseArrayLayer;switch(r.bindTexture(s.glTarget,s.handle),s.glTarget){case 35866:case 32879:r.framebufferTextureLayer(36160,n,s.handle,a,o);break;case 34067:const l=mH(o);r.framebufferTexture2D(36160,n,l,s.handle,a);break;case 3553:r.framebufferTexture2D(36160,n,3553,s.handle,a);break;default:throw new Error("Illegal texture type")}r.bindTexture(s.glTarget,null)}}function mH(t){return t<34069?t+34069:t}function yH(t){switch(t){case 36053:return"success";case 36054:return"Mismatched attachments";case 36055:return"No attachments";case 36057:return"Height/width mismatch";case 36061:return"Unsupported or split attachments";case 36182:return"Samples mismatch";default:return`${t}`}}class _H extends ah{constructor(n,i){super(i);x(this,"device");x(this,"handle",null);x(this,"_framebuffer",null);this.device=n,this._setAutoCreatedCanvasId(`${this.device.id}-canvas`),this._updateDevice()}get[Symbol.toStringTag](){return"WebGLCanvasContext"}getCurrentFramebuffer(){return this._framebuffer=this._framebuffer||new Ic(this.device,{handle:null}),this._framebuffer}_updateDevice(){}}const jm={};function bH(t="id"){jm[t]=jm[t]||1;const e=jm[t]++;return`${t}-${e}`}class Pc extends It{constructor(n,i={}){super(n,i);x(this,"device");x(this,"gl");x(this,"handle");x(this,"glTarget");x(this,"glUsage");x(this,"glIndexType",5123);x(this,"byteLength",0);x(this,"bytesUsed",0);this.device=n,this.gl=this.device.gl;const r=typeof i=="object"?i.handle:void 0;this.handle=r||this.gl.createBuffer(),n._setWebGLDebugMetadata(this.handle,this,{spector:{...this.props,data:typeof this.props.data}}),this.glTarget=vH(this.props.usage),this.glUsage=TH(this.props.usage),this.glIndexType=this.props.indexType==="uint32"?5125:5123,i.data?this._initWithData(i.data,i.byteOffset,i.byteLength):this._initWithByteLength(i.byteLength||0)}destroy(){!this.destroyed&&this.handle&&(this.removeStats(),this.trackDeallocatedMemory(),this.gl.deleteBuffer(this.handle),this.destroyed=!0,this.handle=null)}_initWithData(n,i=0,r=n.byteLength+i){const s=this.glTarget;this.gl.bindBuffer(s,this.handle),this.gl.bufferData(s,r,this.glUsage),this.gl.bufferSubData(s,i,n),this.gl.bindBuffer(s,null),this.bytesUsed=r,this.byteLength=r,this._setDebugData(n,i,r),this.trackAllocatedMemory(r)}_initWithByteLength(n){let i=n;n===0&&(i=new Float32Array(0));const r=this.glTarget;return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,this.glUsage),this.gl.bindBuffer(r,null),this.bytesUsed=n,this.byteLength=n,this._setDebugData(null,0,n),this.trackAllocatedMemory(n),this}write(n,i=0){const r=ArrayBuffer.isView(n)?n:new Uint8Array(n),s=36663;this.gl.bindBuffer(s,this.handle),this.gl.bufferSubData(s,i,r),this.gl.bindBuffer(s,null),this._setDebugData(n,i,n.byteLength)}async mapAndWriteAsync(n,i=0,r=this.byteLength-i){const s=new ArrayBuffer(r);await n(s,"copied"),this.write(s,i)}async readAsync(n=0,i){return this.readSyncWebGL(n,i)}async mapAndReadAsync(n,i=0,r){const s=await this.readAsync(i,r);return await n(s.buffer,"copied")}readSyncWebGL(n=0,i){i=i??this.byteLength-n;const r=new Uint8Array(i),s=0;return this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,n,r,s,i),this.gl.bindBuffer(36662,null),this._setDebugData(r,n,i),r}}function vH(t){return t&It.INDEX?34963:t&It.VERTEX?34962:t&It.UNIFORM?35345:34962}function TH(t){return t&It.INDEX||t&It.VERTEX?35044:t&It.UNIFORM?35048:35044}function xH(t){const e=t.split(/\r?\n/),n=[];for(const i of e){if(i.length<=1)continue;const r=i.split(":");if(r.length===2){const[f,d]=r;n.push({message:d.trim(),type:ox(f),lineNum:0,linePos:0});continue}const[s,a,o,...l]=r;let c=parseInt(o,10);isNaN(c)&&(c=0);let u=parseInt(a,10);isNaN(u)&&(u=0),n.push({message:l.join(":").trim(),type:ox(s),lineNum:c,linePos:u})}return n}function ox(t){const e=["warning","error","info"],n=t.toLowerCase();return e.includes(n)?n:"info"}class SH extends lh{constructor(n,i){super(n,i);x(this,"device");x(this,"handle");switch(this.device=n,this.props.stage){case"vertex":this.handle=this.props.handle||this.device.gl.createShader(35633);break;case"fragment":this.handle=this.props.handle||this.device.gl.createShader(35632);break;default:throw new Error(this.props.stage)}n._setWebGLDebugMetadata(this.handle,this,{spector:this.props}),this._compile(this.source)}destroy(){this.handle&&(this.removeStats(),this.device.gl.deleteShader(this.handle),this.destroyed=!0,this.handle.destroyed=!0)}get asyncCompilationStatus(){return this._waitForCompilationComplete().then(()=>(this._getCompilationStatus(),this.compilationStatus))}async getCompilationInfo(){return await this._waitForCompilationComplete(),this.getCompilationInfoSync()}getCompilationInfoSync(){const n=this.device.gl.getShaderInfoLog(this.handle);return n?xH(n):[]}getTranslatedSource(){const i=this.device.getExtension("WEBGL_debug_shaders").WEBGL_debug_shaders;return(i==null?void 0:i.getTranslatedShaderSource(this.handle))||null}async _compile(n){n=n.startsWith("#version ")?n:`#version 300 es
${n}`;const{gl:i}=this.device;if(i.shaderSource(this.handle,n),i.compileShader(this.handle),!this.device.props.debug){this.compilationStatus="pending";return}if(!this.device.features.has("compilation-status-async-webgl")){if(this._getCompilationStatus(),this.debugShader(),this.compilationStatus==="error")throw new Error(`GLSL compilation errors in ${this.props.stage} shader ${this.props.id}`);return}ie.once(1,"Shader compilation is asynchronous")(),await this._waitForCompilationComplete(),ie.info(2,`Shader ${this.id} - async compilation complete: ${this.compilationStatus}`)(),this._getCompilationStatus(),this.debugShader()}async _waitForCompilationComplete(){const n=async s=>await new Promise(a=>setTimeout(a,s));if(!this.device.features.has("compilation-status-async-webgl")){await n(10);return}const{gl:r}=this.device;for(;;){if(r.getShaderParameter(this.handle,37297))return;await n(10)}}_getCompilationStatus(){this.compilationStatus=this.device.gl.getShaderParameter(this.handle,35713)?"success":"error"}}function wH(t,e,n,i){if(RH(e))return i(t);const r=t;r.pushState();try{return AH(t,e),Cl(r.gl,n),i(t)}finally{r.popState()}}function AH(t,e){const n=t,{gl:i}=n;if(e.cullMode)switch(e.cullMode){case"none":i.disable(2884);break;case"front":i.enable(2884),i.cullFace(1028);break;case"back":i.enable(2884),i.cullFace(1029);break}if(e.frontFace&&i.frontFace(Ta("frontFace",e.frontFace,{ccw:2305,cw:2304})),e.unclippedDepth&&t.features.has("depth-clip-control")&&i.enable(34383),e.depthBias!==void 0&&(i.enable(32823),i.polygonOffset(e.depthBias,e.depthBiasSlopeScale||0)),e.provokingVertex&&t.features.has("provoking-vertex-webgl")){const s=n.getExtension("WEBGL_provoking_vertex").WEBGL_provoking_vertex,a=Ta("provokingVertex",e.provokingVertex,{first:36429,last:36430});s==null||s.provokingVertexWEBGL(a)}if((e.polygonMode||e.polygonOffsetLine)&&t.features.has("polygon-mode-webgl")){if(e.polygonMode){const s=n.getExtension("WEBGL_polygon_mode").WEBGL_polygon_mode,a=Ta("polygonMode",e.polygonMode,{fill:6914,line:6913});s==null||s.polygonModeWEBGL(1028,a),s==null||s.polygonModeWEBGL(1029,a)}e.polygonOffsetLine&&i.enable(10754)}if(t.features.has("shader-clip-cull-distance-webgl")&&(e.clipDistance0&&i.enable(12288),e.clipDistance1&&i.enable(12289),e.clipDistance2&&i.enable(12290),e.clipDistance3&&i.enable(12291),e.clipDistance4&&i.enable(12292),e.clipDistance5&&i.enable(12293),e.clipDistance6&&i.enable(12294),e.clipDistance7&&i.enable(12295)),e.depthWriteEnabled!==void 0&&i.depthMask(CH("depthWriteEnabled",e.depthWriteEnabled)),e.depthCompare&&(e.depthCompare!=="always"?i.enable(2929):i.disable(2929),i.depthFunc(W_("depthCompare",e.depthCompare))),e.stencilWriteMask){const r=e.stencilWriteMask;i.stencilMaskSeparate(1028,r),i.stencilMaskSeparate(1029,r)}if(e.stencilReadMask&&ie.warn("stencilReadMask not supported under WebGL"),e.stencilCompare){const r=e.stencilReadMask||4294967295,s=W_("depthCompare",e.stencilCompare);e.stencilCompare!=="always"?i.enable(2960):i.disable(2960),i.stencilFuncSeparate(1028,s,0,r),i.stencilFuncSeparate(1029,s,0,r)}if(e.stencilPassOperation&&e.stencilFailOperation&&e.stencilDepthFailOperation){const r=Hm("stencilPassOperation",e.stencilPassOperation),s=Hm("stencilFailOperation",e.stencilFailOperation),a=Hm("stencilDepthFailOperation",e.stencilDepthFailOperation);i.stencilOpSeparate(1028,s,a,r),i.stencilOpSeparate(1029,s,a,r)}switch(e.blend){case!0:i.enable(3042);break;case!1:i.disable(3042);break}if(e.blendColorOperation||e.blendAlphaOperation){const r=lx("blendColorOperation",e.blendColorOperation||"add"),s=lx("blendAlphaOperation",e.blendAlphaOperation||"add");i.blendEquationSeparate(r,s);const a=Lf("blendColorSrcFactor",e.blendColorSrcFactor||"one"),o=Lf("blendColorDstFactor",e.blendColorDstFactor||"zero"),l=Lf("blendAlphaSrcFactor",e.blendAlphaSrcFactor||"one"),c=Lf("blendAlphaDstFactor",e.blendAlphaDstFactor||"zero");i.blendFuncSeparate(a,o,l,c)}}function W_(t,e){return Ta(t,e,{never:512,less:513,equal:514,"less-equal":515,greater:516,"not-equal":517,"greater-equal":518,always:519})}function Hm(t,e){return Ta(t,e,{keep:7680,zero:0,replace:7681,invert:5386,"increment-clamp":7682,"decrement-clamp":7683,"increment-wrap":34055,"decrement-wrap":34056})}function lx(t,e){return Ta(t,e,{add:32774,subtract:32778,"reverse-subtract":32779,min:32775,max:32776})}function Lf(t,e,n="color"){return Ta(t,e,{one:1,zero:0,src:768,"one-minus-src":769,dst:774,"one-minus-dst":775,"src-alpha":770,"one-minus-src-alpha":771,"dst-alpha":772,"one-minus-dst-alpha":773,"src-alpha-saturated":776,constant:n==="color"?32769:32771,"one-minus-constant":n==="color"?32770:32772,src1:768,"one-minus-src1":769,"src1-alpha":770,"one-minus-src1-alpha":771})}function EH(t,e){return`Illegal parameter ${e} for ${t}`}function Ta(t,e,n){if(!(e in n))throw new Error(EH(t,e));return n[e]}function CH(t,e){return e}function RH(t){let e=!0;for(const n in t){e=!1;break}return e}function GR(t){const e={};return t.addressModeU&&(e[10242]=Wm(t.addressModeU)),t.addressModeV&&(e[10243]=Wm(t.addressModeV)),t.addressModeW&&(e[32882]=Wm(t.addressModeW)),t.magFilter&&(e[10240]=Y_(t.magFilter)),(t.minFilter||t.mipmapFilter)&&(e[10241]=MH(t.minFilter||"linear",t.mipmapFilter)),t.lodMinClamp!==void 0&&(e[33082]=t.lodMinClamp),t.lodMaxClamp!==void 0&&(e[33083]=t.lodMaxClamp),t.type==="comparison-sampler"&&(e[34892]=34894),t.compare&&(e[34893]=W_("compare",t.compare)),t.maxAnisotropy&&(e[34046]=t.maxAnisotropy),e}function Wm(t){switch(t){case"clamp-to-edge":return 33071;case"repeat":return 10497;case"mirror-repeat":return 33648}}function Y_(t){switch(t){case"nearest":return 9728;case"linear":return 9729}}function MH(t,e="none"){if(!e)return Y_(t);switch(e){case"none":return Y_(t);case"nearest":switch(t){case"nearest":return 9984;case"linear":return 9985}break;case"linear":switch(t){case"nearest":return 9986;case"linear":return 9987}}}class OH extends sl{constructor(n,i){super(n,i);x(this,"device");x(this,"handle");x(this,"parameters");this.device=n,this.parameters=GR(i),this.handle=i.handle||this.device.gl.createSampler(),this._setSamplerParameters(this.parameters)}destroy(){this.handle&&(this.device.gl.deleteSampler(this.handle),this.handle=void 0)}toString(){return`Sampler(${this.id},${JSON.stringify(this.props)})`}_setSamplerParameters(n){for(const[i,r]of Object.entries(n)){const s=Number(i);switch(s){case 33082:case 33083:this.device.gl.samplerParameterf(this.handle,s,r);break;default:this.device.gl.samplerParameteri(this.handle,s,r);break}}}}function cu(t,e,n){if(IH(e))return n(t);const{nocatch:i=!0}=e,r=va.get(t);r.push(),Cl(t,e);let s;if(i)s=n(t),r.pop();else try{s=n(t)}finally{r.pop()}return s}function IH(t){for(const e in t)return!1;return!0}class Io extends oh{constructor(n,i){super(n,{...Jn.defaultProps,...i});x(this,"device");x(this,"gl");x(this,"handle");x(this,"texture");this.device=n,this.gl=this.device.gl,this.handle=null,this.texture=i.texture}}class Dc extends Jn{constructor(n,i){super(n,i);x(this,"device");x(this,"gl");x(this,"handle");x(this,"sampler");x(this,"view");x(this,"glTarget");x(this,"glFormat");x(this,"glType");x(this,"glInternalFormat");x(this,"compressed");x(this,"_textureUnit",0);this.device=n,this.gl=this.device.gl;const r=ZR(this.props.format);this.glTarget=PH(this.props.dimension),this.glInternalFormat=r.internalFormat,this.glFormat=r.format,this.glType=r.type,this.compressed=r.compressed,this.handle=this.props.handle||this.gl.createTexture(),this.device._setWebGLDebugMetadata(this.handle,this,{spector:this.props}),this.gl.bindTexture(this.glTarget,this.handle);const{dimension:s,width:a,height:o,depth:l,mipLevels:c,glTarget:u,glInternalFormat:f}=this;switch(s){case"2d":case"cube":this.gl.texStorage2D(u,c,f,a,o);break;case"2d-array":case"3d":this.gl.texStorage3D(u,c,f,a,o,l);break;default:throw new Error(s)}this.gl.bindTexture(this.glTarget,null),this._initializeData(i.data),this.setSampler(this.props.sampler),this.view=new Io(this.device,{...this.props,texture:this}),Object.seal(this)}destroy(){this.handle&&(this.gl.deleteTexture(this.handle),this.removeStats(),this.trackDeallocatedMemory("Texture"),this.destroyed=!0)}createView(n){return new Io(this.device,{...n,texture:this})}setSampler(n={}){super.setSampler(n);const i=GR(this.sampler.props);this._setSamplerParameters(i)}copyImageData(n){const i=this._normalizeCopyImageDataOptions(n),r=i.data,{width:s,height:a,depth:o}=this,{mipLevel:l=0,byteOffset:c=0,x:u=0,y:f=0,z:d=0}=i,{glFormat:p,glType:m,compressed:S}=this,v=cx(this.glTarget,this.dimension,d);let y;if(!this.compressed){const{bytesPerPixel:T}=this.device.getTextureFormatInfo(this.format);if(T){if(i.bytesPerRow%T!==0)throw new Error(`bytesPerRow (${i.bytesPerRow}) must be a multiple of bytesPerPixel (${T}) for ${this.format}`);y=i.bytesPerRow/T}}const _=this.compressed?{}:{...y!==void 0?{3314:y}:{},32878:i.rowsPerImage};this.gl.bindTexture(v,this.handle),cu(this.gl,_,()=>{switch(this.dimension){case"2d":case"cube":S?this.gl.compressedTexSubImage2D(v,l,u,f,s,a,p,r,c):this.gl.texSubImage2D(v,l,u,f,s,a,p,m,r,c);break;case"2d-array":case"3d":S?this.gl.compressedTexSubImage3D(v,l,u,f,d,s,a,o,p,r,c):this.gl.texSubImage3D(v,l,u,f,d,s,a,o,p,m,r,c);break;default:}}),this.gl.bindTexture(v,null)}copyExternalImage(n){const i=this._normalizeCopyExternalImageOptions(n);if(i.sourceX||i.sourceY)throw new Error("WebGL does not support sourceX/sourceY)");const{glFormat:r,glType:s}=this,{image:a,depth:o,mipLevel:l,x:c,y:u,z:f,width:d,height:p}=i,m=cx(this.glTarget,this.dimension,o),S=i.flipY?{37440:!0}:{};return this.gl.bindTexture(this.glTarget,this.handle),cu(this.gl,S,()=>{switch(this.dimension){case"2d":case"cube":this.gl.texSubImage2D(m,l,c,u,d,p,r,s,a);break;case"2d-array":case"3d":this.gl.texSubImage3D(m,l,c,u,f,d,p,o,r,s,a);break;default:}}),this.gl.bindTexture(this.glTarget,null),{width:i.width,height:i.height}}generateMipmapsWebGL(n){if(!(!(this.device.isTextureFormatRenderable(this.props.format)&&this.device.isTextureFormatFilterable(this.props.format))&&(ie.warn(`${this} is not renderable or filterable, may not be able to generate mipmaps`)(),!(n!=null&&n.force))))try{this.gl.bindTexture(this.glTarget,this.handle),this.gl.generateMipmap(this.glTarget)}catch(r){ie.warn(`Error generating mipmap for ${this}: ${r.message}`)()}finally{this.gl.bindTexture(this.glTarget,null)}}_setSamplerParameters(n){ie.log(2,`${this.id} sampler parameters`,this.device.getGLKeys(n))(),this.gl.bindTexture(this.glTarget,this.handle);for(const[i,r]of Object.entries(n)){const s=Number(i),a=r;switch(s){case 33082:case 33083:this.gl.texParameterf(this.glTarget,s,a);break;case 10240:case 10241:this.gl.texParameteri(this.glTarget,s,a);break;case 10242:case 10243:case 32882:this.gl.texParameteri(this.glTarget,s,a);break;case 34046:this.device.features.has("texture-filterable-anisotropic-webgl")&&this.gl.texParameteri(this.glTarget,s,a);break;case 34892:case 34893:this.gl.texParameteri(this.glTarget,s,a);break}}this.gl.bindTexture(this.glTarget,null)}_getActiveUnit(){return this.gl.getParameter(34016)-33984}_bind(n){const{gl:i}=this;return n!==void 0&&(this._textureUnit=n,i.activeTexture(33984+n)),i.bindTexture(this.glTarget,this.handle),n}_unbind(n){const{gl:i}=this;return n!==void 0&&(this._textureUnit=n,i.activeTexture(33984+n)),i.bindTexture(this.glTarget,null),n}}function PH(t){switch(t){case"1d":break;case"2d":return 3553;case"3d":return 32879;case"cube":return 34067;case"2d-array":return 35866}throw new Error(t)}function cx(t,e,n){return e==="cube"?34069+n:t}function DH(t){return LH[t]}function Tv(t){return BH[t]}function kH(t){return!!QR[t]}function NH(t){return QR[t]}const BH={5126:"f32",35664:"vec2<f32>",35665:"vec3<f32>",35666:"vec4<f32>",5124:"i32",35667:"vec2<i32>",35668:"vec3<i32>",35669:"vec4<i32>",5125:"u32",36294:"vec2<u32>",36295:"vec3<u32>",36296:"vec4<u32>",35670:"f32",35671:"vec2<f32>",35672:"vec3<f32>",35673:"vec4<f32>",35674:"mat2x2<f32>",35685:"mat2x3<f32>",35686:"mat2x4<f32>",35687:"mat3x2<f32>",35675:"mat3x3<f32>",35688:"mat3x4<f32>",35689:"mat4x2<f32>",35690:"mat4x3<f32>",35676:"mat4x4<f32>"},QR={35678:{viewDimension:"2d",sampleType:"float"},35680:{viewDimension:"cube",sampleType:"float"},35679:{viewDimension:"3d",sampleType:"float"},35682:{viewDimension:"3d",sampleType:"depth"},36289:{viewDimension:"2d-array",sampleType:"float"},36292:{viewDimension:"2d-array",sampleType:"depth"},36293:{viewDimension:"cube",sampleType:"float"},36298:{viewDimension:"2d",sampleType:"sint"},36299:{viewDimension:"3d",sampleType:"sint"},36300:{viewDimension:"cube",sampleType:"sint"},36303:{viewDimension:"2d-array",sampleType:"uint"},36306:{viewDimension:"2d",sampleType:"uint"},36307:{viewDimension:"3d",sampleType:"uint"},36308:{viewDimension:"cube",sampleType:"uint"},36311:{viewDimension:"2d-array",sampleType:"uint"}},LH={uint8:5121,sint8:5120,unorm8:5121,snorm8:5120,uint16:5123,sint16:5122,unorm16:5123,snorm16:5122,uint32:5125,sint32:5124,float16:5131,float32:5126};function UH(t,e){const n={attributes:[],bindings:[]};n.attributes=FH(t,e);const i=$H(t,e);for(const o of i){const l=o.uniforms.map(c=>({name:c.name,format:c.format,byteOffset:c.byteOffset,byteStride:c.byteStride,arrayLength:c.arrayLength}));n.bindings.push({type:"uniform",name:o.name,group:0,location:o.location,visibility:(o.vertex?1:0)&(o.fragment?2:0),minBindingSize:o.byteLength,uniforms:l})}const r=VH(t,e);let s=0;for(const o of r)if(kH(o.type)){const{viewDimension:l,sampleType:c}=NH(o.type);n.bindings.push({type:"texture",name:o.name,group:0,location:s,viewDimension:l,sampleType:c}),o.textureUnit=s,s+=1}r.length&&(n.uniforms=r);const a=zH(t,e);return a!=null&&a.length&&(n.varyings=a),n}function FH(t,e){const n=[],i=t.getProgramParameter(e,35721);for(let r=0;r<i;r++){const s=t.getActiveAttrib(e,r);if(!s)throw new Error("activeInfo");const{name:a,type:o}=s,l=t.getAttribLocation(e,a);if(l>=0){const c=Tv(o),u=/instance/i.test(a)?"instance":"vertex";n.push({name:a,location:l,stepMode:u,type:c})}}return n.sort((r,s)=>r.location-s.location),n}function zH(t,e){const n=[],i=t.getProgramParameter(e,35971);for(let r=0;r<i;r++){const s=t.getTransformFeedbackVarying(e,r);if(!s)throw new Error("activeInfo");const{name:a,type:o,size:l}=s,c=Tv(o),{type:u,components:f}=$C(c);n.push({location:r,name:a,type:u,size:l*f})}return n.sort((r,s)=>r.location-s.location),n}function VH(t,e){const n=[],i=t.getProgramParameter(e,35718);for(let r=0;r<i;r++){const s=t.getActiveUniform(e,r);if(!s)throw new Error("activeInfo");const{name:a,size:o,type:l}=s,{name:c,isArray:u}=jH(a);let f=t.getUniformLocation(e,c);const d={location:f,name:c,size:o,type:l,isArray:u};if(n.push(d),d.size>1)for(let p=0;p<d.size;p++){const m=`${c}[${p}]`;f=t.getUniformLocation(e,m);const S={...d,name:m,location:f};n.push(S)}}return n}function $H(t,e){const n=(s,a)=>t.getActiveUniformBlockParameter(e,s,a),i=[],r=t.getProgramParameter(e,35382);for(let s=0;s<r;s++){const a={name:t.getActiveUniformBlockName(e,s)||"",location:n(s,35391),byteLength:n(s,35392),vertex:n(s,35396),fragment:n(s,35398),uniformCount:n(s,35394),uniforms:[]},o=n(s,35395)||[],l=t.getActiveUniforms(e,o,35383),c=t.getActiveUniforms(e,o,35384),u=t.getActiveUniforms(e,o,35387),f=t.getActiveUniforms(e,o,35388);for(let d=0;d<a.uniformCount;++d){const p=t.getActiveUniform(e,o[d]);if(!p)throw new Error("activeInfo");const m=Tv(l[d]);a.uniforms.push({name:p.name,format:m,type:l[d],arrayLength:c[d],byteOffset:u[d],byteStride:f[d]})}i.push(a)}return i.sort((s,a)=>s.location-a.location),i}function jH(t){if(t[t.length-1]!=="]")return{name:t,length:1,isArray:!1};const n=/([^[]*)(\[[0-9]+\])?/.exec(t);if(!n||n.length<2)throw new Error(`Failed to parse GLSL uniform name ${t}`);return{name:n[1],length:n[2]?1:0,isArray:!!n[2]}}function HH(t,e,n,i){const r=t;let s=i;s===!0&&(s=1),s===!1&&(s=0);const a=typeof s=="number"?[s]:s;switch(n){case 35678:case 35680:case 35679:case 35682:case 36289:case 36292:case 36293:case 36298:case 36299:case 36300:case 36303:case 36306:case 36307:case 36308:case 36311:if(typeof i!="number")throw new Error("samplers must be set to integers");return t.uniform1i(e,i);case 5126:return t.uniform1fv(e,a);case 35664:return t.uniform2fv(e,a);case 35665:return t.uniform3fv(e,a);case 35666:return t.uniform4fv(e,a);case 5124:return t.uniform1iv(e,a);case 35667:return t.uniform2iv(e,a);case 35668:return t.uniform3iv(e,a);case 35669:return t.uniform4iv(e,a);case 35670:return t.uniform1iv(e,a);case 35671:return t.uniform2iv(e,a);case 35672:return t.uniform3iv(e,a);case 35673:return t.uniform4iv(e,a);case 5125:return r.uniform1uiv(e,a,1);case 36294:return r.uniform2uiv(e,a,2);case 36295:return r.uniform3uiv(e,a,3);case 36296:return r.uniform4uiv(e,a,4);case 35674:return t.uniformMatrix2fv(e,!1,a);case 35675:return t.uniformMatrix3fv(e,!1,a);case 35676:return t.uniformMatrix4fv(e,!1,a);case 35685:return r.uniformMatrix2x3fv(e,!1,a);case 35686:return r.uniformMatrix2x4fv(e,!1,a);case 35687:return r.uniformMatrix3x2fv(e,!1,a);case 35688:return r.uniformMatrix3x4fv(e,!1,a);case 35689:return r.uniformMatrix4x2fv(e,!1,a);case 35690:return r.uniformMatrix4x3fv(e,!1,a)}throw new Error("Illegal uniform")}function WH(t){switch(t){case"point-list":return 0;case"line-list":return 1;case"line-strip":return 3;case"triangle-list":return 4;case"triangle-strip":return 5;default:throw new Error(t)}}function YH(t){switch(t){case"point-list":return 0;case"line-list":return 1;case"line-strip":return 1;case"triangle-list":return 4;case"triangle-strip":return 4;default:throw new Error(t)}}const ux=4;class XH extends _a{constructor(n,i){super(n,i);x(this,"device");x(this,"handle");x(this,"vs");x(this,"fs");x(this,"introspectedLayout");x(this,"uniforms",{});x(this,"bindings",{});x(this,"varyings",null);x(this,"_uniformCount",0);x(this,"_uniformSetters",{});this.device=n,this.handle=this.props.handle||this.device.gl.createProgram(),this.device._setWebGLDebugMetadata(this.handle,this,{spector:{id:this.props.id}}),this.vs=i.vs,this.fs=i.fs;const{varyings:r,bufferMode:s=35981}=i;r&&r.length>0&&(this.varyings=r,this.device.gl.transformFeedbackVaryings(this.handle,r,s)),this._linkShaders(),ie.time(3,`RenderPipeline ${this.id} - shaderLayout introspection`)(),this.introspectedLayout=UH(this.device.gl,this.handle),ie.timeEnd(3,`RenderPipeline ${this.id} - shaderLayout introspection`)(),this.shaderLayout=i.shaderLayout?qH(this.introspectedLayout,i.shaderLayout):this.introspectedLayout}get[Symbol.toStringTag](){return"WEBGLRenderPipeline"}destroy(){this.handle&&(this.device.gl.useProgram(null),this.device.gl.deleteProgram(this.handle),this.destroyed=!0,this.handle.destroyed=!0,this.handle=null)}setBindings(n,i){for(const[r,s]of Object.entries(n)){const a=this.shaderLayout.bindings.find(o=>o.name===r)||this.shaderLayout.bindings.find(o=>o.name===`${r}Uniforms`);if(!a){const o=this.shaderLayout.bindings.map(l=>`"${l.name}"`).join(", ");i!=null&&i.disableWarnings||ie.warn(`No binding "${r}" in render pipeline "${this.id}", expected one of ${o}`,s)();continue}switch(s||ie.warn(`Unsetting binding "${r}" in render pipeline "${this.id}"`)(),a.type){case"uniform":if(!(s instanceof Pc)&&!(s.buffer instanceof Pc))throw new Error("buffer value");break;case"texture":if(!(s instanceof Io||s instanceof Dc||s instanceof Ic))throw new Error(`${this} Bad texture binding for ${r}`);break;case"sampler":ie.warn(`Ignoring sampler ${r}`)();break;default:throw new Error(a.type)}this.bindings[r]=s}}draw(n){var v;const{renderPass:i,parameters:r=this.props.parameters,topology:s=this.props.topology,vertexArray:a,vertexCount:o,instanceCount:l,isInstanced:c=!1,firstVertex:u=0,transformFeedback:f}=n,d=WH(s),p=!!a.indexBuffer,m=(v=a.indexBuffer)==null?void 0:v.glIndexType;if(this.linkStatus!=="success")return ie.info(2,`RenderPipeline:${this.id}.draw() aborted - waiting for shader linking`)(),!1;if(!this._areTexturesRenderable())return ie.info(2,`RenderPipeline:${this.id}.draw() aborted - textures not yet loaded`)(),!1;this.device.gl.useProgram(this.handle),a.bindBeforeRender(i),f&&f.begin(this.props.topology),this._applyBindings(),this._applyUniforms();const S=i;return wH(this.device,r,S.glParameters,()=>{p&&c?this.device.gl.drawElementsInstanced(d,o||0,m,u,l||0):p?this.device.gl.drawElements(d,o||0,m,u):c?this.device.gl.drawArraysInstanced(d,u,o||0,l||0):this.device.gl.drawArrays(d,u,o||0),f&&f.end()}),a.unbindAfterRender(i),!0}async _linkShaders(){const{gl:n}=this.device;if(n.attachShader(this.handle,this.vs.handle),n.attachShader(this.handle,this.fs.handle),ie.time(ux,`linkProgram for ${this.id}`)(),n.linkProgram(this.handle),ie.timeEnd(ux,`linkProgram for ${this.id}`)(),ie.level,!this.device.features.has("compilation-status-async-webgl")){const r=this._getLinkStatus();this._reportLinkStatus(r);return}ie.once(1,"RenderPipeline linking is asynchronous")(),await this._waitForLinkComplete(),ie.info(2,`RenderPipeline ${this.id} - async linking complete: ${this.linkStatus}`)();const i=this._getLinkStatus();this._reportLinkStatus(i)}async _reportLinkStatus(n){var i;switch(n){case"success":return;default:const r=n==="link-error"?"Link error":"Validation error";switch(this.vs.compilationStatus){case"error":throw this.vs.debugShader(),new Error(`${this} ${r} during compilation of ${this.vs}`);case"pending":await this.vs.asyncCompilationStatus,this.vs.debugShader();break}switch((i=this.fs)==null?void 0:i.compilationStatus){case"error":throw this.fs.debugShader(),new Error(`${this} ${r} during compilation of ${this.fs}`);case"pending":await this.fs.asyncCompilationStatus,this.fs.debugShader();break}const s=this.device.gl.getProgramInfoLog(this.handle);this.device.reportError(new Error(`${r} during ${n}: ${s}`),this)(),this.device.debug()}}_getLinkStatus(){const{gl:n}=this.device;return n.getProgramParameter(this.handle,35714)?(n.validateProgram(this.handle),n.getProgramParameter(this.handle,35715)?(this.linkStatus="success","success"):(this.linkStatus="error","validation-error")):(this.linkStatus="error","link-error")}async _waitForLinkComplete(){const n=async s=>await new Promise(a=>setTimeout(a,s));if(!this.device.features.has("compilation-status-async-webgl")){await n(10);return}const{gl:r}=this.device;for(;;){if(r.getProgramParameter(this.handle,37297))return;await n(10)}}_areTexturesRenderable(){let n=!0;for(const i of this.shaderLayout.bindings)!this.bindings[i.name]&&!this.bindings[i.name.replace(/Uniforms$/,"")]&&(ie.warn(`Binding ${i.name} not found in ${this.id}`)(),n=!1);return n}_applyBindings(){if(this.linkStatus!=="success")return;const{gl:n}=this.device;n.useProgram(this.handle);let i=0,r=0;for(const s of this.shaderLayout.bindings){const a=this.bindings[s.name]||this.bindings[s.name.replace(/Uniforms$/,"")];if(!a)throw new Error(`No value for binding ${s.name} in ${this.id}`);switch(s.type){case"uniform":const{name:o}=s,l=n.getUniformBlockIndex(this.handle,o);if(l===4294967295)throw new Error(`Invalid uniform block name ${o}`);n.uniformBlockBinding(this.handle,r,l),a instanceof Pc?n.bindBufferBase(35345,r,a.handle):n.bindBufferRange(35345,r,a.buffer.handle,a.offset||0,a.size||a.buffer.byteLength-a.offset),r+=1;break;case"texture":if(!(a instanceof Io||a instanceof Dc||a instanceof Ic))throw new Error("texture");let c;if(a instanceof Io)c=a.texture;else if(a instanceof Dc)c=a;else if(a instanceof Ic&&a.colorAttachments[0]instanceof Io)ie.warn("Passing framebuffer in texture binding may be deprecated. Use fbo.colorAttachments[0] instead")(),c=a.colorAttachments[0].texture;else throw new Error("No texture");n.activeTexture(33984+i),n.bindTexture(c.glTarget,c.handle),i+=1;break;case"sampler":break;case"storage":case"read-only-storage":throw new Error(`binding type '${s.type}' not supported in WebGL`)}}}_applyUniforms(){for(const n of this.shaderLayout.uniforms||[]){const{name:i,location:r,type:s,textureUnit:a}=n,o=this.uniforms[i]??a;o!==void 0&&HH(this.device.gl,r,s,o)}}}function qH(t,e){const n={...t,attributes:t.attributes.map(i=>({...i}))};for(const i of(e==null?void 0:e.attributes)||[]){const r=n.attributes.find(s=>s.name===i.name);r?(r.type=i.type||r.type,r.stepMode=i.stepMode||r.stepMode):ie.warn(`shader layout attribute ${i.name} not present in shader`)}return n}class KH extends T_{constructor(n){super(n,{});x(this,"device");x(this,"handle",null);x(this,"commands",[]);this.device=n}_executeCommands(n=this.commands){for(const i of n)switch(i.name){case"copy-buffer-to-buffer":ZH(this.device,i.options);break;case"copy-buffer-to-texture":GH(this.device,i.options);break;case"copy-texture-to-buffer":QH(this.device,i.options);break;case"copy-texture-to-texture":JH(this.device,i.options);break;default:throw new Error(i.name)}}}function ZH(t,e){const n=e.sourceBuffer,i=e.destinationBuffer;t.gl.bindBuffer(36662,n.handle),t.gl.bindBuffer(36663,i.handle),t.gl.copyBufferSubData(36662,36663,e.sourceOffset??0,e.destinationOffset??0,e.size),t.gl.bindBuffer(36662,null),t.gl.bindBuffer(36663,null)}function GH(t,e){throw new Error("Not implemented")}function QH(t,e){const{sourceTexture:n,mipLevel:i=0,aspect:r="all",width:s=e.sourceTexture.width,height:a=e.sourceTexture.height,depthOrArrayLayers:o=0,origin:l=[0,0],destinationBuffer:c,byteOffset:u=0,bytesPerRow:f,rowsPerImage:d}=e;if(r!=="all")throw new Error("aspect not supported in WebGL");if(i!==0||o!==0||f||d)throw new Error("not implemented");const{framebuffer:p,destroyFramebuffer:m}=JR(n);let S;try{const v=c,y=s||p.width,_=a||p.height,T=ZR(p.colorAttachments[0].texture.props.format),b=T.format,M=T.type;t.gl.bindBuffer(35051,v.handle),S=t.gl.bindFramebuffer(36160,p.handle),t.gl.readPixels(l[0],l[1],y,_,b,M,u)}finally{t.gl.bindBuffer(35051,null),S!==void 0&&t.gl.bindFramebuffer(36160,S),m&&p.destroy()}}function JH(t,e){const{sourceTexture:n,destinationMipLevel:i=0,origin:r=[0,0],destinationOrigin:s=[0,0],destinationTexture:a}=e;let{width:o=e.destinationTexture.width,height:l=e.destinationTexture.height}=e;const{framebuffer:c,destroyFramebuffer:u}=JR(n),[f,d]=r,[p,m,S]=s,v=t.gl.bindFramebuffer(36160,c.handle);let y,_;if(a instanceof Dc)y=a,o=Number.isFinite(o)?o:y.width,l=Number.isFinite(l)?l:y.height,y._bind(0),_=y.glTarget;else throw new Error("invalid destination");switch(_){case 3553:case 34067:t.gl.copyTexSubImage2D(_,i,p,m,f,d,o,l);break;case 35866:case 32879:t.gl.copyTexSubImage3D(_,i,p,m,S,f,d,o,l);break}y&&y._unbind(),t.gl.bindFramebuffer(36160,v),u&&c.destroy()}function JR(t){if(t instanceof Jn){const{width:e,height:n,id:i}=t;return{framebuffer:t.device.createFramebuffer({id:`framebuffer-for-${i}`,width:e,height:n,colorAttachments:[t]}),destroyFramebuffer:!0}}return{framebuffer:t,destroyFramebuffer:!1}}const eW=[1,2,4,8];class tW extends b_{constructor(n,i){var a;super(n,i);x(this,"device");x(this,"handle",null);x(this,"glParameters",{});this.device=n;let r;if(!((a=i==null?void 0:i.parameters)!=null&&a.viewport))if(i!=null&&i.framebuffer){const{width:o,height:l}=i.framebuffer;r=[0,0,o,l]}else{const[o,l]=n.getDefaultCanvasContext().getDrawingBufferSize();r=[0,0,o,l]}this.device.pushState(),this.setParameters({viewport:r,...this.props.parameters});const s=this.props.framebuffer;if(this.props.framebuffer&&(s!=null&&s.handle)){const o=this.props.framebuffer.colorAttachments.map((l,c)=>36064+c);this.device.gl.drawBuffers(o)}else this.device.gl.drawBuffers([1029]);this.clear()}end(){this.device.popState()}pushDebugGroup(n){}popDebugGroup(){}insertDebugMarker(n){}setParameters(n={}){const i={...this.glParameters};i.framebuffer=this.props.framebuffer||null,this.props.depthReadOnly&&(i.depthMask=!this.props.depthReadOnly),i.stencilMask=this.props.stencilReadOnly?0:1,i[35977]=this.props.discard,n.viewport&&(n.viewport.length>=6?(i.viewport=n.viewport.slice(0,4),i.depthRange=[n.viewport[4],n.viewport[5]]):i.viewport=n.viewport),n.scissorRect&&(i.scissorTest=!0,i.scissor=n.scissorRect),n.blendConstant&&(i.blendColor=n.blendConstant),n.stencilReference&&(console.warn("RenderPassParameters.stencilReference not yet implemented in WebGL"),i[2967]=n.stencilReference),"colorMask"in n&&(i.colorMask=eW.map(r=>!!(r&n.colorMask))),this.glParameters=i,Cl(this.device.gl,i)}beginOcclusionQuery(n){const i=this.props.occlusionQuerySet;i==null||i.beginOcclusionQuery()}endOcclusionQuery(){const n=this.props.occlusionQuerySet;n==null||n.endOcclusionQuery()}clear(){const n={...this.glParameters};let i=0;this.props.clearColors&&this.props.clearColors.forEach((r,s)=>{r&&this.clearColorBuffer(s,r)}),this.props.clearColor!==!1&&this.props.clearColors===void 0&&(i|=16384,n.clearColor=this.props.clearColor),this.props.clearDepth!==!1&&(i|=256,n.clearDepth=this.props.clearDepth),this.props.clearStencil!==!1&&(i|=1024,n.clearStencil=this.props.clearStencil),i!==0&&cu(this.device.gl,n,()=>{this.device.gl.clear(i)})}clearColorBuffer(n=0,i=[0,0,0,0]){cu(this.device.gl,{framebuffer:this.props.framebuffer},()=>{switch(i.constructor){case Int8Array:case Int16Array:case Int32Array:this.device.gl.clearBufferiv(6144,n,i);break;case Uint8Array:case Uint8ClampedArray:case Uint16Array:case Uint32Array:this.device.gl.clearBufferuiv(6144,n,i);break;case Float32Array:this.device.gl.clearBufferfv(6144,n,i);break;default:throw new Error("clearColorBuffer: color must be typed array")}})}}class fx extends v_{constructor(n,i){super(n,i);x(this,"device");x(this,"handle",null);x(this,"commandBuffer");this.device=n,this.commandBuffer=new KH(n)}destroy(){}finish(){return this.commandBuffer}beginRenderPass(n){return new tW(this.device,n)}beginComputePass(n){throw new Error("ComputePass not supported in WebGL")}copyBufferToBuffer(n){this.commandBuffer.commands.push({name:"copy-buffer-to-buffer",options:n})}copyBufferToTexture(n){this.commandBuffer.commands.push({name:"copy-buffer-to-texture",options:n})}copyTextureToBuffer(n){this.commandBuffer.commands.push({name:"copy-texture-to-buffer",options:n})}copyTextureToTexture(n){this.commandBuffer.commands.push({name:"copy-texture-to-texture",options:n})}pushDebugGroup(n){}popDebugGroup(){}insertDebugMarker(n){}resolveQuerySet(n,i,r){}}function nW(t){const{target:e,source:n,start:i=0,count:r=1}=t,s=n.length,a=r*s;let o=0;for(let l=i;o<s;o++)e[l++]=n[o];for(;o<a;)o<a-o?(e.copyWithin(i+o,i,i+o),o*=2):(e.copyWithin(i+o,i,i+a-o),o=a);return t.target}class xv extends x_{constructor(n,i){super(n,i);x(this,"device");x(this,"handle");x(this,"buffer",null);x(this,"bufferValue",null);this.device=n,this.handle=this.device.gl.createVertexArray()}get[Symbol.toStringTag](){return"VertexArray"}static isConstantAttributeZeroSupported(n){return _8()==="Chrome"}destroy(){var n;super.destroy(),this.buffer&&((n=this.buffer)==null||n.destroy()),this.handle&&(this.device.gl.deleteVertexArray(this.handle),this.handle=void 0)}setIndexBuffer(n){const i=n;if(i&&i.glTarget!==34963)throw new Error("Use .setBuffer()");this.device.gl.bindVertexArray(this.handle),this.device.gl.bindBuffer(34963,i?i.handle:null),this.indexBuffer=i,this.device.gl.bindVertexArray(null)}setBuffer(n,i){const r=i;if(r.glTarget===34963)throw new Error("Use .setIndexBuffer()");const{size:s,type:a,stride:o,offset:l,normalized:c,integer:u,divisor:f}=this._getAccessor(n);this.device.gl.bindVertexArray(this.handle),this.device.gl.bindBuffer(34962,r.handle),u?this.device.gl.vertexAttribIPointer(n,s,a,o,l):this.device.gl.vertexAttribPointer(n,s,a,c,o,l),this.device.gl.bindBuffer(34962,null),this.device.gl.enableVertexAttribArray(n),this.device.gl.vertexAttribDivisor(n,f||0),this.attributes[n]=r,this.device.gl.bindVertexArray(null)}setConstantWebGL(n,i){this._enable(n,!1),this.attributes[n]=i}bindBeforeRender(){this.device.gl.bindVertexArray(this.handle),this._applyConstantAttributes()}unbindAfterRender(){this.device.gl.bindVertexArray(null)}_applyConstantAttributes(){for(let n=0;n<this.maxVertexAttributes;++n){const i=this.attributes[n];ArrayBuffer.isView(i)&&this.device.setConstantAttributeWebGL(n,i)}}_getAccessor(n){const i=this.attributeInfos[n];if(!i)throw new Error(`Unknown attribute location ${n}`);const r=KR(i.bufferDataType);return{size:i.bufferComponents,type:r,stride:i.byteStride,offset:i.byteOffset,normalized:i.normalized,integer:i.integer,divisor:i.stepMode==="instance"?1:0}}_enable(n,i=!0){const s=xv.isConstantAttributeZeroSupported(this.device)||n!==0;(i||s)&&(n=Number(n),this.device.gl.bindVertexArray(this.handle),i?this.device.gl.enableVertexAttribArray(n):this.device.gl.disableVertexAttribArray(n),this.device.gl.bindVertexArray(null))}getConstantBuffer(n,i){const r=iW(i),s=r.byteLength*n,a=r.length*n;if(this.buffer&&s!==this.buffer.byteLength)throw new Error(`Buffer size is immutable, byte length ${s} !== ${this.buffer.byteLength}.`);let o=!this.buffer;if(this.buffer=this.buffer||this.device.createBuffer({byteLength:s}),o||(o=!rW(r,this.bufferValue)),o){const l=dz(i.constructor,a);nW({target:l,source:r,start:0,count:a}),this.buffer.write(l),this.bufferValue=i}return this.buffer}}function iW(t){return Array.isArray(t)?new Float32Array(t):t}function rW(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}class sW extends S_{constructor(n,i){super(n,i);x(this,"device");x(this,"gl");x(this,"handle");x(this,"layout");x(this,"buffers",{});x(this,"unusedBuffers",{});x(this,"bindOnUse",!0);x(this,"_bound",!1);this.device=n,this.gl=n.gl,this.handle=this.props.handle||this.gl.createTransformFeedback(),this.layout=this.props.layout,i.buffers&&this.setBuffers(i.buffers),Object.seal(this)}destroy(){this.gl.deleteTransformFeedback(this.handle),super.destroy()}begin(n="point-list"){this.gl.bindTransformFeedback(36386,this.handle),this.bindOnUse&&this._bindBuffers(),this.gl.beginTransformFeedback(YH(n))}end(){this.gl.endTransformFeedback(),this.bindOnUse&&this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null)}setBuffers(n){this.buffers={},this.unusedBuffers={},this.bind(()=>{for(const i in n)this.setBuffer(i,n[i])})}setBuffer(n,i){const r=this._getVaryingIndex(n),{buffer:s,byteLength:a,byteOffset:o}=this._getBufferRange(i);if(r<0){this.unusedBuffers[n]=s,ie.warn(`${this.id} unusedBuffers varying buffer ${n}`)();return}this.buffers[r]={buffer:s,byteLength:a,byteOffset:o},this.bindOnUse||this._bindBuffer(r,s,o,a)}getBuffer(n){if(dx(n))return this.buffers[n]||null;const i=this._getVaryingIndex(n);return i>=0?this.buffers[i]:null}bind(n=this.handle){if(typeof n!="function")return this.gl.bindTransformFeedback(36386,n),this;let i;return this._bound?i=n():(this.gl.bindTransformFeedback(36386,this.handle),this._bound=!0,i=n(),this._bound=!1,this.gl.bindTransformFeedback(36386,null)),i}unbind(){this.bind(null)}_getBufferRange(n){if(n instanceof Pc)return{buffer:n,byteOffset:0,byteLength:n.byteLength};const{buffer:i,byteOffset:r=0,byteLength:s=n.buffer.byteLength}=n;return{buffer:i,byteOffset:r,byteLength:s}}_getVaryingIndex(n){if(dx(n))return Number(n);for(const i of this.layout.varyings||[])if(n===i.name)return i.location;return-1}_bindBuffers(){for(const n in this.buffers){const{buffer:i,byteLength:r,byteOffset:s}=this._getBufferRange(this.buffers[n]);this._bindBuffer(Number(n),i,s,r)}}_unbindBuffers(){for(const n in this.buffers)this.gl.bindBufferBase(35982,Number(n),null)}_bindBuffer(n,i,r=0,s){const a=i&&i.handle;!a||s===void 0?this.gl.bindBufferBase(35982,n,a):this.gl.bindBufferRange(35982,n,a,r,s)}}function dx(t){return typeof t=="number"?Number.isInteger(t):/^\d+$/.test(t)}class aW extends w_{constructor(n,i){super(n,i);x(this,"device");x(this,"handle");x(this,"target",null);x(this,"_queryPending",!1);x(this,"_pollingPromise",null);if(this.device=n,i.count>1)throw new Error("WebGL QuerySet can only have one value");const r=this.device.gl.createQuery();if(!r)throw new Error("WebGL query not supported");this.handle=r,Object.seal(this)}get[Symbol.toStringTag](){return"Query"}destroy(){this.device.gl.deleteQuery(this.handle)}beginTimestampQuery(){return this._begin(35007)}endTimestampQuery(){this._end()}beginOcclusionQuery(n){return this._begin(n!=null&&n.conservative?36202:35887)}endOcclusionQuery(){this._end()}beginTransformFeedbackQuery(){return this._begin(35976)}endTransformFeedbackQuery(){this._end()}async resolveQuery(){return[await this.pollQuery()]}_begin(n){this._queryPending||(this.target=n,this.device.gl.beginQuery(this.target,this.handle))}_end(){this._queryPending||this.target&&(this.device.gl.endQuery(this.target),this.target=null,this._queryPending=!0)}isResultAvailable(){if(!this._queryPending)return!1;const n=this.device.gl.getQueryParameter(this.handle,34919);return n&&(this._queryPending=!1),n}isTimerDisjoint(){return this.device.gl.getParameter(36795)}getResult(){return this.device.gl.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}pollQuery(n=Number.POSITIVE_INFINITY){if(this._pollingPromise)return this._pollingPromise;let i=0;return this._pollingPromise=new Promise((r,s)=>{const a=()=>{this.isResultAvailable()?(r(this.getResult()),this._pollingPromise=null):i++>n?(s("Timed out"),this._pollingPromise=null):requestAnimationFrame(a)};requestAnimationFrame(a)}),this._pollingPromise}}function eM(t){switch(t){case 6406:case 33326:case 6403:case 36244:return 1;case 33339:case 33340:case 33328:case 33320:case 33319:return 2;case 6407:case 36248:case 34837:return 3;case 6408:case 36249:case 34836:return 4;default:return 0}}function oW(t){switch(t){case 5121:return 1;case 33635:case 32819:case 32820:return 2;case 5126:return 4;default:return 0}}function lW(t){return cW[t]}const cW={5124:"sint32",5125:"uint32",5122:"sint16",5123:"uint16",5120:"sint8",5121:"uint8",5126:"float32",5131:"float16",33635:"uint16",32819:"uint16",32820:"uint16",33640:"uint32",35899:"uint32",35902:"uint32",34042:"uint32",36269:"uint32"};function uW(t,e){var _;const{sourceX:n=0,sourceY:i=0,sourceAttachment:r=0}=e||{};let{target:s=null,sourceWidth:a,sourceHeight:o,sourceDepth:l,sourceFormat:c,sourceType:u}=e||{};const{framebuffer:f,deleteFramebuffer:d}=tM(t),{gl:p,handle:m}=f;a||(a=f.width),o||(o=f.height);const S=(_=f.colorAttachments[r])==null?void 0:_.texture;if(!S)throw new Error(`Invalid framebuffer attachment ${r}`);l=(S==null?void 0:S.depth)||1,c||(c=(S==null?void 0:S.glFormat)||6408),u||(u=(S==null?void 0:S.glType)||5121),s=hW(s,u,c,a,o);const v=q0(s);u=u||DH(v);const y=p.bindFramebuffer(36160,m);return p.readBuffer(36064+r),p.readPixels(n,i,a,o,c,u,s),p.readBuffer(36064),p.bindFramebuffer(36160,y||null),d&&f.destroy(),s}function fW(t,e){const{target:n,sourceX:i=0,sourceY:r=0,sourceFormat:s=6408,targetByteOffset:a=0}=e||{};let{sourceWidth:o,sourceHeight:l,sourceType:c}=e||{};const{framebuffer:u,deleteFramebuffer:f}=tM(t);o=o||u.width,l=l||u.height;const d=u;c=c||5121;let p=n;if(!p){const S=eM(s),v=oW(c),y=a+o*l*S*v;p=d.device.createBuffer({byteLength:y})}const m=t.device.createCommandEncoder();return m.copyTextureToBuffer({sourceTexture:t,width:o,height:l,origin:[i,r],destinationBuffer:p,byteOffset:a}),m.destroy(),f&&u.destroy(),p}function tM(t){return t instanceof ch?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:dW(t),deleteFramebuffer:!0}}function dW(t,e){const{device:n,width:i,height:r,id:s}=t;return n.createFramebuffer({...e,id:`framebuffer-for-${s}`,width:i,height:r,colorAttachments:[t]})}function hW(t,e,n,i,r,s){if(t)return t;e||(e=5121);const a=lW(e),o=K0(a),l=eM(n);return new o(i*r*l)}class X_ extends Ia{constructor(n){var f,d;super({...n,id:n.id||bH("webgl-device")});x(this,"type","webgl");x(this,"handle");x(this,"features");x(this,"limits");x(this,"info");x(this,"canvasContext");x(this,"preferredColorFormat","rgba8unorm");x(this,"preferredDepthFormat","depth24plus");x(this,"commandEncoder");x(this,"lost");x(this,"_resolveContextLost");x(this,"gl");x(this,"_constants");x(this,"_extensions",{});x(this,"_polyfilled",!1);x(this,"spectorJS");const i=Ia._getCanvasContextProps(n);if(!i)throw new Error("WebGLDevice requires props.createCanvasContext to be set");let r=(d=(f=i.canvas)==null?void 0:f.gl)==null?void 0:d.device;if(r)throw new Error(`WebGL context already attached to device ${r.id}`);this.canvasContext=new _H(this,i),this.lost=new Promise(p=>{this._resolveContextLost=p});const s={...n.webgl};i.alphaMode==="premultiplied"&&(s.premultipliedAlpha=!0),n.powerPreference!==void 0&&(s.powerPreference=n.powerPreference);const o=this.props._handle||Qj(this.canvasContext.canvas,{onContextLost:p=>{var m;return(m=this._resolveContextLost)==null?void 0:m.call(this,{reason:"destroyed",message:"Entered sleep mode, or too many apps or browser tabs are using the GPU."})},onContextRestored:p=>console.log("WebGL context restored")},s);if(!o)throw new Error("WebGL context creation failed");if(r=o.device,r){if(n._reuseDevices)return ie.log(1,`Not creating a new Device, instead returning a reference to Device ${r.id} already attached to WebGL context`,r)(),r._reused=!0,r;throw new Error(`WebGL context already attached to device ${r.id}`)}this.handle=o,this.gl=o,this.spectorJS=kj({...this.props,gl:this.handle}),this.gl.device=this,this.gl._version=2,this.info=Jj(this.gl,this._extensions),this.limits=new gH(this.gl),this.features=new pH(this.gl,this._extensions,this.props._disabledFeatures),this.props._initializeFeatures&&this.features.initializeFeatures(),new va(this.gl,{log:(...p)=>ie.log(1,...p)()}).trackState(this.gl,{copyState:!1});const c=n.debugWebGL||n.debug,u=n.debugWebGL;c&&(this.gl=Lj(this.gl,{debugWebGL:c,traceWebGL:u}),ie.warn("WebGL debug mode activated. Performance reduced.")(),n.debugWebGL&&(ie.level=Math.max(ie.level,1))),this.commandEncoder=new fx(this,{id:`${this}-command-encoder`})}get[Symbol.toStringTag](){return"WebGLDevice"}toString(){return`${this[Symbol.toStringTag]}(${this.id})`}isVertexFormatSupported(n){switch(n){case"unorm8x4-bgra":return!1;default:return!0}}destroy(){!this.props._reuseDevices&&!this._reused&&delete this.gl.device}get isLost(){return this.gl.isContextLost()}getTextureByteAlignment(){return 4}createCanvasContext(n){throw new Error("WebGL only supports a single canvas")}createBuffer(n){const i=this._normalizeBufferProps(n);return new Pc(this,i)}createTexture(n){return new Dc(this,n)}createExternalTexture(n){throw new Error("createExternalTexture() not implemented")}createSampler(n){return new OH(this,n)}createShader(n){return new SH(this,n)}createFramebuffer(n){return new Ic(this,n)}createVertexArray(n){return new xv(this,n)}createTransformFeedback(n){return new sW(this,n)}createQuerySet(n){return new aW(this,n)}createRenderPipeline(n){return new XH(this,n)}createComputePipeline(n){throw new Error("ComputePipeline not supported in WebGL")}createCommandEncoder(n={}){return new fx(this,n)}submit(n){n||(n=this.commandEncoder.finish(),this.commandEncoder.destroy(),this.commandEncoder=this.createCommandEncoder({id:`${this.id}-default-encoder`})),n._executeCommands()}readPixelsToArrayWebGL(n,i){return uW(n,i)}readPixelsToBufferWebGL(n,i){return fW(n,i)}setParametersWebGL(n){Cl(this.gl,n)}getParametersWebGL(n){return XR(this.gl,n)}withParametersWebGL(n,i){return cu(this.gl,n,i)}resetWebGL(){ie.warn("WebGLDevice.resetWebGL is deprecated, use only for debugging")(),Xj(this.gl)}_getDeviceSpecificTextureFormatCapabilities(n){return uH(this.gl,n,this._extensions)}loseDevice(){var s;let n=!1;const r=this.getExtension("WEBGL_lose_context").WEBGL_lose_context;return r&&(n=!0,r.loseContext()),(s=this._resolveContextLost)==null||s.call(this,{reason:"destroyed",message:"Application triggered context loss"}),n}pushState(){va.get(this.gl).push()}popState(){va.get(this.gl).pop()}getGLKey(n,i){const r=Number(n);for(const s in this.gl)if(this.gl[s]===r)return`GL.${s}`;return i!=null&&i.emptyIfUnknown?"":String(n)}getGLKeys(n){const i={emptyIfUnknown:!0};return Object.entries(n).reduce((r,[s,a])=>(r[`${s}:${this.getGLKey(s,i)}`]=`${a}:${this.getGLKey(a,i)}`,r),{})}setConstantAttributeWebGL(n,i){const r=this.limits.maxVertexAttributes;this._constants=this._constants||new Array(r).fill(null);const s=this._constants[n];switch(s&&yW(s,i)&&ie.info(1,`setConstantAttributeWebGL(${n}) could have been skipped, value unchanged`)(),this._constants[n]=i,i.constructor){case Float32Array:pW(this,n,i);break;case Int32Array:gW(this,n,i);break;case Uint32Array:mW(this,n,i);break;default:throw new Error("constant")}}getExtension(n){return pl(this.gl,n,this._extensions),this._extensions}_setWebGLDebugMetadata(n,i,r){n.luma=i;const s={props:r.spector,id:r.spector.id};n.__SPECTOR_Metadata=s}}function pW(t,e,n){switch(n.length){case 1:t.gl.vertexAttrib1fv(e,n);break;case 2:t.gl.vertexAttrib2fv(e,n);break;case 3:t.gl.vertexAttrib3fv(e,n);break;case 4:t.gl.vertexAttrib4fv(e,n);break}}function gW(t,e,n){t.gl.vertexAttribI4iv(e,n)}function mW(t,e,n){t.gl.vertexAttribI4uiv(e,n)}function yW(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}const hx=Object.freeze(Object.defineProperty({__proto__:null,WebGLDevice:X_},Symbol.toStringTag,{value:"Module"}));function ns(){}const _W=({isDragging:t})=>t?"grabbing":"grab",nM={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,parameters:{},parent:null,device:null,deviceProps:{},gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,widgets:[],onDeviceInitialized:ns,onWebGLInitialized:ns,onResize:ns,onViewStateChange:ns,onInteractionStateChange:ns,onBeforeRender:ns,onAfterRender:ns,onLoad:ns,onError:t=>ut.error(t.message,t.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:_W,getTooltip:null,debug:!1,drawPickingColors:!1};class Sv{constructor(e){var i;this.width=0,this.height=0,this.userData={},this.device=null,this.canvas=null,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this.eventManager=null,this.widgetManager=null,this.tooltip=null,this.animationLoop=null,this.cursorState={isHovering:!1,isDragging:!1},this.stats=new Gp({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this._lastPointerDownInfo=null,this._onPointerMove=r=>{const{_pickRequest:s}=this;if(r.type==="pointerleave")s.x=-1,s.y=-1,s.radius=0;else{if(r.leftButton||r.rightButton)return;{const a=r.offsetCenter;if(!a)return;s.x=a.x,s.y=a.y,s.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:s.x,y:s.y}),s.event=r},this._onEvent=r=>{const s=k_[r.type],a=r.offsetCenter;if(!s||!a||!this.layerManager)return;const o=this.layerManager.getLayers(),l=this.deckPicker.getLastPickedObject({x:a.x,y:a.y,layers:o,viewports:this.getViewports(a)},this._lastPointerDownInfo),{layer:c}=l,u=c&&(c[s]||c.props[s]),f=this.props[s];let d=!1;u&&(d=u.call(c,l,r)),d||(f==null||f(l,r),this.widgetManager.onEvent(l,r))},this._onPointerDown=r=>{var o;if(((o=this.device)==null?void 0:o.type)==="webgpu")return;const s=r.offsetCenter,a=this._pick("pickObject","pickObject Time",{x:s.x,y:s.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=a.result[0]||a.emptyInfo},this.props={...nM,...e},e=this.props,e.viewState&&e.initialViewState&&ut.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),this.viewState=this.props.initialViewState,e.device&&(this.device=e.device);let n=this.device;if(!n&&e.gl){e.gl instanceof WebGLRenderingContext&&ut.error("WebGL1 context not supported.")();const r=(i=this.props.deviceProps)==null?void 0:i.onResize;n=Vm.attach(e.gl,{...this.props.deviceProps,onResize:(s,a)=>{const{width:o,height:l}=s.canvas;s.drawingBufferWidth=o,s.drawingBufferHeight=l,this._needsRedraw="Canvas resized",r==null||r(s,a)}})}n||(n=this._createDevice(e)),this.animationLoop=this._createAnimationLoop(n,e),this.setProps(e),e._typedArrayManagerProps&&fl.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,n,i,r,s,a,o,l,c,u;(e=this.animationLoop)==null||e.stop(),(n=this.animationLoop)==null||n.destroy(),this.animationLoop=null,this._lastPointerDownInfo=null,(i=this.layerManager)==null||i.finalize(),this.layerManager=null,(r=this.viewManager)==null||r.finalize(),this.viewManager=null,(s=this.effectManager)==null||s.finalize(),this.effectManager=null,(a=this.deckRenderer)==null||a.finalize(),this.deckRenderer=null,(o=this.deckPicker)==null||o.finalize(),this.deckPicker=null,(l=this.eventManager)==null||l.destroy(),this.eventManager=null,(c=this.widgetManager)==null||c.finalize(),this.widgetManager=null,!this.props.canvas&&!this.props.device&&!this.props.gl&&this.canvas&&((u=this.canvas.parentElement)==null||u.removeChild(this.canvas),this.canvas=null)}setProps(e){var i,r,s,a,o,l,c;this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&ut.removed("onLayerHover","onHover")(),"onLayerClick"in e&&ut.removed("onLayerClick","onClick")(),e.initialViewState&&!wi(this.props.initialViewState,e.initialViewState,3)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const n=Object.create(this.props);Object.assign(n,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),e.device&&e.device.id!==((i=this.device)==null?void 0:i.id)&&((r=this.animationLoop)==null||r.stop(),this.canvas!==((s=e.device.canvasContext)==null?void 0:s.canvas)&&((a=this.canvas)==null||a.remove(),(o=this.eventManager)==null||o.destroy(),this.canvas=null),ut.log(`recreating animation loop for new device! id=${e.device.id}`)(),this.animationLoop=this._createAnimationLoop(e.device,e),this.animationLoop.start()),(l=this.animationLoop)==null||l.setProps(n),e.useDevicePixels!==void 0&&((c=this.device)!=null&&c.canvasContext)&&this.device.canvasContext.setProps({useDevicePixels:e.useDevicePixels}),this.layerManager&&(this.viewManager.setProps(n),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(n),this.effectManager.setProps(n),this.deckRenderer.setProps(n),this.deckPicker.setProps(n),this.widgetManager.setProps(n)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const i=this.viewManager.needsRedraw(e),r=this.layerManager.needsRedraw(e),s=this.effectManager.needsRedraw(e),a=this.deckRenderer.needsRedraw(e);return n=n||i||r||s||a,n}redraw(e){if(!this.layerManager)return;let n=this.needsRedraw({clearRedrawFlags:!0});n=e||n,n&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(n):this._drawLayers(n))}get isInitialized(){return this.viewManager!==null}getViews(){return mn(this.viewManager),this.viewManager.views}getViewports(e){return mn(this.viewManager),this.viewManager.getViewports(e)}getCanvas(){return this.canvas}pickObject(e){const n=this._pick("pickObject","pickObject Time",e).result;return n.length?n[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,n=!1){for(const i in e)this.layerManager.resourceManager.add({resourceId:i,data:e[i],forceUpdate:n})}_removeResources(e){for(const n of e)this.layerManager.resourceManager.remove(n)}_addDefaultEffect(e){this.effectManager.addDefaultEffect(e)}_addDefaultShaderModule(e){this.layerManager.addDefaultShaderModule(e)}_removeDefaultShaderModule(e){var n;(n=this.layerManager)==null||n.removeDefaultShaderModule(e)}_pick(e,n,i){mn(this.deckPicker);const{stats:r}=this;r.get("Pick Count").incrementCount(),r.get(n).timeStart();const s=this.deckPicker[e]({layers:this.layerManager.getLayers(i),views:this.viewManager.getViews(),viewports:this.getViewports(i),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...i});return r.get(n).timeEnd(),s}_createCanvas(e){let n=e.canvas;return typeof n=="string"&&(n=document.getElementById(n),mn(n)),n||(n=document.createElement("canvas"),n.id=e.id||"deckgl-overlay",e.width&&typeof e.width=="number"&&(n.width=e.width),e.height&&typeof e.height=="number"&&(n.height=e.height),(e.parent||document.body).appendChild(n)),Object.assign(n.style,e.style),n}_setCanvasSize(e){var r;if(!this.canvas)return;const{width:n,height:i}=e;if(n||n===0){const s=Number.isFinite(n)?`${n}px`:n;this.canvas.style.width=s}if(i||i===0){const s=Number.isFinite(i)?`${i}px`:i;this.canvas.style.position=((r=e.style)==null?void 0:r.position)||"absolute",this.canvas.style.height=s}}_updateCanvasSize(){var r,s;const{canvas:e}=this;if(!e)return;const n=e.clientWidth??e.width,i=e.clientHeight??e.height;(n!==this.width||i!==this.height)&&(this.width=n,this.height=i,(r=this.viewManager)==null||r.setProps({width:n,height:i}),(s=this.layerManager)==null||s.activateViewport(this.getViewports()[0]),this.props.onResize({width:n,height:i}))}_createAnimationLoop(e,n){const{gl:i,onError:r}=n;return new U_({device:e,autoResizeDrawingBuffer:!i,autoResizeViewport:!1,onInitialize:s=>this._setDevice(s.device),onRender:this._onRenderFrame.bind(this),onError:r})}_createDevice(e){var o,l,c;const n=(o=this.props.deviceProps)==null?void 0:o.createCanvasContext,i=typeof n=="object"?n:void 0,r={adapters:[],_cacheShaders:!0,_cachePipelines:!0,...e.deviceProps};r.adapters.includes(Vm)||r.adapters.push(Vm);const s={alphaMode:((l=this.props.deviceProps)==null?void 0:l.type)==="webgpu"?"premultiplied":void 0},a=(c=this.props.deviceProps)==null?void 0:c.onResize;return __.createDevice({_reuseDevices:!0,type:"webgl",...r,createCanvasContext:{...s,...i,canvas:this._createCanvas(e),useDevicePixels:this.props.useDevicePixels,autoResize:!0},onResize:(u,f)=>{this._needsRedraw="Canvas resized",a==null||a(u,f)}})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){const{views:e}=this.props,n=Array.isArray(e)?e:e?[e]:[new jR({id:"default-view"})];return n.length&&this.props.controller&&(n[0].props.controller=this.props.controller),n}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){var n,i,r,s;if(((n=this.device)==null?void 0:n.type)==="webgpu")return;const{_pickRequest:e}=this;if(e.event){const{result:a,emptyInfo:o}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=a.length>0;let l=o,c=!1;for(const u of a)l=u,c=((i=u.layer)==null?void 0:i.onHover(u,e.event))||c;c||((s=(r=this.props).onHover)==null||s.call(r,l,e.event),this.widgetManager.onHover(l,e.event)),e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setDevice(e){var r,s;if(this.device=e,!this.animationLoop)return;this.canvas||(this.canvas=(r=this.device.canvasContext)==null?void 0:r.canvas,!this.canvas.isConnected&&this.props.parent&&this.props.parent.insertBefore(this.canvas,this.props.parent.firstChild)),this.device.type==="webgl"&&this.device.setParametersWebGL({blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onDeviceInitialized(this.device),this.device.type==="webgl"&&this.props.onWebGLInitialized(this.device.gl);const n=new UR;n.play(),this.animationLoop.attachTimeline(n),this.eventManager=new QV(this.props.parent||this.canvas,{touchAction:this.props.touchAction,recognizers:Object.keys(CT).map(a=>{var p;const[o,l,c,u]=CT[a],f=(p=this.props.eventRecognizerOptions)==null?void 0:p[a],d={...l,...f,event:a};return{recognizer:new o(d),recognizeWith:c,requestFailure:u}}),events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const a in k_)this.eventManager.on(a,this._onEvent);this.viewManager=new Z7({timeline:n,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const i=this.viewManager.getViewports()[0];this.layerManager=new K7(this.device,{deck:this,stats:this.stats,viewport:i,timeline:n}),this.effectManager=new dj({deck:this,device:this.device}),this.deckRenderer=new gj(this.device),this.deckPicker=new _j(this.device),this.widgetManager=new Tj({deck:this,parentElement:(s=this.canvas)==null?void 0:s.parentElement}),this.widgetManager.addDefault(new HR),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,n){var a;const{device:i,gl:r}=this.layerManager.context;this.props.onBeforeRender({device:i,gl:r});const s={target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...n};(a=this.deckRenderer)==null||a.renderLayers(s),s.pass==="screen"&&this.widgetManager.onRedraw({viewports:s.viewports,layers:s.layers}),this.props.onAfterRender({device:i,gl:r})}_onRenderFrame(){var e;this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),ut.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.layerManager.updateLayers(),((e=this.device)==null?void 0:e.type)!=="webgpu"&&this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const n=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:n},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const n=this.animationLoop.stats;e.get("GPU Time").addTime(n.get("GPU Time").lastTiming),e.get("CPU Time").addTime(n.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:n}=this;e.fps=n.get("frameRate").getHz(),e.setPropsTime=n.get("setProps Time").time,e.updateAttributesTime=n.get("Update Attributes").time,e.framesRedrawn=n.get("Redraw Count").count,e.pickTime=n.get("pickObject Time").time+n.get("pickMultipleObjects Time").time+n.get("pickObjects Time").time,e.pickCount=n.get("Pick Count").count,e.gpuTime=n.get("GPU Time").time,e.cpuTime=n.get("CPU Time").time,e.gpuTimePerFrame=n.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=n.get("CPU Time").getAverageTime();const i=__.stats.get("Memory Usage");e.bufferMemory=i.get("Buffer Memory").count,e.textureMemory=i.get("Texture Memory").count,e.renderbufferMemory=i.get("Renderbuffer Memory").count,e.gpuMemory=i.get("GPU Memory").count}}Sv.defaultProps=nM;Sv.VERSION=VU;function bW(t){switch(t){case"float64":return Float64Array;case"uint8":case"unorm8":return Uint8ClampedArray;default:return K0(t)}}const vW=q0;function Uf(t,e,n){const i=n==="webgpu"&&e.type==="uint8"?"unorm8":e.type;return{attribute:t,format:e.size>1?`${i}x${e.size}`:e.type,byteOffset:e.offset||0}}function ua(t){return t.stride||t.size*t.bytesPerElement}function TW(t,e){return t.type===e.type&&t.size===e.size&&ua(t)===ua(e)&&(t.offset||0)===(e.offset||0)}function q_(t,e){e.offset&&ut.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=ua(t),i=e.vertexOffset!==void 0?e.vertexOffset:t.vertexOffset||0,r=e.elementOffset||0,s=i*n+r*t.bytesPerElement+(t.offset||0);return{...e,offset:s,stride:n}}function xW(t,e){const n=q_(t,e);return{high:n,low:{...n,offset:n.offset+t.size*4}}}class SW{constructor(e,n,i){this._buffer=null,this.device=e,this.id=n.id||"",this.size=n.size||1;const r=n.logicalType||n.type,s=r==="float64";let{defaultValue:a}=n;a=Number.isFinite(a)?[a]:a||new Array(this.size).fill(0);let o;s?o="float32":!r&&n.isIndexed?o="uint32":o=r||"float32";let l=bW(r||o);this.doublePrecision=s,s&&n.fp64===!1&&(l=Float32Array),this.value=null,this.settings={...n,defaultType:l,defaultValue:a,logicalType:r,type:o,normalized:o.includes("norm"),size:this.size,bytesPerElement:l.BYTES_PER_ELEMENT},this.state={...i,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1}}get isConstant(){return this.state.constant}get buffer(){return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*ua(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),fl.release(this.state.allocatedValue)}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(e=this.id,n=null){const i={};if(this.state.constant){const r=this.value;if(n){const s=q_(this.getAccessor(),n),a=s.offset/r.BYTES_PER_ELEMENT,o=s.size||this.size;i[e]=r.subarray(a,a+o)}else i[e]=r}else i[e]=this.getBuffer();return this.doublePrecision&&(this.value instanceof Float64Array?i[`${e}64Low`]=i[e]:i[`${e}64Low`]=new Float32Array(this.size)),i}_getBufferLayout(e=this.id,n=null){const i=this.getAccessor(),r=[],s={name:this.id,byteStride:ua(i),attributes:r};if(this.doublePrecision){const a=xW(i,n||{});r.push(Uf(e,{...i,...a.high},this.device.type),Uf(`${e}64Low`,{...i,...a.low},this.device.type))}else if(n){const a=q_(i,n);r.push(Uf(e,{...i,...a},this.device.type))}else r.push(Uf(e,i,this.device.type));return s}setAccessor(e){this.state.bufferAccessor=e}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const n=Array.from(this.value);e=[n,n]}else{const{value:n,numInstances:i,size:r}=this,s=i*r;if(n&&s&&n.length>=s){const a=new Array(r).fill(1/0),o=new Array(r).fill(-1/0);for(let l=0;l<s;)for(let c=0;c<r;c++){const u=n[l++];u<a[c]&&(a[c]=u),u>o[c]&&(o[c]=u)}e=[a,o]}}return this.state.bounds=e,e}setData(e){const{state:n}=this;let i;ArrayBuffer.isView(e)?i={value:e}:e instanceof It?i={buffer:e}:i=e;const r={...this.settings,...i};if(ArrayBuffer.isView(i.value)){if(!i.type)if(this.doublePrecision&&i.value instanceof Float64Array)r.type="float32";else{const a=vW(i.value);r.type=r.normalized?a.replace("int","norm"):a}r.bytesPerElement=i.value.BYTES_PER_ELEMENT,r.stride=ua(r)}if(n.bounds=null,i.constant){let s=i.value;if(s=this._normalizeValue(s,[],0),this.settings.normalized&&(s=this.normalizeConstant(s)),!(!n.constant||!this._areValuesEqual(s,this.value)))return!1;n.externalBuffer=null,n.constant=!0,this.value=ArrayBuffer.isView(s)?s:new Float32Array(s)}else if(i.buffer){const s=i.buffer;n.externalBuffer=s,n.constant=!1,this.value=i.value||null}else if(i.value){this._checkExternalBuffer(i);let s=i.value;n.externalBuffer=null,n.constant=!1,this.value=s;let{buffer:a}=this;const o=ua(r),l=(r.vertexOffset||0)*o;if(this.doublePrecision&&s instanceof Float64Array&&(s=Bm(s,r)),this.settings.isIndexed){const u=this.settings.defaultType;s.constructor!==u&&(s=new u(s))}const c=s.byteLength+l+o*2;(!a||a.byteLength<c)&&(a=this._createBuffer(c)),a.write(s,l)}return this.setAccessor(r),!0}updateSubBuffer(e={}){this.state.bounds=null;const n=this.value,{startOffset:i=0,endOffset:r}=e;this.buffer.write(this.doublePrecision&&n instanceof Float64Array?Bm(n,{size:this.size,startIndex:i,endIndex:r}):n.subarray(i,r),i*n.BYTES_PER_ELEMENT+this.byteOffset)}allocate(e,n=!1){const{state:i}=this,r=i.allocatedValue,s=fl.allocate(r,e+1,{size:this.size,type:this.settings.defaultType,copy:n});this.value=s;const{byteOffset:a}=this;let{buffer:o}=this;return(!o||o.byteLength<s.byteLength+a)&&(o=this._createBuffer(s.byteLength+a),n&&r&&o.write(r instanceof Float64Array?Bm(r,this):r,a)),i.allocatedValue=s,i.constant=!1,i.externalBuffer=null,this.setAccessor(this.settings),!0}_checkExternalBuffer(e){const{value:n}=e;if(!ArrayBuffer.isView(n))throw new Error(`Attribute ${this.id} value is not TypedArray`);const i=this.settings.defaultType;let r=!1;if(this.doublePrecision&&(r=n.BYTES_PER_ELEMENT<4),r)throw new Error(`Attribute ${this.id} does not support ${n.constructor.name}`);!(n instanceof i)&&this.settings.normalized&&!("normalized"in e)&&ut.warn(`Attribute ${this.id} is normalized`)()}normalizeConstant(e){switch(this.settings.type){case"snorm8":return new Float32Array(e).map(n=>(n+128)/255*2-1);case"snorm16":return new Float32Array(e).map(n=>(n+32768)/65535*2-1);case"unorm8":return new Float32Array(e).map(n=>n/255);case"unorm16":return new Float32Array(e).map(n=>n/65535);default:return e}}_normalizeValue(e,n,i){const{defaultValue:r,size:s}=this.settings;if(Number.isFinite(e))return n[i]=e,n;if(!e){let a=s;for(;--a>=0;)n[i+a]=r[a];return n}switch(s){case 4:n[i+3]=Number.isFinite(e[3])?e[3]:r[3];case 3:n[i+2]=Number.isFinite(e[2])?e[2]:r[2];case 2:n[i+1]=Number.isFinite(e[1])?e[1]:r[1];case 1:n[i+0]=Number.isFinite(e[0])?e[0]:r[0];break;default:let a=s;for(;--a>=0;)n[i+a]=Number.isFinite(e[a])?e[a]:r[a]}return n}_areValuesEqual(e,n){if(!e||!n)return!1;const{size:i}=this;for(let r=0;r<i;r++)if(e[r]!==n[r])return!1;return!0}_createBuffer(e){var r;this._buffer&&this._buffer.destroy();const{isIndexed:n,type:i}=this.settings;return this._buffer=this.device.createBuffer({...(r=this._buffer)==null?void 0:r.props,id:this.id,usage:(n?It.INDEX:It.VERTEX)|It.COPY_DST,indexType:n?i:void 0,byteLength:e}),this._buffer}}const px=[],gx=[];function wv(t,e=0,n=1/0){let i=px;const r={index:-1,data:t,target:[]};return t?typeof t[Symbol.iterator]=="function"?i=t:t.length>0&&(gx.length=t.length,i=gx):i=px,(e>0||Number.isFinite(n))&&(i=(Array.isArray(i)?i:Array.from(i)).slice(e,n),r.index=e-1),{iterable:i,objectInfo:r}}function iM(t){return t&&t[Symbol.asyncIterator]}function rM(t,e){const{size:n,stride:i,offset:r,startIndices:s,nested:a}=e,o=t.BYTES_PER_ELEMENT,l=i?i/o:n,c=r?r/o:0,u=Math.floor((t.length-c)/l);return(f,{index:d,target:p})=>{if(!s){const y=d*l+c;for(let _=0;_<n;_++)p[_]=t[y+_];return p}const m=s[d],S=s[d+1]||u;let v;if(a){v=new Array(S-m);for(let y=m;y<S;y++){const _=y*l+c;p=new Array(n);for(let T=0;T<n;T++)p[T]=t[_+T];v[y-m]=p}}else if(l===n)v=t.subarray(m*n+c,S*n+c);else{v=new t.constructor((S-m)*n);let y=0;for(let _=m;_<S;_++){const T=_*l+c;for(let b=0;b<n;b++)v[y++]=t[T+b]}}return v}}const wW=[],pd=[[0,1/0]];function AW(t,e){if(t===pd||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;const n=[],i=t.length;let r=0;for(let s=0;s<i;s++){const a=t[s];a[1]<e[0]?(n.push(a),r=s+1):a[0]>e[1]?n.push(a):e=[Math.min(a[0],e[0]),Math.max(a[1],e[1])]}return n.splice(r,0,e),n}const EW={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function sM(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const n=t.type||"interpolation";return{...EW[n],...e,...t,type:n}}class aM extends SW{constructor(e,n){super(e,n,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,layoutChanged:!1,updateRanges:pd}),this.constant=!1,this.settings.update=n.update||(n.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const n=this.state.needsRedraw;return this.state.needsRedraw=n&&!e,n}layoutChanged(){return this.state.layoutChanged}setAccessor(e){var n;(n=this.state).layoutChanged||(n.layoutChanged=!TW(e,this.getAccessor())),super.setAccessor(e)}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat(typeof e!="function"&&e||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:n}=this.settings,i=this.settings.transition,r=Array.isArray(n)?e[n.find(s=>e[s])]:e[n];return sM(r,i)}setNeedsUpdate(e=this.id,n){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),n){const{startRow:i=0,endRow:r=1/0}=n;this.state.updateRanges=AW(this.state.updateRanges,[i,r])}else this.state.updateRanges=pd}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=wW}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:n,settings:i}=this;return i.noAlloc?!1:i.update?(super.allocate(e,n.updateRanges!==pd),!0):!1}updateBuffer({numInstances:e,data:n,props:i,context:r}){if(!this.needsUpdate())return!1;const{state:{updateRanges:s},settings:{update:a,noAlloc:o}}=this;let l=!0;if(a){for(const[c,u]of s)a.call(r,this,{data:n,startRow:c,endRow:u,props:i,numInstances:e});if(this.value)if(this.constant||!this.buffer||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[c,u]of s){const f=Number.isFinite(c)?this.getVertexOffset(c):0,d=Number.isFinite(u)?this.getVertexOffset(u):o||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:f,endOffset:d})}this._checkAttributeArray()}else l=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),l}setConstantValue(e,n){const i=this.device.type==="webgpu";if(i||n===void 0||typeof n=="function"){if(i&&typeof n!="function"){const a=this._normalizeValue(n,[],0);this._areValuesEqual(a,this.value)||this.setNeedsUpdate("WebGPU constant updated")}return!1}const r=this.settings.transform&&e?this.settings.transform.call(e,n):n;return this.setData({constant:!0,value:r})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0}setExternalBuffer(e){const{state:n}=this;return e?(this.clearNeedsUpdate(),n.lastExternalBuffer===e||(n.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(n.lastExternalBuffer=null,!1)}setBinaryValue(e,n=null){const{state:i,settings:r}=this;if(!e)return i.binaryValue=null,i.binaryAccessor=null,!1;if(r.noAlloc)return!1;if(i.binaryValue===e)return this.clearNeedsUpdate(),!0;if(i.binaryValue=e,this.setNeedsRedraw(),r.transform||n!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const a=e;mn(ArrayBuffer.isView(a.value),`invalid ${r.accessor}`);const o=!!a.size&&a.size!==this.size;return i.binaryAccessor=rM(a.value,{size:a.size||this.size,stride:a.stride,offset:a.offset,startIndices:n,nested:o}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:n}=this;return(n?e<n.length?n[e]:this.numInstances:e)*this.size}getValue(){const e=this.settings.shaderAttributes,n=super.getValue();if(!e)return n;for(const i in e)Object.assign(n,super.getValue(i,e[i]));return n}getBufferLayout(e){this.state.layoutChanged=!1;const n=this.settings.shaderAttributes,i=super._getBufferLayout(),{stepMode:r}=this.settings;if(r==="dynamic"?i.stepMode=e?e.isInstanced?"instance":"vertex":"instance":i.stepMode=r??"vertex",!n)return i;for(const s in n){const a=super._getBufferLayout(s,n[s]);i.attributes.push(...a.attributes)}return i}_autoUpdater(e,{data:n,startRow:i,endRow:r,props:s,numInstances:a}){if(e.constant&&this.context.device.type!=="webgpu")return;const{settings:o,state:l,value:c,size:u,startIndices:f}=e,{accessor:d,transform:p}=o;let m=l.binaryAccessor||(typeof d=="function"?d:s[d]);typeof m!="function"&&typeof d=="string"&&(m=()=>s[d]),mn(typeof m=="function",`accessor "${d}" is not a function`);let S=e.getVertexOffset(i);const{iterable:v,objectInfo:y}=wv(n,i,r);for(const _ of v){y.index++;let T=m(_,y);if(p&&(T=p.call(this,T)),f){const b=(y.index<f.length-1?f[y.index+1]:a)-f[y.index];if(T&&Array.isArray(T[0])){let M=S;for(const C of T)e._normalizeValue(C,c,M),M+=u}else T&&T.length>u?c.set(T,S):(e._normalizeValue(T,y.target,0),H7({target:c,source:y.target,start:S,count:b}));S+=b*u}else e._normalizeValue(T,c,S),S+=u}}_validateAttributeUpdaters(){const{settings:e}=this;if(!(e.noAlloc||typeof e.update=="function"))throw new Error(`Attribute ${this.id} missing update or accessor`)}_checkAttributeArray(){const{value:e}=this,n=Math.min(4,this.size);if(e&&e.length>=n){let i=!0;switch(n){case 4:i=i&&Number.isFinite(e[3]);case 3:i=i&&Number.isFinite(e[2]);case 2:i=i&&Number.isFinite(e[1]);case 1:i=i&&Number.isFinite(e[0]);break;default:i=!1}if(!i)throw new Error(`Illegal attribute generated for ${this.id}`)}}}function Ym(t){const{source:e,target:n,start:i=0,size:r,getData:s}=t,a=t.end||n.length,o=e.length,l=a-i;if(o>l){n.set(e.subarray(0,l),i);return}if(n.set(e,i),!s)return;let c=o;for(;c<l;){const u=s(c,e);for(let f=0;f<r;f++)n[i+c]=u[f]||0,c++}}function CW({source:t,target:e,size:n,getData:i,sourceStartIndices:r,targetStartIndices:s}){if(!r||!s)return Ym({source:t,target:e,size:n,getData:i}),e;let a=0,o=0;const l=i&&((u,f)=>i(u+o,f)),c=Math.min(r.length,s.length);for(let u=1;u<c;u++){const f=r[u]*n,d=s[u]*n;Ym({source:t.subarray(a,f),target:e,start:o,end:d,size:n,getData:l}),a=f,o=d}return o<e.length&&Ym({source:[],target:e,start:o,size:n,getData:l}),e}function RW(t){const{device:e,settings:n,value:i}=t,r=new aM(e,n);return r.setData({value:i instanceof Float64Array?new Float64Array(0):new Float32Array(0),normalized:n.normalized}),r}function oM(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error(`No defined attribute type for size "${t}"`)}}function lM(t){switch(t){case 1:return"float32";case 2:return"float32x2";case 3:return"float32x3";case 4:return"float32x4";default:throw new Error("invalid type size")}}function cM(t){t.push(t.shift())}function MW(t,e){const{doublePrecision:n,settings:i,value:r,size:s}=t,a=n&&r instanceof Float64Array?2:1;let o=0;const{shaderAttributes:l}=t.settings;if(l)for(const c of Object.values(l))o=Math.max(o,c.vertexOffset??0);return(i.noAlloc?r.length:(e+o)*s)*a}function uM({device:t,source:e,target:n}){return(!n||n.byteLength<e.byteLength)&&(n==null||n.destroy(),n=t.createBuffer({byteLength:e.byteLength,usage:e.usage})),n}function fM({device:t,buffer:e,attribute:n,fromLength:i,toLength:r,fromStartIndices:s,getData:a=o=>o}){const o=n.doublePrecision&&n.value instanceof Float64Array?2:1,l=n.size*o,c=n.byteOffset,u=n.settings.bytesPerElement<4?c/n.settings.bytesPerElement*4:c,f=n.startIndices,d=s&&f,p=n.isConstant;if(!d&&e&&i>=r)return e;const m=n.value instanceof Float64Array?Float32Array:n.value.constructor,S=p?n.value:new m(n.getBuffer().readSyncWebGL(c,r*m.BYTES_PER_ELEMENT).buffer);if(n.settings.normalized&&!p){const T=a;a=(b,M)=>n.normalizeConstant(T(b,M))}const v=p?(T,b)=>a(S,b):(T,b)=>a(S.subarray(T+c,T+c+l),b),y=e?new Float32Array(e.readSyncWebGL(u,i*4).buffer):new Float32Array(0),_=new Float32Array(r);return CW({source:y,target:_,sourceStartIndices:s,targetStartIndices:f,size:l,getData:v}),(!e||e.byteLength<_.byteLength+u)&&(e==null||e.destroy(),e=t.createBuffer({byteLength:_.byteLength+u,usage:35050})),e.write(_,u),e}class dM{constructor({device:e,attribute:n,timeline:i}){this.buffers=[],this.currentLength=0,this.device=e,this.transition=new tg(i),this.attribute=n,this.attributeInTransition=RW(n),this.currentStartIndices=n.startIndices}get inProgress(){return this.transition.inProgress}start(e,n,i=1/0){this.settings=e,this.currentStartIndices=this.attribute.startIndices,this.currentLength=MW(this.attribute,n),this.transition.start({...e,duration:i})}update(){const e=this.transition.update();return e&&this.onUpdate(),e}setBuffer(e){this.attributeInTransition.setData({buffer:e,normalized:this.attribute.settings.normalized,value:this.attributeInTransition.value})}cancel(){this.transition.cancel()}delete(){this.cancel();for(const e of this.buffers)e.destroy();this.buffers.length=0}}class OW extends dM{constructor({device:e,attribute:n,timeline:i}){super({device:e,attribute:n,timeline:i}),this.type="interpolation",this.transform=kW(e,n)}start(e,n){const i=this.currentLength,r=this.currentStartIndices;if(super.start(e,n,e.duration),e.duration<=0){this.transition.cancel();return}const{buffers:s,attribute:a}=this;cM(s),s[0]=fM({device:this.device,buffer:s[0],attribute:a,fromLength:i,toLength:this.currentLength,fromStartIndices:r,getData:e.enter}),s[1]=uM({device:this.device,source:s[0],target:s[1]}),this.setBuffer(s[1]);const{transform:o}=this,l=o.model;let c=Math.floor(this.currentLength/a.size);hM(a)&&(c/=2),l.setVertexCount(c),a.isConstant?(l.setAttributes({aFrom:s[0]}),l.setConstantAttributes({aTo:a.value})):l.setAttributes({aFrom:s[0],aTo:a.getBuffer()}),o.transformFeedback.setBuffers({vCurrent:s[1]})}onUpdate(){const{duration:e,easing:n}=this.settings,{time:i}=this.transition;let r=i/e;n&&(r=n(r));const{model:s}=this.transform,a={time:r};s.shaderInputs.setProps({interpolation:a}),this.transform.run({discard:!0})}delete(){super.delete(),this.transform.destroy()}}const IW=`uniform interpolationUniforms {
  float time;
} interpolation;
`,mx={name:"interpolation",vs:IW,uniformTypes:{time:"f32"}},PW=`#version 300 es
#define SHADER_NAME interpolation-transition-vertex-shader

in ATTRIBUTE_TYPE aFrom;
in ATTRIBUTE_TYPE aTo;
out ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, interpolation.time);
  gl_Position = vec4(0.0);
}
`,DW=`#version 300 es
#define SHADER_NAME interpolation-transition-vertex-shader

in ATTRIBUTE_TYPE aFrom;
in ATTRIBUTE_TYPE aFrom64Low;
in ATTRIBUTE_TYPE aTo;
in ATTRIBUTE_TYPE aTo64Low;
out ATTRIBUTE_TYPE vCurrent;
out ATTRIBUTE_TYPE vCurrent64Low;

vec2 mix_fp64(vec2 a, vec2 b, float x) {
  vec2 range = sub_fp64(b, a);
  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));
}

void main(void) {
  for (int i=0; i<ATTRIBUTE_SIZE; i++) {
    vec2 value = mix_fp64(vec2(aFrom[i], aFrom64Low[i]), vec2(aTo[i], aTo64Low[i]), interpolation.time);
    vCurrent[i] = value.x;
    vCurrent64Low[i] = value.y;
  }
  gl_Position = vec4(0.0);
}
`;function hM(t){return t.doublePrecision&&t.value instanceof Float64Array}function kW(t,e){const n=e.size,i=oM(n),r=lM(n),s=e.getBufferLayout();return hM(e)?new lu(t,{vs:DW,bufferLayout:[{name:"aFrom",byteStride:8*n,attributes:[{attribute:"aFrom",format:r,byteOffset:0},{attribute:"aFrom64Low",format:r,byteOffset:4*n}]},{name:"aTo",byteStride:8*n,attributes:[{attribute:"aTo",format:r,byteOffset:0},{attribute:"aTo64Low",format:r,byteOffset:4*n}]}],modules:[q9,mx],defines:{ATTRIBUTE_TYPE:i,ATTRIBUTE_SIZE:n},moduleSettings:{},varyings:["vCurrent","vCurrent64Low"],bufferMode:35980,disableWarnings:!0}):new lu(t,{vs:PW,bufferLayout:[{name:"aFrom",format:r},{name:"aTo",format:s.attributes[0].format}],modules:[mx],defines:{ATTRIBUTE_TYPE:i},varyings:["vCurrent"],disableWarnings:!0})}class NW extends dM{constructor({device:e,attribute:n,timeline:i}){super({device:e,attribute:n,timeline:i}),this.type="spring",this.texture=VW(e),this.framebuffer=$W(e,this.texture),this.transform=zW(e,n)}start(e,n){const i=this.currentLength,r=this.currentStartIndices;super.start(e,n);const{buffers:s,attribute:a}=this;for(let l=0;l<2;l++)s[l]=fM({device:this.device,buffer:s[l],attribute:a,fromLength:i,toLength:this.currentLength,fromStartIndices:r,getData:e.enter});s[2]=uM({device:this.device,source:s[0],target:s[2]}),this.setBuffer(s[1]);const{model:o}=this.transform;o.setVertexCount(Math.floor(this.currentLength/a.size)),a.isConstant?o.setConstantAttributes({aTo:a.value}):o.setAttributes({aTo:a.getBuffer()})}onUpdate(){const{buffers:e,transform:n,framebuffer:i,transition:r}=this,s=this.settings;n.model.setAttributes({aPrev:e[0],aCur:e[1]}),n.transformFeedback.setBuffers({vNext:e[2]});const a={stiffness:s.stiffness,damping:s.damping};n.model.shaderInputs.setProps({spring:a}),n.run({framebuffer:i,discard:!1,parameters:{viewport:[0,0,1,1]},clearColor:[0,0,0,0]}),cM(e),this.setBuffer(e[1]),this.device.readPixelsToArrayWebGL(i)[0]>0||r.end()}delete(){super.delete(),this.transform.destroy(),this.texture.destroy(),this.framebuffer.destroy()}}const BW=`uniform springUniforms {
  float damping;
  float stiffness;
} spring;
`,LW={name:"spring",vs:BW,uniformTypes:{damping:"f32",stiffness:"f32"}},UW=`#version 300 es
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

in ATTRIBUTE_TYPE aPrev;
in ATTRIBUTE_TYPE aCur;
in ATTRIBUTE_TYPE aTo;
out ATTRIBUTE_TYPE vNext;
out float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE force = delta * spring.stiffness;
  ATTRIBUTE_TYPE resistance = velocity * spring.damping;
  return force - resistance + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,FW=`#version 300 es
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

in float vIsTransitioningFlag;

out vec4 fragColor;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  fragColor = vec4(1.0);
}`;function zW(t,e){const n=oM(e.size),i=lM(e.size);return new lu(t,{vs:UW,fs:FW,bufferLayout:[{name:"aPrev",format:i},{name:"aCur",format:i},{name:"aTo",format:e.getBufferLayout().attributes[0].format}],varyings:["vNext"],modules:[LW],defines:{ATTRIBUTE_TYPE:n},parameters:{depthCompare:"always",blendColorOperation:"max",blendColorSrcFactor:"one",blendColorDstFactor:"one",blendAlphaOperation:"max",blendAlphaSrcFactor:"one",blendAlphaDstFactor:"one"}})}function VW(t){return t.createTexture({data:new Uint8Array(4),format:"rgba8unorm",width:1,height:1})}function $W(t,e){return t.createFramebuffer({id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,colorAttachments:[e]})}const jW={interpolation:OW,spring:NW};class HW{constructor(e,{id:n,timeline:i}){if(!e)throw new Error("AttributeTransitionManager is constructed without device");this.id=n,this.device=e,this.timeline=i,this.transitions={},this.needsRedraw=!1,this.numInstances=1}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:n,numInstances:i}){this.numInstances=i||1;for(const r in e){const s=e[r],a=s.getTransitionSetting(n);a&&this._updateAttribute(r,s,a)}for(const r in this.transitions){const s=e[r];(!s||!s.getTransitionSetting(n))&&this._removeTransition(r)}}hasAttribute(e){const n=this.transitions[e];return n&&n.inProgress}getAttributes(){const e={};for(const n in this.transitions){const i=this.transitions[n];i.inProgress&&(e[n]=i.attributeInTransition)}return e}run(){if(this.numInstances===0)return!1;for(const n in this.transitions)this.transitions[n].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].delete(),delete this.transitions[e]}_updateAttribute(e,n,i){const r=this.transitions[e];let s=!r||r.type!==i.type;if(s){r&&this._removeTransition(e);const a=jW[i.type];a?this.transitions[e]=new a({attribute:n,timeline:this.timeline,device:this.device}):(ut.error(`unsupported transition type '${i.type}'`)(),s=!1)}(s||n.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(i,this.numInstances))}}const yx="attributeManager.invalidate",WW="attributeManager.updateStart",YW="attributeManager.updateEnd",XW="attribute.updateStart",qW="attribute.allocate",KW="attribute.updateEnd";class ZW{constructor(e,{id:n="attribute-manager",stats:i,timeline:r}={}){this.mergeBoundsMemoized=Nu(c7),this.id=n,this.device=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=i,this.attributeTransitionManager=new HW(e,{id:`${n}-transitions`,timeline:r}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const n=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,n&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{stepMode:"instance"})}remove(e){for(const n of e)this.attributes[n]!==void 0&&(this.attributes[n].delete(),delete this.attributes[n])}invalidate(e,n){const i=this._invalidateTrigger(e,n);En(yx,this,e,i)}invalidateAll(e){for(const n in this.attributes)this.attributes[n].setNeedsUpdate(n,e);En(yx,this,"all")}update({data:e,numInstances:n,startIndices:i=null,transitions:r,props:s={},buffers:a={},context:o={}}){let l=!1;En(WW,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const c in this.attributes){const u=this.attributes[c],f=u.settings.accessor;u.startIndices=i,u.numInstances=n,s[c]&&ut.removed(`props.${c}`,`data.attributes.${c}`)(),u.setExternalBuffer(a[c])||u.setBinaryValue(typeof f=="string"?a[f]:void 0,e.startIndices)||typeof f=="string"&&!a[f]&&u.setConstantValue(o,s[f])||u.needsUpdate()&&(l=!0,this._updateAttribute({attribute:u,numInstances:n,data:e,props:s,context:o})),this.needsRedraw=this.needsRedraw||u.needsRedraw()}l&&En(YW,this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:r})}updateTransition(){const{attributeTransitionManager:e}=this,n=e.run();return this.needsRedraw=this.needsRedraw||n,n}getAttributes(){return{...this.attributes,...this.attributeTransitionManager.getAttributes()}}getBounds(e){const n=e.map(i=>{var r;return(r=this.attributes[i])==null?void 0:r.getBounds()});return this.mergeBoundsMemoized(n)}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:n,attributeTransitionManager:i}=this,r={...i.getAttributes()};for(const s in n){const a=n[s];a.needsRedraw(e)&&!i.hasAttribute(s)&&(r[s]=a)}return r}getBufferLayouts(e){return Object.values(this.getAttributes()).map(n=>n.getBufferLayout(e))}_add(e,n){for(const i in e){const r=e[i],s={...r,id:i,size:r.isIndexed&&1||r.size||1,...n};this.attributes[i]=new aM(this.device,s)}this._mapUpdateTriggersToAttributes()}_mapUpdateTriggersToAttributes(){const e={};for(const n in this.attributes)this.attributes[n].getUpdateTriggers().forEach(r=>{e[r]||(e[r]=[]),e[r].push(n)});this.updateTriggers=e}_invalidateTrigger(e,n){const{attributes:i,updateTriggers:r}=this,s=r[e];return s&&s.forEach(a=>{const o=i[a];o&&o.setNeedsUpdate(o.id,n)}),s}_updateAttribute(e){const{attribute:n,numInstances:i}=e;if(En(XW,n),n.constant){n.setConstantValue(e.context,n.value);return}n.allocate(i)&&En(qW,n,i),n.updateBuffer(e)&&(this.needsRedraw=!0,En(KW,n,i))}}class GW extends tg{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:n,toValue:i,duration:r,easing:s}}=this,a=s(e/r);this._value=yh(n,i,a)}}const _x=1e-5;function bx(t,e,n,i,r){const s=e-t,o=(n-e)*r,l=-s*i;return o+l+s+e}function QW(t,e,n,i,r){if(Array.isArray(n)){const s=[];for(let a=0;a<n.length;a++)s[a]=bx(t[a],e[a],n[a],i,r);return s}return bx(t,e,n,i,r)}function vx(t,e){if(Array.isArray(t)){let n=0;for(let i=0;i<t.length;i++){const r=t[i]-e[i];n+=r*r}return Math.sqrt(n)}return Math.abs(t-e)}class JW extends tg{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:n,damping:i,stiffness:r}=this.settings,{_prevValue:s=e,_currValue:a=e}=this;let o=QW(s,a,n,i,r);const l=vx(o,n),c=vx(o,a);l<_x&&c<_x&&(o=n,this.end()),this._prevValue=a,this._currValue=o}}const eY={interpolation:GW,spring:JW};class tY{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,n,i,r){const{transitions:s}=this;if(s.has(e)){const l=s.get(e),{value:c=l.settings.fromValue}=l;n=c,this.remove(e)}if(r=sM(r),!r)return;const a=eY[r.type];if(!a){ut.error(`unsupported transition type '${r.type}'`)();return}const o=new a(this.timeline);o.start({...r,fromValue:n,toValue:i}),s.set(e,o)}remove(e){const{transitions:n}=this;n.has(e)&&(n.get(e).cancel(),n.delete(e))}update(){const e={};for(const[n,i]of this.transitions)i.update(),e[n]=i.value,i.inProgress||this.remove(n);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}function nY(t){const e=t[Os];for(const n in e){const i=e[n],{validate:r}=i;if(r&&!r(t[n],i))throw new Error(`Invalid prop ${n}: ${t[n]}`)}}function iY(t,e){const n=pM({newProps:t,oldProps:e,propTypes:t[Os],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),i=sY(t,e);let r=!1;return i||(r=aY(t,e)),{dataChanged:i,propsChanged:n,updateTriggersChanged:r,extensionsChanged:oY(t,e),transitionsChanged:rY(t,e)}}function rY(t,e){if(!t.transitions)return!1;const n={},i=t[Os];let r=!1;for(const s in t.transitions){const a=i[s],o=a&&a.type;(o==="number"||o==="color"||o==="array")&&K_(t[s],e[s],a)&&(n[s]=!0,r=!0)}return r?n:!1}function pM({newProps:t,oldProps:e,ignoreProps:n={},propTypes:i={},triggerName:r="props"}){if(e===t)return!1;if(typeof t!="object"||t===null)return`${r} changed shallowly`;if(typeof e!="object"||e===null)return`${r} changed shallowly`;for(const s of Object.keys(t))if(!(s in n)){if(!(s in e))return`${r}.${s} added`;const a=K_(t[s],e[s],i[s]);if(a)return`${r}.${s} ${a}`}for(const s of Object.keys(e))if(!(s in n)){if(!(s in t))return`${r}.${s} dropped`;if(!Object.hasOwnProperty.call(t,s)){const a=K_(t[s],e[s],i[s]);if(a)return`${r}.${s} ${a}`}}return!1}function K_(t,e,n){let i=n&&n.equal;return i&&!i(t,e,n)||!i&&(i=t&&e&&t.equals,i&&!i.call(t,e))?"changed deeply":!i&&e!==t?"changed shallowly":null}function sY(t,e){if(e===null)return"oldProps is null, initial diff";let n=!1;const{dataComparator:i,_dataDiff:r}=t;return i?i(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied"),n&&r&&(n=r(t.data,e.data)||n),n}function aY(t,e){if(e===null)return{all:!0};if("all"in t.updateTriggers&&Tx(t,e,"all"))return{all:!0};const n={};let i=!1;for(const r in t.updateTriggers)r!=="all"&&Tx(t,e,r)&&(n[r]=!0,i=!0);return i?n:!1}function oY(t,e){if(e===null)return!0;const n=e.extensions,{extensions:i}=t;if(i===n)return!1;if(!n||!i||i.length!==n.length)return!0;for(let r=0;r<i.length;r++)if(!i[r].equals(n[r]))return!0;return!1}function Tx(t,e,n){let i=t.updateTriggers[n];i=i??{};let r=e.updateTriggers[n];return r=r??{},pM({oldProps:r,newProps:i,triggerName:n})}const lY="count(): argument not an object",cY="count(): argument not a container";function uY(t){if(!dY(t))throw new Error(lY);if(typeof t.count=="function")return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(fY(t))return Object.keys(t).length;throw new Error(cY)}function fY(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function dY(t){return t!==null&&typeof t=="object"}function xx(t,e){if(!e)return t;const n={...t,...e};if("defines"in e&&(n.defines={...t.defines,...e.defines}),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some(i=>i.name==="project64"))){const i=n.modules.findIndex(r=>r.name==="project32");i>=0&&n.modules.splice(i,1)}if("inject"in e)if(!t.inject)n.inject=e.inject;else{const i={...t.inject};for(const r in e.inject)i[r]=(i[r]||"")+e.inject[r];n.inject=i}return n}const hY={minFilter:"linear",mipmapFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},Z_={};function pY(t,e,n,i){if(n instanceof Jn)return n;n.constructor&&n.constructor.name!=="Object"&&(n={data:n});let r=null;n.compressed&&(r={minFilter:"linear",mipmapFilter:n.data.length>1?"nearest":"linear"});const{width:s,height:a}=n.data,o=e.createTexture({...n,sampler:{...hY,...r,...i},mipLevels:e.getMipLevelCount(s,a)});return o.generateMipmapsWebGL(),Z_[o.id]=t,o}function gY(t,e){!e||!(e instanceof Jn)||Z_[e.id]===t&&(e.delete(),delete Z_[e.id])}const mY={boolean:{validate(t,e){return!0},equal(t,e,n){return!!t==!!e}},number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},color:{validate(t,e){return e.optional&&!t||G_(t)&&(t.length===3||t.length===4)},equal(t,e,n){return wi(t,e,1)}},accessor:{validate(t,e){const n=wh(t);return n==="function"||n===wh(e.value)},equal(t,e,n){return typeof e=="function"?!0:wi(t,e,1)}},array:{validate(t,e){return e.optional&&!t||G_(t)},equal(t,e,n){const{compare:i}=n,r=Number.isInteger(i)?i:i?1:0;return i?wi(t,e,r):t===e}},object:{equal(t,e,n){if(n.ignore)return!0;const{compare:i}=n,r=Number.isInteger(i)?i:i?1:0;return i?wi(t,e,r):t===e}},function:{validate(t,e){return e.optional&&!t||typeof t=="function"},equal(t,e,n){return!n.compare&&n.ignore!==!1||t===e}},data:{transform:(t,e,n)=>{if(!t)return t;const{dataTransform:i}=n.props;return i?i(t):typeof t.shape=="string"&&t.shape.endsWith("-table")&&Array.isArray(t.data)?t.data:t}},image:{transform:(t,e,n)=>{const i=n.context;return!i||!i.device?null:pY(n.id,i.device,t,{...e.parameters,...n.props.textureParameters})},release:(t,e,n)=>{gY(n.id,t)}}};function yY(t){const e={},n={},i={};for(const[r,s]of Object.entries(t)){const a=s==null?void 0:s.deprecatedFor;if(a)i[r]=Array.isArray(a)?a:[a];else{const o=_Y(r,s);e[r]=o,n[r]=o.value}}return{propTypes:e,defaultProps:n,deprecatedProps:i}}function _Y(t,e){switch(wh(e)){case"object":return Zl(t,e);case"array":return Zl(t,{type:"array",value:e,compare:!1});case"boolean":return Zl(t,{type:"boolean",value:e});case"number":return Zl(t,{type:"number",value:e});case"function":return Zl(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function Zl(t,e){return"type"in e?{name:t,...mY[e.type],...e}:"value"in e?{name:t,type:wh(e.value),...e}:{name:t,type:"object",value:e}}function G_(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function wh(t){return G_(t)?"array":t===null?"null":typeof t}function bY(t,e){let n;for(let s=e.length-1;s>=0;s--){const a=e[s];"extensions"in a&&(n=a.extensions)}const i=Q_(t.constructor,n),r=Object.create(i);r[Sh]=t,r[Na]={},r[bs]={};for(let s=0;s<e.length;++s){const a=e[s];for(const o in a)r[o]=a[o]}return Object.freeze(r),r}const vY="_mergedDefaultProps";function Q_(t,e){if(!(t instanceof ng.constructor))return{};let n=vY;if(e)for(const r of e){const s=r.constructor;s&&(n+=`:${s.extensionName||s.name}`)}const i=gM(t,n);return i||(t[n]=TY(t,e||[]))}function TY(t,e){if(!t.prototype)return null;const i=Object.getPrototypeOf(t),r=Q_(i),s=gM(t,"defaultProps")||{},a=yY(s),o=Object.assign(Object.create(null),r,a.defaultProps),l=Object.assign(Object.create(null),r==null?void 0:r[Os],a.propTypes),c=Object.assign(Object.create(null),r==null?void 0:r[zm],a.deprecatedProps);for(const u of e){const f=Q_(u.constructor);f&&(Object.assign(o,f),Object.assign(l,f[Os]),Object.assign(c,f[zm]))}return xY(o,t),wY(o,l),SY(o,c),o[Os]=l,o[zm]=c,e.length===0&&!Av(t,"_propTypes")&&(t._propTypes=l),o}function xY(t,e){const n=EY(e);Object.defineProperties(t,{id:{writable:!0,value:n}})}function SY(t,e){for(const n in e)Object.defineProperty(t,n,{enumerable:!1,set(i){const r=`${this.id}: ${n}`;for(const s of e[n])Av(this,s)||(this[s]=i);ut.deprecated(r,e[n].join("/"))()}})}function wY(t,e){const n={},i={};for(const r in e){const s=e[r],{name:a,value:o}=s;s.async&&(n[a]=o,i[a]=AY(a))}t[Wo]=n,t[Na]={},Object.defineProperties(t,i)}function AY(t){return{enumerable:!0,set(e){typeof e=="string"||e instanceof Promise||iM(e)?this[Na][t]=e:this[bs][t]=e},get(){if(this[bs]){if(t in this[bs])return this[bs][t]||this[Wo][t];if(t in this[Na]){const e=this[Sh]&&this[Sh].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[Wo][t]}}return this[Wo][t]}}}function Av(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function gM(t,e){return Av(t,e)&&t[e]}function EY(t){const e=t.componentName;return e||ut.warn(`${t.name}.componentName not specified`)(),e||t.name}let CY=0;class ng{constructor(...e){this.props=bY(this,e),this.id=this.props.id,this.count=CY++}clone(e){const{props:n}=this,i={};for(const r in n[Wo])r in n[bs]?i[r]=n[bs][r]:r in n[Na]&&(i[r]=n[Na][r]);return new this.constructor({...n,...i,...e})}}ng.componentName="Component";ng.defaultProps={};const RY=Object.freeze({});class MY{constructor(e){this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const n=this.asyncProps[e];n&&n.type&&n.type.release&&n.type.release(n.resolvedValue,n.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||RY}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const n=this.asyncProps[e];return n&&n.resolvedValue}isAsyncPropLoading(e){if(e){const n=this.asyncProps[e];return!!(n&&n.pendingLoadCount>0&&n.pendingLoadCount!==n.resolvedLoadCount)}for(const n in this.asyncProps)if(this.isAsyncPropLoading(n))return!0;return!1}reloadAsyncProp(e,n){this._watchPromise(e,Promise.resolve(n))}setAsyncProps(e){this.component=e[Sh]||this.component;const n=e[bs]||{},i=e[Na]||e,r=e[Wo]||{};for(const s in n){const a=n[s];this._createAsyncPropData(s,r[s]),this._updateAsyncProp(s,a),n[s]=this.getAsyncProp(s)}for(const s in i){const a=i[s];this._createAsyncPropData(s,r[s]),this._updateAsyncProp(s,a)}}_fetch(e,n){return null}_onResolve(e,n){}_onError(e,n){}_updateAsyncProp(e,n){if(this._didAsyncInputValueChange(e,n)){if(typeof n=="string"&&(n=this._fetch(e,n)),n instanceof Promise){this._watchPromise(e,n);return}if(iM(n)){this._resolveAsyncIterable(e,n);return}this._setPropValue(e,n)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,n){const i=this.asyncProps[e];return n===i.resolvedValue||n===i.lastValue?!1:(i.lastValue=n,!0)}_setPropValue(e,n){this._freezeAsyncOldProps();const i=this.asyncProps[e];i&&(n=this._postProcessValue(i,n),i.resolvedValue=n,i.pendingLoadCount++,i.resolvedLoadCount=i.pendingLoadCount)}_setAsyncPropValue(e,n,i){const r=this.asyncProps[e];r&&i>=r.resolvedLoadCount&&n!==void 0&&(this._freezeAsyncOldProps(),r.resolvedValue=n,r.resolvedLoadCount=i,this.onAsyncPropUpdated(e,n))}_watchPromise(e,n){const i=this.asyncProps[e];if(i){i.pendingLoadCount++;const r=i.pendingLoadCount;n.then(s=>{this.component&&(s=this._postProcessValue(i,s),this._setAsyncPropValue(e,s,r),this._onResolve(e,s))}).catch(s=>{this._onError(e,s)})}}async _resolveAsyncIterable(e,n){if(e!=="data"){this._setPropValue(e,n);return}const i=this.asyncProps[e];if(!i)return;i.pendingLoadCount++;const r=i.pendingLoadCount;let s=[],a=0;for await(const o of n){if(!this.component)return;const{dataTransform:l}=this.component.props;l?s=l(o,s):s=s.concat(o),Object.defineProperty(s,"__diff",{enumerable:!1,value:[{startRow:a,endRow:s.length}]}),a=s.length,this._setAsyncPropValue(e,s,r)}this._onResolve(e,s)}_postProcessValue(e,n){const i=e.type;return i&&this.component&&(i.release&&i.release(e.resolvedValue,i,this.component),i.transform)?i.transform(n,i,this.component):n}_createAsyncPropData(e,n){if(!this.asyncProps[e]){const r=this.component&&this.component.props[Os];this.asyncProps[e]={type:r&&r[e],lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0}}}}class OY extends MY{constructor({attributeManager:e,layer:n}){super(n),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(e,n){const i=this.layer,r=i==null?void 0:i.props.fetch;return r?r(n,{propName:e,layer:i}):super._fetch(e,n)}_onResolve(e,n){const i=this.layer;if(i){const r=i.props.onDataLoad;e==="data"&&r&&r(n,{propName:e,layer:i})}}_onError(e,n){const i=this.layer;i&&i.raiseError(n,`loading ${e} of ${this.layer}`)}}const IY="layer.changeFlag",PY="layer.initialize",DY="layer.update",kY="layer.finalize",NY="layer.matched",Sx=2**24-1,BY=Object.freeze([]),LY=Nu(({oldViewport:t,viewport:e})=>t.equals(e));let zi=new Uint8ClampedArray(0);const UY={data:{type:"data",value:BY,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:n,loaders:i,loadOptions:r,signal:s})=>{const{resourceManager:a}=n.context;r=r||n.getLoadOptions(),i=i||n.props.loaders,s&&(r={...r,fetch:{...r==null?void 0:r.fetch,signal:s}});let o=a.contains(t);return!o&&!r&&(a.add({resourceId:t,data:nh(t,i),persistent:!1}),o=!0),o?a.subscribe({resourceId:t,onChange:l=>{var c;return(c=n.internalState)==null?void 0:c.reloadAsyncProp(e,l)},consumerId:n.id,requestId:e}):nh(t,i,r)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:Ze.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,-t*100]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Ha extends ng{constructor(){super(...arguments),this.internalState=null,this.lifecycle=po.NO_STATE,this.parent=null}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){return`${this.constructor.layerName||this.constructor.name}({id: '${this.props.id}'})`}project(e){mn(this.internalState);const n=this.internalState.viewport||this.context.viewport,i=LR(e,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[r,s,a]=DR(i,n.pixelProjectionMatrix);return e.length===2?[r,s]:[r,s,a]}unproject(e){return mn(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,n){mn(this.internalState);const i=this.internalState.viewport||this.context.viewport;return g7(e,{viewport:i,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...n})}get isComposite(){return!1}get isDrawable(){return!0}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){const e=this.state;return e&&(e.models||e.model&&[e.model])||[]}setShaderModuleProps(...e){for(const n of this.getModels())n.shaderInputs.setProps(...e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===Ze.DEFAULT||e===Ze.LNGLAT||e===Ze.CARTESIAN}onHover(e,n){return this.props.onHover&&this.props.onHover(e,n)||!1}onClick(e,n){return this.props.onClick&&this.props.onClick(e,n)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,n=[]){return n[0]=e+1&255,n[1]=e+1>>8&255,n[2]=e+1>>8>>8&255,n}decodePickingColor(e){mn(e instanceof Uint8Array);const[n,i,r]=e;return n+i*256+r*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:uY(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;return(e=this.getAttributeManager())==null?void 0:e.getBounds(["positions","instancePositions"])}getShaders(e){e=xx(e,{disableWarnings:!0,modules:this.context.defaultShaderModules});for(const n of this.props.extensions)e=xx(e,n.getShaders.call(this,n));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const n=this.getAttributeManager(),{dataChanged:i}=e.changeFlags;if(i&&n)if(Array.isArray(i))for(const r of i)n.invalidateAll(r);else n.invalidateAll();if(n){const{props:r}=e,s=this.internalState.hasPickingBuffer,a=Number.isInteger(r.highlightedObjectIndex)||r.pickable||r.extensions.some(o=>o.getNeedsPickingBuffer.call(this,o));if(s!==a){this.internalState.hasPickingBuffer=a;const{pickingColors:o,instancePickingColors:l}=n.attributes,c=o||l;c&&(a&&c.constant&&(c.constant=!1,n.invalidate(c.id)),!c.value&&!a&&(c.constant=!0,c.value=[0,0,0]))}}}finalizeState(e){for(const i of this.getModels())i.destroy();const n=this.getAttributeManager();n&&n.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const n of this.getModels())n.draw(e.renderPass)}getPickingInfo({info:e,mode:n,sourceLayer:i}){const{index:r}=e;return r>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[r]),e}raiseError(e,n){var i,r,s,a;n&&(e=new Error(`${n}: ${e.message}`,{cause:e})),(r=(i=this.props).onError)!=null&&r.call(i,e)||(a=(s=this.context)==null?void 0:s.onError)==null||a.call(s,e,this)}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var e;return((e=this.internalState)==null?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const n=this.internalState.viewport;this.internalState.viewport=e,(!n||!LY({oldViewport:n,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const n=this.getAttributeManager();n&&(e==="all"?n.invalidateAll():n.invalidate(e))}updateAttributes(e){let n=!1;for(const i in e)e[i].layoutChanged()&&(n=!0);for(const i of this.getModels())this._setModelAttributes(i,e,n)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const n=this.props,i=this.getNumInstances(),r=this.getStartIndices();e.update({data:n.data,numInstances:i,startIndices:r,props:n,transitions:n.transitions,buffers:n.data.attributes,context:this});const s=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(s)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const n=e.update(),i=Object.create(this.props);for(const r in n)Object.defineProperty(i,r,{value:n[r]});return i}return this.props}calculateInstancePickingColors(e,{numInstances:n}){if(e.constant)return;const i=Math.floor(zi.length/4);if(this.internalState.usesPickingColorCache=!0,i<n){n>Sx&&ut.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),zi=fl.allocate(zi,n,{size:4,copy:!0,maxCount:Math.max(n,Sx)});const r=Math.floor(zi.length/4),s=[0,0,0];for(let a=i;a<r;a++)this.encodePickingColor(a,s),zi[a*4+0]=s[0],zi[a*4+1]=s[1],zi[a*4+2]=s[2],zi[a*4+3]=0}e.value=zi.subarray(0,n*4)}_setModelAttributes(e,n,i=!1){var o;if(!Object.keys(n).length)return;if(i){const l=this.getAttributeManager();e.setBufferLayout(l.getBufferLayouts(e)),n=l.getAttributes()}const r=((o=e.userData)==null?void 0:o.excludeAttributes)||{},s={},a={};for(const l in n){if(r[l])continue;const c=n[l].getValue();for(const u in c){const f=c[u];f instanceof It?n[l].settings.isIndexed?e.setIndexBuffer(f):s[u]=f:f&&(a[u]=f)}}e.setAttributes(s),e.setConstantAttributes(a)}disablePickingIndex(e){const n=this.props.data;if(!("attributes"in n)){this._disablePickingIndex(e);return}const{pickingColors:i,instancePickingColors:r}=this.getAttributeManager().attributes,s=i||r,a=s&&n.attributes&&n.attributes[s.id];if(a&&a.value){const o=a.value,l=this.encodePickingColor(e);for(let c=0;c<n.length;c++){const u=s.getVertexOffset(c);o[u]===l[0]&&o[u+1]===l[1]&&o[u+2]===l[2]&&this._disablePickingIndex(c)}}else this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:n,instancePickingColors:i}=this.getAttributeManager().attributes,r=n||i;if(!r)return;const s=r.getVertexOffset(e),a=r.getVertexOffset(e+1);r.buffer.write(new Uint8Array(a-s),s)}restorePickingColors(){const{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,i=e||n;i&&(this.internalState.usesPickingColorCache&&i.value.buffer!==zi.buffer&&(i.value=zi.subarray(0,i.value.length)),i.updateSubBuffer({startOffset:0}))}_initialize(){mn(!this.internalState),mn(Number.isFinite(this.props.coordinateSystem)),En(PY,this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:"uint8",size:4,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new OY({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(ut.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.uniformTransitions=new tY(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const n of this.props.extensions)n.initializeState.call(this,this.context,n);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){En(NY,this,this===e);const{state:n,internalState:i}=e;this!==e&&(this.internalState=i,this.state=n,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(En(DY,this,e),!e)return;const n=this.props,i=this.context,r=this.internalState,s=i.viewport,a=this._updateUniformTransition();r.propsInTransition=a,i.viewport=r.viewport||s,this.props=a;try{const o=this._getUpdateParams(),l=this.getModels();if(i.device)this.updateState(o);else try{this.updateState(o)}catch{}for(const u of this.props.extensions)u.updateState.call(this,o,u);this.setNeedsRedraw(),this._updateAttributes();const c=this.getModels()[0]!==l[0];this._postUpdate(o,c)}finally{i.viewport=s,this.props=n,this._clearChangeFlags(),r.needsUpdate=!1,r.resetOldProps()}}_finalize(){En(kY,this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,this.context,e)}_drawLayer({renderPass:e,shaderModuleProps:n=null,uniforms:i={},parameters:r={}}){this._updateAttributeTransition();const s=this.props,a=this.context;this.props=this.internalState.propsInTransition||s;try{n&&this.setShaderModuleProps(n);const{getPolygonOffset:o}=this.props,l=o&&o(i)||[0,0];a.device instanceof X_&&a.device.setParametersWebGL({polygonOffset:l});for(const c of this.getModels())c.device.type==="webgpu"?c.setParameters({...c.parameters,...r}):c.setParameters(r);if(a.device instanceof X_)a.device.withParametersWebGL(r,()=>{const c={renderPass:e,shaderModuleProps:n,uniforms:i,parameters:r,context:a};for(const u of this.props.extensions)u.draw.call(this,c,u);this.draw(c)});else{const c={renderPass:e,shaderModuleProps:n,uniforms:i,parameters:r,context:a};for(const u of this.props.extensions)u.draw.call(this,c,u);this.draw(c)}}finally{this.props=s}}getChangeFlags(){var e;return(e=this.internalState)==null?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:n}=this.internalState;for(const r in e)if(e[r]){let s=!1;switch(r){case"dataChanged":const a=e[r],o=n[r];a&&Array.isArray(o)&&(n.dataChanged=Array.isArray(a)?o.concat(a):a,s=!0);default:n[r]||(n[r]=e[r],s=!0)}s&&En(IY,this,r,e)}const i=!!(n.dataChanged||n.updateTriggersChanged||n.propsChanged||n.extensionsChanged);n.propsOrDataChanged=i,n.somethingChanged=i||n.viewportChanged||n.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,n){var r;const i=iY(e,n);if(i.updateTriggersChanged)for(const s in i.updateTriggersChanged)i.updateTriggersChanged[s]&&this.invalidateAttribute(s);if(i.transitionsChanged)for(const s in i.transitionsChanged)this.internalState.uniformTransitions.add(s,n[s],e[s],(r=e.transitions)==null?void 0:r[s]);return this.setChangeFlags(i)}validateProps(){nY(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const n={highlightedObjectColor:e.picked?e.color:null},{highlightColor:i}=this.props;e.picked&&typeof i=="function"&&(n.highlightColor=i(e)),this.setShaderModuleProps({picking:n}),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new ZW(e.device,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,n){const{props:i,oldProps:r}=e,s=this.state.model;s!=null&&s.isInstanced&&s.setInstanceCount(this.getNumInstances());const{autoHighlight:a,highlightedObjectIndex:o,highlightColor:l}=i;if(n||r.autoHighlight!==a||r.highlightedObjectIndex!==o||r.highlightColor!==l){const c={};Array.isArray(l)&&(c.highlightColor=l),(n||r.autoHighlight!==a||o!==r.highlightedObjectIndex)&&(c.highlightedObjectColor=Number.isFinite(o)&&o>=0?this.encodePickingColor(o):null),this.setShaderModuleProps({picking:c})}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let n=!1;n=n||this.internalState.needsRedraw&&this.id;const i=this.getAttributeManager(),r=i?i.getNeedsRedraw(e):!1;if(n=n||r,n)for(const s of this.props.extensions)s.onNeedsRedraw.call(this,s);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags,n}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}Ha.defaultProps=UY;Ha.layerName="Layer";const FY="compositeLayer.renderLayers";class ig extends Ha{get isComposite(){return!0}get isDrawable(){return!1}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(e=>e.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){const{object:n}=e;return n&&n.__source&&n.__source.parent&&n.__source.parent.id===this.id&&(e.object=n.__source.object,e.index=n.__source.index),e}filterSubLayer(e){return!0}shouldRenderSubLayer(e,n){return n&&n.length}getSubLayerClass(e,n){const{_subLayerProps:i}=this.props;return i&&i[e]&&i[e].type||n}getSubLayerRow(e,n,i){return e.__source={parent:this,object:n,index:i},e}getSubLayerAccessor(e){if(typeof e=="function"){const n={index:-1,data:this.props.data,target:[]};return(i,r)=>i&&i.__source?(n.index=i.__source.index,e(i.__source.object,n)):e(i,r)}return e}getSubLayerProps(e={}){var D;const{opacity:n,pickable:i,visible:r,parameters:s,getPolygonOffset:a,highlightedObjectIndex:o,autoHighlight:l,highlightColor:c,coordinateSystem:u,coordinateOrigin:f,wrapLongitude:d,positionFormat:p,modelMatrix:m,extensions:S,fetch:v,operation:y,_subLayerProps:_}=this.props,T={id:"",updateTriggers:{},opacity:n,pickable:i,visible:r,parameters:s,getPolygonOffset:a,highlightedObjectIndex:o,autoHighlight:l,highlightColor:c,coordinateSystem:u,coordinateOrigin:f,wrapLongitude:d,positionFormat:p,modelMatrix:m,extensions:S,fetch:v,operation:y},b=_&&e.id&&_[e.id],M=b&&b.updateTriggers,C=e.id||"sublayer";if(b){const F=this.props[Os],L=e.type?e.type._propTypes:{};for(const U in b){const N=L[U]||F[U];N&&N.type==="accessor"&&(b[U]=this.getSubLayerAccessor(b[U]))}}Object.assign(T,e,b),T.id=`${this.props.id}-${C}`,T.updateTriggers={all:(D=this.props.updateTriggers)==null?void 0:D.all,...e.updateTriggers,...M};for(const F of S){const L=F.getSubLayerProps.call(this,F);L&&Object.assign(T,L,{updateTriggers:Object.assign(T.updateTriggers,L.updateTriggers)})}return T}_updateAutoHighlight(e){for(const n of this.getSubLayers())n.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,n){let i=this.internalState.subLayers;const r=!i||this.needsUpdate();if(r){const s=this.renderLayers();i=gv(s,Boolean),this.internalState.subLayers=i}En(FY,this,r,i);for(const s of i)s.parent=this}}ig.layerName="CompositeLayer";class zY{constructor(e){this.indexStarts=[0],this.vertexStarts=[0],this.vertexCount=0,this.instanceCount=0;const{attributes:n={}}=e;this.typedArrayManager=fl,this.attributes={},this._attributeDefs=n,this.opts=e,this.updateGeometry(e)}updateGeometry(e){Object.assign(this.opts,e);const{data:n,buffers:i={},getGeometry:r,geometryBuffer:s,positionFormat:a,dataChanged:o,normalize:l=!0}=this.opts;if(this.data=n,this.getGeometry=r,this.positionSize=s&&s.size||(a==="XY"?2:3),this.buffers=i,this.normalize=l,s&&(mn(n.startIndices),this.getGeometry=this.getGeometryFromBuffer(s),l||(i.vertexPositions=s)),this.geometryBuffer=i.vertexPositions,Array.isArray(o))for(const c of o)this._rebuildGeometry(c);else this._rebuildGeometry()}updatePartialGeometry({startRow:e,endRow:n}){this._rebuildGeometry({startRow:e,endRow:n})}getGeometryFromBuffer(e){const n=e.value||e;return ArrayBuffer.isView(n)?rM(n,{size:this.positionSize,offset:e.offset,stride:e.stride,startIndices:this.data.startIndices}):null}_allocate(e,n){const{attributes:i,buffers:r,_attributeDefs:s,typedArrayManager:a}=this;for(const o in s)if(o in r)a.release(i[o]),i[o]=null;else{const l=s[o];l.copy=n,i[o]=a.allocate(i[o],e,l)}}_forEachGeometry(e,n,i){const{data:r,getGeometry:s}=this,{iterable:a,objectInfo:o}=wv(r,n,i);for(const l of a){o.index++;const c=s?s(l,o):null;e(c,o.index)}}_rebuildGeometry(e){if(!this.data)return;let{indexStarts:n,vertexStarts:i,instanceCount:r}=this;const{data:s,geometryBuffer:a}=this,{startRow:o=0,endRow:l=1/0}=e||{},c={};if(e||(n=[0],i=[0]),this.normalize||!a)this._forEachGeometry((f,d)=>{const p=f&&this.normalizeGeometry(f);c[d]=p,i[d+1]=i[d]+(p?this.getGeometrySize(p):0)},o,l),r=i[i.length-1];else if(i=s.startIndices,r=i[s.length]||0,ArrayBuffer.isView(a))r=r||a.length/this.positionSize;else if(a instanceof It){const f=this.positionSize*4;r=r||a.byteLength/f}else if(a.buffer){const f=a.stride||this.positionSize*4;r=r||a.buffer.byteLength/f}else if(a.value){const f=a.value,d=a.stride/f.BYTES_PER_ELEMENT||this.positionSize;r=r||f.length/d}this._allocate(r,!!e),this.indexStarts=n,this.vertexStarts=i,this.instanceCount=r;const u={};this._forEachGeometry((f,d)=>{const p=c[d]||f;u.vertexStart=i[d],u.indexStart=n[d];const m=d<i.length-1?i[d+1]:r;u.geometrySize=m-i[d],u.geometryIndex=d,this.updateGeometryAttributes(p,u)},o,l),this.vertexCount=n[n.length-1]}}const VY=typeof window<"u"?I.useLayoutEffect:I.useEffect;function Ah(t,e){for(;t;){if(t===e)return!0;t=Object.getPrototypeOf(t)}return!1}const $Y={position:"absolute",zIndex:-1};function mM(t,e){if(typeof t=="function")return t(e);if(Array.isArray(t))return t.map(n=>mM(n,e));if(rg(t)){if(jY(t))return e.style=$Y,I.cloneElement(t,e);if(HY(t))return I.cloneElement(t,e)}return t}function rg(t){return t&&typeof t=="object"&&"type"in t||!1}function jY(t){var e;return(e=t.props)==null?void 0:e.mapStyle}function HY(t){const e=t.type;return e&&e.deckGLViewProps}function J_(t){if(typeof t=="function")return I.createElement(hl,{},t);if(Array.isArray(t))return t.map(J_);if(rg(t)){if(t.type===I.Fragment)return J_(t.props.children);if(Ah(t.type,hl))return t}return t}function WY({children:t,layers:e=[],views:n=null}){const i=[],r=[],s={};return I.Children.forEach(J_(t),a=>{if(rg(a)){const o=a.type;if(Ah(o,Ha)){const l=YY(o,a.props);r.push(l)}else i.push(a);if(Ah(o,hl)&&o!==hl&&a.props.id){const l=new o(a.props);s[l.id]=l}}else a&&i.push(a)}),Object.keys(s).length>0&&(Array.isArray(n)?n.forEach(a=>{s[a.id]=a}):n&&(s[n.id]=n),n=Object.values(s)),e=r.length>0?[...r,...e]:e,{layers:e,children:i,views:n}}function YY(t,e){const n={},i=t.defaultProps||{};for(const r in e)i[r]!==e[r]&&(n[r]=e[r]);return new t(n)}const XY=I.createContext();function qY({children:t,deck:e,ContextProvider:n=XY.Provider}){const{viewManager:i}=e||{};if(!i||!i.views.length)return[];const r={},s=i.views[0].id;for(const a of t){let o=s,l=a;rg(a)&&Ah(a.type,hl)&&(o=a.props.id||s,l=a.props.children);const c=i.getViewport(o),u=i.getViewState(o);if(c){u.padding=c.padding;const{x:f,y:d,width:p,height:m}=c;l=mM(l,{x:f,y:d,width:p,height:m,viewport:c,viewState:u}),r[o]||(r[o]={viewport:c,children:[]}),r[o].children.push(l)}}return Object.keys(r).map(a=>{const{viewport:o,children:l}=r[a],{x:c,y:u,width:f,height:d}=o,p={position:"absolute",left:c,top:u,width:f,height:d},m=`view-${a}`,S=I.createElement("div",{key:m,id:m,style:p},...l),v={deck:e,viewport:o,container:e.canvas.offsetParent,eventManager:e.eventManager,onViewStateChange:_=>{_.viewId=a,e._onViewStateChange(_)},widgets:[]},y=`view-${a}-context`;return I.createElement(n,{key:y,value:v},S)})}const KY={mixBlendMode:null};function ZY({width:t,height:e,style:n}){const i={position:"absolute",zIndex:0,left:0,top:0,width:t,height:e},r={left:0,top:0};if(n)for(const s in n)s in KY?r[s]=n[s]:i[s]=n[s];return{containerStyle:i,canvasStyle:r}}function GY(t){return{get deck(){return t.deck},pickObject:e=>t.deck.pickObject(e),pickMultipleObjects:e=>t.deck.pickMultipleObjects(e),pickObjects:e=>t.deck.pickObjects(e)}}function yM(t){t.redrawReason&&(t.deck._drawLayers(t.redrawReason),t.redrawReason=null)}function QY(t,e,n){var r,s,a;const i=new e({...n,_customRender:((a=(s=(r=n.deviceProps)==null?void 0:r.adapters)==null?void 0:s[0])==null?void 0:a.type)==="webgpu"?void 0:o=>{t.redrawReason=o;const l=i.getViewports();t.lastRenderedViewports!==l?t.forceUpdate():yM(t)}});return i}function JY(t,e){const[n,i]=I.useState(0),s=I.useRef({control:null,version:n,forceUpdate:()=>i(M=>M+1)}).current,a=I.useRef(null),o=I.useRef(null),l=I.useMemo(()=>WY(t),[t.layers,t.views,t.children]);let c=!0;const u=M=>{var C;return c&&t.viewState?(s.viewStateUpdateRequested=M,null):(s.viewStateUpdateRequested=null,(C=t.onViewStateChange)==null?void 0:C.call(t,M))},f=M=>{var C;c?s.interactionStateUpdateRequested=M:(s.interactionStateUpdateRequested=null,(C=t.onInteractionStateChange)==null||C.call(t,M))},d=I.useMemo(()=>{const M={widgets:[],...t,style:null,width:"100%",height:"100%",parent:a.current,canvas:o.current,layers:l.layers,views:l.views,onViewStateChange:u,onInteractionStateChange:f};return delete M._customRender,s.deck&&s.deck.setProps(M),M},[t]);I.useEffect(()=>{const M=t.Deck||Sv;return s.deck=QY(s,M,{...d,parent:a.current,canvas:o.current}),()=>{var C;return(C=s.deck)==null?void 0:C.finalize()}},[]),VY(()=>{var D;yM(s);const{viewStateUpdateRequested:M,interactionStateUpdateRequested:C}=s;M&&u(M),C&&f(C),(D=s.deck)!=null&&D.isInitialized&&s.deck.redraw("Initial render")}),I.useImperativeHandle(e,()=>GY(s),[]);const p=s.deck&&s.deck.isInitialized?s.deck.getViewports():void 0,{ContextProvider:m,width:S="100%",height:v="100%",id:y,style:_}=t,{containerStyle:T,canvasStyle:b}=I.useMemo(()=>ZY({width:S,height:v,style:_}),[S,v,_]);if(!s.viewStateUpdateRequested&&s.lastRenderedViewports===p||s.version!==n){s.lastRenderedViewports=p,s.version=n;const M=qY({children:l.children,deck:s.deck,ContextProvider:m}),C=I.createElement("canvas",{key:"canvas",id:y||"deckgl-overlay",ref:o,style:b});s.control=I.createElement("div",{id:`${y||"deckgl"}-wrapper`,ref:a,style:T},[C,M])}return c=!1,s.control}const eX=I.forwardRef(JY);var tX=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var i,r,s;if(Array.isArray(e)){if(i=e.length,i!=n.length)return!1;for(r=i;r--!==0;)if(!t(e[r],n[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),i=s.length,i!==Object.keys(n).length)return!1;for(r=i;r--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[r]))return!1;for(r=i;r--!==0;){var a=s[r];if(!t(e[a],n[a]))return!1}return!0}return e!==e&&n!==n};const nX=Wi(tX),iX="1.7.1";function gl(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function eb(t,e,n,i){function r(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(u){try{c(i.next(u))}catch(f){a(f)}}function l(u){try{c(i.throw(u))}catch(f){a(f)}}function c(u){u.done?s(u.value):r(u.value).then(o,l)}c((i=i.apply(t,[])).next())})}const Dr={NOT_LOADED:"NOT_LOADED",LOADING:"LOADING",LOADED:"LOADED",FAILED:"FAILED",AUTH_FAILURE:"AUTH_FAILURE"},rX="https://maps.googleapis.com/maps/api/js";class Eh{static load(e,n){return eb(this,void 0,void 0,function*(){var i,r;const s=e.libraries?e.libraries.split(","):[],a=this.serializeParams(e);this.listeners.push(n),!((r=(i=window.google)===null||i===void 0?void 0:i.maps)===null||r===void 0)&&r.importLibrary?(this.serializedApiParams||(this.loadingStatus=Dr.LOADED),this.notifyLoadingStatusListeners()):(this.serializedApiParams=a,this.initImportLibrary(e)),this.serializedApiParams&&this.serializedApiParams!==a&&console.warn("[google-maps-api-loader] The maps API has already been loaded with different parameters and will not be loaded again. Refresh the page for new values to have effect.");const o=["maps",...s];yield Promise.all(o.map(l=>google.maps.importLibrary(l)))})}static serializeParams(e){return[e.v,e.key,e.language,e.region,e.authReferrerPolicy,e.solutionChannel].join("/")}static initImportLibrary(e){if(window.google||(window.google={}),window.google.maps||(window.google.maps={}),window.google.maps.importLibrary){console.error("[google-maps-api-loader-internal]: initImportLibrary must only be called once");return}let n=null;const i=()=>n||(n=new Promise((r,s)=>{var a;const o=document.createElement("script"),l=new URLSearchParams;for(const[c,u]of Object.entries(e)){const f=c.replace(/[A-Z]/g,d=>"_"+d[0].toLowerCase());l.set(f,String(u))}l.set("loading","async"),l.set("callback","__googleMapsCallback__"),o.async=!0,o.src=rX+"?"+l.toString(),o.nonce=((a=document.querySelector("script[nonce]"))===null||a===void 0?void 0:a.nonce)||"",o.onerror=()=>{this.loadingStatus=Dr.FAILED,this.notifyLoadingStatusListeners(),s(new Error("The Google Maps JavaScript API could not load."))},window.__googleMapsCallback__=()=>{this.loadingStatus=Dr.LOADED,this.notifyLoadingStatusListeners(),r()},window.gm_authFailure=()=>{this.loadingStatus=Dr.AUTH_FAILURE,this.notifyLoadingStatusListeners()},this.loadingStatus=Dr.LOADING,this.notifyLoadingStatusListeners(),document.head.append(o)}),n);google.maps.importLibrary=r=>i().then(()=>google.maps.importLibrary(r))}static notifyLoadingStatusListeners(){for(const e of this.listeners)e(this.loadingStatus)}}Eh.loadingStatus=Dr.NOT_LOADED;Eh.listeners=[];const sX="GMP_visgl_rgmlibrary_v1_default",aX=[`gmp_visgl_reactgooglemaps_v${iX}`],Uu=Ne.createContext(null);function oX(){const[t,e]=I.useState({});return{mapInstances:t,addMapInstance:(s,a="default")=>{e(o=>Object.assign(Object.assign({},o),{[a]:s}))},removeMapInstance:(s="default")=>{e(a=>{var o=s;a[o];var l=gl(a,[typeof o=="symbol"?o:o+""]);return l})},clearMapInstances:()=>{e({})}}}function lX(t){const{onLoad:e,onError:n,apiKey:i,version:r,libraries:s=[]}=t,a=gl(t,["onLoad","onError","apiKey","version","libraries"]),[o,l]=I.useState(Eh.loadingStatus),[c,u]=I.useReducer((m,S)=>m[S.name]?m:Object.assign(Object.assign({},m),{[S.name]:S.value}),{}),f=I.useMemo(()=>s==null?void 0:s.join(","),[s]),d=I.useMemo(()=>JSON.stringify(Object.assign({apiKey:i,version:r},a)),[i,r,a]),p=I.useCallback(m=>eb(this,void 0,void 0,function*(){var S;if(c[m])return c[m];if(!(!((S=google==null?void 0:google.maps)===null||S===void 0)&&S.importLibrary))throw new Error("[api-provider-internal] importLibrary was called before google.maps.importLibrary was defined.");const v=yield window.google.maps.importLibrary(m);return u({name:m,value:v}),v}),[c]);return I.useEffect(()=>{eb(this,void 0,void 0,function*(){try{const m=Object.assign({key:i},a);r&&(m.v=r),(f==null?void 0:f.length)>0&&(m.libraries=f),(m.channel===void 0||m.channel<0||m.channel>999)&&delete m.channel,m.solutionChannel===void 0?m.solutionChannel=sX:m.solutionChannel===""&&delete m.solutionChannel,yield Eh.load(m,S=>l(S));for(const S of["core","maps",...s])yield p(S);e&&e()}catch(m){n?n(m):console.error("<ApiProvider> failed to load the Google Maps JavaScript API",m)}})},[i,f,d]),{status:o,loadedLibraries:c,importLibrary:p}}function cX(t){return I.useMemo(()=>t.disableUsageAttribution?null:aX,[t.disableUsageAttribution])}const uX=t=>{const{children:e}=t,n=gl(t,["children"]),{mapInstances:i,addMapInstance:r,removeMapInstance:s,clearMapInstances:a}=oX(),{status:o,loadedLibraries:l,importLibrary:c}=lX(n),u=cX(n),f=I.useMemo(()=>({mapInstances:i,addMapInstance:r,removeMapInstance:s,clearMapInstances:a,status:o,loadedLibraries:l,importLibrary:c,internalUsageAttributionIds:u}),[i,r,s,a,o,l,c,u]);return Ne.createElement(Uu.Provider,{value:f},e)};function fX(t,e){for(const n of gX){const i=e[n],r=_M[n];I.useEffect(()=>{if(!t||!i)return;const s=google.maps.event.addListener(t,r,a=>{i(dX(r,t,a))});return()=>s.remove()},[t,r,i])}}function dX(t,e,n){var i;const r={type:t,map:e,detail:{},stoppable:!1,stop:()=>{}};if(hX.includes(t)){const s=r,a=e.getCenter(),o=e.getZoom(),l=e.getHeading()||0,c=e.getTilt()||0,u=e.getBounds();return(!a||!u||!Number.isFinite(o))&&console.warn("[createEvent] at least one of the values from the map returned undefined. This is not expected to happen. Please report an issue at https://github.com/visgl/react-google-maps/issues/new"),s.detail={center:(a==null?void 0:a.toJSON())||{lat:0,lng:0},zoom:o||0,heading:l,tilt:c,bounds:(u==null?void 0:u.toJSON())||{north:90,east:180,south:-90,west:-180}},s}else if(pX.includes(t)){if(!n)throw new Error("[createEvent] mouse events must provide a srcEvent");const s=r;return s.domEvent=n.domEvent,s.stoppable=!0,s.stop=()=>n.stop(),s.detail={latLng:((i=n.latLng)===null||i===void 0?void 0:i.toJSON())||null,placeId:n.placeId},s}return r}const _M={onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onContextmenu:"contextmenu",onDblclick:"dblclick",onDrag:"drag",onDragend:"dragend",onDragstart:"dragstart",onHeadingChanged:"heading_changed",onIdle:"idle",onIsFractionalZoomEnabledChanged:"isfractionalzoomenabled_changed",onMapCapabilitiesChanged:"mapcapabilities_changed",onMapTypeIdChanged:"maptypeid_changed",onMousemove:"mousemove",onMouseout:"mouseout",onMouseover:"mouseover",onProjectionChanged:"projection_changed",onRenderingTypeChanged:"renderingtype_changed",onTilesLoaded:"tilesloaded",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed",onCameraChanged:"bounds_changed"},hX=["bounds_changed","center_changed","heading_changed","tilt_changed","zoom_changed"],pX=["click","contextmenu","dblclick","mousemove","mouseout","mouseover"],gX=Object.keys(_M);function mX(t){const e=I.useRef(void 0);return I.useEffect(()=>{e.current=t}),e.current}function yX(t,e){const n=mX(t);return I.useMemo(()=>n&&e(n,t)?n:t,[t,n,e])}function _X(t,e,n){I.useEffect(t,[yX(e,n)])}function bX(t,e){_X(t,e,nX)}const vX=new Set(["backgroundColor","clickableIcons","controlSize","disableDefaultUI","disableDoubleClickZoom","draggable","draggableCursor","draggingCursor","fullscreenControl","fullscreenControlOptions","gestureHandling","headingInteractionEnabled","isFractionalZoomEnabled","keyboardShortcuts","mapTypeControl","mapTypeControlOptions","mapTypeId","maxZoom","minZoom","noClear","panControl","panControlOptions","restriction","rotateControl","rotateControlOptions","scaleControl","scaleControlOptions","scrollwheel","streetView","streetViewControl","streetViewControlOptions","styles","tiltInteractionEnabled","zoomControl","zoomControlOptions"]);function TX(t,e){const n={},i=Object.keys(e);for(const r of i)vX.has(r)&&(n[r]=e[r]);bX(()=>{t&&t.setOptions(n)},[n])}function bM(){var t;return((t=I.useContext(Uu))===null||t===void 0?void 0:t.status)||Dr.NOT_LOADED}function xX(t,e){const{viewport:n,viewState:i}=e,r=!!n;return I.useLayoutEffect(()=>{if(!t||!i)return;const{latitude:s,longitude:a,bearing:o,pitch:l,zoom:c}=i;t.moveCamera({center:{lat:s,lng:a},heading:o,tilt:l,zoom:c+1})},[t,i]),r}function SX(t){return!t||typeof t!="object"||!("lat"in t&&"lng"in t)?!1:Number.isFinite(t.lat)&&Number.isFinite(t.lng)}function vM(t){return SX(t)?t:t.toJSON()}function wX(t,e,n){const i=n.center?vM(n.center):null;let r=null,s=null;i&&Number.isFinite(i.lat)&&Number.isFinite(i.lng)&&(r=i.lat,s=i.lng);const a=Number.isFinite(n.zoom)?n.zoom:null,o=Number.isFinite(n.heading)?n.heading:null,l=Number.isFinite(n.tilt)?n.tilt:null;I.useLayoutEffect(()=>{if(!t)return;const c={};let u=!1;r!==null&&s!==null&&(e.current.center.lat!==r||e.current.center.lng!==s)&&(c.center={lat:r,lng:s},u=!0),a!==null&&e.current.zoom!==a&&(c.zoom=a,u=!0),o!==null&&e.current.heading!==o&&(c.heading=o,u=!0),l!==null&&e.current.tilt!==l&&(c.tilt=l,u=!0),u&&t.moveCamera(c)})}const AX=()=>{const t={position:"absolute",top:0,left:0,bottom:0,right:0,zIndex:999,display:"flex",flexFlow:"column nowrap",textAlign:"center",justifyContent:"center",fontSize:".8rem",color:"rgba(0,0,0,0.6)",background:"#dddddd",padding:"1rem 1.5rem"};return Ne.createElement("div",{style:t},Ne.createElement("h2",null,"Error: AuthFailure"),Ne.createElement("p",null,"A problem with your API key prevents the map from rendering correctly. Please make sure the value of the ",Ne.createElement("code",null,"APIProvider.apiKey")," prop is correct. Check the error-message in the console for further details."))};function EX(){const[t,e]=I.useState(null),n=I.useCallback(i=>e(i),[e]);return[t,n]}function TM(){return bM()===Dr.LOADED}function CX(){const[,t]=I.useReducer(e=>e+1,0);return t}function RX(t,e){const n=t.getCenter(),i=t.getZoom(),r=t.getHeading()||0,s=t.getTilt()||0,a=t.getBounds();(!n||!a||!Number.isFinite(i))&&console.warn("[useTrackedCameraState] at least one of the values from the map returned undefined. This is not expected to happen. Please report an issue at https://github.com/visgl/react-google-maps/issues/new"),Object.assign(e.current,{center:(n==null?void 0:n.toJSON())||{lat:0,lng:0},zoom:i||0,heading:r,tilt:s})}function MX(t){const e=CX(),n=I.useRef({center:{lat:0,lng:0},heading:0,tilt:0,zoom:0});return I.useEffect(()=>{if(!t)return;const i=google.maps.event.addListener(t,"bounds_changed",()=>{RX(t,n),e()});return()=>i.remove()},[t,e]),n}class gd{static has(e){return this.entries[e]&&this.entries[e].length>0}static pop(e){return this.entries[e]&&this.entries[e].pop()||null}static push(e,n){this.entries[e]||(this.entries[e]=[]),this.entries[e].push(n)}}gd.entries={};function OX(t,e){const n=TM(),[i,r]=I.useState(null),[s,a]=EX(),o=MX(i),{id:l,defaultBounds:c,defaultCenter:u,defaultZoom:f,defaultHeading:d,defaultTilt:p,reuseMaps:m,renderingType:S,colorScheme:v}=t,y=gl(t,["id","defaultBounds","defaultCenter","defaultZoom","defaultHeading","defaultTilt","reuseMaps","renderingType","colorScheme"]),_=t.zoom!==void 0||t.defaultZoom!==void 0,T=t.center!==void 0||t.defaultCenter!==void 0;!c&&(!_||!T)&&console.warn("<Map> component is missing configuration. You have to provide zoom and center (via the `zoom`/`defaultZoom` and `center`/`defaultCenter` props) or specify the region to show using `defaultBounds`. See https://visgl.github.io/react-google-maps/docs/api-reference/components/map#required"),!y.center&&u&&(y.center=u),!y.zoom&&Number.isFinite(f)&&(y.zoom=f),!y.heading&&Number.isFinite(d)&&(y.heading=d),!y.tilt&&Number.isFinite(p)&&(y.tilt=p);const b=y.internalUsageAttributionIds;b==null?y.internalUsageAttributionIds=e.internalUsageAttributionIds:y.internalUsageAttributionIds=[...e.internalUsageAttributionIds||[],...b];for(const C of Object.keys(y))y[C]===void 0&&delete y[C];const M=I.useRef(void 0);return I.useEffect(()=>{if(!s||!n)return;const{addMapInstance:C,removeMapInstance:D}=e,{mapId:F}=t,L=`${F||"default"}:${S||"default"}:${v||"LIGHT"}`;let U,N;if(m&&gd.has(L)?(N=gd.pop(L),U=N.getDiv(),s.appendChild(U),N.setOptions(y),setTimeout(()=>N.setCenter(N.getCenter()),0)):(U=document.createElement("div"),U.style.height="100%",s.appendChild(U),N=new google.maps.Map(U,Object.assign(Object.assign(Object.assign({},y),S?{renderingType:S}:{}),v?{colorScheme:v}:{}))),r(N),C(N,l),c){const{padding:A}=c,Y=gl(c,["padding"]);N.fitBounds(Y,A)}else(!_||!T)&&N.fitBounds({east:180,west:-180,south:-90,north:90});if(M.current){const{mapId:A,cameraState:Y}=M.current;A!==F&&N.setOptions(Y)}return()=>{M.current={mapId:F,cameraState:o.current},U.remove(),m?gd.push(L,N):google.maps.event.clearInstanceListeners(N),r(null),D(l)}},[s,n,l,t.mapId,t.renderingType,t.colorScheme]),[i,a,o]}const xM=Ne.createContext(null),SM=t=>{const{children:e,id:n,className:i,style:r}=t,s=I.useContext(Uu),a=bM();if(!s)throw new Error("<Map> can only be used inside an <ApiProvider> component.");const[o,l,c]=OX(t,s);wX(o,c,t),fX(o,t),TX(o,t);const u=xX(o,t),f=!!t.controlled;I.useEffect(()=>{if(o)return u&&o.setOptions({disableDefaultUI:!0}),(u||f)&&o.setOptions({gestureHandling:"none",keyboardShortcuts:!1}),()=>{o.setOptions({gestureHandling:t.gestureHandling,keyboardShortcuts:t.keyboardShortcuts})}},[o,u,f,t.gestureHandling,t.keyboardShortcuts]);const d=t.center?vM(t.center):null;let p=null,m=null;d&&Number.isFinite(d.lat)&&Number.isFinite(d.lng)&&(p=d.lat,m=d.lng);const S=I.useMemo(()=>{var _,T,b;return{center:{lat:p??0,lng:m??0},zoom:(_=t.zoom)!==null&&_!==void 0?_:0,heading:(T=t.heading)!==null&&T!==void 0?T:0,tilt:(b=t.tilt)!==null&&b!==void 0?b:0}},[p,m,t.zoom,t.heading,t.tilt]);I.useLayoutEffect(()=>{if(!o||!f)return;o.moveCamera(S);const _=o.addListener("bounds_changed",()=>{o.moveCamera(S)});return()=>_.remove()},[o,f,S]);const v=I.useMemo(()=>Object.assign({width:"100%",height:"100%",position:"relative",zIndex:u?-1:0},r),[r,u]),y=I.useMemo(()=>({map:o}),[o]);return a===Dr.AUTH_FAILURE?Ne.createElement("div",{style:Object.assign({position:"relative"},i?{}:v),className:i},Ne.createElement(AX,null)):Ne.createElement("div",Object.assign({ref:l,"data-testid":"map",style:i?void 0:v,className:i},n?{id:n}:{}),o?Ne.createElement(xM.Provider,{value:y},e):null)};SM.deckGLViewProps=!0;const wx=new Set;function IX(...t){const e=JSON.stringify(t);wx.has(e)||(wx.add(e),console.error(...t))}const wM=(t=null)=>{const e=I.useContext(Uu),{map:n}=I.useContext(xM)||{};if(e===null)return IX("useMap(): failed to retrieve APIProviderContext. Make sure that the <APIProvider> component exists and that the component you are calling `useMap()` from is a sibling of the <APIProvider>."),null;const{mapInstances:i}=e;return t!==null?i[t]||null:n||i.default||null};function PX(t){const e=TM(),n=I.useContext(Uu);return I.useEffect(()=>{!e||!n||n.importLibrary(t)},[e,n,t]),(n==null?void 0:n.loadedLibraries[t])||null}function Ff(t,e,n){I.useEffect(()=>{if(!t||!e||!n)return;const i=google.maps.event.addListener(t,e,n);return()=>i.remove()},[t,e,n])}function zf(t,e,n){I.useEffect(()=>{t&&(t[e]=n)},[t,e,n])}function Ax(t,e,n){I.useEffect(()=>{if(!(!t||!e||!n))return t.addEventListener(e,n),()=>t.removeEventListener(e,n)},[t,e,n])}class DX{constructor(){this.renderedStyles=new Set,this.styleElement=null}getStyleElement(){return this.styleElement||(this.styleElement=document.createElement("style"),this.styleElement.setAttribute("data-rgm-anchor-styles",""),document.head.appendChild(this.styleElement)),this.styleElement}addAdvancedMarkerPointerEventsOverwrite(){if(this.renderedStyles.has("marker-pointer-events"))return;const e=this.getStyleElement();e.textContent+=`
      gmp-advanced-marker[data-origin='rgm'] {
        pointer-events: none !important;
      }
    `,this.renderedStyles.add("marker-pointer-events")}cleanup(){this.styleElement&&(this.styleElement.remove(),this.styleElement=null,this.renderedStyles.clear())}}const kX=new DX;function NX(t,e){var n;if(!(!((n=google==null?void 0:google.maps)===null||n===void 0)&&n.version))return;const i=google.maps.version.split("."),r=parseInt(i[0],10),s=parseInt(i[1],10);return r>t||r===t&&s>=e}const BX=Ne.createContext(null),LX={BOTTOM:["50%","100%"]},UX=I.forwardRef((t,e)=>{const{children:n,style:i,className:r,anchorPoint:s}=t,[a,o]=zX(t),l=I.useMemo(()=>a?{marker:a}:null,[a]);return I.useImperativeHandle(e,()=>a,[a]),o?Ne.createElement(BX.Provider,{value:l},ub.createPortal(Ne.createElement(FX,{anchorPoint:s,styles:i,className:r},n),o)):null});UX.displayName="AdvancedMarker";function tb(t){return t.nodeType===Node.ELEMENT_NODE}const FX=({children:t,styles:e,className:n})=>Ne.createElement("div",{className:n,style:e},t);function zX(t){const[e,n]=I.useState(null),[i,r]=I.useState(null),s=wM(),a=PX("marker"),{children:o,onClick:l,className:c,onMouseEnter:u,onMouseLeave:f,onDrag:d,onDragStart:p,onDragEnd:m,collisionBehavior:S,clickable:v,draggable:y,position:_,title:T,zIndex:b,anchorPoint:M,anchorLeft:C,anchorTop:D}=t,F=I.Children.count(o);return I.useEffect(()=>{if(!s||!a)return;const L=new a.AdvancedMarkerElement;L.map=s,n(L);let U=null;return F>0&&(U=document.createElement("div"),L.content=U,r(U)),()=>{L.map=null,U==null||U.remove(),n(null),r(null)}},[s,a,F]),I.useEffect(()=>{!(e!=null&&e.content)||!tb(e.content)||F>0||(e.content.className=c??"")},[e,c,F]),VX(e,M,C,D,F>0),zf(e,"position",_),zf(e,"title",T??""),zf(e,"zIndex",b),zf(e,"collisionBehavior",S),I.useEffect(()=>{e&&(y!==void 0?e.gmpDraggable=y:d||p||m?e.gmpDraggable=!0:e.gmpDraggable=!1)},[e,y,d,m,p]),I.useEffect(()=>{if(!e)return;const L=v!==void 0||!!l||!!u||!!f;e.gmpClickable=L,L&&(e!=null&&e.content)&&tb(e.content)&&(e.content.style.pointerEvents="all",l&&(e.content.style.cursor="pointer"))},[e,v,l,u,f]),Ff(e,"click",l),Ff(e,"drag",d),Ff(e,"dragstart",p),Ff(e,"dragend",m),Ax(e==null?void 0:e.element,"mouseenter",u),Ax(e==null?void 0:e.element,"mouseleave",f),[e,i]}function VX(t,e,n,i,r){I.useEffect(()=>{if(!t||!r)return;const s=NX(3,62),a=t.content;if(!(!a||!tb(a))){if(n!==void 0||i!==void 0){s||console.warn(`AdvancedMarker: The anchorLeft and anchorTop props are only supported in Google Maps API version 3.62 and above. The current version is ${google.maps.version}.`),t.anchorLeft=n,t.anchorTop=i,e!==void 0&&console.warn("AdvancedMarker: the anchorPoint prop is ignored when anchorLeft and/or anchorTop are set.");return}if(e!==void 0){const[o,l]=e??LX.BOTTOM,c=`calc(-1 * ${o})`,u=`calc(-1 * ${l})`;s?(t.anchorLeft=c,t.anchorTop=u,a.style.transform=""):(a.style.transform=`translate(50%, 100%) translate(${c}, ${u})`,t.dataset.origin="rgm",kX.addAdvancedMarkerPointerEventsOverwrite())}}},[t,e,n,i,r])}function $X(t){const[e,n]=I.useState(null),i=wM(),{onClick:r,onDrag:s,onDragStart:a,onDragEnd:o,onMouseOver:l,onMouseOut:c}=t,u=gl(t,["onClick","onDrag","onDragStart","onDragEnd","onMouseOver","onMouseOut"]),{position:f,draggable:d}=u;return I.useEffect(()=>{if(!i){i===void 0&&console.error("<Marker> has to be inside a Map component.");return}const p=new google.maps.Marker(u);return p.setMap(i),n(p),()=>{p.setMap(null),n(null)}},[i]),I.useEffect(()=>{if(!e)return;const p=e,m=google.maps.event;return r&&m.addListener(p,"click",r),s&&m.addListener(p,"drag",s),a&&m.addListener(p,"dragstart",a),o&&m.addListener(p,"dragend",o),l&&m.addListener(p,"mouseover",l),c&&m.addListener(p,"mouseout",c),e.setDraggable(!!d),()=>{m.clearInstanceListeners(p)}},[e,d,r,s,a,o,l,c]),I.useEffect(()=>{e&&u&&e.setOptions(u)},[e,u]),I.useEffect(()=>{d||!f||!e||e.setPosition(f)},[d,f,e]),e}const jX=I.forwardRef((t,e)=>{const n=$X(t);return I.useImperativeHandle(e,()=>n,[n]),Ne.createElement(Ne.Fragment,null)});jX.displayName="Marker";function Yo(t,e){const{className:n,elementType:i,ownerState:r,externalForwardedProps:s,internalForwardedProps:a,shouldForwardComponentProp:o=!1,...l}=e,{component:c,slots:u={[t]:void 0},slotProps:f={[t]:void 0},...d}=s,p=u[t]||i,m=YE(f[t],r),{props:{component:S,...v},internalRef:y}=WE({className:n,...l,externalForwardedProps:t==="root"?d:void 0,externalSlotProps:m}),_=Ls(y,m==null?void 0:m.ref,e.ref),T=t==="root"?S||c:S,b=HE(p,{...t==="root"&&!c&&!u[t]&&a,...t!=="root"&&!u[t]&&a,...v,...T&&!o&&{as:T},...T&&o&&{component:T},ref:_},r);return[p,b]}function HX(t){return Ct("MuiBackdrop",t)}St("MuiBackdrop",["root","invisible"]);const WX=t=>{const{classes:e,invisible:n}=t;return wt({root:["root",n&&"invisible"]},HX,e)},YX=ye("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.invisible&&e.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),XX=I.forwardRef(function(e,n){const i=Pn({props:e,name:"MuiBackdrop"}),{children:r,className:s,component:a="div",invisible:o=!1,open:l,components:c={},componentsProps:u={},slotProps:f={},slots:d={},TransitionComponent:p,transitionDuration:m,...S}=i,v={...i,component:a,invisible:o},y=WX(v),_={transition:p,root:c.Root,...d},T={...u,...f},b={component:a,slots:_,slotProps:T},[M,C]=Yo("root",{elementType:YX,externalForwardedProps:b,className:Oe(y.root,s),ownerState:v}),[D,F]=Yo("transition",{elementType:N0,externalForwardedProps:b,ownerState:v});return $.jsx(D,{in:l,timeout:m,...S,...F,children:$.jsx(M,{"aria-hidden":!0,...C,classes:y,ref:n,children:r})})});function qX({isLoading:t,message:e}){return $.jsxs(XX,{open:t,sx:{color:"#fff",zIndex:n=>n.zIndex.modal+1,flexDirection:"column"},children:[$.jsx(D0,{size:70}),$.jsx(xi,{sx:{mt:2},children:e})]})}const xa=I.createContext({});function KX(t){return Ct("MuiList",t)}St("MuiList",["root","padding","dense","subheader"]);const ZX=t=>{const{classes:e,disablePadding:n,dense:i,subheader:r}=t;return wt({root:["root",!n&&"padding",i&&"dense",r&&"subheader"]},KX,e)},GX=ye("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disablePadding&&e.padding,n.dense&&e.dense,n.subheader&&e.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>t.subheader,style:{paddingTop:0}}]}),QX=I.forwardRef(function(e,n){const i=Pn({props:e,name:"MuiList"}),{children:r,className:s,component:a="ul",dense:o=!1,disablePadding:l=!1,subheader:c,...u}=i,f=I.useMemo(()=>({dense:o}),[o]),d={...i,component:a,dense:o,disablePadding:l},p=ZX(d);return $.jsx(xa.Provider,{value:f,children:$.jsxs(GX,{as:a,className:Oe(p.root,s),ref:n,ownerState:d,...u,children:[c,r]})})});function JX(t){return Ct("MuiListItem",t)}St("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);const eq=St("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function tq(t){return Ct("MuiListItemSecondaryAction",t)}St("MuiListItemSecondaryAction",["root","disableGutters"]);const nq=t=>{const{disableGutters:e,classes:n}=t;return wt({root:["root",e&&"disableGutters"]},tq,n)},iq=ye("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.disableGutters&&e.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:t})=>t.disableGutters,style:{right:0}}]}),AM=I.forwardRef(function(e,n){const i=Pn({props:e,name:"MuiListItemSecondaryAction"}),{className:r,...s}=i,a=I.useContext(xa),o={...i,disableGutters:a.disableGutters},l=nq(o);return $.jsx(iq,{className:Oe(l.root,r),ownerState:o,ref:n,...s})});AM.muiName="ListItemSecondaryAction";const rq=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.alignItems==="flex-start"&&e.alignItemsFlexStart,n.divider&&e.divider,!n.disableGutters&&e.gutters,!n.disablePadding&&e.padding,n.hasSecondaryAction&&e.secondaryAction]},sq=t=>{const{alignItems:e,classes:n,dense:i,disableGutters:r,disablePadding:s,divider:a,hasSecondaryAction:o}=t;return wt({root:["root",i&&"dense",!r&&"gutters",!s&&"padding",a&&"divider",e==="flex-start"&&"alignItemsFlexStart",o&&"secondaryAction"],container:["container"],secondaryAction:["secondaryAction"]},JX,n)},aq=ye("div",{name:"MuiListItem",slot:"Root",overridesResolver:rq})(Ii(({theme:t})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>!e.disablePadding&&e.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:e})=>!e.disablePadding&&!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>!e.disablePadding&&!!e.secondaryAction,style:{paddingRight:48}},{props:({ownerState:e})=>!!e.secondaryAction,style:{[`& > .${eq.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:e})=>e.button,style:{transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:e})=>e.hasSecondaryAction,style:{paddingRight:48}}]}))),oq=ye("li",{name:"MuiListItem",slot:"Container"})({position:"relative"}),lq=I.forwardRef(function(e,n){const i=Pn({props:e,name:"MuiListItem"}),{alignItems:r="center",children:s,className:a,component:o,components:l={},componentsProps:c={},ContainerComponent:u="li",ContainerProps:{className:f,...d}={},dense:p=!1,disableGutters:m=!1,disablePadding:S=!1,divider:v=!1,secondaryAction:y,slotProps:_={},slots:T={},...b}=i,M=I.useContext(xa),C=I.useMemo(()=>({dense:p||M.dense||!1,alignItems:r,disableGutters:m}),[r,M.dense,p,m]),D=I.useRef(null),F=I.Children.toArray(s),L=F.length&&EE(F[F.length-1],["ListItemSecondaryAction"]),U={...i,alignItems:r,dense:C.dense,disableGutters:m,disablePadding:S,divider:v,hasSecondaryAction:L},N=sq(U),A=Ls(D,n),Y={slots:T,slotProps:_},[k,j]=Yo("secondaryAction",{elementType:AM,externalForwardedProps:Y,ownerState:U,className:N.secondaryAction}),P=T.root||l.Root||aq,z=_.root||c.root||{},G={className:Oe(N.root,z.className,a),...b};let Q=o||"li";return L?(Q=!G.component&&!o?"div":Q,u==="li"&&(Q==="li"?Q="div":G.component==="li"&&(G.component="div")),$.jsx(xa.Provider,{value:C,children:$.jsxs(oq,{as:u,className:Oe(N.container,f),ref:A,ownerState:U,...d,children:[$.jsx(P,{...z,...!c_(P)&&{as:Q,ownerState:{...U,...z.ownerState}},...G,children:F}),F.pop()]})})):$.jsx(xa.Provider,{value:C,children:$.jsxs(P,{...z,as:Q,ref:A,...!c_(P)&&{ownerState:{...U,...z.ownerState}},...G,children:[F,y&&$.jsx(k,{...j,children:y})]})})});function cq(t){return Ct("MuiListItemIcon",t)}St("MuiListItemIcon",["root","alignItemsFlexStart"]);const uq=t=>{const{alignItems:e,classes:n}=t;return wt({root:["root",e==="flex-start"&&"alignItemsFlexStart"]},cq,n)},fq=ye("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.alignItems==="flex-start"&&e.alignItemsFlexStart]}})(Ii(({theme:t})=>({minWidth:56,color:(t.vars||t).palette.action.active,flexShrink:0,display:"inline-flex",variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}))),dq=I.forwardRef(function(e,n){const i=Pn({props:e,name:"MuiListItemIcon"}),{className:r,...s}=i,a=I.useContext(xa),o={...i,alignItems:a.alignItems},l=uq(o);return $.jsx(fq,{className:Oe(l.root,r),ownerState:o,ref:n,...s})});function hq(t){return Ct("MuiDivider",t)}St("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);const pq=t=>{const{absolute:e,children:n,classes:i,flexItem:r,light:s,orientation:a,textAlign:o,variant:l}=t;return wt({root:["root",e&&"absolute",l,s&&"light",a==="vertical"&&"vertical",r&&"flexItem",n&&"withChildren",n&&a==="vertical"&&"withChildrenVertical",o==="right"&&a!=="vertical"&&"textAlignRight",o==="left"&&a!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",a==="vertical"&&"wrapperVertical"]},hq,i)},gq=ye("div",{name:"MuiDivider",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.absolute&&e.absolute,e[n.variant],n.light&&e.light,n.orientation==="vertical"&&e.vertical,n.flexItem&&e.flexItem,n.children&&e.withChildren,n.children&&n.orientation==="vertical"&&e.withChildrenVertical,n.textAlign==="right"&&n.orientation!=="vertical"&&e.textAlignRight,n.textAlign==="left"&&n.orientation!=="vertical"&&e.textAlignLeft]}})(Ii(({theme:t})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:t.alpha((t.vars||t).palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:t.spacing(2),marginRight:t.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:t.spacing(1),marginBottom:t.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:e})=>!!e.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:e})=>e.children&&e.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(t.vars||t).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:e})=>e.orientation==="vertical"&&e.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(t.vars||t).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:e})=>e.textAlign==="right"&&e.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:e})=>e.textAlign==="left"&&e.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),mq=ye("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.wrapper,n.orientation==="vertical"&&e.wrapperVertical]}})(Ii(({theme:t})=>({display:"inline-block",paddingLeft:`calc(${t.spacing(1)} * 1.2)`,paddingRight:`calc(${t.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${t.spacing(1)} * 1.2)`,paddingBottom:`calc(${t.spacing(1)} * 1.2)`}}]}))),Ch=I.forwardRef(function(e,n){const i=Pn({props:e,name:"MuiDivider"}),{absolute:r=!1,children:s,className:a,orientation:o="horizontal",component:l=s||o==="vertical"?"div":"hr",flexItem:c=!1,light:u=!1,role:f=l!=="hr"?"separator":void 0,textAlign:d="center",variant:p="fullWidth",...m}=i,S={...i,absolute:r,component:l,flexItem:c,light:u,orientation:o,role:f,textAlign:d,variant:p},v=pq(S);return $.jsx(gq,{as:l,className:Oe(v.root,a),role:f,ref:n,ownerState:S,"aria-orientation":f==="separator"&&(l!=="hr"||o==="vertical")?o:void 0,...m,children:s?$.jsx(mq,{className:v.wrapper,ownerState:S,children:s}):null})});Ch&&(Ch.muiSkipListHighlight=!0);const Xm={};async function yq(t){if(!t)return null;if(Xm[t])return Xm[t];const{Place:e}=await google.maps.importLibrary("places"),n=new e({id:t});await n.fetchFields({fields:["displayName","formattedAddress"]});const i={id:n.id,displayName:n.displayName,formattedAddress:n.formattedAddress};return Xm[t]=i,i}const _q=Pt($.jsx("path",{d:"M12 2c-4.2 0-8 3.22-8 8.2 0 3.18 2.45 6.92 7.34 11.23.38.33.95.33 1.33 0C17.55 17.12 20 13.38 20 10.2 20 5.22 16.2 2 12 2m0 10c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"})),bq=Pt($.jsx("path",{d:"M13.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2M9.8 8.9 7.24 21.81c-.13.61.35 1.19.98 1.19h.08c.47 0 .87-.32.98-.78L10.9 15l2.1 2v5c0 .55.45 1 1 1s1-.45 1-1v-5.64c0-.55-.22-1.07-.62-1.45L12.9 13.5l.6-3c1.07 1.24 2.62 2.13 4.36 2.41.6.09 1.14-.39 1.14-1 0-.49-.36-.9-.85-.98-1.52-.25-2.78-1.15-3.45-2.33l-1-1.6c-.56-.89-1.68-1.25-2.65-.84L7.22 7.78C6.48 8.1 6 8.82 6 9.63V12c0 .55.45 1 1 1s1-.45 1-1V9.6z"})),vq=Pt($.jsx("path",{d:"M13.49 5.48c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m-3.17 12 .57-2.5 2.1 2v5c0 .55.45 1 1 1s1-.45 1-1v-5.64c0-.55-.22-1.07-.62-1.45l-1.48-1.41.6-3c1.07 1.24 2.62 2.13 4.36 2.41.6.09 1.14-.39 1.14-1 0-.49-.36-.9-.85-.98-1.52-.25-2.78-1.15-3.45-2.33l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1L7.21 7.76c-.74.32-1.22 1.04-1.22 1.85v2.37c0 .55.45 1 1 1s1-.45 1-1v-2.4l1.8-.7-1.6 8.1-3.92-.8c-.54-.11-1.07.24-1.18.78V17c-.11.54.24 1.07.78 1.18l4.11.82c1.06.21 2.1-.46 2.34-1.52"})),Tq=Pt($.jsx("path",{d:"M12 2c-4 0-8 .5-8 4v9.5C4 17.43 5.57 19 7.5 19l-1.15 1.15c-.31.31-.09.85.36.85H7.8c.13 0 .26-.05.35-.15L10 19h4l1.85 1.85c.09.09.22.15.35.15h1.09c.45 0 .67-.54.35-.85L16.5 19c1.93 0 3.5-1.57 3.5-3.5V6c0-3.5-4-4-8-4M7.5 17c-.83 0-1.5-.67-1.5-1.5S6.67 14 7.5 14s1.5.67 1.5 1.5S8.33 17 7.5 17m3.5-7H6V6h5zm5.5 7c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m1.5-7h-5V6h5z"})),xq=Pt($.jsx("path",{d:"M12 2c-4 0-8 .5-8 4v9.5C4 17.43 5.57 19 7.5 19l-1.21.81c-.18.12-.29.32-.29.54 0 .36.29.65.65.65h10.7c.36 0 .65-.29.65-.65 0-.22-.11-.42-.29-.54L16.5 19c1.93 0 3.5-1.57 3.5-3.5V6c0-3.5-3.58-4-8-4M8.5 16c-.83 0-1.5-.67-1.5-1.5S7.67 13 8.5 13s1.5.67 1.5 1.5S9.33 16 8.5 16m2.5-6H6V7h5zm4.5 6c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m2.5-6h-5V7h5z"})),Sq=Pt($.jsx("path",{d:"M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v7.5c0 .83.67 1.5 1.5 1.5S6 20.33 6 19.5V19h12v.5c0 .82.67 1.5 1.5 1.5.82 0 1.5-.67 1.5-1.5V12zM7.5 16c-.83 0-1.5-.67-1.5-1.5S6.67 13 7.5 13s1.5.67 1.5 1.5S8.33 16 7.5 16m9 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5M5.81 10l1.04-3h10.29l1.04 3z"})),wq=Pt($.jsx("path",{d:"M18.5 4.5c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2m-2.72 16.4.76.27c.62.21 1.27.33 1.96.33.68 0 1.34-.12 1.95-.33.27-.09.57-.02.78.18.39.4.23 1.06-.3 1.24-.76.27-1.58.41-2.43.41-.86 0-1.68-.14-2.45-.41L2.7 17.72c-.39-.14-.59-.57-.45-.95.14-.39.57-.6.96-.45l6.19 2.25 1.72-4.44-3.57-3.73c-.9-.94-.68-2.47.45-3.12l3.48-2.01c1.1-.64 2.52-.1 2.91 1.11l.33 1.08c.44 1.42 1.48 2.57 2.83 3.14l.29-.89c.13-.39.55-.61.94-.48.4.13.61.55.48.95l-.6 1.85c-.17.52-.72.82-1.24.65-2.02-.63-3.64-2.15-4.42-4.1l-2.53 1.45 2.23 2.55c.49.56.63 1.34.36 2.04l-1.78 4.63 3.09 1.12 2.1-6.44c.46.18.94.31 1.44.41z"})),Aq=Pt($.jsx("path",{d:"M21.48 13.7 13.5 9V3.5c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5V9l-7.98 4.7c-.32.18-.52.53-.52.9 0 .7.67 1.2 1.34 1.01l7.16-2.1V19l-2.26 1.35c-.15.09-.24.26-.24.43v.58c0 .33.31.57.62.49l2.92-.73L12 21l.38.09.42.11 1.9.48.67.17c.32.08.62-.16.62-.49v-.58c0-.18-.09-.34-.24-.43L13.5 19v-5.5l7.16 2.1c.67.2 1.34-.3 1.34-1 0-.37-.2-.72-.52-.9"})),Eq=Pt($.jsx("path",{d:"M20 21c-1.19 0-2.38-.35-3.47-.98-.33-.19-.73-.19-1.07 0-2.17 1.26-4.76 1.26-6.93 0-.33-.19-.73-.19-1.07 0-1.08.63-2.27.98-3.46.98H3c-.55 0-1 .45-1 1s.45 1 1 1h1c1.38 0 2.74-.35 4-.99 2.52 1.29 5.48 1.29 8 0 1.26.65 2.62.99 4 .99h1c.55 0 1-.45 1-1s-.45-1-1-1zM3.95 19H4c1.27 0 2.42-.55 3.33-1.33.39-.34.95-.34 1.34 0C9.58 18.45 10.73 19 12 19s2.42-.55 3.33-1.33c.39-.34.95-.34 1.34 0 .91.78 2.06 1.33 3.33 1.33h.05l1.9-6.68c.11-.37.04-1.06-.66-1.28L20 10.62V6c0-1.1-.9-2-2-2h-3V2c0-.55-.45-1-1-1h-4c-.55 0-1 .45-1 1v2H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.63.19-.81.84-.66 1.28zM6 6h12v3.97L12.62 8.2c-.41-.13-.84-.13-1.25 0L6 9.97z"})),Cq=Pt($.jsx("path",{d:"M12 2c-4 0-8 .5-8 4v9.5c0 .95.38 1.81 1 2.44v1.56c0 .83.67 1.5 1.5 1.5S8 20.33 8 19.5V19h8v.5c0 .82.67 1.5 1.5 1.5.82 0 1.5-.67 1.5-1.5v-1.56c.62-.63 1-1.49 1-2.44V6c0-3.5-3.58-4-8-4M8.5 16c-.83 0-1.5-.67-1.5-1.5S7.67 13 8.5 13s1.5.67 1.5 1.5S9.33 16 8.5 16m7 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m2.5-6H6V7h12z"})),Rq=Pt($.jsx("path",{d:"m13 5 .75-1.5H17V2H7v1.5h4.75L11 5c-3.13.09-6 .73-6 3.5V17c0 1.5 1.11 2.73 2.55 2.95l-1.19 1.19c-.32.32-.1.86.35.86H7.8c.13 0 .26-.05.35-.15L10 20h4l1.85 1.85c.09.09.22.15.35.15h1.09c.45 0 .67-.54.35-.85l-1.19-1.19C17.89 19.73 19 18.5 19 17V8.5c0-2.77-2.87-3.41-6-3.5m-1 13.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m5-4.5H7V9h10z"})),Mq=Pt($.jsx("path",{d:"M15.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2M5 12c-2.8 0-5 2.2-5 5s2.2 5 5 5 5-2.2 5-5-2.2-5-5-5m0 8.5c-1.9 0-3.5-1.6-3.5-3.5s1.6-3.5 3.5-3.5 3.5 1.6 3.5 3.5-1.6 3.5-3.5 3.5m5.8-10 2.4-2.4.8.8c1.06 1.06 2.38 1.78 3.96 2.02.6.09 1.14-.39 1.14-1 0-.49-.37-.91-.85-.99-1.11-.18-2.02-.71-2.75-1.43l-1.9-1.9c-.5-.4-1-.6-1.6-.6s-1.1.2-1.4.6L7.8 8.4c-.4.4-.6.9-.6 1.4 0 .6.2 1.1.6 1.4L11 14v4c0 .55.45 1 1 1s1-.45 1-1v-4.4c0-.52-.2-1.01-.55-1.38zM19 12c-2.8 0-5 2.2-5 5s2.2 5 5 5 5-2.2 5-5-2.2-5-5-5m0 8.5c-1.9 0-3.5-1.6-3.5-3.5s1.6-3.5 3.5-3.5 3.5 1.6 3.5 3.5-1.6 3.5-3.5 3.5"})),Oq=Pt($.jsx("path",{d:"M20 11c-.18 0-.36.03-.53.05L17.41 9H19c.55 0 1-.45 1-1v-.38c0-.74-.78-1.23-1.45-.89l-2.28 1.14L13.7 5.3c-.18-.19-.44-.3-.7-.3h-3c-.55 0-1 .45-1 1s.45 1 1 1h2.17c.27 0 .52.11.71.29L14.59 9h-3.35c-.16 0-.31.04-.45.11l-3.14 1.57c-.38.19-.85.12-1.15-.19l-1.2-1.2C5.11 9.11 4.85 9 4.59 9H1c-.55 0-1 .45-1 1s.45 1 1 1h3C1.48 11-.49 13.32.11 15.94c.33 1.45 1.5 2.62 2.95 2.95C5.68 19.49 8 17.52 8 15l1.41 1.41c.38.38.89.59 1.42.59h1.01c.72 0 1.38-.38 1.74-1.01l2.91-5.09 1.01 1.01c-1.13.91-1.76 2.41-1.38 4.05.34 1.44 1.51 2.61 2.95 2.94 2.61.59 4.93-1.39 4.93-3.9 0-2.21-1.79-4-4-4M4 17c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m16 0c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"})),Iq=Pt($.jsx("path",{d:"M18.92 6.01C18.72 5.42 18.16 5 17.5 5H15V4c0-.55-.45-1-1-1h-4c-.55 0-1 .45-1 1v1H6.5c-.66 0-1.21.42-1.42 1.01l-1.97 5.67c-.07.21-.11.43-.11.66v7.16c0 .83.67 1.5 1.5 1.5S6 20.33 6 19.5V19h12v.5c0 .82.67 1.5 1.5 1.5.82 0 1.5-.67 1.5-1.5v-7.16c0-.22-.04-.45-.11-.66zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16m11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5M5 11l1.5-4.5h11L19 11z"})),Pq=Pt($.jsx("path",{d:"M7.92 7.54c-.8-.34-1.14-1.33-.66-2.05C8.23 4.05 9.85 3 11.99 3c2.35 0 3.96 1.07 4.78 2.41.7 1.15 1.11 3.3.03 4.9-1.2 1.77-2.35 2.31-2.97 3.45-.15.27-.24.49-.3.94-.09.73-.69 1.3-1.43 1.3-.87 0-1.58-.75-1.48-1.62.06-.51.18-1.04.46-1.54.77-1.39 2.25-2.21 3.11-3.44.91-1.29.4-3.7-2.18-3.7-1.17 0-1.93.61-2.4 1.34-.35.57-1.08.75-1.69.5M14 20c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2"})),Rh={visit:{text:"",icon:$.jsx(_q,{})},CYCLING:{text:"",icon:$.jsx(Mq,{})},FLYING:{text:"",icon:$.jsx(Aq,{})},IN_BUS:{text:"",icon:$.jsx(Cq,{})},IN_FERRY:{text:"",icon:$.jsx(Eq,{})},IN_PASSENGER_VEHICLE:{text:"",icon:$.jsx(Iq,{})},IN_SUBWAY:{text:"",icon:$.jsx(xq,{})},IN_TRAIN:{text:"",icon:$.jsx(Tq,{})},IN_TRAM:{text:"",icon:$.jsx(Rq,{})},IN_VEHICLE:{text:"",icon:$.jsx(Sq,{})},MOTORCYCLING:{text:"",icon:$.jsx(Oq,{})},RUNNING:{text:"",icon:$.jsx(vq,{})},SKIING:{text:"",icon:$.jsx(wq,{})},UNKNOWN_ACTIVITY_TYPE:{text:"",icon:$.jsx(Pq,{})},WALKING:{text:"",icon:$.jsx(bq,{})}};function Dq(t){var e;return((e=Rh[t])==null?void 0:e.text)??Rh.UNKNOWN_ACTIVITY_TYPE.text}function kq(t){var e;return((e=Rh[t])==null?void 0:e.icon)??Rh.UNKNOWN_ACTIVITY_TYPE.icon}function EM({type:t}){const e=kq(t),n=t==="visit";return $.jsx(ms,{sx:{bgcolor:n?"primary.main":"transparent",border:n?"none":"1px solid",borderColor:n?"transparent":"primary.main",color:n?"white":"primary.main",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:e})}function Nq(t){return Ct("MuiListItemText",t)}const Vf=St("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),Bq=t=>{const{classes:e,inset:n,primary:i,secondary:r,dense:s}=t;return wt({root:["root",n&&"inset",s&&"dense",i&&r&&"multiline"],primary:["primary"],secondary:["secondary"]},Nq,e)},Lq=ye("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${Vf.primary}`]:e.primary},{[`& .${Vf.secondary}`]:e.secondary},e.root,n.inset&&e.inset,n.primary&&n.secondary&&e.multiline,n.dense&&e.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${g3.root}:where(& .${Vf.primary})`]:{display:"block"},[`.${g3.root}:where(& .${Vf.secondary})`]:{display:"block"},variants:[{props:({ownerState:t})=>t.primary&&t.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:t})=>t.inset,style:{paddingLeft:56}}]}),Ex=I.forwardRef(function(e,n){const i=Pn({props:e,name:"MuiListItemText"}),{children:r,className:s,disableTypography:a=!1,inset:o=!1,primary:l,primaryTypographyProps:c,secondary:u,secondaryTypographyProps:f,slots:d={},slotProps:p={},...m}=i,{dense:S}=I.useContext(xa);let v=l??r,y=u;const _={...i,disableTypography:a,inset:o,primary:!!v,secondary:!!y,dense:S},T=Bq(_),b={slots:d,slotProps:{primary:c,secondary:f,...p}},[M,C]=Yo("root",{className:Oe(T.root,s),elementType:Lq,externalForwardedProps:{...b,...m},ownerState:_,ref:n}),[D,F]=Yo("primary",{className:T.primary,elementType:xi,externalForwardedProps:b,ownerState:_}),[L,U]=Yo("secondary",{className:T.secondary,elementType:xi,externalForwardedProps:b,ownerState:_});return v!=null&&v.type!==xi&&!a&&(v=$.jsx(D,{variant:S?"body2":"body1",component:F!=null&&F.variant?void 0:"span",...F,children:v})),y!=null&&y.type!==xi&&!a&&(y=$.jsx(L,{variant:"body2",color:"textSecondary",...U,children:y})),$.jsxs(M,{...C,children:[v,y]})});function Cx(t){return Array.isArray(t)?Fq(t):Uq(t)}function Uq(t){if(t.type==="visit")return{longitude:t.position[0],latitude:t.position[1],zoom:16,transitionDuration:1e3};const e=Math.floor(t.path.length/2);let n=t.path.length%2===1?t.path[e][0]:(t.path[e-1][0]+t.path[e][0])/2,i=t.path.length%2===1?t.path[e][1]:(t.path[e-1][1]+t.path[e][1])/2;const r=CM(t.path);return{longitude:n,latitude:i,zoom:r.zoom,transitionDuration:r.transitionDuration}}function Fq(t){const e=t.reduce((n,i)=>{if(i.type==="visit")n.push(i.position);else for(const r of i.path)n.push(r);return n},[]);return CM(e)}function CM(t){const e=[],n=[];for(const c of t)e.push(c[0]),n.push(c[1]);const i=Math.min(...e),r=Math.max(...e),s=Math.min(...n),a=Math.max(...n),o=Math.max(r-i,a-a),l=o===0?16:Math.floor(8-Math.log2(o));return{longitude:(i+r)/2,latitude:(s+a)/2,zoom:l,transitionDuration:1e3}}function RM(t){const e=Math.floor(t),n=Math.floor(e/3600),i=Math.floor(e%3600/60),r=e%60;return n>0?`${n} ${i}`:i>0?`${i}`:`${r}`}function MM(t){return t>=1e3?`${Math.floor(t/1e3)} km`:`${Math.floor(t)} m`}function zq({data:t,placeInfo:e}){const n=Ot(t.startTime).format("H:mm"),i=Ot(t.endTime).format("H:mm"),r=`${n}${i}`;if(t.type==="visit"){const o=(e==null?void 0:e.displayName)??t.placeId,l=(e==null?void 0:e.formattedAddress)??"";return $.jsx(Ex,{slotProps:{primary:{noWrap:!0,sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},primary:o,secondary:$.jsxs($.Fragment,{children:[l,$.jsx("br",{}),r]})})}const s=RM((t.endTime-t.startTime)/1e3),a=MM(t.distanceMeters);return $.jsx(Ex,{slotProps:{primary:{noWrap:!0,sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},primary:Dq(t.type),secondary:$.jsxs($.Fragment,{children:[a," ",s,$.jsx("br",{}),r]})})}function Vq({data:t}){const e={};for(const i of t)e[i.type]||(e[i.type]={type:i.type,count:0,distance:0,duration:0}),e[i.type].count++,i.type!=="visit"&&(e[i.type].duration+=i.duration,e[i.type].distance+=i.distanceMeters);const n=Object.values(e).sort((i,r)=>r.distance-i.distance).slice(0,3);return $.jsx(ms,{sx:{display:"flex",justifyContent:"center",gap:.7,maxWidth:"100%",overflow:"hidden"},children:n.map((i,r)=>$.jsxs(ms,{sx:{display:"flex",alignItems:"center",gap:.7,minWidth:0},children:[$.jsx(ms,{sx:{flexShrink:0,width:24,height:24,display:"flex",alignItems:"center",justifyContent:"center"},children:$.jsx(EM,{type:i.type})}),$.jsx(ms,{sx:{minWidth:0,display:"flex",flexDirection:"column"},children:i.type==="visit"?$.jsxs(xi,{variant:"caption",noWrap:!0,children:[" ",i.count," "]}):$.jsxs($.Fragment,{children:[$.jsx(xi,{variant:"caption",noWrap:!0,children:MM(i.distance)}),$.jsx(xi,{variant:"caption",noWrap:!0,children:RM(i.duration/1e3)})]})})]},r))})}function $q({data:t,onClick:e}){const[n,i]=Ne.useState({});return Ne.useEffect(()=>{let r=!0;async function s(){const a=t.filter(o=>o.type==="visit"&&o.placeId);for(const o of a)if(!n[o.placeId]){if(!r)return;try{const l=await yq(o.placeId);if(r)i(c=>({...c,[o.placeId]:l}));else{console.log("placeDetails canceled");return}}catch(l){r||console.error("placeDetails failed:",l)}}}return s(),()=>r=!1},[t]),$.jsxs($.Fragment,{children:[$.jsx(Ch,{sx:{my:1}}),$.jsx(Vq,{data:t}),$.jsx(Ch,{sx:{my:1}}),$.jsx(QX,{sx:{width:"100%"},children:t.map((r,s)=>$.jsxs(lq,{dense:!0,sx:{minWidth:0},onClick:()=>e==null?void 0:e(r),children:[$.jsx(dq,{children:$.jsx(EM,{type:r.type})}),$.jsx(zq,{data:r,placeInfo:n[r.placeId]})]},s))})]})}var OM={exports:{}};const Rx=x4(Y8);(function(t,e){var n=void 0,i=function(r){return n||(n=new Promise(function(s,a){var o=typeof r<"u"?r:{},l=o.onAbort;o.onAbort=function(h){a(new Error(h)),l&&l(h)},o.postRun=o.postRun||[],o.postRun.push(function(){s(o)}),t=void 0;var c;c||(c=typeof o<"u"?o:{});var u=typeof window=="object",f=typeof WorkerGlobalScope<"u",d=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";c.onRuntimeInitialized=function(){function h(K,re){switch(typeof re){case"boolean":y4(K,re?1:0);break;case"number":p4(K,re);break;case"string":g4(K,re,-1,-1);break;case"object":if(re===null)e1(K);else if(re.length!=null){var de=Qu(re,Gu);m4(K,de,re.length,-1),Ju(de)}else ef(K,"Wrong API use : tried to return a value of an unknown type ("+re+").",-1);break;default:e1(K)}}function g(K,re){for(var de=[],be=0;be<K;be+=1){var Ee=fe(re+4*be,"i32"),tt=c4(Ee);if(tt===1||tt===2)Ee=h4(Ee);else if(tt===3)Ee=f4(Ee);else if(tt===4){tt=Ee,Ee=u4(tt),tt=d4(tt);for(var Bi=new Uint8Array(Ee),fi=0;fi<Ee;fi+=1)Bi[fi]=U[tt+fi];Ee=Bi}else Ee=null;de.push(Ee)}return de}function w(K,re){this.Qa=K,this.db=re,this.Oa=1,this.lb=[]}function E(K,re){if(this.db=re,re=yr(K)+1,this.eb=xg(re),this.eb===null)throw Error("Unable to allocate memory for the SQL string");ci(K,N,this.eb,re),this.kb=this.eb,this.Za=this.pb=null}function B(K){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),K!=null){var re=this.filename,de="/",be=re;if(de&&(de=typeof de=="string"?de:ug(de),be=re?Wt(de+"/"+re):de),re=Wa(!0,!0),be=FM(be,re),K){if(typeof K=="string"){de=Array(K.length);for(var Ee=0,tt=K.length;Ee<tt;++Ee)de[Ee]=K.charCodeAt(Ee);K=de}Xu(be,re|146),de=Xa(be,577),Hv(de,K,0,K.length,0),mg(de),Xu(be,re)}}this.handleError(pe(this.filename,Z)),this.db=fe(Z,"i32"),n1(this.db),this.fb={},this.Sa={}}var Z=Qr(4),ee=c.cwrap,pe=ee("sqlite3_open","number",["string","number"]),Be=ee("sqlite3_close_v2","number",["number"]),ke=ee("sqlite3_exec","number",["number","string","number","number","number"]),kt=ee("sqlite3_changes","number",["number"]),Nn=ee("sqlite3_prepare_v2","number",["number","string","number","number","number"]),Kv=ee("sqlite3_sql","string",["number"]),YM=ee("sqlite3_normalized_sql","string",["number"]),Zv=ee("sqlite3_prepare_v2","number",["number","number","number","number","number"]),XM=ee("sqlite3_bind_text","number",["number","number","number","number","number"]),Gv=ee("sqlite3_bind_blob","number",["number","number","number","number","number"]),qM=ee("sqlite3_bind_double","number",["number","number","number"]),KM=ee("sqlite3_bind_int","number",["number","number","number"]),ZM=ee("sqlite3_bind_parameter_index","number",["number","string"]),GM=ee("sqlite3_step","number",["number"]),QM=ee("sqlite3_errmsg","string",["number"]),JM=ee("sqlite3_column_count","number",["number"]),e4=ee("sqlite3_data_count","number",["number"]),t4=ee("sqlite3_column_double","number",["number","number"]),Qv=ee("sqlite3_column_text","string",["number","number"]),n4=ee("sqlite3_column_blob","number",["number","number"]),i4=ee("sqlite3_column_bytes","number",["number","number"]),r4=ee("sqlite3_column_type","number",["number","number"]),s4=ee("sqlite3_column_name","string",["number","number"]),a4=ee("sqlite3_reset","number",["number"]),o4=ee("sqlite3_clear_bindings","number",["number"]),l4=ee("sqlite3_finalize","number",["number"]),Jv=ee("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),c4=ee("sqlite3_value_type","number",["number"]),u4=ee("sqlite3_value_bytes","number",["number"]),f4=ee("sqlite3_value_text","string",["number"]),d4=ee("sqlite3_value_blob","number",["number"]),h4=ee("sqlite3_value_double","number",["number"]),p4=ee("sqlite3_result_double","",["number","number"]),e1=ee("sqlite3_result_null","",["number"]),g4=ee("sqlite3_result_text","",["number","string","number","number"]),m4=ee("sqlite3_result_blob","",["number","number","number","number"]),y4=ee("sqlite3_result_int","",["number","number"]),ef=ee("sqlite3_result_error","",["number","string","number"]),t1=ee("sqlite3_aggregate_context","number",["number","number"]),n1=ee("RegisterExtensionFunctions","number",["number"]),i1=ee("sqlite3_update_hook","number",["number","number","number"]);w.prototype.bind=function(K){if(!this.Qa)throw"Statement closed";return this.reset(),Array.isArray(K)?this.Cb(K):K!=null&&typeof K=="object"?this.Db(K):!0},w.prototype.step=function(){if(!this.Qa)throw"Statement closed";this.Oa=1;var K=GM(this.Qa);switch(K){case 100:return!0;case 101:return!1;default:throw this.db.handleError(K)}},w.prototype.wb=function(K){return K==null&&(K=this.Oa,this.Oa+=1),t4(this.Qa,K)},w.prototype.Gb=function(K){if(K==null&&(K=this.Oa,this.Oa+=1),K=Qv(this.Qa,K),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(K)},w.prototype.Hb=function(K){return K==null&&(K=this.Oa,this.Oa+=1),Qv(this.Qa,K)},w.prototype.getBlob=function(K){K==null&&(K=this.Oa,this.Oa+=1);var re=i4(this.Qa,K);K=n4(this.Qa,K);for(var de=new Uint8Array(re),be=0;be<re;be+=1)de[be]=U[K+be];return de},w.prototype.get=function(K,re){re=re||{},K!=null&&this.bind(K)&&this.step(),K=[];for(var de=e4(this.Qa),be=0;be<de;be+=1)switch(r4(this.Qa,be)){case 1:var Ee=re.useBigInt?this.Gb(be):this.wb(be);K.push(Ee);break;case 2:K.push(this.wb(be));break;case 3:K.push(this.Hb(be));break;case 4:K.push(this.getBlob(be));break;default:K.push(null)}return K},w.prototype.getColumnNames=function(){for(var K=[],re=JM(this.Qa),de=0;de<re;de+=1)K.push(s4(this.Qa,de));return K},w.prototype.getAsObject=function(K,re){K=this.get(K,re),re=this.getColumnNames();for(var de={},be=0;be<re.length;be+=1)de[re[be]]=K[be];return de},w.prototype.getSQL=function(){return Kv(this.Qa)},w.prototype.getNormalizedSQL=function(){return YM(this.Qa)},w.prototype.run=function(K){return K!=null&&this.bind(K),this.step(),this.reset()},w.prototype.sb=function(K,re){re==null&&(re=this.Oa,this.Oa+=1),K=zu(K);var de=Qu(K,Gu);this.lb.push(de),this.db.handleError(XM(this.Qa,re,de,K.length-1,0))},w.prototype.Bb=function(K,re){re==null&&(re=this.Oa,this.Oa+=1);var de=Qu(K,Gu);this.lb.push(de),this.db.handleError(Gv(this.Qa,re,de,K.length,0))},w.prototype.rb=function(K,re){re==null&&(re=this.Oa,this.Oa+=1),this.db.handleError((K===(K|0)?KM:qM)(this.Qa,re,K))},w.prototype.Eb=function(K){K==null&&(K=this.Oa,this.Oa+=1),Gv(this.Qa,K,0,0,0)},w.prototype.tb=function(K,re){switch(re==null&&(re=this.Oa,this.Oa+=1),typeof K){case"string":this.sb(K,re);return;case"number":this.rb(K,re);return;case"bigint":this.sb(K.toString(),re);return;case"boolean":this.rb(K+0,re);return;case"object":if(K===null){this.Eb(re);return}if(K.length!=null){this.Bb(K,re);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+K+")."},w.prototype.Db=function(K){var re=this;return Object.keys(K).forEach(function(de){var be=ZM(re.Qa,de);be!==0&&re.tb(K[de],be)}),!0},w.prototype.Cb=function(K){for(var re=0;re<K.length;re+=1)this.tb(K[re],re+1);return!0},w.prototype.reset=function(){return this.freemem(),o4(this.Qa)===0&&a4(this.Qa)===0},w.prototype.freemem=function(){for(var K;(K=this.lb.pop())!==void 0;)Ju(K)},w.prototype.free=function(){this.freemem();var K=l4(this.Qa)===0;return delete this.db.fb[this.Qa],this.Qa=0,K},E.prototype.next=function(){if(this.eb===null)return{done:!0};if(this.Za!==null&&(this.Za.free(),this.Za=null),!this.db.db)throw this.mb(),Error("Database closed");var K=Nl(),re=Qr(4);he(Z),he(re);try{this.db.handleError(Zv(this.db.db,this.kb,-1,Z,re)),this.kb=fe(re,"i32");var de=fe(Z,"i32");return de===0?(this.mb(),{done:!0}):(this.Za=new w(de,this.db),this.db.fb[de]=this.Za,{value:this.Za,done:!1})}catch(be){throw this.pb=gt(this.kb),this.mb(),be}finally{kl(K)}},E.prototype.mb=function(){Ju(this.eb),this.eb=null},E.prototype.getRemainingSQL=function(){return this.pb!==null?this.pb:gt(this.kb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(E.prototype[Symbol.iterator]=function(){return this}),B.prototype.run=function(K,re){if(!this.db)throw"Database closed";if(re){K=this.prepare(K,re);try{K.step()}finally{K.free()}}else this.handleError(ke(this.db,K,0,0,Z));return this},B.prototype.exec=function(K,re,de){if(!this.db)throw"Database closed";var be=Nl(),Ee=null;try{var tt=vg(K),Bi=Qr(4);for(K=[];fe(tt,"i8")!==0;){he(Z),he(Bi),this.handleError(Zv(this.db,tt,-1,Z,Bi));var fi=fe(Z,"i32");if(tt=fe(Bi,"i32"),fi!==0){var Hn=null;for(Ee=new w(fi,this),re!=null&&Ee.bind(re);Ee.step();)Hn===null&&(Hn={columns:Ee.getColumnNames(),values:[]},K.push(Hn)),Hn.values.push(Ee.get(null,de));Ee.free()}}return K}catch(Li){throw Ee&&Ee.free(),Li}finally{kl(be)}},B.prototype.each=function(K,re,de,be,Ee){typeof re=="function"&&(be=de,de=re,re=void 0),K=this.prepare(K,re);try{for(;K.step();)de(K.getAsObject(null,Ee))}finally{K.free()}if(typeof be=="function")return be()},B.prototype.prepare=function(K,re){if(he(Z),this.handleError(Nn(this.db,K,-1,Z,0)),K=fe(Z,"i32"),K===0)throw"Nothing to prepare";var de=new w(K,this);return re!=null&&de.bind(re),this.fb[K]=de},B.prototype.iterateStatements=function(K){return new E(K,this)},B.prototype.export=function(){Object.values(this.fb).forEach(function(re){re.free()}),Object.values(this.Sa).forEach(Gr),this.Sa={},this.handleError(Be(this.db));var K=zM(this.filename);return this.handleError(pe(this.filename,Z)),this.db=fe(Z,"i32"),n1(this.db),K},B.prototype.close=function(){this.db!==null&&(Object.values(this.fb).forEach(function(K){K.free()}),Object.values(this.Sa).forEach(Gr),this.Sa={},this.Ya&&(Gr(this.Ya),this.Ya=void 0),this.handleError(Be(this.db)),Fv("/"+this.filename),this.db=null)},B.prototype.handleError=function(K){if(K===0)return null;throw K=QM(this.db),Error(K)},B.prototype.getRowsModified=function(){return kt(this.db)},B.prototype.create_function=function(K,re){Object.prototype.hasOwnProperty.call(this.Sa,K)&&(Gr(this.Sa[K]),delete this.Sa[K]);var de=Dl(function(be,Ee,tt){Ee=g(Ee,tt);try{var Bi=re.apply(null,Ee)}catch(fi){ef(be,fi,-1);return}h(be,Bi)},"viii");return this.Sa[K]=de,this.handleError(Jv(this.db,K,re.length,1,0,de,0,0,0)),this},B.prototype.create_aggregate=function(K,re){var de=re.init||function(){return null},be=re.finalize||function(Hn){return Hn},Ee=re.step;if(!Ee)throw"An aggregate function must have a step function in "+K;var tt={};Object.hasOwnProperty.call(this.Sa,K)&&(Gr(this.Sa[K]),delete this.Sa[K]),re=K+"__finalize",Object.hasOwnProperty.call(this.Sa,re)&&(Gr(this.Sa[re]),delete this.Sa[re]);var Bi=Dl(function(Hn,Li,wg){var Ys=t1(Hn,1);Object.hasOwnProperty.call(tt,Ys)||(tt[Ys]=de()),Li=g(Li,wg),Li=[tt[Ys]].concat(Li);try{tt[Ys]=Ee.apply(null,Li)}catch(_4){delete tt[Ys],ef(Hn,_4,-1)}},"viii"),fi=Dl(function(Hn){var Li=t1(Hn,1);try{var wg=be(tt[Li])}catch(Ys){delete tt[Li],ef(Hn,Ys,-1);return}h(Hn,wg),delete tt[Li]},"vi");return this.Sa[K]=Bi,this.Sa[re]=fi,this.handleError(Jv(this.db,K,Ee.length-1,1,0,0,Bi,fi,0)),this},B.prototype.updateHook=function(K){this.Ya&&(i1(this.db,0,0),Gr(this.Ya),this.Ya=void 0),K&&(this.Ya=Dl(function(re,de,be,Ee,tt){switch(de){case 18:re="insert";break;case 23:re="update";break;case 9:re="delete";break;default:throw"unknown operationCode in updateHook callback: "+de}if(be=be?Se(N,be):"",Ee=Ee?Se(N,Ee):"",tt>Number.MAX_SAFE_INTEGER)throw"rowId too big to fit inside a Number";K(re,be,Ee,Number(tt))},"viiiij"),i1(this.db,this.Ya,0))},c.Database=B};var p={...c},m="./this.program",S=(h,g)=>{throw g},v="",y,_;if(d){var T=Rx;v=__dirname+"/",_=h=>(h=G(h)?new URL(h):h,T.readFileSync(h)),y=async h=>(h=G(h)?new URL(h):h,T.readFileSync(h,void 0)),!c.thisProgram&&1<process.argv.length&&(m=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),t.exports=c,S=(h,g)=>{throw process.exitCode=h,g}}else(u||f)&&(f?v=self.location.href:typeof document<"u"&&document.currentScript&&(v=document.currentScript.src),v=v.startsWith("blob:")?"":v.slice(0,v.replace(/[?#].*/,"").lastIndexOf("/")+1),f&&(_=h=>{var g=new XMLHttpRequest;return g.open("GET",h,!1),g.responseType="arraybuffer",g.send(null),new Uint8Array(g.response)}),y=async h=>{if(G(h))return new Promise((w,E)=>{var B=new XMLHttpRequest;B.open("GET",h,!0),B.responseType="arraybuffer",B.onload=()=>{B.status==200||B.status==0&&B.response?w(B.response):E(B.status)},B.onerror=E,B.send(null)});var g=await fetch(h,{credentials:"same-origin"});if(g.ok)return g.arrayBuffer();throw Error(g.status+" : "+g.url)});var b=c.print||console.log.bind(console),M=c.printErr||console.error.bind(console);Object.assign(c,p),p=null,c.thisProgram&&(m=c.thisProgram);var C=c.wasmBinary,D,F=!1,L,U,N,A,Y,k,j,P,z,G=h=>h.startsWith("file://");function Q(){var h=D.buffer;c.HEAP8=U=new Int8Array(h),c.HEAP16=A=new Int16Array(h),c.HEAPU8=N=new Uint8Array(h),c.HEAPU16=new Uint16Array(h),c.HEAP32=Y=new Int32Array(h),c.HEAPU32=k=new Uint32Array(h),c.HEAPF32=j=new Float32Array(h),c.HEAPF64=z=new Float64Array(h),c.HEAP64=P=new BigInt64Array(h),c.HEAPU64=new BigUint64Array(h)}var se=0,ae=null;function ce(h){var g;throw(g=c.onAbort)==null||g.call(c,h),h="Aborted("+h+")",M(h),F=!0,new WebAssembly.RuntimeError(h+". Build with -sASSERTIONS for more info.")}var we;async function Pe(h){if(!C)try{var g=await y(h);return new Uint8Array(g)}catch{}if(h==we&&C)h=new Uint8Array(C);else if(_)h=_(h);else throw"both async and sync fetching of the wasm failed";return h}async function He(h,g){try{var w=await Pe(h);return await WebAssembly.instantiate(w,g)}catch(E){M(`failed to asynchronously prepare wasm: ${E}`),ce(E)}}async function Ht(h){var g=we;if(!C&&typeof WebAssembly.instantiateStreaming=="function"&&!G(g)&&!d)try{var w=fetch(g,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(w,h)}catch(E){M(`wasm streaming compile failed: ${E}`),M("falling back to ArrayBuffer instantiation")}return He(g,h)}class yt{constructor(g){x(this,"name","ExitStatus");this.message=`Program terminated with exit(${g})`,this.status=g}}var Mt=h=>{for(;0<h.length;)h.shift()(c)},je=[],De=[],ue=()=>{var h=c.preRun.shift();De.unshift(h)};function fe(h,g="i8"){switch(g.endsWith("*")&&(g="*"),g){case"i1":return U[h];case"i8":return U[h];case"i16":return A[h>>1];case"i32":return Y[h>>2];case"i64":return P[h>>3];case"float":return j[h>>2];case"double":return z[h>>3];case"*":return k[h>>2];default:ce(`invalid type for getValue: ${g}`)}}var Fe=c.noExitRuntime||!0;function he(h){var g="i32";switch(g.endsWith("*")&&(g="*"),g){case"i1":U[h]=0;break;case"i8":U[h]=0;break;case"i16":A[h>>1]=0;break;case"i32":Y[h>>2]=0;break;case"i64":P[h>>3]=BigInt(0);break;case"float":j[h>>2]=0;break;case"double":z[h>>3]=0;break;case"*":k[h>>2]=0;break;default:ce(`invalid type for setValue: ${g}`)}}var Me=typeof TextDecoder<"u"?new TextDecoder:void 0,Se=(h,g=0,w=NaN)=>{var E=g+w;for(w=g;h[w]&&!(w>=E);)++w;if(16<w-g&&h.buffer&&Me)return Me.decode(h.subarray(g,w));for(E="";g<w;){var B=h[g++];if(B&128){var Z=h[g++]&63;if((B&224)==192)E+=String.fromCharCode((B&31)<<6|Z);else{var ee=h[g++]&63;B=(B&240)==224?(B&15)<<12|Z<<6|ee:(B&7)<<18|Z<<12|ee<<6|h[g++]&63,65536>B?E+=String.fromCharCode(B):(B-=65536,E+=String.fromCharCode(55296|B>>10,56320|B&1023))}}else E+=String.fromCharCode(B)}return E},gt=(h,g)=>h?Se(N,h,g):"",Dt=(h,g)=>{for(var w=0,E=h.length-1;0<=E;E--){var B=h[E];B==="."?h.splice(E,1):B===".."?(h.splice(E,1),w++):w&&(h.splice(E,1),w--)}if(g)for(;w;w--)h.unshift("..");return h},Wt=h=>{var g=h.charAt(0)==="/",w=h.slice(-1)==="/";return(h=Dt(h.split("/").filter(E=>!!E),!g).join("/"))||g||(h="."),h&&w&&(h+="/"),(g?"/":"")+h},Te=h=>{var g=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(h).slice(1);return h=g[0],g=g[1],!h&&!g?".":(g&&(g=g.slice(0,-1)),h+g)},ze=h=>h&&h.match(/([^\/]+|\/)\/*$/)[1],_e=()=>{if(d){var h=Rx;return g=>h.randomFillSync(g)}return g=>crypto.getRandomValues(g)},qi=h=>{(qi=_e())(h)},Rl=(...h)=>{for(var g="",w=!1,E=h.length-1;-1<=E&&!w;E--){if(w=0<=E?h[E]:"/",typeof w!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!w)return"";g=w+"/"+g,w=w.charAt(0)==="/"}return g=Dt(g.split("/").filter(B=>!!B),!w).join("/"),(w?"/":"")+g||"."},Kr=[],yr=h=>{for(var g=0,w=0;w<h.length;++w){var E=h.charCodeAt(w);127>=E?g++:2047>=E?g+=2:55296<=E&&57343>=E?(g+=4,++w):g+=3}return g},ci=(h,g,w,E)=>{if(!(0<E))return 0;var B=w;E=w+E-1;for(var Z=0;Z<h.length;++Z){var ee=h.charCodeAt(Z);if(55296<=ee&&57343>=ee){var pe=h.charCodeAt(++Z);ee=65536+((ee&1023)<<10)|pe&1023}if(127>=ee){if(w>=E)break;g[w++]=ee}else{if(2047>=ee){if(w+1>=E)break;g[w++]=192|ee>>6}else{if(65535>=ee){if(w+2>=E)break;g[w++]=224|ee>>12}else{if(w+3>=E)break;g[w++]=240|ee>>18,g[w++]=128|ee>>12&63}g[w++]=128|ee>>6&63}g[w++]=128|ee&63}}return g[w]=0,w-B},zu=(h,g)=>{var w=Array(yr(h)+1);return h=ci(h,w,0,w.length),g&&(w.length=h),w},Vu=[];function $u(h,g){Vu[h]={input:[],output:[],cb:g},pg(h,cg)}var cg={open(h){var g=Vu[h.node.rdev];if(!g)throw new oe(43);h.tty=g,h.seekable=!1},close(h){h.tty.cb.fsync(h.tty)},fsync(h){h.tty.cb.fsync(h.tty)},read(h,g,w,E){if(!h.tty||!h.tty.cb.xb)throw new oe(60);for(var B=0,Z=0;Z<E;Z++){try{var ee=h.tty.cb.xb(h.tty)}catch{throw new oe(29)}if(ee===void 0&&B===0)throw new oe(6);if(ee==null)break;B++,g[w+Z]=ee}return B&&(h.node.atime=Date.now()),B},write(h,g,w,E){if(!h.tty||!h.tty.cb.qb)throw new oe(60);try{for(var B=0;B<E;B++)h.tty.cb.qb(h.tty,g[w+B])}catch{throw new oe(29)}return E&&(h.node.mtime=h.node.ctime=Date.now()),B}},ju={xb(){e:{if(!Kr.length){var h=null;if(d){var g=Buffer.alloc(256),w=0,E=process.stdin.fd;try{w=T.readSync(E,g,0,256)}catch(B){if(B.toString().includes("EOF"))w=0;else throw B}0<w&&(h=g.slice(0,w).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(h=window.prompt("Input: "),h!==null&&(h+=`
`));if(!h){h=null;break e}Kr=zu(h,!0)}h=Kr.shift()}return h},qb(h,g){g===null||g===10?(b(Se(h.output)),h.output=[]):g!=0&&h.output.push(g)},fsync(h){var g;0<((g=h.output)==null?void 0:g.length)&&(b(Se(h.output)),h.output=[])},Tb(){return{Ob:25856,Qb:5,Nb:191,Pb:35387,Mb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Ub(){return 0},Vb(){return[24,80]}},Ml={qb(h,g){g===null||g===10?(M(Se(h.output)),h.output=[]):g!=0&&h.output.push(g)},fsync(h){var g;0<((g=h.output)==null?void 0:g.length)&&(M(Se(h.output)),h.output=[])}},Ae={Wa:null,Xa(){return Ae.createNode(null,"/",16895,0)},createNode(h,g,w,E){if((w&61440)===24576||(w&61440)===4096)throw new oe(63);return Ae.Wa||(Ae.Wa={dir:{node:{Ta:Ae.La.Ta,Ua:Ae.La.Ua,lookup:Ae.La.lookup,hb:Ae.La.hb,rename:Ae.La.rename,unlink:Ae.La.unlink,rmdir:Ae.La.rmdir,readdir:Ae.La.readdir,symlink:Ae.La.symlink},stream:{Va:Ae.Ma.Va}},file:{node:{Ta:Ae.La.Ta,Ua:Ae.La.Ua},stream:{Va:Ae.Ma.Va,read:Ae.Ma.read,write:Ae.Ma.write,ib:Ae.Ma.ib,jb:Ae.Ma.jb}},link:{node:{Ta:Ae.La.Ta,Ua:Ae.La.Ua,readlink:Ae.La.readlink},stream:{}},ub:{node:{Ta:Ae.La.Ta,Ua:Ae.La.Ua},stream:UM}}),w=Pv(h,g,w,E),kn(w.mode)?(w.La=Ae.Wa.dir.node,w.Ma=Ae.Wa.dir.stream,w.Na={}):(w.mode&61440)===32768?(w.La=Ae.Wa.file.node,w.Ma=Ae.Wa.file.stream,w.Ra=0,w.Na=null):(w.mode&61440)===40960?(w.La=Ae.Wa.link.node,w.Ma=Ae.Wa.link.stream):(w.mode&61440)===8192&&(w.La=Ae.Wa.ub.node,w.Ma=Ae.Wa.ub.stream),w.atime=w.mtime=w.ctime=Date.now(),h&&(h.Na[g]=w,h.atime=h.mtime=h.ctime=w.atime),w},Sb(h){return h.Na?h.Na.subarray?h.Na.subarray(0,h.Ra):new Uint8Array(h.Na):new Uint8Array(0)},La:{Ta(h){var g={};return g.dev=(h.mode&61440)===8192?h.id:1,g.ino=h.id,g.mode=h.mode,g.nlink=1,g.uid=0,g.gid=0,g.rdev=h.rdev,kn(h.mode)?g.size=4096:(h.mode&61440)===32768?g.size=h.Ra:(h.mode&61440)===40960?g.size=h.link.length:g.size=0,g.atime=new Date(h.atime),g.mtime=new Date(h.mtime),g.ctime=new Date(h.ctime),g.blksize=4096,g.blocks=Math.ceil(g.size/g.blksize),g},Ua(h,g){for(var w of["mode","atime","mtime","ctime"])g[w]!=null&&(h[w]=g[w]);g.size!==void 0&&(g=g.size,h.Ra!=g&&(g==0?(h.Na=null,h.Ra=0):(w=h.Na,h.Na=new Uint8Array(g),w&&h.Na.set(w.subarray(0,Math.min(g,h.Ra))),h.Ra=g)))},lookup(){throw Ae.vb},hb(h,g,w,E){return Ae.createNode(h,g,w,E)},rename(h,g,w){try{var E=js(g,w)}catch{}if(E){if(kn(h.mode))for(var B in E.Na)throw new oe(55);dg(E)}delete h.parent.Na[h.name],g.Na[w]=h,h.name=w,g.ctime=g.mtime=h.parent.ctime=h.parent.mtime=Date.now()},unlink(h,g){delete h.Na[g],h.ctime=h.mtime=Date.now()},rmdir(h,g){var w=js(h,g),E;for(E in w.Na)throw new oe(55);delete h.Na[g],h.ctime=h.mtime=Date.now()},readdir(h){return[".","..",...Object.keys(h.Na)]},symlink(h,g,w){return h=Ae.createNode(h,g,41471,0),h.link=w,h},readlink(h){if((h.mode&61440)!==40960)throw new oe(28);return h.link}},Ma:{read(h,g,w,E,B){var Z=h.node.Na;if(B>=h.node.Ra)return 0;if(h=Math.min(h.node.Ra-B,E),8<h&&Z.subarray)g.set(Z.subarray(B,B+h),w);else for(E=0;E<h;E++)g[w+E]=Z[B+E];return h},write(h,g,w,E,B,Z){if(g.buffer===U.buffer&&(Z=!1),!E)return 0;if(h=h.node,h.mtime=h.ctime=Date.now(),g.subarray&&(!h.Na||h.Na.subarray)){if(Z)return h.Na=g.subarray(w,w+E),h.Ra=E;if(h.Ra===0&&B===0)return h.Na=g.slice(w,w+E),h.Ra=E;if(B+E<=h.Ra)return h.Na.set(g.subarray(w,w+E),B),E}Z=B+E;var ee=h.Na?h.Na.length:0;if(ee>=Z||(Z=Math.max(Z,ee*(1048576>ee?2:1.125)>>>0),ee!=0&&(Z=Math.max(Z,256)),ee=h.Na,h.Na=new Uint8Array(Z),0<h.Ra&&h.Na.set(ee.subarray(0,h.Ra),0)),h.Na.subarray&&g.subarray)h.Na.set(g.subarray(w,w+E),B);else for(Z=0;Z<E;Z++)h.Na[B+Z]=g[w+Z];return h.Ra=Math.max(h.Ra,B+E),E},Va(h,g,w){if(w===1?g+=h.position:w===2&&(h.node.mode&61440)===32768&&(g+=h.node.Ra),0>g)throw new oe(28);return g},ib(h,g,w,E,B){if((h.node.mode&61440)!==32768)throw new oe(43);if(h=h.node.Na,B&2||!h||h.buffer!==U.buffer){B=!0,E=65536*Math.ceil(g/65536);var Z=Xv(65536,E);if(Z&&N.fill(0,Z,Z+E),E=Z,!E)throw new oe(48);h&&((0<w||w+g<h.length)&&(h.subarray?h=h.subarray(w,w+g):h=Array.prototype.slice.call(h,w,w+g)),U.set(h,E))}else B=!1,E=h.byteOffset;return{Kb:E,Ab:B}},jb(h,g,w,E){return Ae.Ma.write(h,g,0,E,w,!1),0}}},Wa=(h,g)=>{var w=0;return h&&(w|=365),g&&(w|=146),w},Ol=null,We={},hn=[],$s=1,Tn=null,Mv=!1,Ov=!0,Iv={},oe=class{constructor(h){x(this,"name","ErrnoError");this.Pa=h}},NM=class{constructor(){x(this,"gb",{});x(this,"node",null)}get flags(){return this.gb.flags}set flags(h){this.gb.flags=h}get position(){return this.gb.position}set position(h){this.gb.position=h}},BM=class{constructor(h,g,w,E){x(this,"La",{});x(this,"Ma",{});x(this,"ab",null);h||(h=this),this.parent=h,this.Xa=h.Xa,this.id=$s++,this.name=g,this.mode=w,this.rdev=E,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&365)===365}set read(h){h?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(h){h?this.mode|=146:this.mode&=-147}};function ui(h,g={}){if(!h)throw new oe(44);g.nb??(g.nb=!0),h.charAt(0)==="/"||(h="//"+h);var w=0;e:for(;40>w;w++){h=h.split("/").filter(pe=>!!pe);for(var E=Ol,B="/",Z=0;Z<h.length;Z++){var ee=Z===h.length-1;if(ee&&g.parent)break;if(h[Z]!==".")if(h[Z]==="..")B=Te(B),E=E.parent;else{B=Wt(B+"/"+h[Z]);try{E=js(E,h[Z])}catch(pe){if((pe==null?void 0:pe.Pa)===44&&ee&&g.Jb)return{path:B};throw pe}if(!E.ab||ee&&!g.nb||(E=E.ab.root),(E.mode&61440)===40960&&(!ee||g.$a)){if(!E.La.readlink)throw new oe(52);E=E.La.readlink(E),E.charAt(0)==="/"||(E=Te(B)+"/"+E),h=E+"/"+h.slice(Z+1).join("/");continue e}}}return{path:B,node:E}}throw new oe(32)}function ug(h){for(var g;;){if(h===h.parent)return h=h.Xa.zb,g?h[h.length-1]!=="/"?`${h}/${g}`:h+g:h;g=g?`${h.name}/${g}`:h.name,h=h.parent}}function fg(h,g){for(var w=0,E=0;E<g.length;E++)w=(w<<5)-w+g.charCodeAt(E)|0;return(h+w>>>0)%Tn.length}function dg(h){var g=fg(h.parent.id,h.name);if(Tn[g]===h)Tn[g]=h.bb;else for(g=Tn[g];g;){if(g.bb===h){g.bb=h.bb;break}g=g.bb}}function js(h,g){var w=kn(h.mode)?(w=Ya(h,"x"))?w:h.La.lookup?0:2:54;if(w)throw new oe(w);for(w=Tn[fg(h.id,g)];w;w=w.bb){var E=w.name;if(w.parent.id===h.id&&E===g)return w}return h.La.lookup(h,g)}function Pv(h,g,w,E){return h=new BM(h,g,w,E),g=fg(h.parent.id,h.name),h.bb=Tn[g],Tn[g]=h}function kn(h){return(h&61440)===16384}function Dv(h){var g=["r","w","rw"][h&3];return h&512&&(g+="w"),g}function Ya(h,g){if(Ov)return 0;if(!g.includes("r")||h.mode&292){if(g.includes("w")&&!(h.mode&146)||g.includes("x")&&!(h.mode&73))return 2}else return 2;return 0}function kv(h,g){if(!kn(h.mode))return 54;try{return js(h,g),20}catch{}return Ya(h,"wx")}function Nv(h,g,w){try{var E=js(h,g)}catch(B){return B.Pa}if(h=Ya(h,"wx"))return h;if(w){if(!kn(E.mode))return 54;if(E===E.parent||ug(E)==="/")return 10}else if(kn(E.mode))return 31;return 0}function Hu(h){if(!h)throw new oe(63);return h}function Cn(h){if(h=hn[h],!h)throw new oe(8);return h}function Bv(h,g=-1){if(h=Object.assign(new NM,h),g==-1)e:{for(g=0;4096>=g;g++)if(!hn[g])break e;throw new oe(33)}return h.fd=g,hn[g]=h}function LM(h,g=-1){var w,E;return h=Bv(h,g),(E=(w=h.Ma)==null?void 0:w.Rb)==null||E.call(w,h),h}function hg(h,g,w){var E=h==null?void 0:h.Ma.Ua;h=E?h:g,E??(E=g.La.Ua),Hu(E),E(h,w)}var UM={open(h){var g,w;h.Ma=We[h.node.rdev].Ma,(w=(g=h.Ma).open)==null||w.call(g,h)},Va(){throw new oe(70)}};function pg(h,g){We[h]={Ma:g}}function Lv(h,g){var w=g==="/";if(w&&Ol)throw new oe(10);if(!w&&g){var E=ui(g,{nb:!1});if(g=E.path,E=E.node,E.ab)throw new oe(10);if(!kn(E.mode))throw new oe(54)}g={type:h,Wb:{},zb:g,Ib:[]},h=h.Xa(g),h.Xa=g,g.root=h,w?Ol=h:E&&(E.ab=g,E.Xa&&E.Xa.Ib.push(g))}function Wu(h,g,w){var E=ui(h,{parent:!0}).node;if(h=ze(h),!h)throw new oe(28);if(h==="."||h==="..")throw new oe(20);var B=kv(E,h);if(B)throw new oe(B);if(!E.La.hb)throw new oe(63);return E.La.hb(E,h,g,w)}function FM(h,g=438){return Wu(h,g&4095|32768,0)}function Ki(h,g=511){return Wu(h,g&1023|16384,0)}function Yu(h,g,w){typeof w>"u"&&(w=g,g=438),Wu(h,g|8192,w)}function gg(h,g){if(!Rl(h))throw new oe(44);var w=ui(g,{parent:!0}).node;if(!w)throw new oe(44);g=ze(g);var E=kv(w,g);if(E)throw new oe(E);if(!w.La.symlink)throw new oe(63);w.La.symlink(w,g,h)}function Uv(h){var g=ui(h,{parent:!0}).node;h=ze(h);var w=js(g,h),E=Nv(g,h,!0);if(E)throw new oe(E);if(!g.La.rmdir)throw new oe(63);if(w.ab)throw new oe(10);g.La.rmdir(g,h),dg(w)}function Fv(h){var g=ui(h,{parent:!0}).node;if(!g)throw new oe(44);h=ze(h);var w=js(g,h),E=Nv(g,h,!1);if(E)throw new oe(E);if(!g.La.unlink)throw new oe(63);if(w.ab)throw new oe(10);g.La.unlink(g,h),dg(w)}function Il(h,g){return h=ui(h,{$a:!g}).node,Hu(h.La.Ta)(h)}function zv(h,g,w,E){hg(h,g,{mode:w&4095|g.mode&-4096,ctime:Date.now(),Fb:E})}function Xu(h,g){h=typeof h=="string"?ui(h,{$a:!0}).node:h,zv(null,h,g)}function Vv(h,g,w){if(kn(g.mode))throw new oe(31);if((g.mode&61440)!==32768)throw new oe(28);var E=Ya(g,"w");if(E)throw new oe(E);hg(h,g,{size:w,timestamp:Date.now()})}function Xa(h,g,w=438){if(h==="")throw new oe(44);if(typeof g=="string"){var E={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[g];if(typeof E>"u")throw Error(`Unknown file open mode: ${g}`);g=E}if(w=g&64?w&4095|32768:0,typeof h=="object")E=h;else{var B=h.endsWith("/");h=ui(h,{$a:!(g&131072),Jb:!0}),E=h.node,h=h.path}var Z=!1;if(g&64)if(E){if(g&128)throw new oe(20)}else{if(B)throw new oe(31);E=Wu(h,w|511,0),Z=!0}if(!E)throw new oe(44);if((E.mode&61440)===8192&&(g&=-513),g&65536&&!kn(E.mode))throw new oe(54);if(!Z&&(B=E?(E.mode&61440)===40960?32:kn(E.mode)&&(Dv(g)!=="r"||g&576)?31:Ya(E,Dv(g)):44))throw new oe(B);return g&512&&!Z&&(B=E,B=typeof B=="string"?ui(B,{$a:!0}).node:B,Vv(null,B,0)),g&=-131713,B=Bv({node:E,path:ug(E),flags:g,seekable:!0,position:0,Ma:E.Ma,Lb:[],error:!1}),B.Ma.open&&B.Ma.open(B),Z&&Xu(E,w&511),!c.logReadFiles||g&1||h in Iv||(Iv[h]=1),B}function mg(h){if(h.fd===null)throw new oe(8);h.ob&&(h.ob=null);try{h.Ma.close&&h.Ma.close(h)}catch(g){throw g}finally{hn[h.fd]=null}h.fd=null}function $v(h,g,w){if(h.fd===null)throw new oe(8);if(!h.seekable||!h.Ma.Va)throw new oe(70);if(w!=0&&w!=1&&w!=2)throw new oe(28);h.position=h.Ma.Va(h,g,w),h.Lb=[]}function jv(h,g,w,E,B){if(0>E||0>B)throw new oe(28);if(h.fd===null)throw new oe(8);if((h.flags&2097155)===1)throw new oe(8);if(kn(h.node.mode))throw new oe(31);if(!h.Ma.read)throw new oe(28);var Z=typeof B<"u";if(!Z)B=h.position;else if(!h.seekable)throw new oe(70);return g=h.Ma.read(h,g,w,E,B),Z||(h.position+=g),g}function Hv(h,g,w,E,B){if(0>E||0>B)throw new oe(28);if(h.fd===null)throw new oe(8);if(!(h.flags&2097155))throw new oe(8);if(kn(h.node.mode))throw new oe(31);if(!h.Ma.write)throw new oe(28);h.seekable&&h.flags&1024&&$v(h,0,2);var Z=typeof B<"u";if(!Z)B=h.position;else if(!h.seekable)throw new oe(70);return g=h.Ma.write(h,g,w,E,B,void 0),Z||(h.position+=g),g}function zM(h){var g,w=Xa(h,w||0);h=Il(h).size;var E=new Uint8Array(h);return jv(w,E,0,h,0),g=E,mg(w),g}function Zr(h,g,w){h=Wt("/dev/"+h);var E=Wa(!!g,!!w);Zr.yb??(Zr.yb=64);var B=Zr.yb++<<8|0;pg(B,{open(Z){Z.seekable=!1},close(){var Z;(Z=w==null?void 0:w.buffer)!=null&&Z.length&&w(10)},read(Z,ee,pe,Be){for(var ke=0,kt=0;kt<Be;kt++){try{var Nn=g()}catch{throw new oe(29)}if(Nn===void 0&&ke===0)throw new oe(6);if(Nn==null)break;ke++,ee[pe+kt]=Nn}return ke&&(Z.node.atime=Date.now()),ke},write(Z,ee,pe,Be){for(var ke=0;ke<Be;ke++)try{w(ee[pe+ke])}catch{throw new oe(29)}return Be&&(Z.node.mtime=Z.node.ctime=Date.now()),ke}}),Yu(h,E,B)}var _t={};function Hs(h,g,w){if(g.charAt(0)==="/")return g;if(h=h===-100?"/":Cn(h).path,g.length==0){if(!w)throw new oe(44);return h}return h+"/"+g}function qu(h,g){Y[h>>2]=g.dev,Y[h+4>>2]=g.mode,k[h+8>>2]=g.nlink,Y[h+12>>2]=g.uid,Y[h+16>>2]=g.gid,Y[h+20>>2]=g.rdev,P[h+24>>3]=BigInt(g.size),Y[h+32>>2]=4096,Y[h+36>>2]=g.blocks;var w=g.atime.getTime(),E=g.mtime.getTime(),B=g.ctime.getTime();return P[h+40>>3]=BigInt(Math.floor(w/1e3)),k[h+48>>2]=w%1e3*1e6,P[h+56>>3]=BigInt(Math.floor(E/1e3)),k[h+64>>2]=E%1e3*1e6,P[h+72>>3]=BigInt(Math.floor(B/1e3)),k[h+80>>2]=B%1e3*1e6,P[h+88>>3]=BigInt(g.ino),0}var Ku=void 0,Zu=()=>{var h=Y[+Ku>>2];return Ku+=4,h},yg=0,VM=[0,31,60,91,121,152,182,213,244,274,305,335],$M=[0,31,59,90,120,151,181,212,243,273,304,334],Pl={},Wv=h=>{var g;L=h,Fe||0<yg||((g=c.onExit)==null||g.call(c,h),F=!0),S(h,new yt(h))},jM=h=>{if(!F)try{if(h(),!(Fe||0<yg))try{L=h=L,Wv(h)}catch(g){g instanceof yt||g=="unwind"||S(1,g)}}catch(g){g instanceof yt||g=="unwind"||S(1,g)}},_g={},Yv=()=>{if(!bg){var h={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:m||"./this.program"},g;for(g in _g)_g[g]===void 0?delete h[g]:h[g]=_g[g];var w=[];for(g in h)w.push(`${g}=${h[g]}`);bg=w}return bg},bg,vg=h=>{var g=yr(h)+1,w=Qr(g);return ci(h,N,w,g),w},HM=(h,g,w,E)=>{var B={string:ke=>{var kt=0;return ke!=null&&ke!==0&&(kt=vg(ke)),kt},array:ke=>{var kt=Qr(ke.length);return U.set(ke,kt),kt}};h=c["_"+h];var Z=[],ee=0;if(E)for(var pe=0;pe<E.length;pe++){var Be=B[w[pe]];Be?(ee===0&&(ee=Nl()),Z[pe]=Be(E[pe])):Z[pe]=E[pe]}return w=h(...Z),w=function(ke){return ee!==0&&kl(ee),g==="string"?ke?Se(N,ke):"":g==="boolean"?!!ke:ke}(w)},Gu=0,Qu=(h,g)=>(g=g==1?Qr(h.length):xg(h.length),h.subarray||h.slice||(h=new Uint8Array(h)),N.set(h,g),g),Ws,Tg=[],_r,Gr=h=>{Ws.delete(_r.get(h)),_r.set(h,null),Tg.push(h)},Dl=(h,g)=>{if(!Ws){Ws=new WeakMap;var w=_r.length;if(Ws)for(var E=0;E<0+w;E++){var B=_r.get(E);B&&Ws.set(B,E)}}if(w=Ws.get(h)||0)return w;if(Tg.length)w=Tg.pop();else{try{_r.grow(1)}catch(Be){throw Be instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":Be}w=_r.length-1}try{_r.set(w,h)}catch(Be){if(!(Be instanceof TypeError))throw Be;if(typeof WebAssembly.Function=="function"){var Z=WebAssembly.Function;E={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},B={parameters:[],results:g[0]=="v"?[]:[E[g[0]]]};for(var ee=1;ee<g.length;++ee)B.parameters.push(E[g[ee]]);g=new Z(B,h)}else{E=[1],B=g.slice(0,1),g=g.slice(1),ee={i:127,p:127,j:126,f:125,d:124,e:111},E.push(96);var pe=g.length;128>pe?E.push(pe):E.push(pe%128|128,pe>>7);for(Z of g)E.push(ee[Z]);B=="v"?E.push(0):E.push(1,ee[B]),g=[0,97,115,109,1,0,0,0,1],Z=E.length,128>Z?g.push(Z):g.push(Z%128|128,Z>>7),g.push(...E),g.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),g=new WebAssembly.Module(new Uint8Array(g)),g=new WebAssembly.Instance(g,{e:{f:h}}).exports.f}_r.set(w,g)}return Ws.set(h,w),w};Tn=Array(4096),Lv(Ae,"/"),Ki("/tmp"),Ki("/home"),Ki("/home/web_user"),function(){Ki("/dev"),pg(259,{read:()=>0,write:(E,B,Z,ee)=>ee,Va:()=>0}),Yu("/dev/null",259),$u(1280,ju),$u(1536,Ml),Yu("/dev/tty",1280),Yu("/dev/tty1",1536);var h=new Uint8Array(1024),g=0,w=()=>(g===0&&(qi(h),g=h.byteLength),h[--g]);Zr("random",w),Zr("urandom",w),Ki("/dev/shm"),Ki("/dev/shm/tmp")}(),function(){Ki("/proc");var h=Ki("/proc/self");Ki("/proc/self/fd"),Lv({Xa(){var g=Pv(h,"fd",16895,73);return g.Ma={Va:Ae.Ma.Va},g.La={lookup(w,E){w=+E;var B=Cn(w);return w={parent:null,Xa:{zb:"fake"},La:{readlink:()=>B.path},id:w+1},w.parent=w},readdir(){return Array.from(hn.entries()).filter(([,w])=>w).map(([w])=>w.toString())}},g}},"/proc/self/fd")}(),Ae.vb=new oe(44),Ae.vb.stack="<generic error, no stack>";var WM={a:(h,g,w,E)=>ce(`Assertion failed: ${h?Se(N,h):""}, at: `+[g?g?Se(N,g):"":"unknown filename",w,E?E?Se(N,E):"":"unknown function"]),i:function(h,g){try{return h=h?Se(N,h):"",Xu(h,g),0}catch(w){if(typeof _t>"u"||w.name!=="ErrnoError")throw w;return-w.Pa}},L:function(h,g,w){try{if(g=g?Se(N,g):"",g=Hs(h,g),w&-8)return-28;var E=ui(g,{$a:!0}).node;return E?(h="",w&4&&(h+="r"),w&2&&(h+="w"),w&1&&(h+="x"),h&&Ya(E,h)?-2:0):-44}catch(B){if(typeof _t>"u"||B.name!=="ErrnoError")throw B;return-B.Pa}},j:function(h,g){try{var w=Cn(h);return zv(w,w.node,g,!1),0}catch(E){if(typeof _t>"u"||E.name!=="ErrnoError")throw E;return-E.Pa}},h:function(h){try{var g=Cn(h);return hg(g,g.node,{timestamp:Date.now(),Fb:!1}),0}catch(w){if(typeof _t>"u"||w.name!=="ErrnoError")throw w;return-w.Pa}},b:function(h,g,w){Ku=w;try{var E=Cn(h);switch(g){case 0:var B=Zu();if(0>B)break;for(;hn[B];)B++;return LM(E,B).fd;case 1:case 2:return 0;case 3:return E.flags;case 4:return B=Zu(),E.flags|=B,0;case 12:return B=Zu(),A[B+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(Z){if(typeof _t>"u"||Z.name!=="ErrnoError")throw Z;return-Z.Pa}},g:function(h,g){try{var w=Cn(h),E=w.node,B=w.Ma.Ta;h=B?w:E,B??(B=E.La.Ta),Hu(B);var Z=B(h);return qu(g,Z)}catch(ee){if(typeof _t>"u"||ee.name!=="ErrnoError")throw ee;return-ee.Pa}},H:function(h,g){g=-9007199254740992>g||9007199254740992<g?NaN:Number(g);try{if(isNaN(g))return 61;var w=Cn(h);if(0>g||!(w.flags&2097155))throw new oe(28);return Vv(w,w.node,g),0}catch(E){if(typeof _t>"u"||E.name!=="ErrnoError")throw E;return-E.Pa}},G:function(h,g){try{if(g===0)return-28;var w=yr("/")+1;return g<w?-68:(ci("/",N,h,g),w)}catch(E){if(typeof _t>"u"||E.name!=="ErrnoError")throw E;return-E.Pa}},K:function(h,g){try{return h=h?Se(N,h):"",qu(g,Il(h,!0))}catch(w){if(typeof _t>"u"||w.name!=="ErrnoError")throw w;return-w.Pa}},C:function(h,g,w){try{return g=g?Se(N,g):"",g=Hs(h,g),Ki(g,w),0}catch(E){if(typeof _t>"u"||E.name!=="ErrnoError")throw E;return-E.Pa}},J:function(h,g,w,E){try{g=g?Se(N,g):"";var B=E&256;return g=Hs(h,g,E&4096),qu(w,B?Il(g,!0):Il(g))}catch(Z){if(typeof _t>"u"||Z.name!=="ErrnoError")throw Z;return-Z.Pa}},x:function(h,g,w,E){Ku=E;try{g=g?Se(N,g):"",g=Hs(h,g);var B=E?Zu():0;return Xa(g,w,B).fd}catch(Z){if(typeof _t>"u"||Z.name!=="ErrnoError")throw Z;return-Z.Pa}},v:function(h,g,w,E){try{if(g=g?Se(N,g):"",g=Hs(h,g),0>=E)return-28;var B=ui(g).node;if(!B)throw new oe(44);if(!B.La.readlink)throw new oe(28);var Z=B.La.readlink(B),ee=Math.min(E,yr(Z)),pe=U[w+ee];return ci(Z,N,w,E+1),U[w+ee]=pe,ee}catch(Be){if(typeof _t>"u"||Be.name!=="ErrnoError")throw Be;return-Be.Pa}},u:function(h){try{return h=h?Se(N,h):"",Uv(h),0}catch(g){if(typeof _t>"u"||g.name!=="ErrnoError")throw g;return-g.Pa}},f:function(h,g){try{return h=h?Se(N,h):"",qu(g,Il(h))}catch(w){if(typeof _t>"u"||w.name!=="ErrnoError")throw w;return-w.Pa}},r:function(h,g,w){try{return g=g?Se(N,g):"",g=Hs(h,g),w===0?Fv(g):w===512?Uv(g):ce("Invalid flags passed to unlinkat"),0}catch(E){if(typeof _t>"u"||E.name!=="ErrnoError")throw E;return-E.Pa}},q:function(h,g,w){try{g=g?Se(N,g):"",g=Hs(h,g,!0);var E=Date.now(),B,Z;if(w){var ee=k[w>>2]+4294967296*Y[w+4>>2],pe=Y[w+8>>2];pe==1073741823?B=E:pe==1073741822?B=null:B=1e3*ee+pe/1e6,w+=16,ee=k[w>>2]+4294967296*Y[w+4>>2],pe=Y[w+8>>2],pe==1073741823?Z=E:pe==1073741822?Z=null:Z=1e3*ee+pe/1e6}else Z=B=E;if((Z??B)!==null){h=B;var Be=ui(g,{$a:!0}).node;Hu(Be.La.Ua)(Be,{atime:h,mtime:Z})}return 0}catch(ke){if(typeof _t>"u"||ke.name!=="ErrnoError")throw ke;return-ke.Pa}},m:()=>ce(""),l:()=>{Fe=!1,yg=0},A:function(h,g){h=-9007199254740992>h||9007199254740992<h?NaN:Number(h),h=new Date(1e3*h),Y[g>>2]=h.getSeconds(),Y[g+4>>2]=h.getMinutes(),Y[g+8>>2]=h.getHours(),Y[g+12>>2]=h.getDate(),Y[g+16>>2]=h.getMonth(),Y[g+20>>2]=h.getFullYear()-1900,Y[g+24>>2]=h.getDay();var w=h.getFullYear();Y[g+28>>2]=(w%4!==0||w%100===0&&w%400!==0?$M:VM)[h.getMonth()]+h.getDate()-1|0,Y[g+36>>2]=-(60*h.getTimezoneOffset()),w=new Date(h.getFullYear(),6,1).getTimezoneOffset();var E=new Date(h.getFullYear(),0,1).getTimezoneOffset();Y[g+32>>2]=(w!=E&&h.getTimezoneOffset()==Math.min(E,w))|0},y:function(h,g,w,E,B,Z,ee){B=-9007199254740992>B||9007199254740992<B?NaN:Number(B);try{if(isNaN(B))return 61;var pe=Cn(E);if(g&2&&!(w&2)&&(pe.flags&2097155)!==2)throw new oe(2);if((pe.flags&2097155)===1)throw new oe(2);if(!pe.Ma.ib)throw new oe(43);if(!h)throw new oe(28);var Be=pe.Ma.ib(pe,h,B,g,w),ke=Be.Kb;return Y[Z>>2]=Be.Ab,k[ee>>2]=ke,0}catch(kt){if(typeof _t>"u"||kt.name!=="ErrnoError")throw kt;return-kt.Pa}},z:function(h,g,w,E,B,Z){Z=-9007199254740992>Z||9007199254740992<Z?NaN:Number(Z);try{var ee=Cn(B);if(w&2){if(w=Z,(ee.node.mode&61440)!==32768)throw new oe(43);if(!(E&2)){var pe=N.slice(h,h+g);ee.Ma.jb&&ee.Ma.jb(ee,pe,w,g,E)}}}catch(Be){if(typeof _t>"u"||Be.name!=="ErrnoError")throw Be;return-Be.Pa}},n:(h,g)=>{if(Pl[h]&&(clearTimeout(Pl[h].id),delete Pl[h]),!g)return 0;var w=setTimeout(()=>{delete Pl[h],jM(()=>qv(h,performance.now()))},g);return Pl[h]={id:w,Xb:g},0},B:(h,g,w,E)=>{var B=new Date().getFullYear(),Z=new Date(B,0,1).getTimezoneOffset();B=new Date(B,6,1).getTimezoneOffset(),k[h>>2]=60*Math.max(Z,B),Y[g>>2]=+(Z!=B),g=ee=>{var pe=Math.abs(ee);return`UTC${0<=ee?"-":"+"}${String(Math.floor(pe/60)).padStart(2,"0")}${String(pe%60).padStart(2,"0")}`},h=g(Z),g=g(B),B<Z?(ci(h,N,w,17),ci(g,N,E,17)):(ci(h,N,E,17),ci(g,N,w,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:h=>{var g=N.length;if(h>>>=0,2147483648<h)return!1;for(var w=1;4>=w;w*=2){var E=g*(1+.2/w);E=Math.min(E,h+100663296);e:{E=(Math.min(2147483648,65536*Math.ceil(Math.max(h,E)/65536))-D.buffer.byteLength+65535)/65536|0;try{D.grow(E),Q();var B=1;break e}catch{}B=void 0}if(B)return!0}return!1},E:(h,g)=>{var w=0;return Yv().forEach((E,B)=>{var Z=g+w;for(B=k[h+4*B>>2]=Z,Z=0;Z<E.length;++Z)U[B++]=E.charCodeAt(Z);U[B]=0,w+=E.length+1}),0},F:(h,g)=>{var w=Yv();k[h>>2]=w.length;var E=0;return w.forEach(B=>E+=B.length+1),k[g>>2]=E,0},e:function(h){try{var g=Cn(h);return mg(g),0}catch(w){if(typeof _t>"u"||w.name!=="ErrnoError")throw w;return w.Pa}},p:function(h,g){try{var w=Cn(h);return U[g]=w.tty?2:kn(w.mode)?3:(w.mode&61440)===40960?7:4,A[g+2>>1]=0,P[g+8>>3]=BigInt(0),P[g+16>>3]=BigInt(0),0}catch(E){if(typeof _t>"u"||E.name!=="ErrnoError")throw E;return E.Pa}},w:function(h,g,w,E){try{e:{var B=Cn(h);h=g;for(var Z,ee=g=0;ee<w;ee++){var pe=k[h>>2],Be=k[h+4>>2];h+=8;var ke=jv(B,U,pe,Be,Z);if(0>ke){var kt=-1;break e}if(g+=ke,ke<Be)break;typeof Z<"u"&&(Z+=ke)}kt=g}return k[E>>2]=kt,0}catch(Nn){if(typeof _t>"u"||Nn.name!=="ErrnoError")throw Nn;return Nn.Pa}},D:function(h,g,w,E){g=-9007199254740992>g||9007199254740992<g?NaN:Number(g);try{if(isNaN(g))return 61;var B=Cn(h);return $v(B,g,w),P[E>>3]=BigInt(B.position),B.ob&&g===0&&w===0&&(B.ob=null),0}catch(Z){if(typeof _t>"u"||Z.name!=="ErrnoError")throw Z;return Z.Pa}},I:function(h){var w;try{var g=Cn(h);return(w=g.Ma)!=null&&w.fsync?g.Ma.fsync(g):0}catch(E){if(typeof _t>"u"||E.name!=="ErrnoError")throw E;return E.Pa}},t:function(h,g,w,E){try{e:{var B=Cn(h);h=g;for(var Z,ee=g=0;ee<w;ee++){var pe=k[h>>2],Be=k[h+4>>2];h+=8;var ke=Hv(B,U,pe,Be,Z);if(0>ke){var kt=-1;break e}if(g+=ke,ke<Be)break;typeof Z<"u"&&(Z+=ke)}kt=g}return k[E>>2]=kt,0}catch(Nn){if(typeof _t>"u"||Nn.name!=="ErrnoError")throw Nn;return Nn.Pa}},k:Wv},ge;(async function(){var w;function h(E){var B;return ge=E.exports,D=ge.M,Q(),_r=ge.O,se--,(B=c.monitorRunDependencies)==null||B.call(c,se),se==0&&ae&&(E=ae,ae=null,E()),ge}se++,(w=c.monitorRunDependencies)==null||w.call(c,se);var g={a:WM};return c.instantiateWasm?new Promise(E=>{c.instantiateWasm(g,(B,Z)=>{h(B),E(B.exports)})}):(we??(we=c.locateFile?c.locateFile("sql-wasm.wasm",v):v+"sql-wasm.wasm"),h((await Ht(g)).instance))})(),c._sqlite3_free=h=>(c._sqlite3_free=ge.P)(h),c._sqlite3_value_text=h=>(c._sqlite3_value_text=ge.Q)(h),c._sqlite3_prepare_v2=(h,g,w,E,B)=>(c._sqlite3_prepare_v2=ge.R)(h,g,w,E,B),c._sqlite3_step=h=>(c._sqlite3_step=ge.S)(h),c._sqlite3_reset=h=>(c._sqlite3_reset=ge.T)(h),c._sqlite3_exec=(h,g,w,E,B)=>(c._sqlite3_exec=ge.U)(h,g,w,E,B),c._sqlite3_finalize=h=>(c._sqlite3_finalize=ge.V)(h),c._sqlite3_column_name=(h,g)=>(c._sqlite3_column_name=ge.W)(h,g),c._sqlite3_column_text=(h,g)=>(c._sqlite3_column_text=ge.X)(h,g),c._sqlite3_column_type=(h,g)=>(c._sqlite3_column_type=ge.Y)(h,g),c._sqlite3_errmsg=h=>(c._sqlite3_errmsg=ge.Z)(h),c._sqlite3_clear_bindings=h=>(c._sqlite3_clear_bindings=ge._)(h),c._sqlite3_value_blob=h=>(c._sqlite3_value_blob=ge.$)(h),c._sqlite3_value_bytes=h=>(c._sqlite3_value_bytes=ge.aa)(h),c._sqlite3_value_double=h=>(c._sqlite3_value_double=ge.ba)(h),c._sqlite3_value_int=h=>(c._sqlite3_value_int=ge.ca)(h),c._sqlite3_value_type=h=>(c._sqlite3_value_type=ge.da)(h),c._sqlite3_result_blob=(h,g,w,E)=>(c._sqlite3_result_blob=ge.ea)(h,g,w,E),c._sqlite3_result_double=(h,g)=>(c._sqlite3_result_double=ge.fa)(h,g),c._sqlite3_result_error=(h,g,w)=>(c._sqlite3_result_error=ge.ga)(h,g,w),c._sqlite3_result_int=(h,g)=>(c._sqlite3_result_int=ge.ha)(h,g),c._sqlite3_result_int64=(h,g)=>(c._sqlite3_result_int64=ge.ia)(h,g),c._sqlite3_result_null=h=>(c._sqlite3_result_null=ge.ja)(h),c._sqlite3_result_text=(h,g,w,E)=>(c._sqlite3_result_text=ge.ka)(h,g,w,E),c._sqlite3_aggregate_context=(h,g)=>(c._sqlite3_aggregate_context=ge.la)(h,g),c._sqlite3_column_count=h=>(c._sqlite3_column_count=ge.ma)(h),c._sqlite3_data_count=h=>(c._sqlite3_data_count=ge.na)(h),c._sqlite3_column_blob=(h,g)=>(c._sqlite3_column_blob=ge.oa)(h,g),c._sqlite3_column_bytes=(h,g)=>(c._sqlite3_column_bytes=ge.pa)(h,g),c._sqlite3_column_double=(h,g)=>(c._sqlite3_column_double=ge.qa)(h,g),c._sqlite3_bind_blob=(h,g,w,E,B)=>(c._sqlite3_bind_blob=ge.ra)(h,g,w,E,B),c._sqlite3_bind_double=(h,g,w)=>(c._sqlite3_bind_double=ge.sa)(h,g,w),c._sqlite3_bind_int=(h,g,w)=>(c._sqlite3_bind_int=ge.ta)(h,g,w),c._sqlite3_bind_text=(h,g,w,E,B)=>(c._sqlite3_bind_text=ge.ua)(h,g,w,E,B),c._sqlite3_bind_parameter_index=(h,g)=>(c._sqlite3_bind_parameter_index=ge.va)(h,g),c._sqlite3_sql=h=>(c._sqlite3_sql=ge.wa)(h),c._sqlite3_normalized_sql=h=>(c._sqlite3_normalized_sql=ge.xa)(h),c._sqlite3_changes=h=>(c._sqlite3_changes=ge.ya)(h),c._sqlite3_close_v2=h=>(c._sqlite3_close_v2=ge.za)(h),c._sqlite3_create_function_v2=(h,g,w,E,B,Z,ee,pe,Be)=>(c._sqlite3_create_function_v2=ge.Aa)(h,g,w,E,B,Z,ee,pe,Be),c._sqlite3_update_hook=(h,g,w)=>(c._sqlite3_update_hook=ge.Ba)(h,g,w),c._sqlite3_open=(h,g)=>(c._sqlite3_open=ge.Ca)(h,g);var xg=c._malloc=h=>(xg=c._malloc=ge.Da)(h),Ju=c._free=h=>(Ju=c._free=ge.Ea)(h);c._RegisterExtensionFunctions=h=>(c._RegisterExtensionFunctions=ge.Fa)(h);var Xv=(h,g)=>(Xv=ge.Ga)(h,g),qv=(h,g)=>(qv=ge.Ha)(h,g),kl=h=>(kl=ge.Ia)(h),Qr=h=>(Qr=ge.Ja)(h),Nl=()=>(Nl=ge.Ka)();c.stackSave=()=>Nl(),c.stackRestore=h=>kl(h),c.stackAlloc=h=>Qr(h),c.cwrap=(h,g,w,E)=>{var B=!w||w.every(Z=>Z==="number"||Z==="boolean");return g!=="string"&&B&&!E?c["_"+h]:(...Z)=>HM(h,g,w,Z)},c.addFunction=Dl,c.removeFunction=Gr,c.UTF8ToString=gt,c.ALLOC_NORMAL=Gu,c.allocate=Qu,c.allocateUTF8OnStack=vg;function Sg(){function h(){var B;if(c.calledRun=!0,!F){if(!c.noFSInit&&!Mv){var g,w;Mv=!0,E??(E=c.stdin),g??(g=c.stdout),w??(w=c.stderr),E?Zr("stdin",E):gg("/dev/tty","/dev/stdin"),g?Zr("stdout",null,g):gg("/dev/tty","/dev/stdout"),w?Zr("stderr",null,w):gg("/dev/tty1","/dev/stderr"),Xa("/dev/stdin",0),Xa("/dev/stdout",1),Xa("/dev/stderr",1)}if(ge.N(),Ov=!1,(B=c.onRuntimeInitialized)==null||B.call(c),c.postRun)for(typeof c.postRun=="function"&&(c.postRun=[c.postRun]);c.postRun.length;){var E=c.postRun.shift();je.unshift(E)}Mt(je)}}if(0<se)ae=Sg;else{if(c.preRun)for(typeof c.preRun=="function"&&(c.preRun=[c.preRun]);c.preRun.length;)ue();Mt(De),0<se?ae=Sg:c.setStatus?(c.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>c.setStatus(""),1),h()},1)):h()}}if(c.preInit)for(typeof c.preInit=="function"&&(c.preInit=[c.preInit]);0<c.preInit.length;)c.preInit.pop()();return Sg(),o}),n)};t.exports=i,t.exports.default=i})(OM);var jq=OM.exports;const Hq=Wi(jq);class Fu{constructor(e,n,i){i.some(s=>s[0]==="id")||i.unshift(["id","integer","primary key"]),this.db=e,this.tableName=n,this.columns=i,this.buildWhere===Fu.prototype.buildWhere&&console.warn(`Warning: ${n} does not override buildWhere()`)}create(){const e=this.columns.map(i=>i.join(" ")),n=`create table if not exists ${this.tableName} (${e.join(",")})`;this.db.run(n)}buildWhere(e){return console.log("Warning: buildWhere is not implemented in BaseTable"),{cond:[],params:[]}}select(e={}){const{cond:n,params:i}=this.buildWhere(e),r=n.length>0?"where "+n.join(" and "):"",s=`select * from ${this.tableName} ${r}`,a=this.db.prepare(s);a.bind(i);const o=[];for(;a.step();){const l=a.get(),c={};for(let u=0;u<this.columns.length;u++){const f=this.columns[u][0];c[f]=l[u]}o.push(c)}return a.free(),o}insert(e){if(!Array.isArray(e))throw new Error("params must be an array");if(e.length===0)return;const n=Array.isArray(e[0])?e:[e],i=this.columns.slice(1).map(o=>o[0]),r=this.columns.slice(1).map(()=>"?"),s=`insert into ${this.tableName} (${i.join(",")}) values (${r.join(",")})`;this.db.run("begin transaction");const a=this.db.prepare(s);try{for(const o of n)a.run(o);this.db.run("commit")}catch(o){throw this.db.run("rollback"),o}finally{a.free()}}delete(){const e=`delete from ${this.tableName}`;this.db.run(e)}}class Ev extends Fu{constructor(e){super(e,"timelinepath",[["id","integer","primary key"],["start_time","integer","not null"],["end_time","integer","not null"],["start_time_timezone_utc_offset_minutes","integer"],["end_time_timezone_utc_offset_minutes","integer"],["time","integer","not null"],["point_lat","real","not null"],["point_lon","real","not null"]])}create(){super.create(),this.db.run("create index if not exists idx_time on timelinepath(time)")}buildWhere(e){const n=[],i=[];return e.time!=null&&(n.push("time = ?"),i.push(e.time)),e.time_from!=null&&(n.push("time >= ?"),i.push(e.time_from)),e.time_to!=null&&(n.push("time <= ?"),i.push(e.time_to)),{cond:n,params:i}}}class sg extends Fu{constructor(e){super(e,"activity",[["id","integer","primary key"],["start_time","integer","not null"],["end_time","integer","not null"],["start_time_timezone_utc_offset_minutes","integer","not null"],["end_time_timezone_utc_offset_minutes","integer","not null"],["start_lat","real","not null"],["start_lon","real","not null"],["end_lat","real","not null"],["end_lon","real","not null"],["distance_meters","real","not null"],["probability","real"],["top_candidate_type","text","not null"],["top_candidate_probability","real","not null"],["parking_location_lat","real"],["parking_location_lon","real"],["parking_start_time","integer"]])}create(){super.create(),this.db.run("create index if not exists idx_start_time on activity(start_time)"),this.db.run("create index if not exists idx_end_time on activity(end_time)")}buildWhere(e){const n=[],i=[];return e.start_time!=null&&(n.push("start_time = ?"),i.push(e.start_time)),e.start_time_from!=null&&(n.push("start_time >= ?"),i.push(e.start_time_from)),e.start_time_to!=null&&(n.push("start_time <= ?"),i.push(e.start_time_to)),e.end_time!=null&&(n.push("end_time = ?"),i.push(e.end_time)),e.end_time_from!=null&&(n.push("end_time >= ?"),i.push(e.end_time_from)),e.end_time_to!=null&&(n.push("end_time <= ?"),i.push(e.end_time_to)),{cond:n,params:i}}}class Cv extends Fu{constructor(e){super(e,"visit",[["id","integer","primary key"],["start_time","integer","not null"],["end_time","integer","not null"],["start_time_timezone_utc_offset_minutes","integer","not null"],["end_time_timezone_utc_offset_minutes","integer","not null"],["hierarchy_level","integer","not null"],["probability","real","not null"],["top_candidate_place_id","text","not null"],["top_candidate_semantic_type","text","not null"],["top_candidate_probability","real","not null"],["top_candidate_lat","real","not null"],["top_candidate_lon","real","not null"],["top_candidate_is_timeless_visit","boolean"]])}create(){super.create(),this.db.run("create index if not exists idx_start_time on visit(start_time)"),this.db.run("create index if not exists idx_end_time on visit(end_time)")}buildWhere(e){const n=[],i=[];return e.start_time!=null&&(n.push("start_time = ?"),i.push(e.start_time)),e.start_time_from!=null&&(n.push("start_time >= ?"),i.push(e.start_time_from)),e.start_time_to!=null&&(n.push("start_time <= ?"),i.push(e.start_time_to)),e.end_time!=null&&(n.push("end_time = ?"),i.push(e.end_time)),e.end_time_from!=null&&(n.push("end_time >= ?"),i.push(e.end_time_from)),e.end_time_to!=null&&(n.push("end_time <= ?"),i.push(e.end_time_to)),{cond:n,params:i}}}async function Wq(){const t=await Hq({locateFile:()=>"/google-timeline-viewer/sql-wasm.wasm"}),e=new t.Database;return[new sg(e),new Ev(e),new Cv(e)].forEach(i=>i.create()),e}function Yq(t,e){if(!t)return;const n=[],i=[],r=[],s=u=>u.replace(//g,"").split(", ").map(Number),a=u=>Ot(u).valueOf(),o=new sg(t),l=new Ev(t),c=new Cv(t);[o,l,c].forEach(u=>u.delete());for(const u of(e==null?void 0:e.semanticSegments)??[]){const f=[a(u.startTime),a(u.endTime),u.startTimeTimezoneUtcOffsetMinutes??null,u.endTimeTimezoneUtcOffsetMinutes??null];if(u.activity)n.push([...f,...s(u.activity.start.latLng),...s(u.activity.end.latLng),u.activity.distanceMeters,u.activity.probability??null,u.activity.topCandidate.type,u.activity.topCandidate.probability,...u.activity.parking?s(u.activity.parking.location.latLng):[null,null],u.activity.parking?a(u.activity.parking.startTime):null]);else if(u.visit)i.push([...f,u.visit.hierarchyLevel,u.visit.probability,u.visit.topCandidate.placeId,u.visit.topCandidate.semanticType,u.visit.topCandidate.probability,...s(u.visit.topCandidate.placeLocation.latLng),u.visit.topCandidate.isTimelessVisit??null]);else if(u.timelinePath)for(const d of u.timelinePath)r.push([...f,a(d.time),...s(d.point)])}o.insert(n),l.insert(r),c.insert(i)}function Xq(t,e="YYYYMMDD"){const n=new Set,r=new sg(t).select();for(const s of r){const a=Ot(s.start_time).format(e);n.add(a)}return n}function qq(t,e){const n=[];if(!t||!e)return n;const i=new sg(t),r=new Ev(t),s=new Cv(t),a=i.select({start_time_from:e.startOf("day").valueOf(),start_time_to:e.endOf("day").valueOf()});for(let o=0;o<a.length;o++){const l=a[o],c=s.select({end_time:l.start_time});if(c.length>0){const p=c[0];n.push({id:p.start_time,startTime:p.start_time,endTime:p.end_time,type:"visit",position:[p.top_candidate_lon,p.top_candidate_lat],path:[],placeId:p.top_candidate_place_id,distanceMeters:null,duration:p.end_time-p.start_time})}const u=c.length>0?[c[0].top_candidate_lon,c[0].top_candidate_lat]:[l.start_lon,l.start_lat];n.push({id:l.start_time,startTime:l.start_time,endTime:l.end_time,type:l.top_candidate_type,position:null,path:[u],placeId:null,distanceMeters:l.distance_meters,duration:l.end_time-l.start_time});const f=r.select({time_from:l.start_time,time_to:l.end_time});for(const p of f)n.at(-1).path.push([p.point_lon,p.point_lat]);const d=s.select({start_time:l.end_time});if(d.length>0)n.at(-1).path.push([d[0].top_candidate_lon,d[0].top_candidate_lat]),o===a.length-1&&n.push({id:d[0].start_time,startTime:d[0].start_time,endTime:d[0].end_time,type:"visit",position:[d[0].top_candidate_lon,d[0].top_candidate_lat],path:[],placeId:d[0].top_candidate_place_id,duration:d[0].end_time-d[0].start_time});else{const p=i.select({start_time:l.end_time})[0];n.at(-1).path.push([p.start_lon,p.start_lat])}}return n}const Mx=`uniform iconUniforms {
  float sizeScale;
  vec2 iconsTextureDim;
  float sizeBasis;
  float sizeMinPixels;
  float sizeMaxPixels;
  bool billboard;
  highp int sizeUnits;
  float alphaCutoff;
} icon;
`,Kq={name:"icon",vs:Mx,fs:Mx,uniformTypes:{sizeScale:"f32",iconsTextureDim:"vec2<f32>",sizeBasis:"f32",sizeMinPixels:"f32",sizeMaxPixels:"f32",billboard:"f32",sizeUnits:"i32",alphaCutoff:"f32"}},Zq=`#version 300 es
#define SHADER_NAME icon-layer-vertex-shader
in vec2 positions;
in vec3 instancePositions;
in vec3 instancePositions64Low;
in float instanceSizes;
in float instanceAngles;
in vec4 instanceColors;
in vec3 instancePickingColors;
in vec4 instanceIconFrames;
in float instanceColorModes;
in vec2 instanceOffsets;
in vec2 instancePixelOffset;
out float vColorMode;
out vec4 vColor;
out vec2 vTextureCoords;
out vec2 uv;
vec2 rotate_by_angle(vec2 vertex, float angle) {
float angle_radian = angle * PI / 180.0;
float cos_angle = cos(angle_radian);
float sin_angle = sin(angle_radian);
mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
return rotationMatrix * vertex;
}
void main(void) {
geometry.worldPosition = instancePositions;
geometry.uv = positions;
geometry.pickingColor = instancePickingColors;
uv = positions;
vec2 iconSize = instanceIconFrames.zw;
float sizePixels = clamp(
project_size_to_pixel(instanceSizes * icon.sizeScale, icon.sizeUnits),
icon.sizeMinPixels, icon.sizeMaxPixels
);
float iconConstraint = icon.sizeBasis == 0.0 ? iconSize.x : iconSize.y;
float instanceScale = iconConstraint == 0.0 ? 0.0 : sizePixels / iconConstraint;
vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;
pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;
pixelOffset += instancePixelOffset;
pixelOffset.y *= -1.0;
if (icon.billboard)  {
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
vec3 offset = vec3(pixelOffset, 0.0);
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
} else {
vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
DECKGL_FILTER_SIZE(offset_common, geometry);
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
}
vTextureCoords = mix(
instanceIconFrames.xy,
instanceIconFrames.xy + iconSize,
(positions.xy + 1.0) / 2.0
) / icon.iconsTextureDim;
vColor = instanceColors;
DECKGL_FILTER_COLOR(vColor, geometry);
vColorMode = instanceColorModes;
}
`,Gq=`#version 300 es
#define SHADER_NAME icon-layer-fragment-shader
precision highp float;
uniform sampler2D iconsTexture;
in float vColorMode;
in vec4 vColor;
in vec2 vTextureCoords;
in vec2 uv;
out vec4 fragColor;
void main(void) {
geometry.uv = uv;
vec4 texColor = texture(iconsTexture, vTextureCoords);
vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);
float a = texColor.a * layer.opacity * vColor.a;
if (a < icon.alphaCutoff) {
discard;
}
fragColor = vec4(color, a);
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,Qq=1024,Jq=4,Ox=()=>{},Ix={minFilter:"linear",mipmapFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},eK={x:0,y:0,width:0,height:0};function tK(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function nK(t,e,n,i){const r=Math.min(n/e.width,i/e.height),s=Math.floor(e.width*r),a=Math.floor(e.height*r);return r===1?{image:e,width:s,height:a}:(t.canvas.height=a,t.canvas.width=s,t.clearRect(0,0,s,a),t.drawImage(e,0,0,e.width,e.height,0,0,s,a),{image:t.canvas,width:s,height:a})}function uu(t){return t&&(t.id||t.url)}function iK(t,e,n,i){const{width:r,height:s,device:a}=t,o=a.createTexture({format:"rgba8unorm",width:e,height:n,sampler:i,mipLevels:a.getMipLevelCount(e,n)}),l=a.createCommandEncoder();return l.copyTextureToTexture({sourceTexture:t,destinationTexture:o,width:r,height:s}),l.finish(),o.generateMipmapsWebGL(),t.destroy(),o}function Px(t,e,n){for(let i=0;i<e.length;i++){const{icon:r,xOffset:s}=e[i],a=uu(r);t[a]={...r,x:s,y:n}}}function rK({icons:t,buffer:e,mapping:n={},xOffset:i=0,yOffset:r=0,rowHeight:s=0,canvasWidth:a}){let o=[];for(let l=0;l<t.length;l++){const c=t[l],u=uu(c);if(!n[u]){const{height:f,width:d}=c;i+d+e>a&&(Px(n,o,r),i=0,r=s+r+e,s=0,o=[]),o.push({icon:c,xOffset:i}),i=i+d+e,s=Math.max(s,f)}}return o.length>0&&Px(n,o,r),{mapping:n,rowHeight:s,xOffset:i,yOffset:r,canvasWidth:a,canvasHeight:tK(s+r+e)}}function sK(t,e,n){if(!t||!e)return null;n=n||{};const i={},{iterable:r,objectInfo:s}=wv(t);for(const a of r){s.index++;const o=e(a,s),l=uu(o);if(!o)throw new Error("Icon is missing.");if(!o.url)throw new Error("Icon url is missing.");!i[l]&&(!n[l]||o.url!==n[l].url)&&(i[l]={...o,source:a,sourceIndex:s.index})}return i}class aK{constructor(e,{onUpdate:n=Ox,onError:i=Ox}){this._loadOptions=null,this._texture=null,this._externalTexture=null,this._mapping={},this._samplerParameters=null,this._pendingCount=0,this._autoPacking=!1,this._xOffset=0,this._yOffset=0,this._rowHeight=0,this._buffer=Jq,this._canvasWidth=Qq,this._canvasHeight=0,this._canvas=null,this.device=e,this.onUpdate=n,this.onError=i}finalize(){var e;(e=this._texture)==null||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const n=this._autoPacking?uu(e):e;return this._mapping[n]||eK}setProps({loadOptions:e,autoPacking:n,iconAtlas:i,iconMapping:r,textureParameters:s}){var a;e&&(this._loadOptions=e),n!==void 0&&(this._autoPacking=n),r&&(this._mapping=r),i&&((a=this._texture)==null||a.delete(),this._texture=null,this._externalTexture=i),s&&(this._samplerParameters=s)}get isLoaded(){return this._pendingCount===0}packIcons(e,n){var r;if(!this._autoPacking||typeof document>"u")return;const i=Object.values(sK(e,n,this._mapping)||{});if(i.length>0){const{mapping:s,xOffset:a,yOffset:o,rowHeight:l,canvasHeight:c}=rK({icons:i,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=l,this._mapping=s,this._xOffset=a,this._yOffset=o,this._canvasHeight=c,this._texture||(this._texture=this.device.createTexture({format:"rgba8unorm",data:null,width:this._canvasWidth,height:this._canvasHeight,sampler:this._samplerParameters||Ix,mipLevels:this.device.getMipLevelCount(this._canvasWidth,this._canvasHeight)})),this._texture.height!==this._canvasHeight&&(this._texture=iK(this._texture,this._canvasWidth,this._canvasHeight,this._samplerParameters||Ix)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(i),(r=this._texture)==null||r.generateMipmapsWebGL()}}_loadIcons(e){const n=this._canvas.getContext("2d",{willReadFrequently:!0});for(const i of e)this._pendingCount++,nh(i.url,this._loadOptions).then(r=>{var m,S;const s=uu(i),a=this._mapping[s],{x:o,y:l,width:c,height:u}=a,{image:f,width:d,height:p}=nK(n,r,c,u);(m=this._texture)==null||m.copyExternalImage({image:f,x:o+(c-d)/2,y:l+(u-p)/2,width:d,height:p}),a.width=d,a.height=p,(S=this._texture)==null||S.generateMipmapsWebGL(),this.onUpdate()}).catch(r=>{this.onError({url:i.url,source:i.source,sourceIndex:i.sourceIndex,loadOptions:this._loadOptions,error:r})}).finally(()=>{this._pendingCount--})}}const IM=[0,0,0,255],oK={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeBasis:"height",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:t=>t.position},getIcon:{type:"accessor",value:t=>t.icon},getColor:{type:"accessor",value:IM},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,optional:!0},textureParameters:{type:"object",ignore:!0,value:null}};class ag extends Ha{getShaders(){return super.getShaders({vs:Zq,fs:Gq,modules:[cv,dv,Kq]})}initializeState(){this.state={iconManager:new aK(this.context.device,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:"uint8",accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:"unorm8",transition:!0,accessor:"getColor",defaultValue:IM},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(e){var p;super.updateState(e);const{props:n,oldProps:i,changeFlags:r}=e,s=this.getAttributeManager(),{iconAtlas:a,iconMapping:o,data:l,getIcon:c,textureParameters:u}=n,{iconManager:f}=this.state;if(typeof a=="string")return;const d=a||this.internalState.isAsyncPropLoading("iconAtlas");f.setProps({loadOptions:n.loadOptions,autoPacking:!d,iconAtlas:a,iconMapping:d?o:null,textureParameters:u}),d?i.iconMapping!==n.iconMapping&&s.invalidate("getIcon"):(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getIcon))&&f.packIcons(l,c),r.extensionsChanged&&((p=this.state.model)==null||p.destroy(),this.state.model=this._getModel(),s.invalidateAll())}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(e){super.finalizeState(e),this.state.iconManager.finalize()}draw({uniforms:e}){const{sizeScale:n,sizeBasis:i,sizeMinPixels:r,sizeMaxPixels:s,sizeUnits:a,billboard:o,alphaCutoff:l}=this.props,{iconManager:c}=this.state,u=c.getTexture();if(u){const f=this.state.model,d={iconsTexture:u,iconsTextureDim:[u.width,u.height],sizeUnits:Fs[a],sizeScale:n,sizeBasis:i==="height"?1:0,sizeMinPixels:r,sizeMaxPixels:s,billboard:o,alphaCutoff:l};f.shaderInputs.setProps({icon:d}),f.draw(this.context.renderPass)}}_getModel(){const e=[-1,-1,1,-1,-1,1,1,1];return new ka(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new pv({topology:"triangle-strip",attributes:{positions:{size:2,value:new Float32Array(e)}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(e){var i;const n=(i=this.getCurrentLayer())==null?void 0:i.props.onIconError;n?n(e):ut.error(e.error.message)()}getInstanceOffset(e){const{width:n,height:i,anchorX:r=n/2,anchorY:s=i/2}=this.state.iconManager.getIconMapping(e);return[n/2-r,i/2-s]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){const{x:n,y:i,width:r,height:s}=this.state.iconManager.getIconMapping(e);return[n,i,r,s]}}ag.defaultProps=oK;ag.layerName="IconLayer";const Dx=`uniform scatterplotUniforms {
  float radiusScale;
  float radiusMinPixels;
  float radiusMaxPixels;
  float lineWidthScale;
  float lineWidthMinPixels;
  float lineWidthMaxPixels;
  float stroked;
  float filled;
  bool antialiasing;
  bool billboard;
  highp int radiusUnits;
  highp int lineWidthUnits;
} scatterplot;
`,lK={name:"scatterplot",vs:Dx,fs:Dx,source:"",uniformTypes:{radiusScale:"f32",radiusMinPixels:"f32",radiusMaxPixels:"f32",lineWidthScale:"f32",lineWidthMinPixels:"f32",lineWidthMaxPixels:"f32",stroked:"f32",filled:"f32",antialiasing:"f32",billboard:"f32",radiusUnits:"i32",lineWidthUnits:"i32"}},cK=`#version 300 es
#define SHADER_NAME scatterplot-layer-vertex-shader
in vec3 positions;
in vec3 instancePositions;
in vec3 instancePositions64Low;
in float instanceRadius;
in float instanceLineWidths;
in vec4 instanceFillColors;
in vec4 instanceLineColors;
in vec3 instancePickingColors;
out vec4 vFillColor;
out vec4 vLineColor;
out vec2 unitPosition;
out float innerUnitRadius;
out float outerRadiusPixels;
void main(void) {
geometry.worldPosition = instancePositions;
outerRadiusPixels = clamp(
project_size_to_pixel(scatterplot.radiusScale * instanceRadius, scatterplot.radiusUnits),
scatterplot.radiusMinPixels, scatterplot.radiusMaxPixels
);
float lineWidthPixels = clamp(
project_size_to_pixel(scatterplot.lineWidthScale * instanceLineWidths, scatterplot.lineWidthUnits),
scatterplot.lineWidthMinPixels, scatterplot.lineWidthMaxPixels
);
outerRadiusPixels += scatterplot.stroked * lineWidthPixels / 2.0;
float edgePadding = scatterplot.antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;
unitPosition = edgePadding * positions.xy;
geometry.uv = unitPosition;
geometry.pickingColor = instancePickingColors;
innerUnitRadius = 1.0 - scatterplot.stroked * lineWidthPixels / outerRadiusPixels;
if (scatterplot.billboard) {
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
vec3 offset = edgePadding * positions * outerRadiusPixels;
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
} else {
vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
}
vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * layer.opacity);
DECKGL_FILTER_COLOR(vFillColor, geometry);
vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * layer.opacity);
DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,uK=`#version 300 es
#define SHADER_NAME scatterplot-layer-fragment-shader
precision highp float;
in vec4 vFillColor;
in vec4 vLineColor;
in vec2 unitPosition;
in float innerUnitRadius;
in float outerRadiusPixels;
out vec4 fragColor;
void main(void) {
geometry.uv = unitPosition;
float distToCenter = length(unitPosition) * outerRadiusPixels;
float inCircle = scatterplot.antialiasing ?
smoothedge(distToCenter, outerRadiusPixels) :
step(distToCenter, outerRadiusPixels);
if (inCircle == 0.0) {
discard;
}
if (scatterplot.stroked > 0.5) {
float isLine = scatterplot.antialiasing ?
smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :
step(innerUnitRadius * outerRadiusPixels, distToCenter);
if (scatterplot.filled > 0.5) {
fragColor = mix(vFillColor, vLineColor, isLine);
} else {
if (isLine == 0.0) {
discard;
}
fragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);
}
} else if (scatterplot.filled < 0.5) {
discard;
} else {
fragColor = vFillColor;
}
fragColor.a *= inCircle;
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,fK=`// Main shaders

struct ScatterplotUniforms {
  radiusScale: f32,
  radiusMinPixels: f32,
  radiusMaxPixels: f32,
  lineWidthScale: f32,
  lineWidthMinPixels: f32,
  lineWidthMaxPixels: f32,
  stroked: f32,
  filled: i32,
  antialiasing: i32,
  billboard: i32,
  radiusUnits: i32,
  lineWidthUnits: i32,
};

struct ConstantAttributeUniforms {
 instancePositions: vec3<f32>,
 instancePositions64Low: vec3<f32>,
 instanceRadius: f32,
 instanceLineWidths: f32,
 instanceFillColors: vec4<f32>,
 instanceLineColors: vec4<f32>,
 instancePickingColors: vec3<f32>,

 instancePositionsConstant: i32,
 instancePositions64LowConstant: i32,
 instanceRadiusConstant: i32,
 instanceLineWidthsConstant: i32,
 instanceFillColorsConstant: i32,
 instanceLineColorsConstant: i32,
 instancePickingColorsConstant: i32
};

@group(0) @binding(2) var<uniform> scatterplot: ScatterplotUniforms;

struct ConstantAttributes {
  instancePositions: vec3<f32>,
  instancePositions64Low: vec3<f32>,
  instanceRadius: f32,
  instanceLineWidths: f32,
  instanceFillColors: vec4<f32>,
  instanceLineColors: vec4<f32>,
  instancePickingColors: vec3<f32>
};

const constants = ConstantAttributes(
  vec3<f32>(0.0),
  vec3<f32>(0.0),
  0.0,
  0.0,
  vec4<f32>(0.0, 0.0, 0.0, 1.0),
  vec4<f32>(0.0, 0.0, 0.0, 1.0),
  vec3<f32>(0.0)
);

struct Attributes {
  @builtin(instance_index) instanceIndex : u32,
  @builtin(vertex_index) vertexIndex : u32,
  @location(0) positions: vec3<f32>,
  @location(1) instancePositions: vec3<f32>,
  @location(2) instancePositions64Low: vec3<f32>,
  @location(3) instanceRadius: f32,
  @location(4) instanceLineWidths: f32,
  @location(5) instanceFillColors: vec4<f32>,
  @location(6) instanceLineColors: vec4<f32>,
  @location(7) instancePickingColors: vec3<f32>
};

struct Varyings {
  @builtin(position) position: vec4<f32>,
  @location(0) vFillColor: vec4<f32>,
  @location(1) vLineColor: vec4<f32>,
  @location(2) unitPosition: vec2<f32>,
  @location(3) innerUnitRadius: f32,
  @location(4) outerRadiusPixels: f32,
};

@vertex
fn vertexMain(attributes: Attributes) -> Varyings {
  var varyings: Varyings;

  // Draw an inline geometry constant array clip space triangle to verify that rendering works.
  // var positions = array<vec2<f32>, 3>(vec2(0.0, 0.5), vec2(-0.5, -0.5), vec2(0.5, -0.5));
  // if (attributes.instanceIndex == 0) {
  //   varyings.position = vec4<f32>(positions[attributes.vertexIndex], 0.0, 1.0);
  //   return varyings;
  // }

  // var geometry: Geometry;
  // geometry.worldPosition = instancePositions;

  // Multiply out radius and clamp to limits
  varyings.outerRadiusPixels = clamp(
    project_unit_size_to_pixel(scatterplot.radiusScale * attributes.instanceRadius, scatterplot.radiusUnits),
    scatterplot.radiusMinPixels, scatterplot.radiusMaxPixels
  );

  // Multiply out line width and clamp to limits
  let lineWidthPixels = clamp(
    project_unit_size_to_pixel(scatterplot.lineWidthScale * attributes.instanceLineWidths, scatterplot.lineWidthUnits),
    scatterplot.lineWidthMinPixels, scatterplot.lineWidthMaxPixels
  );

  // outer radius needs to offset by half stroke width
  varyings.outerRadiusPixels += scatterplot.stroked * lineWidthPixels / 2.0;
  // Expand geometry to accommodate edge smoothing
  let edgePadding = select(
    (varyings.outerRadiusPixels + SMOOTH_EDGE_RADIUS) / varyings.outerRadiusPixels,
    1.0,
    scatterplot.antialiasing != 0
  );

  // position on the containing square in [-1, 1] space
  varyings.unitPosition = edgePadding * attributes.positions.xy;
  geometry.uv = varyings.unitPosition;
  geometry.pickingColor = attributes.instancePickingColors;

  varyings.innerUnitRadius = 1.0 - scatterplot.stroked * lineWidthPixels / varyings.outerRadiusPixels;

  if (scatterplot.billboard != 0) {
    varyings.position = project_position_to_clipspace(attributes.instancePositions, attributes.instancePositions64Low, vec3<f32>(0.0)); // TODO , geometry.position);
    // DECKGL_FILTER_GL_POSITION(varyings.position, geometry);
    let offset = attributes.positions; // * edgePadding * varyings.outerRadiusPixels;
    // DECKGL_FILTER_SIZE(offset, geometry);
    let clipPixels = project_pixel_size_to_clipspace(offset.xy);
    varyings.position.x = clipPixels.x;
    varyings.position.y = clipPixels.y;
  } else {
    let offset = edgePadding * attributes.positions * project_pixel_size_float(varyings.outerRadiusPixels);
    // DECKGL_FILTER_SIZE(offset, geometry);
    varyings.position = project_position_to_clipspace(attributes.instancePositions, attributes.instancePositions64Low, offset); // TODO , geometry.position);
    // DECKGL_FILTER_GL_POSITION(varyings.position, geometry);
  }

  // Apply opacity to instance color, or return instance picking color
  varyings.vFillColor = vec4<f32>(attributes.instanceFillColors.rgb, attributes.instanceFillColors.a * color.opacity);
  // DECKGL_FILTER_COLOR(varyings.vFillColor, geometry);
  varyings.vLineColor = vec4<f32>(attributes.instanceLineColors.rgb, attributes.instanceLineColors.a * color.opacity);
  // DECKGL_FILTER_COLOR(varyings.vLineColor, geometry);

  return varyings;
}

@fragment
fn fragmentMain(varyings: Varyings) -> @location(0) vec4<f32> {
  // var geometry: Geometry;
  // geometry.uv = unitPosition;

  let distToCenter = length(varyings.unitPosition) * varyings.outerRadiusPixels;
  let inCircle = select(
    smoothedge(distToCenter, varyings.outerRadiusPixels),
    step(distToCenter, varyings.outerRadiusPixels),
    scatterplot.antialiasing != 0
  );

  if (inCircle == 0.0) {
    discard;
  }

  var fragColor: vec4<f32>;

  if (scatterplot.stroked != 0) {
    let isLine = select(
      smoothedge(varyings.innerUnitRadius * varyings.outerRadiusPixels, distToCenter),
      step(varyings.innerUnitRadius * varyings.outerRadiusPixels, distToCenter),
      scatterplot.antialiasing != 0
    );

    if (scatterplot.filled != 0) {
      fragColor = mix(varyings.vFillColor, varyings.vLineColor, isLine);
    } else {
      if (isLine == 0.0) {
        discard;
      }
      fragColor = vec4<f32>(varyings.vLineColor.rgb, varyings.vLineColor.a * isLine);
    }
  } else if (scatterplot.filled == 0) {
    discard;
  } else {
    fragColor = varyings.vFillColor;
  }

  fragColor.a *= inCircle;
  // DECKGL_FILTER_COLOR(fragColor, geometry);

  // Apply premultiplied alpha as required by transparent canvas
  fragColor = deckgl_premultiplied_alpha(fragColor);

  return fragColor;
  // return vec4<f32>(0, 0, 1, 1);
}
`,kx=[0,0,0,255],dK={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:t=>t.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:kx},getLineColor:{type:"accessor",value:kx},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class og extends Ha{getShaders(){return super.getShaders({vs:cK,fs:uK,source:fK,modules:[cv,tV,dv,lK]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,type:"unorm8",accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,type:"unorm8",accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){var n;super.updateState(e),e.changeFlags.extensionsChanged&&((n=this.state.model)==null||n.destroy(),this.state.model=this._getModel(),this.getAttributeManager().invalidateAll())}draw({uniforms:e}){const{radiusUnits:n,radiusScale:i,radiusMinPixels:r,radiusMaxPixels:s,stroked:a,filled:o,billboard:l,antialiasing:c,lineWidthUnits:u,lineWidthScale:f,lineWidthMinPixels:d,lineWidthMaxPixels:p}=this.props,m={stroked:a,filled:o,billboard:l,antialiasing:c,radiusUnits:Fs[n],radiusScale:i,radiusMinPixels:r,radiusMaxPixels:s,lineWidthUnits:Fs[u],lineWidthScale:f,lineWidthMinPixels:d,lineWidthMaxPixels:p},S=this.state.model;S.shaderInputs.setProps({scatterplot:m}),this.context.device.type==="webgpu"&&(S.instanceCount=this.props.data.length),S.draw(this.context.renderPass)}_getModel(){const e=this.context.device.type==="webgpu"?{depthWriteEnabled:!0,depthCompare:"less-equal"}:void 0,n=[-1,-1,0,1,-1,0,-1,1,0,1,1,0];return new ka(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new pv({topology:"triangle-strip",attributes:{positions:{size:3,value:new Float32Array(n)}}}),isInstanced:!0,parameters:e})}}og.defaultProps=dK;og.layerName="ScatterplotLayer";function $f(t,e){const n=e.length,i=t.length;if(i>0){let r=!0;for(let s=0;s<n;s++)if(t[i-n+s]!==e[s]){r=!1;break}if(r)return!1}for(let r=0;r<n;r++)t[i+r]=e[r];return!0}function Nx(t,e){const n=e.length;for(let i=0;i<n;i++)t[i]=e[i]}function Bx(t,e,n,i,r=[]){const s=i+e*n;for(let a=0;a<n;a++)r[a]=t[s+a];return r}function Lx(t,e,n,i,r=[]){let s,a;if(n&8)s=(i[3]-t[1])/(e[1]-t[1]),a=3;else if(n&4)s=(i[1]-t[1])/(e[1]-t[1]),a=1;else if(n&2)s=(i[2]-t[0])/(e[0]-t[0]),a=2;else if(n&1)s=(i[0]-t[0])/(e[0]-t[0]),a=0;else return null;for(let o=0;o<t.length;o++)r[o]=(a&1)===o?i[a]:s*(e[o]-t[o])+t[o];return r}function qm(t,e){let n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function PM(t,e){const{size:n=2,broken:i=!1,gridResolution:r=10,gridOffset:s=[0,0],startIndex:a=0,endIndex:o=t.length}=e||{},l=(o-a)/n;let c=[];const u=[c],f=Bx(t,0,n,a);let d,p;const m=hK(f,r,s,[]),S=[];$f(c,f);for(let v=1;v<l;v++){for(d=Bx(t,v,n,a,d),p=qm(d,m);p;){Lx(f,d,p,m,S);const y=qm(S,m);y&&(Lx(f,S,y,m,S),p=y),$f(c,S),Nx(f,S),pK(m,r,p),i&&c.length>n&&(c=[],u.push(c),$f(c,f)),p=qm(d,m)}$f(c,d),Nx(f,d)}return i?u:u[0]}function hK(t,e,n,i){const r=Math.floor((t[0]-n[0])/e)*e+n[0],s=Math.floor((t[1]-n[1])/e)*e+n[1];return i[0]=r,i[1]=s,i[2]=r+e,i[3]=s+e,i}function pK(t,e,n){n&8?(t[1]+=e,t[3]+=e):n&4?(t[1]-=e,t[3]-=e):n&2?(t[0]+=e,t[2]+=e):n&1&&(t[0]-=e,t[2]-=e)}function gK(t,e){const{size:n=2,startIndex:i=0,endIndex:r=t.length,normalize:s=!0}=e||{},a=t.slice(i,r);mK(a,n,0,r-i);const o=PM(a,{size:n,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(s)for(const l of o)yK(l,n);return o}function mK(t,e,n,i){let r=t[0],s;for(let a=n;a<i;a+=e){s=t[a];const o=s-r;(o>180||o<-180)&&(s-=Math.round(o/360)*360),t[a]=r=s}}function yK(t,e){let n;const i=t.length/e;for(let s=0;s<i&&(n=t[s*e],(n+180)%360===0);s++);const r=-Math.round(n/360)*360;if(r!==0)for(let s=0;s<i;s++)t[s*e]+=r}function _K(t,e,n,i){let r;if(Array.isArray(t[0])){const s=t.length*e;r=new Array(s);for(let a=0;a<t.length;a++)for(let o=0;o<e;o++)r[a*e+o]=t[a][o]||0}else r=t;return n?PM(r,{size:e,gridResolution:n}):i?gK(r,{size:e}):r}const bK=1,vK=2,Km=4;class TK extends zY{constructor(e){super({...e,attributes:{positions:{size:3,padding:18,initialize:!0,type:e.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(e){return this.attributes[e]}getGeometryFromBuffer(e){return this.normalize?super.getGeometryFromBuffer(e):null}normalizeGeometry(e){return this.normalize?_K(e,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):e}getGeometrySize(e){if(Ux(e)){let i=0;for(const r of e)i+=this.getGeometrySize(r);return i}const n=this.getPathLength(e);return n<2?0:this.isClosed(e)?n<3?0:n+2:n}updateGeometryAttributes(e,n){if(n.geometrySize!==0)if(e&&Ux(e))for(const i of e){const r=this.getGeometrySize(i);n.geometrySize=r,this.updateGeometryAttributes(i,n),n.vertexStart+=r}else this._updateSegmentTypes(e,n),this._updatePositions(e,n)}_updateSegmentTypes(e,n){const i=this.attributes.segmentTypes,r=e?this.isClosed(e):!1,{vertexStart:s,geometrySize:a}=n;i.fill(0,s,s+a),r?(i[s]=Km,i[s+a-2]=Km):(i[s]+=bK,i[s+a-2]+=vK),i[s+a-1]=Km}_updatePositions(e,n){const{positions:i}=this.attributes;if(!i||!e)return;const{vertexStart:r,geometrySize:s}=n,a=new Array(3);for(let o=r,l=0;l<s;o++,l++)this.getPointOnPath(e,l,a),i[o*3]=a[0],i[o*3+1]=a[1],i[o*3+2]=a[2]}getPathLength(e){return e.length/this.positionSize}getPointOnPath(e,n,i=[]){const{positionSize:r}=this;n*r>=e.length&&(n+=1-e.length/r);const s=n*r;return i[0]=e[s],i[1]=e[s+1],i[2]=r===3&&e[s+2]||0,i}isClosed(e){if(!this.normalize)return!!this.opts.loop;const{positionSize:n}=this,i=e.length-n;return e[0]===e[i]&&e[1]===e[i+1]&&(n===2||e[2]===e[i+2])}}function Ux(t){return Array.isArray(t[0])}const Fx=`uniform pathUniforms {
  float widthScale;
  float widthMinPixels;
  float widthMaxPixels;
  float jointType;
  float capType;
  float miterLimit;
  bool billboard;
  highp int widthUnits;
} path;
`,xK={name:"path",vs:Fx,fs:Fx,uniformTypes:{widthScale:"f32",widthMinPixels:"f32",widthMaxPixels:"f32",jointType:"f32",capType:"f32",miterLimit:"f32",billboard:"f32",widthUnits:"i32"}},SK=`#version 300 es
#define SHADER_NAME path-layer-vertex-shader
in vec2 positions;
in float instanceTypes;
in vec3 instanceStartPositions;
in vec3 instanceEndPositions;
in vec3 instanceLeftPositions;
in vec3 instanceRightPositions;
in vec3 instanceLeftPositions64Low;
in vec3 instanceStartPositions64Low;
in vec3 instanceEndPositions64Low;
in vec3 instanceRightPositions64Low;
in float instanceStrokeWidths;
in vec4 instanceColors;
in vec3 instancePickingColors;
uniform float opacity;
out vec4 vColor;
out vec2 vCornerOffset;
out float vMiterLength;
out vec2 vPathPosition;
out float vPathLength;
out float vJointType;
const float EPSILON = 0.001;
const vec3 ZERO_OFFSET = vec3(0.0);
float flipIfTrue(bool flag) {
return -(float(flag) * 2. - 1.);
}
vec3 getLineJoinOffset(
vec3 prevPoint, vec3 currPoint, vec3 nextPoint,
vec2 width
) {
bool isEnd = positions.x > 0.0;
float sideOfPath = positions.y;
float isJoint = float(sideOfPath == 0.0);
vec3 deltaA3 = (currPoint - prevPoint);
vec3 deltaB3 = (nextPoint - currPoint);
mat3 rotationMatrix;
bool needsRotation = !path.billboard && project_needs_rotation(currPoint, rotationMatrix);
if (needsRotation) {
deltaA3 = deltaA3 * rotationMatrix;
deltaB3 = deltaB3 * rotationMatrix;
}
vec2 deltaA = deltaA3.xy / width;
vec2 deltaB = deltaB3.xy / width;
float lenA = length(deltaA);
float lenB = length(deltaB);
vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);
vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);
vec2 perpA = vec2(-dirA.y, dirA.x);
vec2 perpB = vec2(-dirB.y, dirB.x);
vec2 tangent = dirA + dirB;
tangent = length(tangent) > 0. ? normalize(tangent) : perpA;
vec2 miterVec = vec2(-tangent.y, tangent.x);
vec2 dir = isEnd ? dirA : dirB;
vec2 perp = isEnd ? perpA : perpB;
float L = isEnd ? lenA : lenB;
float sinHalfA = abs(dot(miterVec, perp));
float cosHalfA = abs(dot(dirA, miterVec));
float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);
float cornerPosition = sideOfPath * turnDirection;
float miterSize = 1.0 / max(sinHalfA, EPSILON);
miterSize = mix(
min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),
miterSize,
step(0.0, cornerPosition)
);
vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))
* (sideOfPath + isJoint * turnDirection);
bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));
bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));
bool isCap = isStartCap || isEndCap;
if (isCap) {
offsetVec = mix(perp * sideOfPath, dir * path.capType * 4.0 * flipIfTrue(isStartCap), isJoint);
vJointType = path.capType;
} else {
vJointType = path.jointType;
}
vPathLength = L;
vCornerOffset = offsetVec;
vMiterLength = dot(vCornerOffset, miterVec * turnDirection);
vMiterLength = isCap ? isJoint : vMiterLength;
vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);
vPathPosition = vec2(
dot(offsetFromStartOfPath, perp),
dot(offsetFromStartOfPath, dir)
);
geometry.uv = vPathPosition;
float isValid = step(instanceTypes, 3.5);
vec3 offset = vec3(offsetVec * width * isValid, 0.0);
if (needsRotation) {
offset = rotationMatrix * offset;
}
return offset;
}
void clipLine(inout vec4 position, vec4 refPosition) {
if (position.w < EPSILON) {
float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);
position = refPosition + (position - refPosition) * r;
}
}
void main() {
geometry.pickingColor = instancePickingColors;
vColor = vec4(instanceColors.rgb, instanceColors.a * layer.opacity);
float isEnd = positions.x;
vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);
vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);
vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);
vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);
vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);
vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);
geometry.worldPosition = currPosition;
vec2 widthPixels = vec2(clamp(
project_size_to_pixel(instanceStrokeWidths * path.widthScale, path.widthUnits),
path.widthMinPixels, path.widthMaxPixels) / 2.0);
vec3 width;
if (path.billboard) {
vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);
vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);
vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);
clipLine(prevPositionScreen, currPositionScreen);
clipLine(nextPositionScreen, currPositionScreen);
clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));
width = vec3(widthPixels, 0.0);
DECKGL_FILTER_SIZE(width, geometry);
vec3 offset = getLineJoinOffset(
prevPositionScreen.xyz / prevPositionScreen.w,
currPositionScreen.xyz / currPositionScreen.w,
nextPositionScreen.xyz / nextPositionScreen.w,
project_pixel_size_to_clipspace(width.xy)
);
DECKGL_FILTER_GL_POSITION(currPositionScreen, geometry);
gl_Position = vec4(currPositionScreen.xyz + offset * currPositionScreen.w, currPositionScreen.w);
} else {
prevPosition = project_position(prevPosition, prevPosition64Low);
currPosition = project_position(currPosition, currPosition64Low);
nextPosition = project_position(nextPosition, nextPosition64Low);
width = vec3(project_pixel_size(widthPixels), 0.0);
DECKGL_FILTER_SIZE(width, geometry);
vec3 offset = getLineJoinOffset(prevPosition, currPosition, nextPosition, width.xy);
geometry.position = vec4(currPosition + offset, 1.0);
gl_Position = project_common_position_to_clipspace(geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
}
DECKGL_FILTER_COLOR(vColor, geometry);
}
`,wK=`#version 300 es
#define SHADER_NAME path-layer-fragment-shader
precision highp float;
in vec4 vColor;
in vec2 vCornerOffset;
in float vMiterLength;
in vec2 vPathPosition;
in float vPathLength;
in float vJointType;
out vec4 fragColor;
void main(void) {
geometry.uv = vPathPosition;
if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {
if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {
discard;
}
if (vJointType < 0.5 && vMiterLength > path.miterLimit + 1.0) {
discard;
}
}
fragColor = vColor;
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,DM=[0,0,0,255],AK={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:t=>t.path},getColor:{type:"accessor",value:DM},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},Zm={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class lg extends Ha{getShaders(){return super.getShaders({vs:SK,fs:wK,modules:[cv,dv,xK]})}get wrapLongitude(){return!1}getBounds(){var e;return(e=this.getAttributeManager())==null?void 0:e.getBounds(["vertexPositions"])}initializeState(){this.getAttributeManager().addInstanced({vertexPositions:{size:3,vertexOffset:1,type:"float64",fp64:this.use64bitPositions(),transition:Zm,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:"uint8",update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:Zm,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:"unorm8",accessor:"getColor",transition:Zm,defaultValue:DM},instancePickingColors:{size:4,type:"uint8",accessor:(i,{index:r,target:s})=>this.encodePickingColor(i&&i.__source?i.__source.index:r,s)}}),this.setState({pathTesselator:new TK({fp64:this.use64bitPositions()})})}updateState(e){var a;super.updateState(e);const{props:n,changeFlags:i}=e,r=this.getAttributeManager();if(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getPath)){const{pathTesselator:o}=this.state,l=n.data.attributes||{};o.updateGeometry({data:n.data,geometryBuffer:l.getPath,buffers:l,normalize:!n._pathType,loop:n._pathType==="loop",getGeometry:n.getPath,positionFormat:n.positionFormat,wrapLongitude:n.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:i.dataChanged}),this.setState({numInstances:o.instanceCount,startIndices:o.vertexStarts}),i.dataChanged||r.invalidateAll()}i.extensionsChanged&&((a=this.state.model)==null||a.destroy(),this.state.model=this._getModel(),r.invalidateAll())}getPickingInfo(e){const n=super.getPickingInfo(e),{index:i}=n,r=this.props.data;return r[0]&&r[0].__source&&(n.object=r.find(s=>s.__source.index===i)),n}disablePickingIndex(e){const n=this.props.data;if(n[0]&&n[0].__source)for(let i=0;i<n.length;i++)n[i].__source.index===e&&this._disablePickingIndex(i);else super.disablePickingIndex(e)}draw({uniforms:e}){const{jointRounded:n,capRounded:i,billboard:r,miterLimit:s,widthUnits:a,widthScale:o,widthMinPixels:l,widthMaxPixels:c}=this.props,u=this.state.model,f={jointType:Number(n),capType:Number(i),billboard:r,widthUnits:Fs[a],widthScale:o,miterLimit:s,widthMinPixels:l,widthMaxPixels:c};u.shaderInputs.setProps({path:f}),u.draw(this.context.renderPass)}_getModel(){const e=[0,1,2,1,4,2,1,3,4,3,5,4],n=[0,0,0,-1,0,1,1,-1,1,1,1,0];return new ka(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new pv({topology:"triangle-list",attributes:{indices:new Uint16Array(e),positions:{value:new Float32Array(n),size:2}}}),isInstanced:!0})}calculatePositions(e){const{pathTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("positions")}calculateSegmentTypes(e){const{pathTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("segmentTypes")}}lg.defaultProps=AK;lg.layerName="PathLayer";const EK={x:128,y:256,width:128,height:128,mask:!0},CK={x:0,y:0,width:128,height:128,mask:!0},RK={x:384,y:128,width:128,height:128,mask:!0},MK={x:256,y:0,width:128,height:128,mask:!0},OK={x:128,y:0,width:128,height:128,mask:!0},IK={x:0,y:256,width:128,height:128,mask:!0},PK={x:384,y:256,width:128,height:128,mask:!0},DK={x:0,y:384,width:128,height:128,mask:!0},kK={x:128,y:384,width:128,height:128,mask:!0},NK={x:384,y:0,width:128,height:128,mask:!0},BK={x:256,y:384,width:128,height:128,mask:!0},LK={x:0,y:128,width:128,height:128,mask:!0},UK={x:256,y:128,width:128,height:128,mask:!0},FK={x:256,y:256,width:128,height:128,mask:!0},zK={x:128,y:128,width:128,height:128,mask:!0},Gm={MARKER:EK,CYCLING:CK,FLYING:RK,IN_BUS:MK,IN_FERRY:OK,IN_PASSENGER_VEHICLE:IK,IN_SUBWAY:PK,IN_TRAIN:DK,IN_TRAM:kK,IN_VEHICLE:NK,MOTORCYCLING:BK,RUNNING:LK,SKIING:UK,UNKNOWN_ACTIVITY_TYPE:FK,WALKING:zK};class nb extends ig{renderLayers(){return[new og({id:`${this.props.id}-background`,data:this.props.data,getPosition:this.props.getPosition,radiusMinPixels:this.props.radiusMinPixels,radiusMaxPixels:this.props.radiusMaxPixels,getRadius:this.props.getRadius,stroked:this.props.stroked,filled:this.props.filled,getFillColor:this.props.getFillColor,getLineColor:this.props.getLineColor,lineWidthMinPixels:this.props.lineWidthMinPixels,lineWidthMaxPixels:this.props.lineWidthMaxPixels,pickable:!1}),new ag({id:`${this.props.id}-foreground`,data:this.props.data,getPosition:this.props.getPosition,getIcon:this.props.getIcon,iconAtlas:this.props.iconAtlas,iconMapping:this.props.iconMapping,getSize:this.props.getSize,getColor:this.props.getColor,pickable:!1})]}}x(nb,"layerName","ActivityTypeIconLayer"),x(nb,"defaultProps",{data:{type:"array",value:[]},getPosition:{type:"function",value:null},lineWidth:{type:"number",value:1},getRadius:{type:"function",value:18},stroked:{type:"boolean",value:!0},radiusMinPixels:{type:"number",value:10},radiusMaxPixels:{type:"number",value:18},getFillColor:{type:"array",value:[255,255,255]},getLineColor:{type:"array",value:[0,0,0]},lineWidthMinPixels:{type:"number",value:1},lineWidthMaxPixels:{type:"number",value:2},filled:{type:"boolean",value:!0},getIcon:{type:"function",value:null},getSize:{type:"function",value:16},getColor:{type:"function",value:[0,0,0]},sizeMinPixels:{type:"number",value:16},sizeMaxPixels:{type:"number",value:32},iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}}});const zx=`uniform tripsUniforms {
  bool fadeTrail;
  float trailLength;
  float currentTime;
} trips;
`,VK={name:"trips",vs:zx,fs:zx,uniformTypes:{fadeTrail:"f32",trailLength:"f32",currentTime:"f32"}},$K={fadeTrail:!0,trailLength:{type:"number",value:120,min:0},currentTime:{type:"number",value:0,min:0},getTimestamps:{type:"accessor",value:t=>t.timestamps}};class Rv extends lg{getShaders(){const e=super.getShaders();return e.inject={"vs:#decl":`in float instanceTimestamps;
in float instanceNextTimestamps;
out float vTime;
`,"vs:#main-end":`vTime = instanceTimestamps + (instanceNextTimestamps - instanceTimestamps) * vPathPosition.y / vPathLength;
`,"fs:#decl":`in float vTime;
`,"fs:#main-start":`if(vTime > trips.currentTime || (trips.fadeTrail && (vTime < trips.currentTime - trips.trailLength))) {
  discard;
}
`,"fs:DECKGL_FILTER_COLOR":`if(trips.fadeTrail) {
  color.a *= 1.0 - (trips.currentTime - vTime) / trips.trailLength;
}
`},e.modules=[...e.modules,VK],e}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({timestamps:{size:1,accessor:"getTimestamps",shaderAttributes:{instanceTimestamps:{vertexOffset:0},instanceNextTimestamps:{vertexOffset:1}}}})}draw(e){const{fadeTrail:n,trailLength:i,currentTime:r}=this.props,s={fadeTrail:n,trailLength:i,currentTime:r};this.state.model.shaderInputs.setProps({trips:s}),super.draw(e)}}Rv.layerName="TripsLayer";Rv.defaultProps=$K;const jK=5,kM=60,HK=Math.floor(1e3/kM),Vx=Math.floor(jK*kM);class ib extends ig{initializeState(){super.initializeState(),this.setState({data:[],currentTime:0}),this._intervalId=setInterval(()=>{this.setState({currentTime:(this.state.currentTime+1)%Vx})},HK)}updateState({changeFlags:e}){var n;if(super.updateState({changeFlags:e}),e.dataChanged){const i=((n=this.props.data)==null?void 0:n.reduce((s,a)=>(Array.isArray(a.path)&&s.push(...a.path),s),[]))??[],r=i.map((s,a)=>a/(i.length-1)*Vx);i.length>0&&(i.at(-1)[0]+=1e-7),this.setState({currentTime:0,data:[{path:i,timestamps:r}]})}}finalizeState(){super.finalizeState(),this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null)}renderLayers(){return new Rv({id:`${this.props.id}-trips`,data:this.state.data,getPath:e=>e.path,getTimestamps:e=>e.timestamps,currentTime:this.state.currentTime,getColor:this.props.getColor,widthMinPixels:this.props.widthMinPixels,widthMaxPixels:this.props.widthMaxPixels,fadeTrail:this.props.fadeTrail,trailLength:this.props.trailLength})}}x(ib,"layerName","TimelineTripsLayer"),x(ib,"defaultProps",{data:{type:"array",value:[]},getColor:{type:"array",value:[255,0,0,162]},fadeTrail:{type:"boolean",value:!1},widthMinPixels:{type:"number",value:4},widthMaxPixels:{type:"number",value:5},trailLength:{type:"number",value:7}});class rb extends ig{updateState({props:e,oldProps:n}){var r,s,a,o;if(!e.database)return;let i=this.state.currentActivities??[];if(n.data!==e.data){Yq(e.database,e.data);const l=Xq(e.database);(r=e.onChangeEnableDateSet)==null||r.call(e,l)}(n.data!==e.data||((s=n.currentDate)==null?void 0:s.format("YYYYMMDD"))!==((a=e.currentDate)==null?void 0:a.format("YYYYMMDD")))&&(i=qq(e.database,e.currentDate),i.length>0&&((o=e.onChangeCurrentActivities)==null||o.call(e,i))),this.setState({currentActivities:i})}renderLayers(){const e=this.state.currentActivities??[];return[new lg({id:`${this.props.id}-timelinePath`,data:e.filter(i=>i.type!=="visit"),getColor:i=>{var r;return i.id===((r=this.props.currentActivity)==null?void 0:r.id)?[128,0,192]:[0,0,192]},getPath:i=>i.path,widthMinPixels:2,widthMaxPixels:3,getWidth:2,pickable:!1}),new ib({id:`${this.props.id}-trips`,data:e}),new og({id:`${this.props.id}-visit`,data:e.filter(i=>i.type==="visit"),stroked:!0,getPosition:i=>i.position,radiusMinPixels:5,radiusMaxPixels:10,getRadius:5,getFillColor:[255,255,255],getLineColor:[0,0,0],lineWidthMinPixels:1,lineWidthMaxPixels:2,getLineWidth:1,pickable:!1}),new nb({id:`${this.props.id}-activity-type-icon`,data:e.filter(i=>i.type!=="visit"),getIcon:i=>Gm[i.type]?i.type:"UNKNOWN_ACTIVITY_TYPE",getPosition:i=>{if(i.path.length%2===1)return i.path[Math.floor(i.path.length/2)];const r=Math.floor(i.path.length/2)-1;if(r<0)throw new Error("activity path is empty or only one point");return[(i.path[r][0]+i.path[r+1][0])/2,(i.path[r][1]+i.path[r+1][1])/2]},iconAtlas:"icon-atlas.png",iconMapping:Gm}),new ag({id:`${this.props.id}-marker`,data:this.props.currentActivity?[this.props.currentActivity]:[],getColor:[255,0,0],getIcon:"MARKER",getPosition:i=>i.position,getSize:40,iconAtlas:"icon-atlas.png",iconMapping:{MARKER:{...Gm.MARKER,anchorY:128}},transition:{getPosition:{type:"spring",damping:.5}}})]}}x(rb,"layerName","TimelineLayer"),x(rb,"defaultProps",{data:{type:"object",value:{}},database:{type:"object",value:null},currentDate:{type:"object",value:null},currentActivity:{type:"object",value:null},onChangeEnableDateSet:{type:"function",value:null},onChangeCurrentActivities:{type:"function",value:null}});function WK(){const[t,e]=Ne.useState({longitude:139.7,latitude:35.6,zoom:12,transitionDuration:1e3}),[n,i]=Ne.useState(!1),[r,s]=Ne.useState({}),[a,o]=Ne.useState([]),[l,c]=Ne.useState(null),[u,f]=Ne.useState(new Set),[d,p]=Ne.useState(Ot(new Date)),[m,S]=Ne.useState(null);Ne.useEffect(()=>{let b;return i(!0),(async()=>{try{b=await Wq(),S(b)}catch(C){console.log("",C)}finally{i(!1)}})(),()=>{b==null||b.close()}},[]);const v=b=>{var D;const M=(D=b.target.files)==null?void 0:D[0];if(!M)return;i(!0),(async()=>{try{const F=await M.text(),L=JSON.parse(F);s(L)}catch(F){console.error("JSON :",F)}finally{i(!1)}})()},y=b=>{if(c(b),!b)return;const M=Cx(b);e(M)},_=b=>{o(C=>C===b?C:b),c(null);const M=Cx(b);e(M)},T=[new rb({id:"timeline",data:r,database:m,currentDate:d,currentActivity:l,onChangeEnableDateSet:f,onChangeCurrentActivities:_})];return $.jsxs(fm,{container:!0,sx:{height:"100%"},children:[$.jsx(fm,{size:3,sx:{height:"100%"},children:$.jsxs(ms,{sx:{height:"100%",p:2,display:"flex",flexDirection:"column",gap:2,overflow:"hidden"},children:[$.jsx(K6,{dateAdapter:c5,children:$.jsx(m8,{value:d,onChange:p,shouldDisableDate:b=>!u.has(b.format("YYYYMMDD")),slotProps:{day:({day:b})=>{const M=u.has(b.format("YYYYMMDD"));return{sx:C=>({fontWeight:M?"bold":"normal",color:M?C.palette.primary.main:void 0})}}}})}),$.jsx(ms,{children:$.jsxs(X6,{variant:"contained",component:"label",fullWidth:!0,children:["JSON ",$.jsx("input",{hidden:!0,type:"file",accept:"application/json",onChange:v})]})}),$.jsx(ms,{sx:{flex:1,minHeight:0,overflowY:"auto"},children:$.jsx($q,{data:a,onClick:y})})]})}),$.jsx(fm,{size:9,sx:{height:"100%",position:"relative"},children:$.jsx(uX,{apiKey:"AIzaSyDcDhgqFPBs9vg1j3IyXD3nB4-XLMM0dAQ",children:$.jsx(eX,{initialViewState:t,controller:!0,layers:T,children:$.jsx(SM,{mapId:"2366281e9e3b17286f5ce635",defaultCenter:{lat:1,lng:1},defaultZoom:1})})})}),$.jsx(qX,{isLoading:n,message:"loading..."})]})}bP.createRoot(document.getElementById("app")).render($.jsx(WK,{}));
